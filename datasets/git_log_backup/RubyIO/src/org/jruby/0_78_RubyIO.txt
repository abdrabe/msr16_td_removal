commit 7dba21754899867f048559d3712442996ec07a77
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jun 25 11:48:15 2013 -0500

    Implement thread retval for 1.9's Open3.popen3. JRUBY-6409
    
    It turns out that the thread value returned from 1.9's popen3 is
    actually easy to support by simply calling java.lang.Process's
    waitFor method. This is, in fact, much more reliable than a normal
    popen + waitpid due to our racing the JVM to the waitpid call.
    
    There's still issues with the interactivity of the streams (on
    some JVMs/versions) and overall JRuby process management, but this
    patch should allow popen3 to work properly.
    
    Unexcluded some popen3 tests that pass now, too (yay!)

commit a81fa13b0589bbc178e24b5503c308e4d13808b2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jun 15 21:21:00 2013 -0500

    I am an idiot.

commit 86c351aaf3d6f2fcba4a073cc67669a964019384
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jun 14 06:59:23 2013 -0500

    Arity-split Kernel#puts and IO#puts.

commit 553a344cb28bfc4953b486f97f12d0443f0cb0ca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 13 13:25:01 2013 -0500

    Move lastline getting/setting into context, to hide it.

commit 3724319bc210434cf3324b3be425852ecf3a49a6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jun 10 10:36:55 2013 -0500

    Work harder to unwrap incoming channels to get their real fileno.
    
    This fixes JRUBY-7173, in which pipe channels are not stat'able
    because we simulate fileno rather than providing a real fileno.
    This change should work for most native channels; I tested files,
    pipes, and sockets. It will work for subprocess channels as well,
    but only where they are unwrappable (see note in the commit about
    problems unwrapping on Java 7). When we move to a more direct,
    native process-launching API we'll be able to do a better job
    with those channels.

commit bcc26747f56e05bd1ceda21d97fd4b0bc5255f0c
Author: Ron Dahlgren <ronald.dahlgren@gmail.com>
Date:   Fri May 17 16:15:20 2013 -0700

    Use RubyModule.JavaClassKindOf fixes jruby/jruby#614
    
    I've changed all of the relevant cases of anonymous KindOf classes to
    use the new JavaClassKindOf. This cuts down on some of the noise
    produced by anonymous inner classes, especially given that these
    replacement points all had identical implementations.

commit d02fdc661a3ebe892884e9ff6d0e8c47802f5fec
Author: josedonizetti <jdbjunior@gmail.com>
Date:   Sat May 25 16:34:54 2013 -0400

    raise ArgumentError when IO.new/IO.open last argument is not a hash or nil

commit e812402c6897b7835c173560b614f98641b301b5
Merge: 99f3835 0be3ee6
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Sat May 25 12:10:31 2013 -0700

    Merge pull request #764 from josedonizetti/io_write
    
    add support for options and not truncating offset for IO.write

commit 99f3835ea95ed16781f4cf3654f20381a6287265
Merge: d64a28b a1959a3
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Sat May 25 11:52:04 2013 -0700

    Merge pull request #766 from josedonizetti/sysopen_accepts_mode_and_permission_nil
    
    IO.sysopen accepts mode & permission that are nil

commit 0be3ee630077c188171945a80433f011509f63f7
Author: josedonizetti <jdbjunior@gmail.com>
Date:   Sat May 25 13:19:30 2013 -0400

    add support for options and not truncating offset for IO.write

commit a1959a39a561ea99a392de2a1f66f9a35c5b6384
Author: josedonizetti <jdbjunior@gmail.com>
Date:   Sat May 25 14:23:54 2013 -0400

    IO.sysopen accepts mode & permission that are nil

commit 9a6806a4277943d7a98e945b38e0e7bc36ec0363
Author: josedonizetti <jdbjunior@gmail.com>
Date:   Sat May 25 13:13:00 2013 -0400

    binwrite should pass write only when options are not empty but don't have a "mode"

commit 55c9e6edeb130c17c1b87bf8c2afae9bf580d8b6
Merge: 81fd721 efe615a
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Thu May 16 19:23:29 2013 -0700

    Merge pull request #723 from jruby/copy_stream_read_write
    
    IO.copy_stream should handle objects that respond to read or write. Fixes #437

commit 2e617083c79baba4dffcbc22e5bf55b69aa236b1
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Sat May 11 18:21:47 2013 -0400

    IO.binwrite should accept options hash

commit 571f37b9038f8fa044233d44e1b1a11e636f3a76
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Fri May 10 22:26:57 2013 -0400

    Switch to using ModeFlags in order to specify CREAT and RDWR at the same time

commit b78564b1ac69af08fbf4c33cdb12b4854bc957c1
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Fri May 10 21:16:05 2013 -0400

    IO.binwrite doesn't truncate the file if an offset is given

commit 7a9f23bac5918415a1c40e7682d7ac482479e9a1
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Fri May 10 21:41:40 2013 -0400

    Revert "REFACTORING: supporting flag about receiving an offset or not."
    
    This reverts commit 05de78e644b1db4a3b7af74f014cf27fd54cea0d.

commit efe615a2a310cc83e85174f01ce1d4aa22e10f96
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Thu May 9 22:39:38 2013 -0400

    IO.copy_stream should handle objects that respond to read or write. Fixes #437

commit 05de78e644b1db4a3b7af74f014cf27fd54cea0d
Author: josedonizetti <jdbjunior@gmail.com>
Date:   Wed May 8 23:47:10 2013 -0400

    REFACTORING: supporting flag about receiving an offset or not.

commit 928c86ec90b0f6b875a46106e8d283e9f9117ef1
Author: josedonizetti <jdbjunior@gmail.com>
Date:   Thu May 2 20:32:14 2013 -0400

    Supporting IO.ungetbyte

commit 6a82fbcf8ca4dd2d114975c1f410315b594431dc
Author: josedonizetti <jdbjunior@gmail.com>
Date:   Wed May 1 00:06:51 2013 -0400

    Fixing IO.ungetc tagged specs!

commit 237995792f4f8424615c647f57ff8410b83d4178
Merge: a92bffe a04950f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Apr 30 19:24:52 2013 -0700

    Merge pull request #683 from pfoorion/master
    
    Fix unseekable stream implementation of IO.copy_stream in RubyIO.java

commit ba5f6b9c4986009f2629cd3cab63faac3192e251
Author: josedonizetti <jdbjunior@gmail.com>
Date:   Mon Apr 29 23:32:05 2013 -0400

    Verifying if character is corrupted, meaning that one more char is needed.

commit a04950f390ca88b20b5fa3ab565747c371431ff1
Author: Seth Wright <seth.wright@gmail.com>
Date:   Mon Apr 29 23:56:13 2013 -0700

    fix unseekable streams copying in RubyIO.java

commit 30fc726f4cbbe835de500d038e0c3cc77c5a90d0
Author: josedonizetti <jdbjunior@gmail.com>
Date:   Fri Apr 26 23:51:41 2013 -0400

    Fixing IO.foreach rubyspec, set env variable $_ to nil

commit 987b731fbfdcff371f9cb489d8809eaf02de4979
Author: josedonizetti <jdbjunior@gmail.com>
Date:   Wed Apr 24 17:07:07 2013 -0400

    fixing the support of new params on IO.foreach
    
    Signed-off-by: Charles Oliver Nutter <headius@headius.com>

commit 090e1ac962bfdaf4fa47567fbe58317388579934
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 24 11:27:26 2013 -0500

    Restore syswrite and write_nonblock I mercilessly deleted.

commit a09d1395925e94b73b2586a754086c0cdc350b6c
Merge: fd55eb7 c0aa1d0
Author: Thomas E Enebo <tom.enebo@gmail.com>
Date:   Wed Apr 24 08:10:05 2013 -0700

    Merge pull request #650 from josedonizetti/io_readlines
    
    File/IO readlines supporting new params limit, and open mode (thanks jose!)

commit c0aa1d0b1605650312326bfdc702a8a1c71b29a8
Author: josedonizetti <jdbjunior@gmail.com>
Date:   Wed Apr 24 00:10:28 2013 -0400

    Fixing support of new params to 1.9 compatibility only!

commit b97e022466e16b58d4f6f1fda351fbe2bbeef3d5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Apr 23 16:07:17 2013 -0500

    Add io/try_nonblock ext for nonblock without exceptions.

commit 473043e2f452ed368d94c336b2c0164e73cd39b4
Author: josedonizetti <jdbjunior@gmail.com>
Date:   Fri Apr 19 01:09:19 2013 -0400

    File/IO readlines supporting new params limit, and open mode

commit bb98e4b8decffc0361b70a6c99c1ade5fed0abcb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 28 10:02:33 2013 +0000

    Move RuntimeHelpers to org.jruby.runtime.Helpers.

commit 61678ac1a2514a9932276f8d527816a5980a94b3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 25 20:41:40 2013 +1100

    Fix more references to CPL.
    
    The phrase "Common Public License" was split across two lines in
    our default header, which caused it to be missed during earlier
    search/replace. Also, we did not replace the CPL URL in the
    header with the EPL URL.

commit 011edb68e995876fb7f92fdf79b35be81b55979c
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Feb 22 11:22:28 2013 -0600

    EncodingOptions -> EncodingUtils

commit a1b1e3cc73edd0a522e6ddff34337fbd37f7fa2b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 14 16:17:00 2013 -0600

    Fix broken IO.gets specs

commit 326b06d98430d67874092deeca5f69d768c0290b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 14 15:56:23 2013 -0600

    More specs passing

commit e30db59e50ed99e3cc52f1596acff2f52656395e
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 14 14:24:39 2013 -0600

    Fix last regression and wipe out a FIXME at the same time

commit 13f8709caa9dc87eaadaf8251b8357bb588f996c
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 14 12:28:30 2013 -0600

    ooold typo uncovered by code changes

commit 706d420c5e71da0629dc43aa394a26fdabe5237d
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 14 12:03:50 2013 -0600

    Add same hack for no explicit external but binary mode for IO.initialize as was add to File

commit 0bdf80cf094c63da744afce1b11fa8ac9ef94199
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 13 17:18:00 2013 -0600

    A few more regressions fixed

commit 11adeeea206b8c3c8d2746f44bddc504d7460172
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 13 16:52:55 2013 -0600

    yuck more into the belly of the beast in order to rearrange mode settings until after extractModeEncoding in rubyIO.initialize19 (not done yet though).  Also another mixup between ModeFlags and OpenFile

commit 7c6444fad46cc135548383eabf0293d3fc64aba4
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Feb 12 11:35:06 2013 -0600

    Last MRI19 test regression fixed

commit 9c6df482a616b0768cecb179536fa33bad9fa61b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 7 17:20:49 2013 -0600

    Fix pipe to use 1.9 logic for no-arg version and fix missing logic to set encodings in setEncoding

commit 924faab656a0561a7e5720e6c110da2c0d5b43e6
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 7 16:30:33 2013 -0600

    Hmm I am hitting tests that 1.7.2 does not without excludes...implement TEXTMODE for IO

commit 46e9c4d186838b53e25f1f8bd703be59eee306ff
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 7 15:28:51 2013 -0600

    Missed switching to new API on 1.9 popen

commit 6a622bbf625e8e97a32c70966e6c28b4a4b3e308
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 7 15:26:30 2013 -0600

    jury rig new encoding to popen19

commit 0a3bd49585ca9969fb82b8981e2fa77230b4ec30
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 6 16:52:00 2013 -0600

    Change logic for IO.foreach processing of arguments to be more similar to MRI way of doing things

commit aa8da4e69f5cfce0d2fcb053c4002c0d5c2cd46b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 6 16:16:25 2013 -0600

    More sensible fix for Existing descriptors give their modes for new IO if new IO does not specify it's own

commit 1490fb9abc7e7422aa0e128c988e43bdc92e437d
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 6 15:52:57 2013 -0600

    Existing descriptors give their modes for new IO if new IO does not specify it's own

commit 18097170e013a1627787f87569e6052bbb1baafc
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 6 15:36:15 2013 -0600

    ArgumentError if bogus mode specified

commit 99d68f592afa0aa598c68fb8294365ef2d59b9d1
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 6 15:19:12 2013 -0600

    Massive change to IO+descendent initialization...20 or so errors to track down

commit 7f53e12e7805b9e42de823519be895dfb6cf7ae2
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Feb 4 15:39:29 2013 -0600

    Bammmm. Don't look back...move forward.  Unification of IO encoding initialization

commit d3e2dd7e20d66d4ccf419cda70ae006ca364e4a2
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Feb 4 13:56:47 2013 -0600

    First phase of making IO encoding logic usable by multiple classes

commit 330fef3b0fc18af477ccea19bd278669667f31bb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 12 14:49:29 2013 -0600

    Switch JRuby's CPL license to EPL.
    
    Governance of the CPL license was moved to the Eclipse Foundation
    at some point in the past, and Eclipse blessed the EPL (Eclipse
    Public License v1.0) as the successor to CPL. Because the CPL
    contains a clause allowing transparent upgrades to future blessed
    successor licenses, we can make the move to EPL without
    re-contacting past contributors.
    
    The change in going from CPL to EPL largely just removes some
    punitive language that apparently made many companies nervous. All
    other language in the license remains identical.
    
    Several documents about Eclipse's move from CPL to EPL are here:
    
    http://www.eclipse.org/legal/cpl2epl/
    
    Note that Eclipse's move came before the blessing of EPL as the
    upgrade path for CPL, so they had to do a bit more legal juggling.
    With Eclipse now the administrator of CPL and with their blessing
    of EPL as the upgrade path for CPL, all we need to do is make the
    move.

commit 03f154a3c3b4edec05af67376f84d4fa1d2f7ac8
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Jan 21 10:32:31 2013 -0600

    Address Wayne comments from atambo's last PR

commit 639473c1397f7d5d00fc692bfd2d35c410314163
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Sun Dec 30 00:47:33 2012 -0500

    Add length and offset args to IO.copy_stream

commit 6d6f027a3295f654f7c5581d11c05b1a0fc4bfd3
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Sat Dec 29 22:51:27 2012 -0500

    Increment from io position by transfer size

commit bfdbc349e3e152c233768bed46f71a2cfe7e62af
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Sat Dec 29 22:26:10 2012 -0500

    Raise IOError if file not readable or writable

commit f7bb9cea9ac033813730bd5c79a593339f4ec54f
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Sat Dec 29 22:05:36 2012 -0500

    Do not close the io's given to copy_stream

commit f2e8ca5eb937318f5a7460cf8c666d2f1cc2a45f
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Sat Dec 29 21:30:04 2012 -0500

    Call to_path on objects passed to IO.copy_stream

commit 3f56e551e4b8fe49862ee834ccb54155c1e9fdcf
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Sat Dec 29 10:49:42 2012 +1000

    Fix JRUBY-7046 - always copy files in 128M chunks.  Might be slightly slower than the optimized version that tried to transfer the entire file with the fallback, but that one relied on parsing exception messages, and I think the fallback was broken anyway (always copied from the same file position).

commit f05925e6d97c25aab355a8a012733ab97c22a423
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Nov 19 15:42:05 2012 +0100

    Last of to_path ad-hocs moved to get_path

commit 37da7f6fab563483b6b74a1c1bccceebcdd67eab
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Nov 19 15:09:53 2012 +0100

    Consolidate get_path more

commit 6de4987a9270b1c7c7eaa6d0337d17a30117961e
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Sat Nov 17 14:25:26 2012 -0500

    Rework the previous logic (calling #to_path) for #393. Also, fix #399.

commit ebbfbacfc1c4f6024c09bd7673720a20997e4060
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 29 23:29:55 2012 -0500

    Revert "Fix JRUBY-6974"
    
    This reverts commit f5e2f5fd0bbe1e033090350d436d6a9629091272.

commit f5e2f5fd0bbe1e033090350d436d6a9629091272
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 29 15:58:39 2012 -0500

    Fix JRUBY-6974
    
    Timeout.timeout not working using UDPSocket
    
    Reused waitReadable and waitWritable for all recv/send impls.

commit 73ce313ae33d6df2eb2a67e0b24dcc6274e173cd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 24 15:50:00 2012 -0500

    Revert "Fix JRUBY-6162"
    
    This reverts commit 2d497afa890b5da40f234ac63ef6fd4f270e032a.

commit daa36aa25fc4c11f994e6f19864bf14149ccf846
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Sep 19 02:38:48 2012 -0500

    Partially fix JRUBY-6893: fcntl(Fcntl::F_GETFL) always return 0
    
    I implemented F_GETFL for the basic read, write, and readwrite
    modes, but there's obviously other flags we could fill out here.
    
    Unfortunately, tests for fcntl appear to be almost nonexistent,
    even in MRI.

commit 2d497afa890b5da40f234ac63ef6fd4f270e032a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Sep 18 15:45:07 2012 -0500

    Fix JRUBY-6162
    
    IO.popen doesn't wait until a process ends but returns immediately
    
    I could find no evidence that MRI attempts to hup, quit, int, or
    kill popen child processes, so I removed logic we had in place
    that attempted to destroy the child. The logic now waits properly
    and all tests still pass...so I think we're good.

commit 290099647ac6a3ac1d7e6f50f5a820dbf2819be2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 30 15:12:08 2012 -0500

    Reinstate ext != ascii check for IO set_encoding logic. JRUBY-6871

commit 8e77e2b90865bc30cb277579822d7855d166cc82
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 30 13:58:01 2012 -0500

    Better match rb_io_ascii8bit_binmode logic for new sockets.

commit 1b3665d0fcd87d6b421ea9ccba540075262f463f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 21 14:37:28 2012 -0500

    Fix JRUBY-6851: IO#set_encoding doesn't work with Encoding object
    
    We were setting internal, not external, for a single enc passed.

commit b8181cda909f6e42d7c0b7fffaabbe2a502f273b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 27 02:19:54 2012 -0500

    Inline all calls to ThreadContext.getRuntime to access the field.

commit 47fd4acb720385b7d7852e1876e28520aa0cf484
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 27 01:55:07 2012 -0500

    Remove all safelevel checks throughout JRuby (plus misc cleanup).

commit dbd1c2b673655d38c546a6e7e5444e2acc4129b5
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat Jul 21 10:50:16 2012 -0500

    Add support for :open_args for IO

commit f2b52627dd9d07b69fccdac5ceff0553a99ede17
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat Jul 21 10:32:35 2012 -0500

    Remove unused var + 1.9 conditional from 1.8-only method

commit bc28695f0d785aafac532d05877876beabaf510c
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat Jul 21 09:19:21 2012 -0500

    beginning of options support for things like invalid: replace in IO

commit 108d7144c739c3c054a96728f8b5e968473c60ce
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 20 16:28:00 2012 -0500

    Account for options to set_encoding.  Still not parsing options yet though

commit 9869d1600a1c9e9c685a9ebe553e5267c94f24f1
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 20 16:14:16 2012 -0500

    moving towards textmode support

commit 27e96c7a711e80b20576eb6f7be56f6dc47447b4
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 20 15:45:49 2012 -0500

    popen has 2 options params.  Comments

commit 3b2bc6279954cee14e753470e0613d603cf9a4de
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 20 15:08:27 2012 -0500

    Last IO transcoding regressions in rubyspec

commit 4842bcd4dc83c2fd3c66b5a2c44bd56d0635afc4
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 20 14:45:09 2012 -0500

    Fix rubyspec regression in get('')

commit c632513fdfcca94038118211a823a575d49075ea
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 20 14:15:19 2012 -0500

    Last mri19 regression fixed

commit 39316f7ab8f285f3f403038a9f2b03df7c3e0eb1
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 20 13:53:48 2012 -0500

    Fix test_terminator_conversion regression

commit 470bfd5af3b638d4b4a489b1678a3897b279e9f6
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 20 13:34:50 2012 -0500

    Fix test_gets_nil regression

commit b1ed4049117482aeb8a478e20a8629c1c7d23562
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 20 13:25:21 2012 -0500

    Hack our remainder of externalEncoding

commit 4398ac9405ff96d4d67841fc395271c5d3b90729
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 20 10:28:51 2012 -0500

    internalEncoding finally gone

commit 757b70f99cde14bcc32f8e7b41ba37fd029eb5dd
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 20 10:27:42 2012 -0500

    Doh...tumult no more...down to 3 failures after last change.  Committing just to get clean slate

commit cbd60e127d10c6eb7a2a25d6f6237eaec36943b9
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Jul 12 16:41:58 2012 -0500

    Convert internal_encoding to not use internal/external

commit 08d69712cfcd931d2341bd101f8fba4a42f51382
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Jul 12 16:38:03 2012 -0500

    Convert external_encoding to not use internal/external

commit f83c797033f1b4385673edba4a2045b11e4265bc
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Jul 12 15:29:16 2012 -0500

    yay at least as good as when I started this mess

commit 8b35f8c70ee35f16bafd856f2fd9902c11fa95f3
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Jul 12 15:22:57 2012 -0500

    encoding management closer to MRI, but still missing opts parsing

commit cd71bb0205aeab85f96cc74f1e90c3ce766f985b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Jul 12 15:06:18 2012 -0500

    Ok mixed bag with both intern/ext + read/write but MRI 1.9 is down to one ordinary error

commit a255e05d73ed70b4c2dd38048b8dc0c275347268
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Jul 11 14:13:27 2012 -0500

    Dump...some regressions with fixes but this is getting too messy

commit 54383cd65679102dc242f94cb32b82657b23e71e
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Jul 3 13:35:43 2012 -0500

    Need 1.9 protection on transcoding in common methods

commit 60aba6eaf2c9d5eb13fe2cafe85eb7cebdc14c66
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Jul 3 12:08:09 2012 -0500

    transcoding working? yes...somewhat

commit 971549d228501ee9f5304748a63d232951e08e16
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jun 29 14:39:45 2012 -0500

    Use util instead of RubyString method

commit 0e55f4d2d0f6d98c826c9385ed9122a36979eb62
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jun 29 13:56:54 2012 -0500

    dump some more IO stuff just to avoid stashing it...not currently used

commit 69e2636796697780e4616cf37a2955a7d3322386
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Jun 28 17:17:57 2012 -0500

    Add proper econv flags and push what I have on beginning of write conversion in IO

commit 081a6ceba80eaf6f37dec4948e02d164868e0656
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 2 11:12:05 2012 -0500

    Fix minor typo.

commit 6406a20ccb95a7f597e60d48c2dbb9e369aae313
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed May 16 06:07:26 2012 -0500

    Additional IO encoding tweaks to get specs green again.

commit 8fecee704ce6c7441fa3d907ee09113f44b89977
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 15 23:08:38 2012 -0500

    Fix JRUBY-6572 and unexclude a bunch of passing tests.
    
    I mostly just traced through the MRI logic for handling binary
    mode and tried to match up code. There's also a few fixes to make
    some of our ported logic match MRI more exactly.
    
    We have accumulated enough fixes that test_io_m17n has many tests
    working now. I removed them from excludes.

commit 14cdb5c6b99c6c66d446e9a80691dc7af4a40b7d
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed May 9 11:57:40 2012 -0500

    JRUBY-6649: Opening a file with a hash as options will raise an  exception

commit 50d886d235547f7aa206a20d286d61658eae26be
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Apr 8 11:12:13 2012 -0500

    Allow IO.copy_stream to work with only one side a file.

commit c725e7dae4f467842e36f4237d4b8b031dcb7384
Author: Dwayne Litzenberger <dlitz@patientway.com>
Date:   Wed Feb 8 17:29:23 2012 -0500

    Also fix JRUBY-6180 on Windows
    
    Signed-off-by: Hiro Asari <asari.ruby@gmail.com>

commit 3096d68a62e63051213c9ff781f3cc026ea66ade
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 14 23:10:19 2012 -0500

    Use "Connection reset by peer" message to raise EPIPE in IO#syswrite.

commit cd18b42dfe59e8823275f4e10fcd43f084a7fec3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 12 21:33:11 2012 -0500

    Spec cleanup relating to recent socket work.
    
    * Untag a bunch of specs for things now working
    * Tag some UNIXSocket specs that need work
    * Update to enxio 2.0-SNAPSHOT

commit 353fea102ba24725fbc62b9ea2c18725c947ce98
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 12 18:08:16 2012 -0500

    Fix JRUBY-5876
    
    Socket#syswrite (the non-buffered one) raises SystemCallError on broken pipe
    
    Not the prettiest fix, but it's hard to get a better one when JDK
    hides the actual errors behind IOException.

commit 30095bb6455512e7e4e98ea0fd53d3b04f9921e2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 12 17:59:57 2012 -0500

    Fix JRUBY-5222
    
    Reopening a file descriptor on a socket doesn't work (gives "could not reopen: null (IOError)")
    
    The errors were all from trying to seek the socket as though it were
    a file, which obviously doesn't work. Added guards to only attempt
    seeking streams which are seekable.

commit e6bf20a9485ff44c47ccbcd1d277d1f0526385f4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 12 15:30:51 2012 -0500

    More socket refactoring and miscellaneous cleanup
    
    * Cleanup TCPSocket and TCPServer
    * Use SelectableChannel.blockingLock wherever we're changing blocking
    * Clean up a bunch of deprecations

commit de86b5a319d3c2503e0ad6d61d5a24c4dcf49bb8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 7 23:05:25 2012 -0600

    Fixes to almost make 1.9 spec run green again.
    
    * Implement IO#getc/chars/each_char/readchar properly
    * Fix bad boolean logic for # strings in String#inspect

commit fd5eada4ddc2b810326f6ba0dfbf1b422cd293e7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 7 18:11:16 2012 -0600

    Get 1.8 specs green again.
    
    * Don't clear ThreadLocals on exit; they're expected to be there.
    ** Pooled threads will dissociate themselves from RubyThread anyway.
    * Force JRUBY_OPTS to have --1.8 or --1.9 for subprocesses.
    * Raise ArgumentError for bad File.*open modes.

commit a8c30d74a587af4372cf757e4576b47269f06826
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Feb 19 14:05:03 2012 -0600

    Use lightweight errnos for the readable and writable EAGAIN too.

commit 56c8e4acd4b4f9fcce61679c1bb991f96d514c79
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Feb 18 18:06:00 2012 -0600

    Raise the WaitWritable version of EAGAIN for write_nonblock.

commit cb777c23ff945a4454ef9edca2bb73fcdb829781
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Feb 15 15:50:52 2012 -0600

    Partial fix for JRUBY-6442
    
    TCPSocket#write_nonblock blocks
    
    Only selectable Java channels can be set nonblocking, so this
    patch only improves situations for selectable channels. Others
    will still just do a blocking write, as before. This patch does at
    least get sockets and other selectables to actually do write_nonblock
    close to how it's supposed to be done.
    
    Better fix will come with 1.7 IO refactoring, though the non-
    selectable channels will still be an issue.

commit 8b22798f7230a64eebee7eba2b8bbe2ca9703423
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 6 10:19:49 2012 -0600

    Deprecate and remove uses of defunct JRubyMethod.backtrace flag.

commit b6cda544ad6c07f99711734e689108d3a9ee32dd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 3 07:34:27 2012 +0100

    Fix IO#set_encoding to support Encoding as well as String again.

commit d055a0ea0c745f604919aa6cfe5346c58c210be6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 31 16:29:41 2012 -0600

    More encoding-related IO cleanup.
    
    * Restore some old public signatures
    * Remove some private deprecated code
    * Remove more propagation of InvalidValueException
    
    Almost green...

commit 4a09d081fa10b293f65d0ca058605a5b6b4ba04f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 31 10:34:29 2012 -0600

    First large-scale refactoring to better support IO encodings.

commit fc3dee222a4fe80000218144bbeccb85c07efcd5
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jan 27 15:11:02 2012 -0600

    Get fallback external from IO if bom| present (note: bom still unimplemented)

commit 606bd2e150aae13320f6441bf31d3d1a549fce4a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 26 19:58:39 2012 -0600

    More of the epic IO/Socket refactoring.

commit f8408dac26dc08be1ba1bed8ff10cb828c6601bb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 17 16:39:18 2012 -0600

    Fix JRUBY-5348
    
    Process.spawn should fail if wrong args passed
    
    Added logic alongside the "unsupported" warning to raise error on
    invalid options.

commit c0b57cdb87a13c1064268d8b0bb305ff4f3bbc8b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 17 16:15:04 2012 -0600

    Fix JRUBY-4913
    
    FileUtils.cp failed if file source is too big (>= 1GB)
    
    On 32-bit JVMs, FileChannel.transferTo would attempt to mmap a
    a larger addressable space than the process could handle. This
    caused the error. My fix is to catch that error and then attempt
    the copy again in 100MB chunks. 100MB may still fail if we are
    close to the process's addressable memory limit, but it's much
    more reliable than what we had before.

commit 75fce98a4eb5f7710b324b5acb6afaee04af82fe
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 5 18:50:22 2012 -0600

    1.9 fixes for popen.
    
    * Process modes and encodings into the resulting IO object
    * Warn if options are unsupported
    * Use the target class for the resulting IO object

commit 28dcb8131e60732fe34e771084b9b2e62a8e7298
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 5 18:22:22 2012 -0600

    Warn on usage of exec/spawn options that are unsupported.

commit ec24107b8cd7f88b473fd01f6f884beb1734fdaf
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 5 15:56:31 2012 -0600

    Refactor parsing of options for encodings and modes.

commit 0ae6d4570ada71220f4d00e754b28dae9b3be700
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Fri Dec 30 08:58:18 2011 -0500

    Try fixing JRUBY-6180. Error message matching may not be correct, so we will need confirmation.

commit fe86d4bbee9fbf18052e67344212dd68cfc1888c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 29 10:43:33 2011 -0600

    Implement IO.write/binwrite (1.9.3)

commit fc5e20d75a6bc7efcc8eb10e0a2d2c28a01328b8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 29 10:13:25 2011 -0600

    Add IO.write (1.9.3).

commit fea2cc21e02bd93772ab84d79d522edfe5db0812
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Dec 23 03:36:43 2011 -0600

    Reinstate clever "WaitReadable" fix.
    
    SystemCallError was setting the metaclass, as in MRI, to the exact
    Errno subclass corresponding to the provided errno. This had the
    effect of wiping out the EAGAINReadable exception I provided. I
    modified SystemCallError#initialize to only modify the metaclass
    if a subclass was not provided.

commit cd383d8466f8292372db444830d807ad7fc57b6c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 22 07:48:29 2011 -0600

    My clever fix for this issue appears to break something in
    net/protocol or RubyGems, causing it to let EAGAIN through in
    some case. Reverting for now so we can investigate.
    
    Revert "Instead of extending WaitReadable, use a new subclass."
    
    This reverts commit 21ea42097e89c3a70c2971b1209fb39410d6b975.
    
    Conflicts:
    
    	src/jruby/kernel19.rb

commit 00d30e159ba2cbbe01c04d4fd2b8bd46d9b2ee6a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Dec 20 18:00:38 2011 -0600

    Fix JRUBY-6291: Closing One Stream From IO.popen4 Results in Stream Closed Error When Reading Other Streams
    
    Ben figured this one out. The logic I put in place to ensure the
    child process gets nuked for a popen stream was causing it to be
    nuked prematurely for popen3/4 streams. I added a "popenSpecial"
    boolean to RubyIO, so we know not to do that.

commit 21ea42097e89c3a70c2971b1209fb39410d6b975
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 28 23:18:16 2011 -0600

    Instead of extending WaitReadable, use a new subclass.

commit ed560a8ca711b5886c4f7bba2df89d7fd2936a2d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 17 02:30:50 2011 -0600

    Fix JRUBY-6198: When calling dup on file open in binmode the new object does not respect binmode
    
    * binmode was propagated as a mode, but not as a flag on the underlying Stream.

commit 3adbb9e36d3e5bc46a997a0ab6948f7fe1cd47ca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 16 20:39:09 2011 -0600

    Fix JRUBY-6205: 'Bad file descriptor' when using IO.popen4 with OpenJDK 7
    
    * Same fix as for popen some months ago. See 8798e1f8d09f86d18fccd258eb5a8d457f15d108

commit b7c3cc24bddcc3cccf923d5dfeb91ac40a40db65
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 16 12:50:20 2011 -0600

    Fix JRUBY-6212: IO#inspect in 1.9 could be prettier

commit b4a4796620da44f3ed87a11d1ab33a90f0bd9060
Author: Sebastian Staudt <koraktor@gmail.com>
Date:   Sun Nov 13 22:33:56 2011 +0100

    IO#readbyte should be available in 1.8 too
    
    JRuby presents itself as "jruby 1.6.5 (ruby-1.8.7-p330)" and MRI 1.8.7
    does support IO#readbyte.

commit 601a0f65c77ad37b5440c9983eb8f0d2b42d9643
Author: Martin Harriman <larvacea@mac.com>
Date:   Sun Oct 9 12:01:05 2011 -0700

    JRUBY-3944: process :binmode option
    
    The :binmode option, when set to TRUE, is ORed in with flags from the mode string or
    :mode option, as it is in MRI 1.9.2. Tested in rubyspec; both MRI and this code pass
    new tests for :binmode, and the existing jruby 1.6.5 code fails as expected.
    
    Signed-off-by: Hiro Asari <asari.ruby@gmail.com>

commit 7443186e30f8d8fc2f62b528029b897817373693
Author: Nick Sieger <nick@nicksieger.com>
Date:   Wed Oct 26 15:26:57 2011 -0500

    JRUBY-6165: Wait for child popen process to finish when opened for write
    
    Also clean up unused outputPumper and extraneous setting of exit
    status (already done in RubyIO#close2)

commit 79d6dfacc4742fa32ea3ee4c159b6ab6df527840
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 25 17:36:30 2011 -0500

    Revert "Refactor and cleanup RubyArgsFile."
    
    This reverts commit a70668d6f115eb8c58abb8e044275d12d9ebc5c7.

commit a70668d6f115eb8c58abb8e044275d12d9ebc5c7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 25 15:02:41 2011 -0500

    Refactor and cleanup RubyArgsFile.

commit 91a9f66da8d41ac4fcb6530d39b209679f6cc50e
Author: Nick Sieger <nick@nicksieger.com>
Date:   Tue Oct 18 20:07:58 2011 -0500

    JRUBY-5663: Fix IOSub.popen yields instance of the subclass specs

commit c0615e746e99ea432a9fd3a1bd21e94bc6d6e150
Author: Yoko Harada <yokolet@gmail.com>
Date:   Thu Sep 29 14:55:34 2011 -0400

    Fix for JRUBY-6101.
    
    ScriptingContainer as well as JSR223 JRubyEngine uses non-autoclose RubyIO to redirect standard i/o. I tried to figure out the good place to close those non-autoclose IO with no luck. This is because of the presence of finalize() method. This might cause some trouble, but for now, let them be GCed and no close explicitly.

commit 9dc5bf25e6e783a1ec7283c113bf28240ff4be23
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 12 15:29:50 2011 -0500

    Move 'fcntl' library under org.jruby.ext.fcntl.

commit 9b5e375bf0486409be2b82601965a53c63cd88dc
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Wed Sep 7 15:01:55 2011 +0900

    Move Zlib encoding related implementations to RubyIO.java
    
    I expected there're common impls for encoding parameter parsing, but I
    could not refactor now. Should be done in the future.

commit eb20f503ea09d97f1a3b75183f64361b15abb4fc
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Sep 1 17:55:33 2011 -0500

    io.readlines(nil) needs to set proper encoding

commit 3e6a0d68928c8c0963d1f9a3dbe7ce4946f03877
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 16 19:34:51 2011 -0500

    For JRUBY-5942: Error compiling coffeescript as part of the asset pipelien
    
    * Ignore hash args for "options" to IO.popen in 1.6.4.
    * Fix to actually observe options in 1.6.5.
    (cherry picked from commit e293abf0deb2009e5e04c12b27f683dbde493319)

commit fc2dd4b8fc6a0fedb415f8dc6213ea67ef01d6b6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Aug 15 21:36:02 2011 -0500

    Remove invalid or unnecessary null checks.
    
    Equivalent to mebigfatguy/jruby@ce362a923bf39a031a98.

commit 85a96c5da542a0808e6e32b9de747f2d578b43ef
Author: Ian Dees <undees@gmail.com>
Date:   Fri Jul 15 03:58:52 2011 -0700

    Support byte limits in IO#gets and StringIO#gets in 1.9 mode
    
    In 1.9 mode, IO#gets should be able to take a maximum length either as the only argument, or as the second argument (with the first being nil or a separator). The current implementation throws an ArgumentError, TypeError, or NPE when you pass in a limit, depending on how you call it.
    
    This patch adds basic support to IO and StringIO for the limit argument, but some more work is probably needed for multibyte separators (e.g., deciding what to do with the line count when the separator straddles the user's passed-in byte limit).
    
    Signed-off-by: Charles Oliver Nutter <headius@headius.com>

commit 6f159fe5dd51c062a5b1aab64a8ede916990877a
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Mon Jul 11 03:36:17 2011 +0900

    Deprecation of fast constant access paths.
    
    Each os those has the same definition as non-fast verision.

commit 9fd4ada22e3f3f3ac94f65276c73c0b455765edb
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Mon Jul 4 23:01:30 2011 +1000

    Replace usage of com.kenai.constantine with jnr.constants

commit ac992dfaa803bc18c7dae0d02c14055b1888b281
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 23 20:09:57 2011 -0500

    Fix JRUBY-5888: missing File#readbyte
    
    * Add IO#readbyte.

commit 7edd32d680747a22b05c3e221e3fb209ac273a9d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jun 21 23:15:38 2011 -0500

    Add env arg support to 1.9 Kernel#exec and Process.spawn.

commit 7588393ca5bfeba6182b87b8b47669ecab2fe403
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 9 10:02:23 2011 -0500

    Fix compilation issues under OpenJDK 7 after b142 with primitive + varargs now resolving as ambiguous.

commit f03b829c28c581c661f8916b54978b552cc03ff5
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Thu Jun 2 14:01:27 2011 -0400

    Remove unused import

commit 7bca899059369e801f56dfa7f66a7c0b5f3a833e
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Tue May 31 11:32:11 2011 -0400

    Move org.jruby.ext.ffi.Util.checkStringSafety() to org.jruby.util.StringSupport.checkStringSafety(). This should fix JRUBY-5835: [ruboto] File#read fails with jruby-jars-1.6.2

commit 0b55907500295f6d44ed2bc309f8d8b6d5e33424
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Sun May 8 23:58:30 2011 -0400

    Fix JRUBY-4828: Null-byte vulnerability via org.jruby.ext.ffi.Util.checkStringSafety()

commit c9641738dfa861962d517fca5697a255e7f92245
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Sun May 8 23:36:01 2011 -0400

    Remove unused commits from RubyIO.java

commit dc2ff992f56d2a068d4b08d9a3112cd67e0b4b7c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 4 00:47:58 2011 -0500

    Fix JRUBY-5685: IO.popen4 does not work when arguments contain *
    
    * popen3/4 do not do the "shell adding" that MRI core process-launching methods do.

commit 5d094dbf5cffbd570cc8b0cf489b2be90e405013
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 4 00:01:40 2011 -0500

    Fix JRUBY-5688: Process::Status#pid is missing

commit fb60a5baf34d6db58b54b0fabc89624465a4673b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 25 02:32:31 2011 -0500

    Reimplement IO.select/Kernel.select to reduce object churn.

commit 2864fe45e1b477b917556dbdaaa5468bf29e73c7
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Mar 7 17:09:36 2011 -0600

    getPartial is for bytes not chars...no encoding logic

commit 864087b8c8a7071dc579472b76cc757333202c2e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 7 14:12:51 2011 -0600

    Fix JRUBY-5532: IO.foreach: Can't convert Hash into String
    
    Note that this, like most IO methods, still ignores encoding options.

commit 2647f825c5956775ab84fd598dcaf72d760ee941
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat Mar 5 14:19:21 2011 -0600

    Separator should transcode to internal for gets, etc...

commit fbed9bebc75b3998f836a62ec036c15473c7e93b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Mar 2 15:49:03 2011 -0600

    initial read-half of IO internal/external encoding support

commit 15832d3b4dc4f4023b40b710db43f66ce9d0a2b7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 17 14:46:38 2011 -0600

    Fix JRUBY-5514: Errno::EBADF is sometimes raised instead of IOError when TCPSocket#readline is called after TCPSocket#close
    
    The problem here is that under real concurrency, EBADF or equivalent are perfectly valid to see. Eventually you have to make a low-level IO call, and under concurrent load that could happen just slightly after another thread calls #close. There's little we can do to eliminate EBADF, but I have cleaned up some paths that raised it unnecessarily and others that raised EPIPE when they should not.
    
    I also cleaned up several places that could cause a NullPointerException when under concurrent load, because a stream gets nulled out after it has already been checked for non-nullness.

commit 26351a1be299335437833ffdab14f7b2e93f5e66
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Feb 16 00:53:51 2011 -0600

    Fix JRUBY-5487: Kernel#select's read_array parameter is not respected
    
    The problem here was that our Kernel/IO.select was not considering buffered data. Channels with buffered data should be considered immediately readable and not selected.

commit 2e751d66992bbb7f1be08d9c17a104387b05b439
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 15 16:25:30 2011 -0600

    Fix JRUBY-5503: Timeout::timeout makes IO#close block if there's a #read present
    
    The primary issue occurred when one thread was reading from a pipe and another was attempting to close it. IO#read immediately dropped into a synchronized section to do a blocking NIO read rather than selecting, which meant no other thread could then close it. The fixes for pipes will work for sockets, but unselectable channels like files may still have issues.
    
    * Modified RubyIO.fread to call waitReadable before the first read, so it blocks uninterruptibly. This fixed RubyIO.readAllCommon (used for read()) as well.
    * Calls to RubyThrad.before/afterBlockingCall were nested, resulting in Thread status being incorrect. Moved them into blockingFRead and made code use that method instead.

commit 63a042d1bdd4e26bc3ff076662c54906d2f36a7e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 10 15:35:10 2011 -0600

    Formatting for IO#isatty/tty? method.

commit 5c55540d73080a74fe9477970234aee874369f20
Author: David Calavera <david.calavera@gmail.com>
Date:   Wed Feb 9 00:20:20 2011 +0100

    fix JRUBY-5400: [1.9] IO.ungetc needs to accept multibyte char

commit 70594da423fc9f5c504a5f84d2b4a323fcd0603a
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Feb 8 15:49:03 2011 +0100

    Revert "partial fix for 5400: [1.9] IO.ungetc needs to accept multibyte char"
    
    This reverts commit a6beb7e9b50ba656069948afbc0f92899c00f006.

commit a6beb7e9b50ba656069948afbc0f92899c00f006
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Feb 8 00:41:16 2011 +0100

    partial fix for 5400: [1.9] IO.ungetc needs to accept multibyte char

commit 20924a2ab8457463dfc0ff389307e7053399a383
Author: David Calavera <david.calavera@gmail.com>
Date:   Mon Jan 31 19:25:41 2011 +0100

    fix JRUBY-5436: File.open mode doesnt accept "r:ENC:-"

commit 891409e4b2333d9b73ad9db8ab9faadb6892e53b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 26 22:21:47 2011 -0600

    Improve and expand fix for JRUBY-5406 and centralize encoding lookup logic in EncodingService.

commit 2270b587530cfa06b45d78f8629cab9a8343e58b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 26 17:05:49 2011 -0600

    Fix JRUBY-5389: IO.popen doesn't support Array of String's arg in 1.9 mode
    
    * Added support for the leading array and the env hash it can contain. Still missing spawn hash support.

commit 1e09d92417e505c39baf06835b799cd19cce690d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 26 15:32:12 2011 -0600

    Remove some uses of varargs-based RubyBasicObject.callMethod.

commit 5410dc051f8368cca24517b1bc797b6345c68552
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 23 21:53:22 2011 -0600

    Remove * 256 from popen3 and popen4, since I can't find any reason we should be doing it.

commit 139c1ccd163e396c7ca7774b9ce269e3795077ba
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jan 7 15:36:23 2011 -0600

    DefaultExternal internally should be set sooner than later. RubyIO should just use Encoding objects and binmode should convert from US-ASCII to ASCII-8bit

commit 1cda7a9156fce640d5c4418dec358e59b02c9c71
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Wed Jan 5 01:51:43 2011 +0900

    JRUBY-5004: removed unused local variable

commit d60304cf18271691fc7b13b9230d77f37fb82cae
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Dec 31 12:09:20 2010 -0600

    Fix for JRUBY-5193: a File named "classpath:/path" uses ByteList's classloaders
    
    * Modified Yoko's patch to pass in a ClassLoader for ChannelDescriptor.open, allowing it to open classpath: resources.

commit b89d8a699f96b60ae7edbf14a184541dc6d30fb5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 29 22:27:09 2010 -0600

    Fix JRUBY-4595: [1.9] File.binread is missing

commit c1e369700a2c6be396af175de48ce4efa6894c58
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Dec 23 11:45:15 2010 -0600

    Add/fix 1.9 readchar, readbyte, getc

commit 830e826a42af653a2a754edce2d3170cb7ab92f1
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Dec 22 17:13:49 2010 -0600

    Beginnings of some IO encoding smarts

commit 99a5b31897ba756b939a2a3f5baa36c81c1c1924
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Fri Dec 10 14:07:29 2010 +0900

    Additional fix for JRUBY-5122: fread read size calcuration error

commit 2dfc56e71290a6ebe22b93fafc1eba5bb47efa30
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Sun Dec 5 00:01:19 2010 +0900

    JRUBY-5238: Set Thread#status to 'sleep' while blocking IO.

commit fd0fa789b21b30f294e8286b72b75fe3b688c27a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 1 12:07:42 2010 -0600

    Merge "backtrace" branch to master, now that it runs clean on all our various test cases.
    
    This is a squashed merge encompassing the following commits from "backtrace":
    
    commit eb0e24242050199ac1cc4cf6e48d93025f0186f4
    Merge: 32137de ea48d8d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Dec 1 12:03:28 2010 -0600
    
        Merge remote branch 'origin/master' into backtrace
    
    commit 32137decc9351dd7b6a19c49c7955808f535bb9c
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Dec 1 09:41:29 2010 -0600
    
        Fix remaining failures for test-all.
    
        * Disable CheckClassAdapter temporarily, since it disallows what should be valid JVM identifiers.
        * Use the presence of $RUBY$ in method name as an additional indicator that we're processing a compiled Ruby body during backtrace gathering.
        * Move some largely-static properties out of "init" target in build.xml, so they're available whether init is triggered or not (e.g. run.jvm.model).
    
    commit ee2a624201d5e9cd408d6ae793160aeb99b50b3d
    Merge: cd50ae5 88ad204
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Dec 1 08:01:22 2010 -0600
    
        Merge branch 'master' into backtrace
    
    commit cd50ae5f06b95a2fffab6bc1f3a7419f478d0a52
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Nov 30 19:15:07 2010 -0600
    
        Get remaining spec failure with -X+C passing.
    
        * Embed the actual Ruby method name into the Java method for block bodies, rather than __block__.
    
    commit 52bbfffcae1aed62bf4afcb692bed9725e4e1564
    Merge: 4ed7235 1aace5e
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Nov 30 01:37:15 2010 -0600
    
        Merge branch 'master' into backtrace
    
    commit 4ed723579101fffd8bfa73b30dc6e4e8991866f2
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Nov 30 01:31:44 2010 -0600
    
        Precompiled (AOT) specs *nearly* green.
    
        * Mark __method__ as reading frame "name"
        * Fix AOT-based stack trace mining logic
    
    commit 64e20aa939b5b9c6e41e0e9fe09039a0bb92794a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Nov 29 16:50:55 2010 -0600
    
        Jitted specs running green.
    
        * eval needs to set method name into the binding, so it's there for "__method__" in the eval'ed code.
    
    commit fd442c0a815bcab9eb6c9aa1b71e1f8a260ee03b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Nov 29 16:06:53 2010 -0600
    
        Interpreted specs green on backtrace.
    
        * Tagged some __method__ specs for which backtrace behaves like 1.9, which Matz apparently likes but was afraid to backport. Odd cases anyway.
        * Fixed method name for the block used to define_method.
    
    commit cedb27e430b422c1158f66b4dcc7769922433506
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 24 18:35:22 2010 -0600
    
        Reinstate deprecated java_to_ruby and ruby_to_java I removed, since it's still needed by some external libs.
    
    commit b48b17910de662b4e2d20ee8f4b5cc734eefc1ed
    Merge: f39007e 2ae4995
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 24 13:40:58 2010 -0600
    
        Merge remote branch 'origin/master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
        	src/org/jruby/RubySymbol.java
        	src/org/jruby/runtime/CompiledBlock19.java
        	src/org/jruby/runtime/Interpreted19Block.java
        	src/org/jruby/runtime/InterpretedBlock.java
        	src/org/jruby/runtime/MethodBlock.java
    
    commit f39007eca676c1e6ec9f891ac63b7c5d907b0d1b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Nov 18 14:01:29 2010 -0600
    
        Start normalizing the method/class names generated into Java by JIT and AOT compiler, to wrap up the remaining spec failures.
    
    commit 76e42c4b4522dc87c066d20051d02d1e4005b860
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 20:40:33 2010 -0600
    
        Disable dynopt for now, to allow better stabilization on the main feature of this branch: frame elimination.
    
    commit d03099690df2e16d423e8b6a8969e0264983237f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 15:00:14 2010 -0600
    
        Encapsulate "coreMethods" hash in Ruby and add "bound method" logic to default (non-generated) class populator. `ant test-all` runs green now.
    
    commit ed7458f72bce55b11e5231f8e7b9d590c09ca53d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 10:46:43 2010 -0600
    
        Fix incorrect use of fastSetInstanceVariable instead of fastSetInternalVariable in FFI.
    
    commit f09626121b6a8bea6ab39a3c8ed3ccd69f56b505
    Merge: f780b97 e8ca689
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 10:15:16 2010 -0600
    
        Merge branch 'master' into backtrace
    
    commit f780b972b1f3e18f4c2608d9536e797a0845cd1a
    Merge: 25ab5d3 6967ea7
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 09:04:42 2010 -0600
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/runtime/ThreadContext.java
    
    commit 25ab5d3d3f8c1fbf0fa334427b1485d322e83f86
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Nov 7 00:42:54 2010 -0500
    
        Don't do dynopt against calls that receive blocks; non-local flow is not properly handled yet.
    
    commit a4ad27056dcc3acf6bae0b0af7e618966d08a6dd
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Nov 6 15:22:40 2010 -0500
    
        Tag caller specs that do not pass with new backtrace logic (peculiar eval caller behaviors).
    
    commit eed8902084cfa06d4648935c1f70da57bf0c7a9c
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Nov 6 00:32:59 2010 -0500
    
        More fixes to get specs and tests green on backtrace branch:
    
        * Hash#index was not being bound properly from RubyHash#index19
        * Range#min and Range#max need super, and therefore need frame = true
        * tc_owned is a bad test and fails on system like OS X where (for some reason) / may be owned by user
        * test_trace_func had been hacked for a bad class result (Integer, instead of Fixnum)...fixed that
    
    commit 9d9f94c30de76fa25e738e70e84ea09163eca5cb
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Nov 5 20:03:22 2010 -0500
    
        Fix Kernel#caller to replace .java lines with Ruby lines. Brings specs mostly to passing.
    
    commit de433c771830e95c54f8196453208f2b312191aa
    Merge: 3ffe1cf e25c58f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Nov 5 17:40:02 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyIO.java
        	src/org/jruby/compiler/impl/StackBasedVariableCompiler.java
        	src/org/jruby/evaluator/ASTInterpreter.java
        	src/org/jruby/java/proxies/JavaProxy.java
    
    commit 3ffe1cfba86f52ee96d89f3a1c352597f22f76b7
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Oct 27 01:42:06 2010 -0200
    
        Fix compile error I accidentally merged.
    
    commit b081253fb3cdf5141f7f0cf76d3f8546837d9f42
    Merge: fc3028d ad68e22
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 26 16:30:25 2010 -0200
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
        	src/org/jruby/internal/runtime/methods/DefaultMethod.java
        	src/org/jruby/runtime/ThreadContext.java
    
    commit fc3028d9da2750c9d1c394600ab8ee712388724d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 26 14:39:29 2010 -0200
    
        Add better description for class bodies in backtrace
    
    commit d796555494c2237116c7477c932fd96cd30d2e20
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 26 11:36:29 2010 -0200
    
        Clean up and add color to Rubinius backtraces.
    
    commit 012f5357ce649bd5a996211fe231f26097bf4f5b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Oct 24 16:23:04 2010 -0500
    
        Fix classloader check to allow for compiled method handles, which use a no-arg constructor.
    
    commit 473d48aac6a5523304188d1d433e4c12df989b89
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Oct 24 16:10:32 2010 -0500
    
        Improve Proc-binding-based eval position info by propagating block's position into the binding and through to the backtrace frame.
    
    commit bcfd16b519b145c9ee055db1592dfaced05b71a0
    Merge: 4902faa 5b49583
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Oct 24 11:07:15 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyTime.java
        	src/org/jruby/runtime/ThreadContext.java
        	test/org/jruby/test/TestRubyException.java
    
    commit 4902faaf1678d5aecdef8b0b66f8ec78062aeec5
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Oct 21 09:28:45 2010 -0500
    
        Fix badly-merged RubyProc.to_s19, missing opening brace.
    
    commit 69177d7098f9dc4ff9096d08eee25c0d8bb4f971
    Merge: 801e764 f895837
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Oct 20 21:50:53 2010 -0500
    
        Merge branch 'master' into backtrace
    
    commit 801e7641b8838a8ae8931a9c6dcc5cf050096c4a
    Merge: 0c60a89 dda4644
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 19 23:16:41 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyDigest.java
        	src/org/jruby/RubyProc.java
    
    commit 0c60a89aa746f286588b218681e9ad25b11318c4
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 19 23:06:15 2010 -0500
    
        Only compile direct recursive calls when we haven't branched to another method body (e.g. for rescues) and we're not compiling a closure or class body.
    
    commit 18333fe82c808e8ed49eef898f19c86fa2d764b2
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 12 17:04:13 2010 -0500
    
        Get 1.8 specs running green except for a handful of Kernel#caller specs (which don't expect to see .java files in the trace...not sure how to deal with that).
    
        * Fix another literal-block-calling path that wasn't using callIter
    
    commit 366740120ee76d8df3f977edc1727b60b2d4ad63
    Merge: b64390b 6b243a3
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 12 10:35:14 2010 -0500
    
        Merge remote branch 'origin/master' into backtrace
    
    commit b64390b8cf0d2cb13e06d352969a093b5e86818d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 12 10:33:39 2010 -0500
    
        Remaining fixes to get precompiled mode passing all our tests. Still some spec failures.
    
        * Bump up permgen max for test runs
        * Fix stack-based scope initialization to not leave an unused nil on stack
        * Ensure compiled method handles properly wrap pre/post logic for dummy and backtrace frames.
    
    commit 96bd3cbde91fc505b37ee13cbea6ffa3e8690c58
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Oct 11 18:36:34 2010 -0500
    
        First fixes for backtrace branch in precompiled mode:
    
        * Add test-precompiled build target for running just precompiled
        * Eliminate extraneous toplevel scope being pushed for precompiled loads (because that logic is all in the generated "load" method now.
        * Add a new scope descriptor decoding path that properly sets up a toplevel scope
    
    commit 0ebbd6ac46c9ac04558f5200f980f26f798b9413
    Merge: fc387be ac455fc
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Oct 6 21:53:18 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyIO.java
    
    commit fc387befff57ada6c116b646a3dfb767cc926ee5
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 28 15:57:58 2010 -0500
    
        Renumber arguments for consistency.
    
    commit bbc91d3c4039bf6c26ceffd4899dcaaeaa3d46d0
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 28 15:40:38 2010 -0500
    
        Fixes to get specs a bit closer to running green.
    
        * Move pre/post logic for Script.load into generated code, so it's the same everywhere.
        * Make pre/post-load push a frame, so top-level of a script is always framed
        * Remove break handling from non-literal block call paths in CachingCallSite
        * Make sure all literal block calls are using CallSite.callIter, which handles break
        * Fix a bad test in testCompiler that needed visibility tweaks and framing
        * Add complete doco for CallSite
        * Fix Kernel#caller to trim from top of stack instead of bottom
    
    commit 4e814a24d5b2ef1b6567a3076a463ff9d08e2a0d
    Merge: 91dc13a 3dbcef3
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Sep 27 17:43:30 2010 -0500
    
        Merge branch 'master' into backtrace
    
    commit 91dc13a2f0b74bc1054d83378782416465ecc1b8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Sep 27 01:02:48 2010 -0500
    
        Fixes to get test-compiled (but not precompiled) passing 100%.
    
        * Fix eqlInternal's RubyNumeric branch check if classes are equal
        * Provide file and line from all BlockBodies, so Proc#to_s can always use it
        * Fix rejiggered Struct#each and Struct#each_pair to call the appropriate internal version
        * Fix ruby_test's IO.new suite to not use STDOUT directly, risking that it get closed
    
    commit dc4af45352607ebb8a95d70befdcdb15c1111c58
    Merge: ec8bb7f 90275be
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 21 09:52:10 2010 -0700
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
        	src/org/jruby/RubyDir.java
        	src/org/jruby/RubyKernel.java
        	src/org/jruby/compiler/ASTInspector.java
        	src/org/jruby/javasupport/util/RuntimeHelpers.java
    
    commit ec8bb7fc31d4acd4ebcb040f088e19fb427448e8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 19 16:21:38 2010 -0700
    
        Remove frame = true from all core class methods, to reduce their call costs. A few remain for invokeSuper and methods that may still need frames.
    
    commit ec276b6ca0c6009702839b12d97664b9e52b1023
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Sep 16 14:10:43 2010 -0500
    
        Eliminate RubyTuple use that snuck in.
    
    commit f80254100cfc17ac6eb558e465fc1fb9122c3ee4
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 14 10:07:53 2010 -0500
    
        Special case a few immutable core types in equalInternal/eqlInternal.
    
    commit eb66c45145e4fd1f8c28e9a8c544114f034116e8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 18:26:13 2010 -0300
    
        Performance changes for backtrace logic:
    
        * Back off using Java stack trace for Proc's to_s file+line, since it's prohibitively expensive
        * Move the Backtrace stack to being a fixed-size array of objects updated, rather than created, when a push happens
    
    commit 6f0ade5ab28946b8800431d3454d2e57fc0dbe19
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 11:36:07 2010 -0300
    
        Add generation guard around trivially-inlined logic.
    
    commit c4d8705217174580d35757dc85c5c646e980b57f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 06:18:38 2010 -0300
    
        Full speed ahead with a caching mechanism for calls from core classes. Only works for core class methods right now, but opens the door to expanding that.
    
    commit 5874abc01104f6c0f435f8ac4643ed0f77cf7cff
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 03:43:37 2010 -0300
    
        Localize some fields used in Array#include? to speed up the loop.
    
    commit 346245cd5e154574d14736cf4b9e0b4b98260d14
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 11 15:02:41 2010 -0300
    
        Allow passing a number of iterations to bench_quicksort.rb.
    
    commit b4687022a1f00d0b63838b1c9daf00753fcfa93e
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 11 11:55:15 2010 -0300
    
        Fixes to get run-junit-compiled 100% passing on backtrace branch.
    
        * Fixed a couple tests that are too sensitive to core method line numbers or expected only .rb elements in the trace
        * Added a mechanism for procs to retrieve the most recent Ruby frame, for to_s purposes
        * Added comments for hybrid backtrace logic
    
    commit 15cd9b16cb2750d0e40ba478d07fe5bf265dc620
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 11 08:07:57 2010 -0300
    
        Add better logging to AnnotationBinder (for showing framed/scoped core methods), ASTInspector (for showing methods detected as framed/scoped and for reporting deopt flags as they are set), and JITCompiler (for dumping jitted methods' full classes and inspector results). New property jruby.jit.dumping=(true|FALSE).
    
    commit c4e6176498590d791868055025c2e72ded1ccf13
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Sep 10 02:10:20 2010 -0400
    
        Improve dumping of generated bytecode by including class and method name when possible.
    
    commit 07fc4215f6873f449f89d4f5da7a7e2e8963bc70
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Sep 9 23:39:20 2010 -0400
    
        Make attr accessor's var accessor field volatile, to guarantee visibility across threads.
    
    commit e3a7cf5cd4d8ccd08407955779bdd94feb5e4ac8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 13:26:48 2010 -0500
    
        Add missing "in" to caller backtrace lines.
    
    commit 7140c339f386959853f747d86cb2ea9a8afa6f2a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 12:10:50 2010 -0500
    
        Fixes to get tracing tests running in interpreted mode:
    
        * Off-by-one line numbers were off for MRI too. Fixed to correct line numbers
        * call and return for Ruby methods need to use impl class, not self class
    
    commit cbc9c4edab56807a023817d06db9c22441fa4b53
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 10:31:57 2010 -0500
    
        Fix runInterpreterBody to properly unwrap RootNode for "gets loop" execution.
    
    commit 3a09773058d8d58d5bf8f1b6fbebc494fc18f7c6
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 10:01:43 2010 -0500
    
        Make --bytecode attempt a recompile, so that dynopt and no-compile modes can still print bytecode.
    
    commit 4e48e722ba5ded10975af348738237fcb7fe9b2a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 09:23:38 2010 -0500
    
        Add a "full" backtrace style which does not omit any Java frames and interlaces the Ruby frames.
    
    commit 6f5057e3ae1e372bd66602dcc26864adc3270128
    Merge: 7006d31 811fd8d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 07:48:47 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
    
    commit 7006d3175bbf4630921dfecaa4faef2a39a77205
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 4 16:04:28 2010 -0500
    
        Bytecode size reductions for stack-based nil-initialization of locals and for x, *y and x, * forms of masgn.
    
    commit 3a8fb16f020c2b9aaa6228605bdb3d8fd1b78ccf
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 4 14:52:04 2010 -0500
    
        Do not do direct recursive invocations for heap-based scopes, since the scope is not currently being reset.
    
    commit ec00e99636667eff97a891917ae9ef37f94a6eb7
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Sep 3 19:55:24 2010 -0500
    
        Turn on dynopt by default, to aid testing of new logic.
    
    commit 9508e8a6925fce4f57a386ede867b3f8f9b67d38
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Sep 2 12:40:38 2010 -0500
    
        Fix Time test that expected two separate Time.now objects to to_s the same.
    
    commit 65ba8b37a8a232495453e71b2a560c761b40893f
    Author: Nick Sieger <nick@nicksieger.com>
    Date:   Mon Aug 30 14:50:03 2010 -0500
    
        Use new backtrace info to set a more useful Java thread name
    
    commit 75b100604af39de52b26bdb21669136234424a0b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 30 11:37:49 2010 +0900
    
        Fix ifne/ifeq bug in dynopt guard and switch DefaultMethod to not flip generations on JIT in dynopt mode.
    
    commit fe3b408629e94b7db0436152968bd6d2232f6c7c
    Merge: eea60da 85c64c6
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 29 20:33:06 2010 +0900
    
        Merge branch 'master' into backtrace
    
    commit eea60da3905c87c16fbb4e6c78fd7a07f842e4bd
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Aug 27 14:09:44 2010 +0900
    
        Modify Java Fixnum fib bench to use the long call paths where possible, to be more like what compiled Ruby does not.
    
    commit a189563d9073208292e91aff3eb1c88489bd113d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Aug 25 15:07:21 2010 +0900
    
        Fixes for jitted/compiled backtrace generation
    
        * SClass in a method body needs to frame, so it has a jump target for non-local return
        * Compiled methods need to always have their ruby name in the method name, so it can be mined out appropriately
        * Synthetic calls, like to rescue bodies, need to gobble caller frames to avoid multiple entries
    
    commit 276226de611cb8d5af942148109c2a51982e7640
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Aug 25 14:03:44 2010 +0900
    
        Add callNumber tracking to method handles, to properly handle return jumps.
    
    commit b94bcf119a54f52ab9be3c86bc5cc85078f20eee
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Aug 25 13:16:25 2010 +0900
    
        More fixes for hybrid backtrace:
    
        * Get generated trace to be RaiseException's Java trace
        * Add Ruby exception name to the RaiseException message
        * Rewire and repair trace calls
    
        All main suite tests now pass in interpreted mode.
    
    commit dc9fcd3de0f3070507ac0a0647973d1e9f16ae4f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 23 14:38:47 2010 -0500
    
        Fix debug logging of exceptions being raised and patch a couple tests for new backtrace structure.
    
    commit 3acd3201d85e4da9186fa17d3a04bdc9db742e29
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 23 13:23:04 2010 -0500
    
        Include original source file in compiled Ruby, add missing "in" line for MRI rendering, and soften requirements in test_backtraces to allow for native elements in the backtrace.
    
    commit 728cf3983fbeffba944fe34a8b0e410cc1de041c
    Merge: 88a64de 0e9c956
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 23 00:18:07 2010 -0500
    
        Merge branch 'master' into backtrace
    
    commit 88a64de879446be3398ba7671b5fa1f3e46ce02f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 17:29:21 2010 -0500
    
        Turn on "positionless" compilation, since compiled code no longer needs to update interpreter backtrace frames. Also fix nil/null backtrace rendering.
    
    commit 5712a4ce285a5b3662c8ef8def2599223a232626
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 17:18:17 2010 -0500
    
        Fix off-by-one line numbers from interpreter frames.
    
    commit 519f4625b9d9658f50b986b1add560903ee453de
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 17:10:47 2010 -0500
    
        Remove some old backtrace code no longer in use and get all "backtrace" method handles to generate with no frame at all (since Java stack is used now).
    
    commit 424d967df8a3b6ba277bdb1b530d4f7f62ecbc4a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 16:52:29 2010 -0500
    
        Get Kernel#caller working with hybrid traces, get Rubinius rendering working again (partially), separate gathering and rendering of backtraces.
    
    commit a00822740712ddd924896feccc10f015fd20d4be
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 15:32:08 2010 -0500
    
        Mine method names out of AOT and JIT compiled stacktrace elements and get JIT using the original name of the method.
    
    commit 039d184ac5f798aed21870a7552b66c5973ca0eb
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Aug 14 22:16:48 2010 -0500
    
        Simplify in-class encoding of StaticScope data.
    
    commit 876a762b8af88955bee598dfd0421805d9b47c40
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 01:41:44 2010 -0500
    
        Fixes to hybrid traces to get tests working better:
    
        * Omit Kernel#raise and the KernelJavaAddons rbRaise from traces
        * Handle getBacktrace when there's been no preparation
    
        Also modified test/testException.rb to allow internal line numbers for the "load" call, rather than MRI standard "whatever line it was called from".
    
    commit 06f1bd171d6897f651b3cebfd76551080acbfe40
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 00:39:59 2010 -0500
    
        Move backtrace management to a separate stack and implement mixed-mode backtrace generation.
    
    commit ca40e73a7c136dfdd3853f0cd62a73bf70a3a08f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Aug 21 20:56:50 2010 -0500
    
        Get all major interpreter entry-points passing through simple, known method bodies. First step toward mixed-mode backtraces.

commit 2ae49952b1679991b53a3f750339509c81973e69
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 24 02:19:15 2010 -0600

    Fix IO#autoclose= to take an argument and expose that and IO#autoclose in 1.8 mode. JRUBY-5114.

commit 0b7aed72d439294c6cd50f7ad4d9c424d11f60e9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 23 16:28:42 2010 -0600

    Alternative fix for JRUBY-5114: provide an autoclose flag on all IO objects that will allow turning off the close-on-finalize behavior. Also modified the "to_io" impls for InputStream, OutputStream, and Channel to take an :autoclose option.

commit 55746f421d42938a81ae4c924ef22cbe187dd22d
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Nov 8 16:23:14 2010 -0600

    Make io.popen behave better on windows

commit ed104eb6154c4503c8c9443196281e006d3926db
Merge: f84995d 8eb76d0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 3 18:29:58 2010 -0500

    Merge branch 'JRUBY-5122_NONBLOCK'
    
    Conflicts:
    	src/org/jruby/RubyIO.java

commit 8eb76d0cc4fb244db8412a988eb36e78f88616f6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 3 18:12:25 2010 -0500

    Reduce the use of null as a flag for buffer use in readAll and readNotAll. Also clean up spec for write_nonblock that seems incorrect.

commit 38710493783b46c400de61caa7b22246b2029ebd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 1 08:48:40 2010 -0400

    Fix for JRUBY-4908: IO.popen4 returns the wrong pid in Linux

commit 589320765488a78747b06c1ebd667b1184d47483
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Oct 23 13:07:34 2010 -0500

    Move fields and deprecated methods to bottom of RubyIO.java.

commit dee9d583e2574d848fdb614f3296a693bc32bb20
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Tue Nov 2 22:21:49 2010 +0900

    Avoid passing null as an argument of readNotAll().
    
    Pass empty string as an argument instead of null to avoid null check
    branching in readNotAll().

commit 1df3506c0ae884f6893147c95d87a5177a7748ad
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 1 08:48:40 2010 -0400

    Fix for JRUBY-4908: IO.popen4 returns the wrong pid in Linux

commit 2b608a566683ea34e9461922732672750ac954fe
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Fri Oct 29 18:54:58 2010 +0900

    Avoid using RubyString#view for performance. Just create RubyString with RubyString.newString().
    
    RubyString.newEmptyString() & RubyString#setValue(aByteList)
     ->
    RubyString.newString(aByteList)

commit d702187cd27a14743ba5ae58c039bc253c148b4e
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Fri Oct 29 18:07:40 2010 +0900

    Removed String modification check.
    
    CRuby checks String modification and raises RuntimeError.new("buffer
    string modified") if the given buffer modified while waiting for an IO
    to be readable. (rb_thread_wait_fd)
    
        ex.
    
        if (RSTRING(str)->len != ilen) {
            rb_raise(rb_eRuntimeError, "buffer string modified");
        }
        TRAP_BEG;
        n = read(fileno(fptr->f), RSTRING(str)->ptr, ilen);
        TRAP_END;
    
    This non atomic check works properly since CRuby has GIL at present. On
    the other hand, JRuby doesn't have GIL so this kind of check is
    incomplete. I believe this incompleteness is JRuby's design choice so I
    removed String modification checks I added to JRUBY-5122_NONBLOCK
    branch.

commit e242c86585d51974ee4b29025893c3727c75f377
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Fri Oct 29 16:38:27 2010 +0900

    Do not call waitReadable except it's actually needed.
    
    CRuby checks buffer first and use it if there're buffered input.

commit 1a543578d09a7ca8bc94f18c9f08bef85e4961d0
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Thu Oct 28 17:55:42 2010 +0900

    Clean up RubyIO#readAll logic according to read_all in CRuby's io.c.
    
    Removed some TODOs based on this change.

commit 2e8b31762b35ccc57b0537431699f0e0d9f1ef58
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Thu Oct 28 16:53:59 2010 +0900

    boolean ChannelStream#readDataBuffered() should check ungotc as well.
    
    And make RubyIO#getPartial do waitReadable before invoking
    Stream#readpartial as CRuby 1.8.7. (It was the TODO I added)

commit bf709e258cb16dd939f6458f8b6f7466eccfe1f8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Oct 23 13:07:34 2010 -0500

    Move fields and deprecated methods to bottom of RubyIO.java.
    
    Signed-off-by: Hiroshi Nakamura <nahi@ruby-lang.org>

commit 60ab27ba813f87fa9565eb88127f46fba83a82cb
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Thu Oct 28 16:10:40 2010 +0900

    Revert "Move fields and deprecated methods to bottom of RubyIO.java."
    
    This reverts commit 23d01f2529d220b2760aeadd94ae75f5b0869f05.
    The commit was wrongly cherry-picked without the attribution of the
    original commit.

commit cae3f63a5f0c079791f84d4c1874c7d44a7ef85a
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Wed Oct 27 21:50:47 2010 +0900

    Changed argument type of RubyIO#wait{Readable,Writable} for fitting it to other methods like readCheck(), etc.

commit 23d01f2529d220b2760aeadd94ae75f5b0869f05
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Tue Oct 26 20:58:23 2010 +0900

    Move fields and deprecated methods to bottom of RubyIO.java.

commit 83c50c049ed5d197edcf1a662c1050d1d05d38da
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Tue Oct 26 20:39:21 2010 +0900

    More fixes for IO + NONBLOCK behavior: read, read(n), readpartial and read_nonblock.
    
    Add following fixes for JRUBY-5122.
     * updated RubyIO#getPartial logic according to io_getpartial in io.c
       CRuby 1.8.7.
     * updated RubyIO#readAll logic according to read_all in io.c CRuby
       1.8.7.
     * added new method RubyIO#fread(int length) according to io_fread in
       io.c CRuby 1.8.7.  And let other logics use it instead of using
       ChannelStream#read_all().
     * marked ChannelStream#read_all() as deprecated. It does busy loop when
       the IO has NONBLOCK bit. Might be too aggressive?

commit 2638c98303cc012b07a411d3e808571534840b63
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Oct 23 13:07:34 2010 -0500

    Move fields and deprecated methods to bottom of RubyIO.java.

commit 7b56cbc802be2ed3306d13c000387ccdee3e50d9
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Fri Oct 22 20:13:43 2010 +0900

    JRUBY-5122: Use RubyThread#select for waitReadable and waitWritable properly.
    
    Some methods of IO (gets, getc, etc.) does not call waitReadable so it
    caused busy loop for reading IO which has File::NONBLOCK bit.
    
    I also changed waitWritable to use RubyThread#select for proper
    Thread status management. (set status to "sleep" while blocking IO)
    
    Original waitReadable/waitWritable are introduced for JRUBY-2164 which
    aims to fix WEBrick's nonblocking read behavior.

commit c97a0fb3fa6a8080f57d0a092a5d88953cb9a717
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 20 14:23:34 2010 -0500

    Fix for JRUBY-5124: Bundler doesn't work with 1.9 mode

commit 9f0df7d501345ea420d500e55a0bc3d046bb27d9
Author: David Calavera <david.calavera@gmail.com>
Date:   Fri Oct 1 17:46:54 2010 -0400

    [1.9] fix IO.foreach with an object as the separator argument

commit 7241e2c790cd85f6084dbb4442beffdd8b3d8288
Author: David Calavera <david.calavera@gmail.com>
Date:   Fri Oct 1 17:10:14 2010 -0400

    [1.9] IO.sysopen calls #to_path on first argument

commit 72a7e4bc068433754b1687959373661e5422a387
Author: David Calavera <david.calavera@gmail.com>
Date:   Fri Oct 1 16:52:07 2010 -0400

    [1.9] add unimplemented methods IO#codepoints and IO#each_codepoint

commit 56b0ba33e23d179ed139fdba5b5c8238aedb8b9e
Author: David Calavera <david.calavera@gmail.com>
Date:   Fri Oct 1 16:15:24 2010 -0400

    [1.9] IO#lines yields each line to the passed block

commit 93b14acc3bbc5d97988f481796bbb1afdb15c7e7
Author: David Calavera <david.calavera@gmail.com>
Date:   Fri Oct 1 15:14:36 2010 -0400

    [1.9] IO#ungetc returns nil when invoked on stream that was not yet read

commit d9f4b889d9183c514435d1ee04879ea8ce68c87c
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Sep 13 17:35:11 2010 +1000

    Add a fix for JRUBY-5076

commit af72b4f65b66b1462c08d741ed3ec4f93edddc0a
Author: Rick Ohnemus <rick_ohnemus@acm.org>
Date:   Thu Aug 26 09:17:16 2010 -0700

    output the modes string in the "illegal access mode" message instead of the mode value
    
    Signed-off-by: Hiro Asari <asari.ruby@gmail.com>

commit 8424326fc18a27411595b279c5319eb65e921fdb
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Wed Jul 21 00:12:08 2010 -0400

    This introduced other failures in IO methods.
    
    Revert "Fix an IO#eof? spec. The spec description is a bit misleading, since it is really testing if the return value of IO#eof? is a String in 1.9 mode. (It was a Fixnum in 1.8.)"
    
    This reverts commit 36ae68c0f99193e07dbdea3f2ee5df438284b450.

commit 36ae68c0f99193e07dbdea3f2ee5df438284b450
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Tue Jul 20 23:44:31 2010 -0400

    Fix an IO#eof? spec. The spec description is a bit misleading, since it is really testing if the return value of IO#eof? is a String in 1.9 mode. (It was a Fixnum in 1.8.)

commit b780e8442c1ae4adc4a1f006db8b8975545b9ae0
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Tue Jul 20 23:18:16 2010 -0400

    The method name should be mnemonic for "nil's byte list".

commit 7bc5d6b33b1396d01f3bfb5dba0eb0bf30865b1c
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Tue Jul 20 23:13:46 2010 -0400

    Fix JRUBY-4960: 1.9: puts nil should output "\n" not "nil\n". Two more passing 1.9 specs.

commit 23c2ef7091ed5002aae49dfdbe17dd81bd722ab3
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Jul 13 14:51:42 2010 +0200

    fix JRUBY-4932: IO.popen4 reading from the wrong socket results in wrong error message

commit 7ad2e67b8289c050dfe3375441459263afa186b8
Author: David Calavera <david.calavera@gmail.com>
Date:   Mon Jun 28 00:14:40 2010 +0200

    [1.9] fix some File methods that use 'to_path' to coerce objects

commit 5d226eba52162c9a7dc43665d2789398ba3097f6
Author: Nick Sieger <nick@nicksieger.com>
Date:   Mon May 24 15:43:03 2010 -0500

    JRUBY-4821: Clear last error when calling #close during IO#open block

commit d41268c6d2007bba4ca82a47f727a6827a273f6b
Author: Nick Sieger <nick@nicksieger.com>
Date:   Mon May 24 15:26:35 2010 -0500

    Kill some (hopefully) dead code in RubyIO that was announced to be deprecated long ago

commit 3ec5704732829adebd2acd346a39d7d9f47692d3
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Sun May 23 15:50:07 2010 +0200

    File.read should raise EACCESS on Windows when reading a directory
    
    This fixes one more rubyspec failure on Windows.
    
    Plus, as a bonus, now error messages contain the actual
    path being used, to simplify debugging and to be in sync
    with MRI behavior.

commit 515a4c142250fd30b140c22728b061a54aaeacbe
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat May 22 14:44:37 2010 -0500

    Various spec fixes:
    
    * Fix all 1.9 Array specs (other than pack, which doesn't seem to run with Ruby 1.9 at the moment).
    * Backport 1.9's matrix to fix matrix failures
    * Merge over a ruby_1_8 set.rb fix (ruby bug #118)
    * Make Digests' #file raise EISDIR on dir
    * Update rubyspec and mspec and tag remaining failures
    * Kernel#require should expand ~
    * $? should be read-only

commit 1c6e5609b45528b80c956a4f69f86f232e98fb51
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 4 15:58:27 2010 -0500

    Rework fileno/descriptor registration to live entirely within ChannelDescriptor. This avoids descriptors being unregistered prematurely by RubyIO finalization, eliminates RubyIO finalization, and centralizes registration much more neatly. An additional map is added to Ruby to allow 0, 1, and 2 to always map to the current runtime's notion of in, out, and err.

commit e05b969291d44e3d42e14861e30ce189a52f1b5f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun May 2 02:09:26 2010 -0500

    Miscellaneous cleanup:
    
    * A number of findbugs items in the "threadsafe", "performance", "malcious code", and "experimental" warnings
    * Tidied up all NetBeans "yellows" in the files I touched
    * Removed now-defunct JRubyServer/Client/Service
    * Removed now-defunct ssa.rb and DAGBuilder

commit 76196d16487b1de9a041e31a4916ab96c5da1548
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 29 15:02:18 2010 -0500

    Reduce RubyIO.finalize to just clean up fileno map (unregisterDescriptor). Fixes embed tests. I would guess it was too eager in closing stream that would not previously have gotten closed.

commit 70ed1c5896ea11d2cec752b00c218756b44de45e
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Apr 29 14:01:14 2010 -0500

    Split reopen to reopenIO and reopenPath

commit 9bc6431c68a5a68766061d738f5d3bde41601164
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 29 12:35:33 2010 -0500

    Fix RubyIO.finalize signature to match what it's supposed to be.

commit 713c1c7a6a7587f91fc31bd43f3de8d98b5055fd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 29 01:25:12 2010 -0500

    Possible fix for JRUBY-4764: Memory leak
    
    With no finalize method in RubyIO or OpenFile, the newly hard-referencing fileno-to-ChannelDescriptor map never gets cleaned out, since that happens in OpenFile.cleanup. This adds a finalizer to RubyIO to call OpenFile.cleanup appropriately and appears to fix the simple reproduction I came up with.

commit dc1096071d07fbe82ea86a479f51725715ee6037
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Mon Apr 26 01:11:24 2010 -0500

    Fix JRUBY-3857: IO.fsync not flushing buffer before sync
    
    Patch by Rick Ohnemus.

commit 7cb1298564ffee199d54a3807069a0493ec84b97
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Apr 13 16:20:42 2010 -0500

    Two ugly hacks to get popen working more reliably:
    
    * Loop for up to a second repeatedly trying to "destroy" the child process, to get around a single, early destroy not doing its job and causing waitFor to hang
    * Pause for 0.1s during popen on Java 5 since it appears to be even less "ready" than Java 6.

commit c0a48591f617549d1e95d07e3eedae72c4de005f
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Fri Apr 9 11:37:08 2010 +0200

    [1.9] IO.copy_stream should close files that it opened itself
    
    This fixes 3 new rubyspec failures in 1.9 mode.

commit 3eca166d33878d4d8c34c566afab8baa399949d8
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Fri Apr 9 11:38:06 2010 +0200

    JRUBY-4420: [1.9] IO#copy_stream unable to take a File object
    
    Thanks to Jongsu Kim for noticing the typo in the code.
    
    Rubyspec for this case is added as well.

commit 71bcc5a4807f97e4da98a88497d26596af101fb8
Author: David Calavera <david.calavera@gmail.com>
Date:   Fri Mar 19 20:40:14 2010 +0100

    fixes JRUBY-4652: [1.9] IO.try_convert is not implemented
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>

commit 6e8d0d52375859371cdbfb8c3ed99a29765dfdd7
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Mar 31 14:01:18 2010 -0500

    JRUBY-4685: Installing gems in JRuby on Windows fails most of the time.

commit 96c1df8be439d382899013ab1712a5e5046fa30c
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Sat Mar 13 19:22:38 2010 +0100

    Fix for JRUBY-4650 in 1.9 mode as well.

commit 1aea77d33ac167184828ac4380dcd3b728863661
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Sat Mar 13 16:36:22 2010 +0100

    JRUBY-4650: Multiple new rubyspec failures for IO#initialize
    
    Added cleanup to IO#initialize.

commit 5a8623b874e2046a96b8821da3078043f61205d7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 18 14:55:24 2010 -0600

    Clean up all @JRubyMethod bindings that are throwing bare Java exceptions (JRUBY-4494)

commit 3178f30147da41a11da332d73e143167e2fc6c63
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Feb 9 09:27:37 2010 +0100

    Fix one new RubySpec failure for IO.putc

commit a1f900fc28d208b41dfef4135d751d55e28755f4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 19 20:42:09 2010 -0600

    Fix for JRUBY-4504: Installing gems while in 1.9 mode fails
    
    The problem here was that we fixed read_nonblock to raise EAGAIN on empty string (meaning no data available), which is correct, but under 1.9 caused net/http to blow up. In 1.9, net/protocol does read_nonblock to fetch URLs, which does often cause EAGAIN to be raised. But we were missing the 1.9 logic that *extends* the EAGAIN error with IO::WaitReadable before raising it, and net/protocol was rescuing WaitReadable. So the EAGAIN went all the way out and caused peculiar results as RubyGems failed over to old indexes and eventually gave up.

commit d2bb95772cbf3db9e3985f2fff11a10463d15286
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 7 14:24:34 2010 -0600

    Add popen4 to RubyIO (shhh! nonstandard api alert!)

commit b2f70f0ba417f100474c4694971fd28b3282ade8
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Jan 5 20:40:42 2010 +0100

    JRUBY-4418: IO.read not always closes the file

commit 228a9ff6bc9170c13448f28df3552c583b95e9cd
Author: Stephen Bannasch <stephen.bannasch@gmail.com>
Date:   Mon Dec 28 21:42:34 2009 -0500

    delim passed to getlinefast must be unsigned byte
    
    fix for http://jira.codehaus.org/browse/JRUBY-4387
    tcp socket.gets doesn't work with a custom line separator
    
    Signed-off-by: Charles Oliver Nutter <headius@headius.com>

commit 9d57dbc3b7b0d10dd4d8c6d49b73cf1af2e8e287
Author: Nick Sieger <nick@nicksieger.com>
Date:   Thu Dec 24 12:02:04 2009 -0600

    JRUBY-61, JRUBY-2140, JRUBY-4253: Merry Christmas JRuby windows users!
    
    Three-year old bug finally squashed!

commit 2f3802343d0de9440a71e099002d3b66f51c0a51
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 23 00:40:00 2009 -0600

    Use accessors for those pesky ByteList fields and update bytelist.jar to a current version with accessors and deprecated fields (for compile warnings and because we'll want to privatize them some day).

commit 13c40aeb515d14e62db6cb469a560d900a27647e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 16 00:59:55 2009 -0600

    Set reified class for all the primary core classes, so they'll work properly when extended and an interface gets included.

commit 9fa8a3c8e5313aa13645c7a48afe0b7e31d36f7b
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Dec 9 19:05:24 2009 +0100

    JRUBY-4336: IO.read_nonblock should raise Errno::EAGAIN if there is no immediate data
    
    This also fixes new rubyspec failure.

commit 3487bba2fada506a4c56b7e643e82ae3b6294cb5
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Dec 8 11:54:04 2009 +0100

    Fixed JRUBY-4116 and JRUBY-3950 (IRB in Applet and WebStart environments).
    
    - JRUBY-4116: security error running org.jruby.demo.IRBConsole in jruby-complete
    - JRUBY-3950: samples/irb-applet.html doesn't load the Applet

commit bc09207f00c44c580a8c987465325fd844c55d64
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Mon Dec 7 13:37:45 2009 +0100

    JRUBY-3819: exit status after IO.popen is wrong

commit 1bd4ca29a7cb42820a850ad21c76d6da740c6b9b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Oct 25 21:50:28 2009 -0500

    Multiple improvements for JRUBY-4117: RubyIO#incrementLineno is Very Slow
    
    I modified both $< and $. to be normal fields on org.jruby.Ruby, with the global var accessors just accessing them directly. This allows all places in the system that access them to go straight in rather than doing the global var hash lookup and constructing a RubyFixnum. I also modified the RubyArgsFile.setCurrentLineNumber to not dispatch back to lineno= and instead just update the int in the ArgsFileData structure. With these changes, we are trimming off the couple seconds RJ Lorimer mentioned in JRUBY-2810.

commit e425496dc8a50972c526806ba66354ad86ebe88d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Oct 25 20:27:03 2009 -0500

    RJ Lorimer's perf improvements for IO.foreach for JRUBY-2810. Also includes a "tall" benchmark with many lines rather than wide lines.

commit e6147aeb74bc2bf13367aecb66e08138ac1d8ac2
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Sat Oct 17 19:34:56 2009 +1000

    Use RubyString#newEmptyString() instead of passing in an empty string literal

commit b03c7b478692244bacfdbfda970eabacbbb28f7f
Author: David Calavera <david.calavera@gmail.com>
Date:   Mon Sep 28 15:08:29 2009 +0200

    fixes JRUBY-4011: IO.binmode should raise an IOError on closed stream
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>

commit caa3f036d53c3d7a5b58b4d48444c54761baf761
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Sep 28 15:08:11 2009 -0500

    [19] new modules which get thrown (though not being thrown yet -- see JRUBY-4014)

commit d086d1a1886dc590ee952d81f479e555fd0e908c
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Sep 14 13:08:35 2009 -0700

    [19] Let IO.gets accept a limit value

commit 70499a3f63f888b30c209751bf3a48edf188d525
Author: David Calavera <david.calavera@gmail.com>
Date:   Thu Sep 3 23:15:12 2009 +0200

    IO initialize should ignore interal encoding when is equal to external encoding
    
    Signed-off-by: Nick Sieger <nick@nicksieger.com>

commit 0312d884b2584c912eac262337271e42250bf80d
Author: David Calavera <david.calavera@gmail.com>
Date:   Thu Sep 3 23:09:50 2009 +0200

    Encoding.default_external should get encoding from default charset when is nil
    
    Signed-off-by: Nick Sieger <nick@nicksieger.com>

commit 42be6f7d772e99724897d19c31fee3fa2010171e
Author: Nick Sieger <nick@nicksieger.com>
Date:   Thu Sep 3 14:57:28 2009 -0500

    Fix up I/O encoding handling so that IRB runs again

commit e19d52813a7a2ac59f71b74847e43330c5a468ca
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Sep 2 14:13:40 2009 -0500

    JRUBY-3942: [1.9] File.new should accept encoding options within the mode parameter and a hash with options as the third parameter (patch by David Calavera with some very minor tweakage by me)

commit 79ae9a9bdb990d7115922a08642be9da447b6247
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Sep 1 22:44:54 2009 +0200

    defaults IO encoding, merged with headius' patch
    
    Fixes JRUBY-3433: Encoding.default_internal and Encoding.default_external missing
    Part of work for JRUBY-3605: [1.9] IO.initialize missing option hash parsing
    
    Signed-off-by: Charles Oliver Nutter <headius@headius.com>

commit 4579aa25465574b20d32496ea6b78c36833a17b3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 25 02:11:05 2009 -0500

    Fix for JRUBY-3869: 'puts []' prints a newline

commit 4f2a6c0580c50b21d78e8819a1bc3c8eabc6da9e
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Aug 10 15:18:29 2009 -0500

    [19] File#read support for all but options hash

commit c13e8c3ac0b8ce7abfe8efd9e24df6d2f01564f6
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Aug 10 12:37:54 2009 -0500

    [19] Allow copy_stream to accept IO or string

commit 6dddaf4e671c9959559a0f604b181d69dd30aae3
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Aug 3 13:20:26 2009 +0200

    [1.8.7] IO#chars, IO#each_char

commit 9a863170863afa76bff3744d7b8a017890281b01
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Aug 3 13:12:42 2009 +0200

    [1.8.7] IO#getbyte

commit 2479ad4a127bdb7d68435d87bd309cc6aeed4b86
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Aug 3 13:10:17 2009 +0200

    [1.8.7] IO#bytes, IO#lines, IO.foreach

commit 8fece6cced262ad744aefc0115e065dff4db6ba8
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Aug 3 13:04:43 2009 +0200

    [1.8.7] IO#each, IO#each_byte, IO#each_line

commit 6ce486ad82bce8c4da158723f9d8450597335c82
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 10 01:15:01 2009 -0500

    Fix for JRUBY-3799: Bug in native timeout module causes hang when waiting on IO
    
    I'm not sure timeout ever actually interrupted sysread; the logic simply wasn't there, and we have not forcibly interrupted a target thread for a long time. The new change does two things: cache a selector, and use a select on read before doing sysread. This appears to make sysread neatly timeout-able. Other IO operations should follow.

commit fdd28b5834b2705f59cb6b8d26e4ef56e9359005
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jul 1 12:52:43 2009 -0500

    Fix for JRUBY-3778: clone of stderr and stdout not working

commit ff301166d9df24b8bbc88c97b7b0e60e5e507197
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri May 22 16:06:31 2009 -0500

    Make jruby-test-all run on Hudson again

commit 8e517f833a0da35be12bae24e3b9d342ac2bbda2
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri May 22 12:25:32 2009 -0500

    JRUBY-3686: io.fcntl can also accept one-arg version

commit 07e2f8bbfcfd57750cd1f7fb8cd61e2eaf3417af
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu May 21 18:07:56 2009 -0500

    Temporarily ignore a hash argument to File.read since we don't have that 1.9 feature yet.

commit efa166d75dbc2e2a8c5e1e4d6fbb80de08ac5aff
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed May 20 20:38:01 2009 -0500

    JRUBY-3680: closed stream error when using druby to copy a file

commit cbe056d421bfb45854a41861290e498d0b25ebbb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri May 15 23:57:22 2009 -0500

    Fix for JRUBY-3652: IO.popen drops first space between command and first argument

commit 27d72d7900aabc426fbf3ed58a8d84e55cd1c8bf
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri May 15 17:37:30 2009 -0500

    Make fcntl with FD_CLOEXEC not bomb + add F_SETFD as valid action

commit e385f4ab669347f977dabbcab30abea589263278
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 12 16:24:48 2009 -0500

    Fix fcntl error message to mention F_GETFL and NONBLOCK

commit 9e0ae82e52064c423a4b30f790c4ba6309f39d88
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 12 16:12:18 2009 -0500

    "Fix" IO#fcntl to support Constantine-defined Fcntl constants and add basic F_GETFL support.

commit 434b818193ceb63a288d4627f9745292be0f397b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon May 11 02:44:28 2009 -0500

    Fix for JRUBY-3483: Redirecting $stdout to an object blows up the stack
    
    As in MRI, I modified puts, putc, and print to only ever call 'write' on the default stdout object, rather than trying to call the same-named method. This needs to be added to RubySpec.

commit 1ec26a51c3580ff7447ddcc5550d9aa60e69fa9c
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Apr 28 16:54:19 2009 -0500

    Make --1.9 irb work

commit 65691e93e5d95602ab397a780130f47e17666df2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 15 19:12:45 2009 -0500

    Add a bunch of places to File/IO that should use to_path conversion under 1.9. Allows 1.9 mode to install gems.

commit 66b28d6e25993dac775867702563e32e7bc75b41
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 8 20:58:55 2009 -0500

    Migrate to having backref/lastline on DynamicScope again, with inspector changes to ensure the scope is available. Does not yet pass all tests.

commit 0c8b72d572bdd3a357d9574191630d9eeded423c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 3 22:57:26 2009 +0000

    Fix for JRUBY-3237: IO.popen dosn't support forward slashes in Windows (diffrent behaviour to MRI)
    
    Still need to integration the test in, so leaving it open for now.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9347 961051c9-f516-0410-bf72-c9f7e237a7b7

commit be5ec7b882a3bab083a88ac2b40188684aac697d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 24 02:16:59 2009 +0000

    Make spawn and popen-opened processes report a real pid when it's possible to dig it out of the java.lang.Process object. It's not foolproof, but it should be good enough for a lot of cases. Anything better will have to wait until we decide to switch completely to using native calls for process stuff. JRUBY-3437: pid-returning methods should make a best effort to get a real pid
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9289 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 49f6aa5090ec2ab2e8928ff2de1f9daab1dd9aff
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 20 01:14:11 2009 +0000

    Fix for JRUBY-3405: popen breaks input channel for IRB
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9249 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 82c0b9b8bc6395cb40263095bf6c3ee78e9c5c8c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 17 10:01:13 2009 +0000

    Fix for JRUBY-3071: Illegal seek error trying to read() from pipe
    
    Thanks again to Riley Lynch :)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9213 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 60f3d6628f5a79946c651d7e8dc41d9b5a11e518
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 17 06:18:27 2009 +0000

    Fix for JRUBY-1079: IO.sysopen not defined
    
    Thanks very much to Riley Lynch for the patch!
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9212 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 94392e17282ac564b9399b81d7a619ca20703137
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Feb 11 20:11:47 2009 +0000

    Fix all locations where we set channel blocking modes for select without proper re-setting protocol. Needs more cleanup, but fixes JRUBY-3017: DRb "premature header" error on JRuby client.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9087 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5b3ecffcc614fe3d55342ee6087aca9f8c3e5832
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 9 18:45:57 2009 +0000

    Partial fix for JRUBY-3384, only solves Readline.readline issues.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9075 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0289a81ae79484f711f254bb77fda5d58189e878
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 9 17:17:12 2009 +0000

    Robustify stream closing a bit in response to exceptions on JRUBY-2951 test script.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9071 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9b4bf419f7e9488fe35be77c3dbfe35e3827d0a2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Feb 8 23:01:01 2009 +0000

    More robustness to the runtime clearing in ChannelStream, so it should never cause an NPE even in odd cases.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9070 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b8cc375ce6cd4d8aa173f970c0b41e9d26d3f618
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Feb 8 22:52:19 2009 +0000

    Modify ChannelStream to be a bit less dependent on the runtime it aggregates (moving toward no dependence) and have it clear the reference on close. JRUBY-2933: Ruby runtimes are pinned to memory due to ChannelStream
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9069 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4cbffc0dbdb8e326a0ece1c0c70af274cd2c9b5e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Feb 8 07:18:53 2009 +0000

    When a process IO closes, make sure we destroy the process (and our process wrapper destroys the real process too). JRUBY-2804.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9062 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 98a2248099afd616a72c7ae1fc1a89f401e822f9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Feb 8 01:46:27 2009 +0000

    Fix a few definite Selector leaks and make a couple other places certain to close.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9060 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4d687865f7257a9a1957bcaaf7c66e2d19fc14c1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 26 07:44:34 2009 +0000

    Change ordering of selector closing and blocking-mode resetting to avoid channels still be registered when we try to change blocking. Should fix JRUBY-3329.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8893 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5d2a47821447887e4b234180bf8bac7ad66df3d8
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jan 6 17:12:34 2009 +0000

    JRUBY-3275: New ARGF spec failures (patch mostly by Joseph LaFata)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8611 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5f3c48ffcc13b6b42d5b22810d5ee0fde1fea83c
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jan 5 22:42:22 2009 +0000

    JRUBY-3276: New IO#readpartial and IO#seek spec failures (initial patch from coderrr)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8606 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c3a96bb2e545b7066c6a2f847eecf91966681ab3
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Dec 17 19:23:22 2008 +0000

    JRUBY-3204: IO.read and IO.readlines do not take a block (patch by John Fremlin). Remove unused imports
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8385 961051c9-f516-0410-bf72-c9f7e237a7b7

commit df57693641da63f6c161b15db1df96fc9b14d6ac
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Nov 30 16:34:40 2008 +0000

    Fix for JRUBY-3198: String#slice! not working correctly when used with string read from file. String#each was to blame as it should mark self as shared.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8213 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3a1517d77640203cdbe098c55ce541115ce86f8b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 26 15:01:25 2008 +0000

    Additional tweak for JRUBY-3185 to use a ReferenceQueue for cleaning.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8147 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cc20330d413aca283247d0bf2910e696b46dad8a
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Nov 25 20:08:34 2008 +0000

    JRUBY-3185: Ruby.descriptors was leaking endless WeakReferences (with Integer key).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8135 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7bbedee05b951db8dfcad7c92470b4fc10c2b36e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Nov 16 23:57:16 2008 +0000

    Remove all remaining references/dependencies on MethodIndex's int indicies and related fields.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8081 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 043df6006728686a903b8f20d201ca9821f90620
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 13 03:41:00 2008 +0000

    More tags to get ant spec running on Mac Java 5. Also turned on specdoc output to track where the server freezes. Also a minor modification to RubyIO.select_static to hopefully make it more robust if keys get cancelled as a result of something closing immediately before the select happens.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8064 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 68d6bcd0404ace09cf12348d0634ef7ada9e2da5
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Nov 12 01:30:07 2008 +0000

    Use newEmptyString
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8056 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 28cedab8871bfee2c60eb7e6b958113f4d47f988
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Sat Sep 27 02:57:02 2008 +0000

    Fix JRUBY-3019 by resetting the length of the ByteList in the passed in string to 0.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7789 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 282588e7653e39adb848592554804acd0bea59cd
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Wed Sep 24 15:45:12 2008 +0000

    Fix JRUBY-3008 by not flushing putc after every char.  This also allows BadDescriptorExceptions to be propagated from IO#putc - the failing tests were expecting putc to be buffered.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7776 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 31d26f76b6c69adaf7384b13f1c0607057e5af5d
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Wed Sep 24 13:53:51 2008 +0000

    Fix JRUBY-3009.  Convert IOException into IOError for IO#putc.  BadDescriptorException has to be ignored, since thats what is expected.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7775 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 666dcb838fb8ee24e0c7e51da0bc1b7cb2b31e00
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Tue Sep 23 11:24:22 2008 +0000

    Fix JRUBY-2281 by making IO#write_nonblock similar to syswrite internally.
    
    This doesn't actually make it non-blocking, but neither was the previous code that called write().  This code will just attempt a single write, but doesn't actually ensure the write attempt won't block.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7763 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 45ff75add09e9cb39a7d45cae116abd11d349c9d
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Mon Sep 22 13:01:45 2008 +0000

    Fix for JRUBY-2998.  Use OpenFile#getWriteStream for IO#putc.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7756 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e381d2dd198facd78473a0f0d6d2185bd5051223
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Sep 20 22:16:43 2008 +0000

    Fix IO#each and IO#eachline bindings.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7742 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1786a6764c37b89c028ebaeee171aa083ba962c0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Sep 20 20:53:36 2008 +0000

    Enumeratorize 1.9 IO methods.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7734 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ff48bd9bb7b423026efa572c126cc3d076876cb2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Sep 13 08:35:25 2008 +0000

    Add support for Open3.popen3, which merb's "jruby" spec runner uses. I've just added it to IO for now; I feel dirty about it but I'm too tired to put it into an extension lib. We probably should.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7690 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 132d0a520b0608129233d3ba0baeb8df2f426a0c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 8 10:00:02 2008 +0000

    More propagating the effects of having caller passed to visibility-checking logic; getFrameSelf() almost completely eliminated.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7657 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 24a1c73de4fdd011d5d9a5cd92bc5b23e2869ba5
Author: MenTaLguY <mental@rydia.net>
Date:   Fri Aug 1 18:35:07 2008 +0000

    fix JRUBY-2869, and partially address JRUBY-891
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7345 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cdf5c767414583536fa03fc24f9502394a8b8855
Author: MenTaLguY <mental@rydia.net>
Date:   Fri Aug 1 17:46:44 2008 +0000

    partially fix JRUBY-2869
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7344 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e594dcc19b52527cbe30f87da062a57d85a2c500
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 18 00:21:43 2008 +0000

    Add a one-liner newIO method to return an IO instance from a given runtime and channel.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7219 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9709fc2ea2889bef168adbcd3acbfb6796113275
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jul 16 03:54:19 2008 +0000

    Fix for JRUBY-2615, interactive subprocess not acting interactive.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7182 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 593f867f0bd710c800ecd8f072ff208f1951bef3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jul 15 00:45:17 2008 +0000

    Fix for JRUBY-2644, TCPServer#close not waking threads waiting on TCPServer#accept.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7171 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ae65e95de2d6d3df5e1ca0ca4d01889cdf72e13e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jul 13 04:50:39 2008 +0000

    Fix for JRUBY-2625, pending a set of test cases or specs.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7153 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6a88575e9b2997fab28fcf7178d259db2f934f1e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jul 12 20:47:05 2008 +0000

    Arity-split IO#read, IO::read, and IO#seek.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7148 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1d615bc75163621172997e3258476157c16bf27
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jul 12 18:18:08 2008 +0000

    Fixes for EOF logic in ChannelStream for JRUBY-2386.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7147 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 42785545a2e4ac08e50672cf507b1c4716a84b20
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Fri Jul 11 14:26:21 2008 +0000

    - JRUBY-2769: I/O Error when using reliable-message library
    - JRUBY-2770: IO#sysseek after IO#sysread raises IOError
    
    One rubyspec failure is also resolved.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7141 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 72975c6c9467ac11677b86f3886e555911e50299
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Jul 9 00:34:32 2008 +0000

    lots of RO.getRuntime removal
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7131 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b0693ba5ab767ba88a1b879c463a2ba52c3d788e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 7 05:40:46 2008 +0000

    Probable fix for JRUBY-2625, read_nonblock behaving like a blocking read.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7115 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fb75b640ab02115ac6bb58781d670ee9bb41fd01
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jun 30 09:43:56 2008 +0000

    Add more smarts to "IOError from IOException" to produce appropriate errno exceptions for CONNRESET, PIPE. Probably others I'm missing. Damn you Java and your one-IOException-to-rule-them-all.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7052 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e382475a248d01631d6723a79fc612e38dafe465
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jun 30 09:21:34 2008 +0000

    Various modifications, cleanups in the process of investigating JRUBY-2719, but still broken.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7051 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4ac0a85a6ee893823859a7f38870ca93120a8a9c
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Fri Jun 27 05:33:46 2008 +0000

    Fixed new rubyspec failure for IO#putc.
    
    * "IO#putc writes the first byte of an object's string representation"
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7037 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c9f8659dd2da2e5325f61ccf27f819e6d2c671a3
Author: unknown <unknown@localhost>
Date:   Sat Jun 21 18:09:13 2008 +0000

    JRUBY-2681: Multiple IO#readlines rubyspec failures.
    
    All IO#readlines and IO.readlines now pass.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7008 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7d500602a454b62c63dc82c291a29589af9f481b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jun 21 13:06:42 2008 +0000

    Wayne Meissner's fixes/improvements for getline performance. JRUBY-2689.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7006 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 63cad817df33a10911919839c531edd059d758f3
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Jun 11 15:43:28 2008 +0000

    JRUBY-2633: Kernel#select with non-array argument crashes JRuby.
    
    Regression tests added to the rubyspecs.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6934 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 365a4ba636352b31604fb16060921f598486b9dc
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Jun 11 09:58:09 2008 +0000

    JRUBY-2631: jruby's select() doesn't properly handle objects that implement to_io.
    
    Regression tests added to rubyspecs.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6931 961051c9-f516-0410-bf72-c9f7e237a7b7

commit afe466dba594dd645d6e98561c4e56d5523e4d88
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Jun 11 08:43:12 2008 +0000

    IO#readpartial fixes:
    - JRUBY-2632: IO#readpartial doesn't handle unget char
                  (Heavily reworked patch by Kevin Ballard)
    
    - JRUBY-2635: IO#readpartial crashes when negative argument is specified
    
    - JRUBY-2636: IO#readpartial doesn't honor maxlength parameter and
                  always returns the whole buffer content
    
    - IO#readpartial raises NotImplementedError on closed streams
    
    Regression tests for all cases added to the rubyspecs.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6930 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bd7b8d7863fdc86582030020780651e869e0b1c9
Author: Nick Sieger <nick@nicksieger.com>
Date:   Tue May 27 19:15:59 2008 +0000

    Deprecating checkClosed/checkInitialized potential dead code in RubyIO
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6834 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fcf6571e1d4bc77b788f315baee595234170a070
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Fri May 16 20:55:47 2008 +0000

    JRUBY-2531: IO#seek= with non-fixnum vaule breaks JRuby (and rubyspec
    run).
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6718 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6977b68ccb65e1b1c1f177d7364edd63e160c0c7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu May 8 17:25:08 2008 +0000

    More RubyString from CharSequence construction cleanup and deprecations.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6642 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b86fd4439c7cac59d06dc332b20a2342b012c87e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Apr 25 23:53:23 2008 +0000

    Add annotation slots for caller-frame "reads" and "writes" to start gathering more information about what parts of the frame will actually be neede. lastline sets and gets are annotated now, backref is next, then visibility and others. By having this information we'll get a complete picture of which methods require a frame and which don't.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6565 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 714843dd03c9622c4f296c942540920bc81033b8
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Apr 18 19:39:45 2008 +0000

    JRUBY-2405: Zlib::GzipFile.wrap has bad signature
    JRUBY-2406: StringIO.new "", "r+" (rb+) is not open for writing
    JRUBY-2407: StringIO.new does not accept MODE constants
    
    wrap is used by current rubygems libraries
    Lots o mode changes to StringIO
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6537 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 922d900d72ceb212731b26f5e42fce9bfecadc39
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Mar 30 15:00:29 2008 +0000

    Ugh, fix indentation.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6372 961051c9-f516-0410-bf72-c9f7e237a7b7

commit de0cadd7410d1672d7937f281ef80091618ddce7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Mar 30 14:59:42 2008 +0000

    Add Ruby 1.9's IO.copy_stream, in a very primitive and preliminary form.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6371 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f8a029af815ecf044f5268707b5855b85c738db0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 20 22:14:18 2008 +0000

    First round of logic to pregenerate method binding code, to avoid walking methods and annotations at startup.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6298 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 493c43fb8eac0a22425d375b15e8663d4c0ce74a
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Mar 19 12:20:01 2008 +0000

    Make creation of RI much smarter and add basic type tags to loads of places.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6289 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4ef3ade96618ba4ac2356cb462a1e1bb8f6a4da4
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Mar 19 12:19:27 2008 +0000

    Revert "Fix for the whole shell launcher slowness problem in Rails console. Of course, this doesn't actually work, since the test cases doesn't run. Well. Can't have all the world"
    
    This reverts commit 43685eda5e40f215ad3cd10d2efe19edc46363d6.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6288 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5d622c96307f960abe8839266a74c276bd19252a
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Mar 19 12:18:35 2008 +0000

    Fix for the whole shell launcher slowness problem in Rails console. Of course, this doesn't actually work, since the test cases doesn't run. Well. Can't have all the world
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6284 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 23d786f79b699f365026a71f8807c806399311f3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 17 05:33:23 2008 +0000

    Additional fixes to get reopen, popen, and seeking working correctly with various types of streams.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6233 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 89b83188797732a9c5705780e5351c9dc2193dd0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Mar 16 23:01:35 2008 +0000

    Modify popen launching to spin up a StreamPumper for the subprocess's output when output is not being read by caller.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6226 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 211e835e0cbddbf38aab6ed3d1838988ab6f2e8c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Mar 16 23:01:28 2008 +0000

    Remove state from ShellLauncher, make all its methods static; not really any reason for it to be stateful.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6224 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 14dd5a97d51a991d8b99adffbc2549b9aa7c5b88
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Sat Mar 15 20:22:02 2008 +0000

    JRUBY-2280: IO#write_nonblock should always check whether the io is
    writable or not.
    
    This fixes one rubyspec failure.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6201 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b48885339b6d03e7b0993f00dbc055401ac756c3
Author: Nick Sieger <nick@nicksieger.com>
Date:   Sat Mar 8 00:26:01 2008 +0000

    Minor import cleanup
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6148 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 852d904134ad970a20497fdcc5d752dd4ae49766
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Mar 7 22:04:54 2008 +0000

    The RC3 Surprise!
    
    Allow annotation defined ruby methods to optionally specify ThreadContext as first parameter
    Convert easiest and most common methods to accept ThreadContext when method or child method can use context
    
    These changes give about 15% improvement on petstore bench and about 10% in ar-bench.  In ar-bench getCurrentContext calls go from 14 million down to 2 million.  The remaining calls largely can be removed but they were much more invasive.
    
    IRubyObject op_eqq and op_equal both not have ThreadContext consumer, but we could see no use of this in any extensions and figured it worth the trouble of converting.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6143 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9858a7eb090403513ba914348e3e09228c3610c2
Author: Nick Sieger <nick@nicksieger.com>
Date:   Fri Mar 7 19:45:42 2008 +0000

    - Get unbuffered IO streams from process if possible for IO.popen
    - Encapsulate reflection hackage in FieldAccess
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6141 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a2bf31bcfa0a44b057e91b493e394b3ae23c9395
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Mar 7 17:00:00 2008 +0000

    Whoopsie, logic is a good thing to have sometimes.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6139 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e85e442e2fc4a3730c28c91f5bcef8afb62193ff
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Mar 7 16:53:19 2008 +0000

    Fix for JRUBY-2164. Add appropriate waitReadable and waitWritable to important places.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6138 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 556b6f2bf71eac1c0d6a1d9a5a59503e74173078
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Mar 7 13:52:20 2008 +0000

    Make sure syncing gets set on OpenFile too
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6135 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6967d56b0e28dfcd94697db83df494cfd8c6fa7e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 25 04:06:31 2008 +0000

    Various fixes to the "null channel" for JRUBY-2159. Tests coming from me or Vladimir.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6023 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6b52e5a72d88e3fb3a56c5d08ce759345b6563ba
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Feb 24 15:42:54 2008 +0000

    Erg, fix a compilation problem I introduced. Damn you javac for not picking up related files that should be recompiled!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6014 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9a0646e6627e0b89c1aea029572df30e5f734535
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Feb 20 10:54:48 2008 +0000

    JRUBY-2144: IO.read should allow nil for second and third arguments.
    
    Regression tests are added to rubyspecs.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5976 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d41564a5208b9b33d268cef43be31693849a064c
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Feb 12 19:17:06 2008 +0000

    JRUBY-2075: IO#gets failures with latest rubyspecs (tainting, lineno, $.)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5920 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3c58a8a75d242208c063fb4d9c850f803c98b667
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Mon Feb 11 20:58:02 2008 +0000

    Fixed regression in JRUBY-1923: STDIN not working under Kernel.system,
    after IO reorg.
    
    Also, added few unit tests.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5909 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 03f8a3762aaa3dd465552cd42685e49bfbb020eb
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Feb 9 13:54:35 2008 +0000

    Fix for JRUBY-1047, add IO#for_fd alias
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5882 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 506f5285ff548e33cc30f1140c1891174440bdcc
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Feb 6 19:16:50 2008 +0000

    IO#popen("-") should raise NotImplementedError for now.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5849 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f0b171b01d8866da9131699d21ef5d40252f58ac
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Feb 6 17:28:45 2008 +0000

    JRUBY-2077: File#lineno= breaks JRuby if non-integer argument supplied.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5846 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4ad8f70a857dca8c74b9fc63b085a8e0b828a863
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Feb 6 15:04:41 2008 +0000

    Improved fix for JRUBY-2073: IO#foreach failures and crashes with rubyspecs.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5845 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d89e731ef01c30903d75ef31e613c64f4aa0d4fc
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Feb 6 12:58:30 2008 +0000

    JRUBY-2073: IO#foreach failures and crashes with rubyspecs.
    
    - yields a single string with entire content when the separator is an empty string
    - can handle non-ASCII data as separator
    - raises TypeError if the first parameter is nil
    - treats second nil parameter as an empty string separator
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5844 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 173b13e31444bd0f426fee14a584610e7bb7eb57
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Feb 6 09:57:32 2008 +0000

    JRUBY-2070: IO#syswrite can't write non-string objects.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5842 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4f951a36efdfec60a3dc58f1cb862b4eb6cc54fe
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Feb 6 08:53:48 2008 +0000

    More spec fixes:
    - ungetc should clear EOF state
    - ungetc should ceck for RBUF (can't ungetc unless you've just read)
    - syswrite should use to_s to coerce argument
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5841 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c884a77cdd92a3557cbe8a1a86584096403d98a0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Feb 6 07:59:34 2008 +0000

    Make IO/File with a block invoke 'close' rather than calling RubyIO.close directly. Fixes two File#open spec failures.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5839 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8a548d6aaf3c54261a487dd212e69c05ef2cb45e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Feb 6 05:32:37 2008 +0000

    Fix for rails+mongrel console not tailing the log correctly; File::APPEND mode was not seeking to end of file on each write, as per open(2) semantics. Fixes a spec as well, so no test included.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5838 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 30a92af357427cefeade83548ca764dc5f642047
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 5 21:43:29 2008 +0000

    Fix NUL: files everywhere; had some reversed logic in the flip from /dev/null to NUL:.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5834 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 44eb51d95e7c1b59e6fdaa9f4fbd16abaf479705
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Feb 5 19:02:03 2008 +0000

    IO#open with block should swallow StandardErrors during close.
    This will fix some of the new rubyspecs.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5831 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bcd844c741207807c249b2fee1217074d93a4687
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Feb 5 19:01:52 2008 +0000

    File#stat and IO#stat should raise IOErorr on closed streams.
    This fixes two rubyspec failures.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5830 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 66b024fedbb2ee32316ccd9de8387931d07993ec
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 5 05:57:53 2008 +0000

    Merging the new IO implementation to trunk to give it appropriate burn-in time. Give it a go, friends!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5821 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2b1a005a405839ca4eb268288816294e88f20a2b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Feb 3 18:37:14 2008 +0000

    JRUBY-2062: Add ids and convenient data to SyntaxException and IRubyWarning interface to make their life easier
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5806 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 483584e681b628c15cb704e8c450e7dec07628bc
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Sun Jan 27 19:29:28 2008 +0000

    JRUBY-2045: IO#write should not really check if IO is writable if
    nothing to write (e.g. empty string).
    
    Rubyspec failure is fixed.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5761 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0aac56e7a485f544f5c427f75e595e20007b542b
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Sun Jan 27 18:55:03 2008 +0000

    JRUBY-2044: IO#write breaks JRuby when writing object with special
    to_s implementation.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5760 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b6112c23fc3841e6f126872cb6f05b3f7ad3b7a2
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Fri Jan 25 13:33:38 2008 +0000

    JRUBY-2038: IO#seek/pos=, StringIO#seek with non-Fixnum args break JRuby.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5730 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bec7f5528ee9d359999f68fe4e1f5f0cd4d466ba
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jan 25 00:48:18 2008 +0000

    Refactoring of IOHandler: IOHandler -> Stream, IOHandlerNioBuffered -> ChannelStream, bunch of methods renamed to their libc equivalents, some unused methods removed from Stream interface
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5719 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 50bf9b76c2eb763353d58a6618df4b5cda969074
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 24 00:34:05 2008 +0000

    Nuke the old IOHandlerNIO and all references to it. Fare thee well!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5708 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 961bf90f1f6075a2060dd18a663028af4831ab00
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Jan 23 17:20:14 2008 +0000

    IO#new should warn if the block is given.
    
    This fixes one rubyspec failure for IO#new.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5703 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e4f2a25ca63b4090d35dc91d5b8a2545c4b78959
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Jan 23 14:35:29 2008 +0000

    JRUBY-2024: IO#open, IO#popen, File#open with block should
    not raise error when io is closed inside the block.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5702 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0c2715180a28059fac29a49a6c4cf22033c1ea71
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Jan 22 22:31:22 2008 +0000

    IO#read should not break with long Java exception when
    invoked on closed IO.
    
    One-liner, just added checkReadable() call.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5696 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 718c232e75392a60dcd0c13d0f12ee5f2c5cbcb0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 22 19:23:46 2008 +0000

    Rename DescriptorLike to ChannelDescriptor.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5692 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3424c72ad52d098475eda800620f435d6cc272a2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 22 08:58:09 2008 +0000

    Fix STDIO streams to open with correct modes (mostly for stderr/stdout, which should open with APPEND)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5688 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 73f7a906d330bd84ec3d5c2350a05b0e9523769c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 22 08:02:12 2008 +0000

    I have seen the promised land. Refactored all IO into a single IO handler based on the new "DescriptorLike" abstraction (name pending a highly likely change). There's still some branching in the IOHandler methods for files versus non-file streams to clean up, but it's at least all in one place. Had to disable one regressed test for a -1/255 byte in a pipe, but otherwise everything is passing. and Rails tarts up and even prints color logging to the console now, something it's never done before. go figure.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5687 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 50246ccd2f15c589edc4086312a8c5c745cc11bd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 21 21:43:04 2008 +0000

    Repairs to RubyIO reopen logic to ensure fileno is preserved; also some renaming of isSync variable in IOHandler to be less ugly.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5686 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 747826655f41afe31943b547fcf7a004ad5b09e3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 21 20:18:39 2008 +0000

    Fix for NullWritableChannel (used for /dev/null and friends): it wasn't advancing position while pretending to write.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5685 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 892787ae3c41a7c4f2612ad61fa8c61b6191239e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 21 11:58:58 2008 +0000

    Based on some studying of C source for IO#initialize_copy and IO#reopen (for an fd) this commit tries to modify our logic to more closely map to Ruby's. Major missing pieces include:
    - Ruby's separate handling of an OpenFile struct, FILE* struct, and file descriptor, which map roughly to RubyIO.OpenFile (new in this commit), IOHandler, and Channel
    - Flushing logic for incoming and current streams
    - Construction of new IOHandlers to wrap existing channels
    What's largely missing from all this logic, and what would fill in the remaining pieces, would be a way for us to clone Channels in the same way Ruby can dup or dup2 file descriptors. This missing piece means we can't easily avoid closing channels still in use and can't manage channel position in two separate places.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5681 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2fa81574ffeaf58d286a02c797146705b0d8de12
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 19 20:03:31 2008 +0000

    JRUBY-1896: Missing method: IO#stat
    JRUBY-2000: IO#tty? returns false for "/dev/tty"
    Fixed error in build.xml for all specs
    Fixes provided script of JRUBY-1608, but the issues main description
    
    IO/File still has issue that fileno is not file descriptor.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5668 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9e049bca88d3abc896ea4cd309948f407a9719eb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 19 10:25:08 2008 +0000

    Make IO#read buffered for all other cases (File was done yesterday).
    Mild hack: set any stream that becomes stdout/stderr to be sync, since ttys are not fully buffered in C/MRI, but we can't (currently) determine if a given stream corresponds to a tty (perhaps out instanceof PrintWriter could be an indication?
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5665 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6b3bc1e7959bb1dcb45cdf21166b7c771d5d6eb5
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 19 01:34:50 2008 +0000

    Add to posix only (for the moment) the ability to acquire real file descriptor for a file.
    Add isatty to posix (patch by teferi)
    Fix embarrassing variable aliasing of fileno in IO and File
    
    These will be hooked up soon pending some decisions about fileno and file descriptors
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5662 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 64ff47702bc6289f336044111170da99b7b5e896
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jan 18 01:55:38 2008 +0000

    Phase 2 of the big IO refactoring. Most IOHandler impls have been deleted. Only NIO-based handlers remain, using Channels.newChannel where only streams are available. Had to temporarily disable a test in higher_javasupport for unknown reasons.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5652 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bb65f95221fa406c8a3b3aacdf9580fee36e06b2
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Jan 17 14:55:49 2008 +0000

    Fix for JRUBY-1893, rename isatty? to isatty.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5645 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2b23e82e951bffaff2ab1f4291a9f215365c0047
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Jan 17 13:30:14 2008 +0000

    Fix for JRUBY-1987. No tests since I couldn't come up with a good way to fix this behavior.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5641 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9ca8281855ad7ca880272c52ae58d2345370d2ad
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 17 08:23:29 2008 +0000

    Eliminate IOHandlerJavaIO through copy/paste duplication of its common code. Divide and conquer; the children will now be refactored independently, and commonality can be pulled out as part of that process.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5635 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b3d416662a9b358da11a63a1900dd8a917340322
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 12 23:24:11 2008 +0000

    Multiple cleanups:
    * Remove most Arity.checkArgumentCount calls since they're handled by generated method handles now
    * Add javadoc comments to MethodFactory impls and their public methods.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5576 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 966a57b0d1fc1fcf95dcbcbdbe3b5d38ef759363
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Sat Jan 12 22:30:08 2008 +0000

    JRUBY-1910: IO#reopen incorrectly handles self as an argument.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5567 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 06c31d008b3cbf74cf7ae78e127d231aa5ee867e
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Sat Jan 12 22:29:57 2008 +0000

    JRUBY-1909: IO#reopen should be able to handle argument of arbitrary
    type if it responds to "to_io".
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5566 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c83bab77a22f058b3a25bf1c0f09d8c33c15305
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jan 4 20:20:47 2008 +0000

    Fix for JRUBY-1885, reopening on a filename with a closed file should succeed.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5499 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a694709e87e269be436ed1d176a688712beb9d5d
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jan 1 05:09:53 2008 +0000

    Remove unused callbackfactorys
    Add partial impl of Etc with some cooler pieces of it still commented
    Remove many warnings
    Some generics to lessen warnings
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5456 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3714b04ba6aa04cb4039fb30d8b4ac84bf7f0c7a
Author: Nick Sieger <nick@nicksieger.com>
Date:   Thu Dec 20 21:16:37 2007 +0000

    JRUBY-1304: Return value from block in IO.popen (VVSiz)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5319 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 017c7839059a6881fdc1e4fe510b1a102c188626
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Dec 5 16:29:46 2007 +0000

    JRUBY-1663: IO.each_line incorrectly reads empty lines (patch by Vladimir Sizikov)
    JRUBY-1664: IO.read(1) after ungetc always returns nil (patch by Vladimir Sizikov)
    JRUBY-1669: IO.puts doesn't follow the specification (patch by Vladimir Sizikov)
    
    Above were Rubinius spec failures
    
    Removed extra unused processing of seperator from each_line (me)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5168 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bcd81d3759665f16730cb2ad1d1ac513cf02db1f
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Nov 29 13:00:32 2007 +0000

    Fix for JRUBY-1626, patch by Vladimir Sizikov
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5102 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 89d6138f7eed86f2d3153fc6700f5824fa9c07dc
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Nov 26 21:45:20 2007 +0000

    JRUBY-1617: RubyZip Zip::ZipFile#read raises TypeError under JRuby; does not do so under MRI (patch by David Yip)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5060 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 82f6a3c7e67776361c212b11d394c348e6d0b89c
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Nov 26 21:03:11 2007 +0000

    JRUBY-1619: File.open(1) throws TypeError (patch by Vladimir Sizikov)
    
    [tested by latest rubinius specs]
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5057 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ff120491b21359d374e6e50a98e8950f963f49cb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 26 06:36:34 2007 +0000

    Remove two more IRubyObject methods:
    - getNativeTypeIndex moved to a separate interface; former uses now cast to that interface, rather than requiring all IRubyObject instances to specify a native type index directly. Marshalling should probably be refactored to not use this at all (and instead polymorphically dispatch to a method on the target object, similar to how it used to be).
    - isKindOf moved to RubyModule as isInstance and all references updated to use that version. This maps better to the type being in charge of what is or is not an instance, and mimics Java reflection API (Class#isInstance).
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5045 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3d2df6d93e4d2171fd5eb2d5f6c93bb3b652424d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 5 21:51:55 2007 +0000

    Rewrite of IOHandlerSeekable.gets to better utilize NIO and buffers.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4861 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2ffd065c49b42f11b990ec4e652cc3eb913a5091
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 30 22:15:36 2007 +0000

    Fix and test for JRUBY-1049, missing IO.open.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4813 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a2608906f5bd8b015b3824e867a733f087659a33
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 30 06:46:53 2007 +0000

    Partial fix for JRUBY-1048, at least eliminate the NullPointerException.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4788 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 627de18d06c15c8ec6d241015b64d95c856b3a51
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Oct 26 16:07:39 2007 +0000

    Fix for JRUBY-1459 and JRUBY-1460, fixes to Sockets, more compatibility in error messages, and DON'T swallow all exceptions on write().
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4743 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bad1f67887904cd217bbf0239cc1a7354598e89e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Oct 20 01:07:29 2007 +0000

    Fixes for JRUBY-1409, only alias the methods that MRI does; rebind others.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4631 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1f952f13b26bacb5e466763c379f7e4b3510a2b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Oct 20 00:12:59 2007 +0000

    Fix for JRUBY-1412, register inspecting when puts'ing recursive structures too.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4630 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9bc9825436ea08670905a6e2a06d760a97b71d70
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 19 20:52:01 2007 +0000

    Migrate JRubyMethod annotation to use String[] for names and aliases. Thanks Brad C from my blog.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4623 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 95c346df5368a3f5f06fa9d14022efb85eaa6809
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Mon Oct 15 07:45:22 2007 +0000

    Vars have landed. Does not include concurrent SymbolTable (will follow in the next day or so). Also need multi-threaded unit tests, work in progress.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4588 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0b7a2dae2ec0baa531f313568ffc9b7382f89592
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 12 01:50:08 2007 +0000

    Migrate annotation-based method binding to generate DynamicMethod implementations directly, with arity checking built-in
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4575 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 43c9557c13e7178dd1151de06e7f167d854c68d7
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Oct 11 16:53:02 2007 +0000

    "IO.each" lost during annotation conversion (patch by Peter Brant)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4569 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8557c622ca2f2cb7e0625bd6137241df0daed496
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 9 22:08:32 2007 +0000

    Migrate RubyJRuby to annotation bindings, and fix an issue with module functions being defined on Object
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4539 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5ac1439ead99b938b4f23543a26222c22bd69b87
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 9 05:30:52 2007 +0000

    Migrate GC and IO to annotation binding
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4532 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3e88cfab0d224fb9efa8d18336993e2c78ce495e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Sep 27 16:40:57 2007 +0000

    - Identified and extracted construction paths for class/module/singleton/IncludedModuleWrapper, now there's no unnecessary null checks or assignments in their constructors (they take very few arguments so even asserts are not needed).
    Each of those constructors have a comment what is it the responsible for, also, two RubyClass.newClass() and two RubyModule.newModule() methods have been extracted.
    - Fixed logic that sets the parent/constant for Modules, now matches MRI (only setConstant/getConstantAt are used here).
    - RubyClass rewritten, special attention has been put on allocation logic, now Class.new(...) doesn't fire a separate allocator class. (btw, logic of "class B < A;end" and "Class.new(A)" must be split since in second case superclass and allocator are not known until initialize is called). Class/Object allocation implementation mimics MRI's weirdest quirks in behavior, is _much_ simpler that it has been and much faster. This also allowed creation of generalized clone/dup implementations matching MRI. (only our special ivars need a care here).
    - Rewritten bootstrapping of Object/Class/Module.
    - Core classes (except Exception hierarchy, they should also be in future) are now cached in runtime (MRI caches them in static VALUE's like rb_cObject) Ruby.getClass(String), Ruby.getModule(String) and Ruby.getClassFromPath(String) should be used only by either interpreter or compiler and when the class name is not known at compile time.
    - Fixed and simplified nodes: classNode, moduleNode, sclassNode, defsNode. Compiler has been synchronized here as well.
    - No more __attached__ as ivar, it is now MetaClass field (which means lazy ivars for singletons). Compiler also updated.
    - added and dosumented isModule() to IRubyObject (isClass(), isSintleton() documented).
    - Fixed test_autoload test (Object.class_eval do;autoload :SomeClass, 'somefile';class SomeClass; end;end) should raise LoadError, now matches MRI.
    
    - Fixed a number of minor bugs:
       1.instance_eval, was creating a metaclass for Fixnum instances (also affected Symbol/FalseClass/TrueClass/NilClass)
       marshaler objects were kept in singleton classes
       Range.inspect, was modifying the begin field (when it was a String)
       Many bulletproofings in Marshal/Unmarshal (like unmarshaling an instance of nonexistant class), TypeErrors/ArgumentErrors matching MRI.
       Fiber.new in 1.9, doesn't call #initialize method by funcall, fixed
       number of method arity fixes and many methods are made fast now
       fixed initialize/initialize_copy logic, further simplification, no ClassCastExceptions possible now
       Fixed defineClass(under)/defineModule(under) logic
       bulletproofed cases such: class A;end;module A;end
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4409 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bec10e7bff4d1d70eb88efe7653d4dba75efc830
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Aug 29 21:05:52 2007 +0000

    Fix and simplify conversion semantics. Remove a few unnecessary callMethod calls.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4232 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 11130fcb710101b9db362219a4949393ef0f2b82
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Aug 23 14:20:03 2007 +0000

    Simple IO Refactoring:
    - ByteList.append(InputStream, length) for encapsulation (also one impl for all inputstream consumers)
    - Fix old writeable -> writable typo
    - Remove some dead code
    
    Some more to come
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4198 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3eee7681b5e2ca9e18ca65304791eef82bde9d12
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Aug 7 19:02:21 2007 +0000

    Add Java based kind_of? for some of our Java based implementations
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4120 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fc17861832a4f30aecf7840dc1dcee181618f93f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 7 03:10:35 2007 +0000

    Move backref and lastline into Frame, since there's only ever one copy of them in a given frame. This also will make it possible to turn on stack-based variable AST inspection very soon.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4107 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 188f4bd515fc3d1de027d10240257aba506be118
Author: Nick Sieger <nick@nicksieger.com>
Date:   Thu Jul 26 05:50:34 2007 +0000

    JRUBY-1230: Fix for ZipFile during IO (Nicolas Modrzyk)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4059 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d96ebd0845daab9b389c81c3967ca4b61f564df7
Author: Nick Sieger <nick@nicksieger.com>
Date:   Thu Jul 26 05:18:40 2007 +0000

    JRUBY-1108: improved IO EOF error-handling (Nicolas Modrzyk)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4058 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3855b2a7b32d013fbc4dbc8cdc3b4c6e9a9c8f0d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jul 1 18:59:57 2007 +0000

    Committing brand new dynamic STI generator; it's passing all tests, installs rake, runs rails. Any bugs, we'll find them in place.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3935 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0dcf62ea19a7ec0af6d306393e4f3f3eb9c82625
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jun 23 21:40:54 2007 +0000

    Fix for JRUBY-1165: Missing "throw" causing native ClassCastException and a small fix for File#sysread to use Arity.checkArgumentCount instead of Arity#scanArgs
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3911 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 98ccd2c176ae5bb98a70a32b73e0b01a2fed981e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jun 18 22:48:44 2007 +0000

    Support for second, MRI's undocumented IO#sysread argument. Also, IO#sysread shouldn't raise EOFError when called with zero.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3898 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 439426a1150ea672acc2abb5836900ce25233808
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jun 18 21:47:30 2007 +0000

    IO#sysread should throw ArgumentError on negative size
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3897 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 543fefde7c49af39d131725400aaaed17775a763
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jun 18 18:27:43 2007 +0000

    Fixes for JRUBY-1088: IO#each should only take 1 argument
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3893 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9be0f3a9dbc278250255e8fbb5371d8e4e201232
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jun 18 17:58:38 2007 +0000

    Fix for JRUBY-1078: IO.read with negative length raises NativeException
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3892 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bab5a32c3c4789ec21f48b7521d36bab3cedb9e3
Author: Nick Sieger <nick@nicksieger.com>
Date:   Thu May 31 03:04:54 2007 +0000

    JRUBY-933: add barely functioning io/wait.  At least stomp seems to work with it!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3780 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f9f1c8c04d8aae6dc3c71d682120e00714330285
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed May 30 21:50:07 2007 +0000

    Fixes for JRUBY-539, makes read(0) not block as per correct behavior.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3772 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 691faf1eb6ff84271e55191c73623fed6cf527e0
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Apr 26 20:03:42 2007 +0000

    JRUBY-572: Drb Client hangs on second call (by Jonathan Paisley)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3567 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bac69eda717fe181084e119979408a1e8ad389f8
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Apr 16 22:38:58 2007 +0000

    Remove remaining metaclass definitions...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3480 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6c097f587fdc91d62cbb85ae9dd9abe2de7bb76f
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Apr 16 11:05:33 2007 +0000

    Even more STI
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3471 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 958ad3b9bfc5cae3a21185dec303ac7af7d77482
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 7 02:59:27 2007 +0000

    Expanding STI to a few more methods, and doing a sweep of all "direct" callers to make them use STI.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3406 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8c2bc8cfe9f4bcaa23b9e8544c55d7f9dc6c54b1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 29 07:08:05 2007 +0000

    More IRubyObject cleanup; removed initCopy, moved setFrozen around, moved checkArgumentCount to Arity
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3322 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 522982fc785f316a069b5f76ec71480ea9630d18
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Mar 25 10:19:22 2007 +0000

    Putc should return correct value
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3274 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f5d499b05fc77e37e38fcfab0a3d55159dbcf1e8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 12 20:17:45 2007 +0000

    Eliminate ThreadContext.yield and add an overloaded version in Block instead. One less "utility" method on TC.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3181 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 47ab3d43242953ffb9db321228bf86457d7386ab
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Feb 24 14:09:49 2007 +0000

    Fix for JRUBY-535, by Miguel
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3073 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a2107e60085a5063bca76d897783a512bbd7eddc
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Feb 18 15:18:18 2007 +0000

    JRUBY-606: Get rid of un/under-used IRuby interface
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3022 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1b3753296b128b8271b743a37fa7a2da5c49ebad
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 15 11:29:08 2007 +0000

    Make all our IO uses ByteList directly
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3003 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 11a857a2279b87efb4bf028483252f544c617dfa
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Feb 10 15:03:54 2007 +0000

    JRUBY-445: NPE when using set_trace_func
    
    [Note: potential bad positions trumps NPEs]
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2977 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1fd378cae8bf2c203a6e39bd36cf31d975775ee9
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 8 13:11:04 2007 +0000

    Improve performance in various parts of the system by never cloning a byte array that will go out of scope immediatly. These are safe to retain. Also, new implementation for StringIO that uses ByteList directly.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2965 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2f452c4a083f4081af798c54c9f5a97bacfeafa1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 6 06:53:21 2007 +0000

    Second pass for JRUBY-565: modify all IOHandler implementations to use byte[] instead of String, to avoid the charset conversions required.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2952 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fa021e6350a9913aec4080deb761bacd7e9414e2
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Jan 28 17:44:32 2007 +0000

    JRUBY-488: Kernel#dup, Kernel#clone and initialize_copy should obey MRI protocol
    
    Patch by Marcin
    
    Nice...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2864 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5c0789044de8703f41bdf83f29552ba29ad048f6
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 27 17:31:22 2007 +0000

    JRUBY-484: Reverse Iter Call relationship in AST and also pass block via Java frame versus maintaining blocks in TC
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2851 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b87a06025fceb4bd908e0bb5d495e49b613f892c
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Dec 8 17:07:48 2006 +0000

    Update numbers to reflect soon-to-be-released 0.9.2 JRuby
    JRuby-5 updated pom.xml
    Added extra RubyIO constructor that our glashfish hack uses (will either remove or refactor into OutputStream constructor during 0.9.3 cycle)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2569 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2b03a33fdc382e7dc10b580dfa638c0a974dfc97
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Nov 25 11:57:15 2006 +0000

    Merging of openssl branch
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2463 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 174e3d01468001668ab299227d4af11aea65341c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 14 03:09:59 2006 +0000

    damn the torpedos! full speed ahead! landing enebo_lexical branch changes plus TC-passing optimizations and a few small compiler updates
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2423 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3f04b7ea16a8eaf59cf5de721f876360711e6521
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 10 05:18:55 2006 +0000

    cleaning up a large number of looped calls to IRuby.getCurrentContext
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2320 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4eb85a4aa5b1c369fedbce19adcc69a844fc7c69
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Oct 4 16:42:09 2006 +0000

    Landing charlies latest perf changes from his branch to trunk
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2280 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2d5f0d558122bbbe98e1c5947e232595845633ee
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Oct 1 17:20:15 2006 +0000

    JRUBY-161:  Implement IO.readpartial (Ola)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2266 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4a6b21deaf3a8472be6c0e7f4663f1a582ba5b85
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Aug 9 04:11:51 2006 +0000

    JRUBY-52: committed updated patch and test
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2179 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 24fc00ac9f647542a77f440ea686cea2d209f347
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Jun 30 21:41:47 2006 +0000

    /dev/null is special
    reopen mode bugs
    IOHandlerUnseekable.close should not close System.out, System.err, or System.in
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2100 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 404fdac0a79f1b57c3fb97914fbafb91618ca119
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Jun 28 02:25:51 2006 +0000

    NIO fixes (by Evan Buswell)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2094 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e1cb5d91c50660f5df76840d26d14be28c3e6749
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 15 14:17:41 2006 +0000

    cleanup: eliminate (move to runtime), flag, or final-ize static vars
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2071 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 54594cf2641226a173f9dc7981b2fbb511d7061e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Jun 14 03:13:53 2006 +0000

    Ola's patch to add some fcntl support for non-blocking mode
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2067 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 54e6b8da799629e0b7db879c45149399878f5f84
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed May 24 01:34:03 2006 +0000

    Kernel#select + server socket fixes (by Evan Buswell)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2036 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 58ae97d80464087e7fd608ca0ec391c8cf84bce1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Apr 14 20:39:41 2006 +0000

    fixed IO.read EOF return values according to Ruby 1.8.4 ri
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1984 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9f2efc63a858fa0507245b207025eab027840a04
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Apr 9 20:58:31 2006 +0000

    Make RubyString use a StringBuffer instead of a String as its internal representation.  This change makes one test case go from 262 s to 0.7s.  Various other function fixes thrown in (with quite a few new unit tests) and some conversion to make more mutable functions use StringBuffer APIs more.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1974 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 955df6c6347fe40e2cb6502680208323eef890e2
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Mar 30 03:03:57 2006 +0000

    Add mixture of Evan, Ola, and my socket patches (net/http and open-uri work with these -- at least common casual tests)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1965 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f31a02920a9c693a620ba4d1a53dfa8dd391bbb0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 20 05:11:13 2006 +0000

    IO#read should return "" instead of nil at EOF
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1925 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a1b8fc1d456e3d5c6e01579b88773383068aa85c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 10 21:53:27 2006 +0000

    merging changes from cnutter_work1:
    - cref fixes
    - loadservice fixes for irb
    - binding
    - misc other fixes from playing with irb and RoR generate script
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1878 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1d43870a42678f709851fcd9349d32a5f5be0dca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 2 19:51:50 2006 +0000

    merging cnutter_work1 to HEAD
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1869 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4ede4bfb0b4fcc29ce09b82da5f1164b5894d258
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 10 15:09:14 2005 +0000

    TC method refactoring, renaming, inlining of TC-related IRuby methods
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1825 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 41adc9d73b44b14dd25593e772188d405ec00f2f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 26 05:34:12 2005 +0000

    removing revision keywords
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1810 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4dfdacd80c56018084c618f3bbab7b542653d95e
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Sat Oct 8 13:07:06 2005 +0000

    Introduced IRuby interface for Ruby runtime object.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1798 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0d0a9875911a31ab082bc2f917b1645f395a8e2c
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Sat Oct 8 12:55:34 2005 +0000

    Encapsulate all public fields in Ruby (perhaps not the *best* encapsutlation, but better than before.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1797 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 36ec84bb4bc5dbd391c6ddb676b2faeb380f0539
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Sep 6 14:57:59 2005 +0000

    merging exception-removal changes to HEAD; EvaluateVisitor changes left on branch for now
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1757 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ab561decb36638dd1760992e80d5f417bc37d3e1
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Sep 4 18:43:03 2005 +0000

    Remove all catching of Ruby Errors from within Java impl of Ruby IO (and friends) code
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1756 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 38a96b294b4bde6265d156ecbd1c17fbd7cb6b62
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Sep 2 16:29:28 2005 +0000

    Remove finalize since it is very undependable and the GC should close references when GC actually happens..
    This was a throwback to the first implementation of IO that did not use weak references for the IOHandler pool.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1747 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ca6b16e996ea9af83ce593594b9c69b9364a9924
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Aug 28 13:29:33 2005 +0000

    Kill RubyClasses (core class/modules now initialized in Ruby)
    Store all top-level classes as constants within Object (fixes things like Object.constants) instead of second datastore
    Always load all core classes (remove lazy loading)
    Convenience function RubyModule#getClass added
    Convenience function Ruby#getObject added
    JavaObject and JavaArray are now Java::JavaObject and Java::JavaArray to be consistent
    classes defined under another class/module are now defined in the parents creation routine
    Removed some masking warnings
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1739 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c43a37a024b1b667faac0f9af4dea5874ac0330f
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Thu Jun 23 21:47:02 2005 +0000

    Fixed compiler warnings.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1725 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0ac2e08e7a6d4e480671460b422d6d9fec63709e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Jun 23 20:40:09 2005 +0000

    My commit on 1.30 to make IO.read return "" on EOF is  wrong.  Many scripts depend on this and it is documented that was as well.  If I could only remember what broke with this behavior so I can get to the bottom of it.  Putting back for now.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1723 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 803c66ee682936beecc8a43fe2cfc90fe5645b22
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jun 21 14:03:26 2005 +0000

    My Laptop drive is sounding funny (dropping a little earlier than normal -- but completely safe)
    ReflectionCallback is simpler - removed some indirection levels and split out new dispatch mechanism as...
    new ReflectedMethod which has less levels of indirection than reflectioncallback and will replace it entriely once all builtin classes use MetaClasses.
    Many protocol conversion protocols are being followed.  Almost all in numerical methods and a few in array, pack.
    Several classes have been changed to have a FooMetaClass.
    'ant test' is running between 25-20% faster right now and this should increase as I convert more builtin classes
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1716 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a36ff3729d6a7f2c61eb51273fcee3d3bd371350
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Jun 18 14:47:06 2005 +0000

    More moving towards java.util.Stack contract for remaining Abstract Stack users
    args are never null (we no longer null check with a few strategic asserts)
    getPosition() always returns something from Nodes (we no longer null check)
    Remove AttrSetNode (fake parser node) in favor of CallbackMethod
    we were pushing/popping an extra dynamic vars set every yield
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1715 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a307c6981ef05cab16dba3d9f3d9fec6e143e920
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu May 12 20:52:19 2005 +0000

    Add IO.binmode
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1702 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7b0b210d33353ea731e344ab3c59a733f02fc4af
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu May 12 20:44:32 2005 +0000

    file.read always seems to return at least "" even though it is defined to return nil at EOF (regresses nothing)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1701 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a953efe564b777736939550e8f1d8c1c30ded6c7
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Sat Apr 2 16:04:40 2005 +0000

    The start of the Socket library.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1662 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0a56a82804d381b7fb5b51ca46a9b6ed4a08a3a3
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Mar 29 15:36:52 2005 +0000

    IO and File now have full fledged meta classes
    Many methods in IO and File now do conversions of arguments to the types they expect
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1649 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7a83c48af56081c1c2132111d535f28d10cf3afb
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Dec 31 20:55:52 2004 +0000

    Update license to GPL/LGPL/CPL
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1574 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f9c6cd5042b99c686c9ec5d78c8e251c3fda461c
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Tue Dec 21 11:17:18 2004 +0000

    fix file resource leaks in IO.foreach, IO.readlines and IO.reopen
    fix test cases to make sure that temp files are really removed
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1520 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 966225a7ca7ee68588d9ea3537f98a20906a6cec
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Dec 18 15:13:25 2004 +0000

    Remove unused import
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1501 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ae3178fbb3656e01c3d379a6255e1af956725271
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Sat Dec 18 12:32:37 2004 +0000

    Created IO meta class.
    Fixed bugs in IO#initialize, IO#foreach and IO#readlines.
    Fixed Fixnum#[] bug (it doesn't accept classes with a "to_int" method yet!).
    Fixed multiline regexp bug.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1500 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 99701d6c108d17940c770c551241e5099feb192e
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Mon Dec 13 01:20:10 2004 +0000

    Removed some ununsed code.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1483 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b72a2862ae5b2f01f9a767ef2ce248fd785857c4
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Mon Dec 13 00:26:02 2004 +0000

    Replaced org.jruby.util.Asserts with Java 1.4 assert.
    Fixed String#capitalize.
    Replaced RubyString.nilString(getRuntime()) with getRuntime().getNil().
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1482 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8081fdc23459ab3e7b62155a53b7f18b561f93c1
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Dec 12 14:55:16 2004 +0000

    removes type parameter from CallbackFactory.getXXXMethod()
    and removes CallType from AbstractCallback and ReflectionCallback
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1476 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 870e1da9b41bfdbae259e1fc5f18fc8b76686998
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Dec 12 09:25:42 2004 +0000

    removes the instance variable runtime in RubyObject
    reintroduces the variable in RubyNil, RubyBoolean, and RubyClass
    delegates all calls to Fixnum,Array,Boolean,String,ArgumentError,IndexError and TypeError.newXXX to Ruby
    fixes all imports
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1469 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c15ab526440e25745b45a2ab3aaab1b5a7334d1f
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Nov 28 14:54:57 2004 +0000

    code cleanup
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1428 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1562832239a5e5d73b1ee98dade51601e343257
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Nov 16 20:30:04 2004 +0000

    Rename references of org.jruby.Ruby from ruby to runtime.
    Remove unused methods from the IRubyErrorHandler interface.
    Add "same" method to RubyObject to fix "equal?"
    Fix JavaObject cache.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1408 961051c9-f516-0410-bf72-c9f7e237a7b7

commit df7cf7c9f898a4719c7c15b6b000bb3127a599ff
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 8 03:58:21 2004 +0000

    Renamed ThreadClass to RubyThread and KernelModule to RubyKernel
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1401 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b9ca284d15c4b04f1dc9e938d4a94aceebfdf1b4
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Oct 16 19:23:55 2004 +0000

    Initial implementation to external process handling + Kernel#open(with pipe).  Thanks to Charles Nutter
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1343 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bfc752d452498803705e38ec187ad20d17a675c4
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Oct 15 20:56:13 2004 +0000

    Fix for Bug #911505 (IO#gets(\n\n) is broken).  Thanks to Charles Nutter
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1339 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3b52a27ae14923f4b9d485fa37dbc6ab9a3cf142
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Sep 30 02:31:30 2004 +0000

    Update IOModes to better support File::XXX open constants
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1328 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 19e9cf2b9a3b3c47b1c57361605a39e09e8e8996
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Aug 7 21:41:11 2004 +0000

    Make IO descriptors maintain weak reference to allow the objects to 'naturally' get GC'd/closed/etc...
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1323 961051c9-f516-0410-bf72-c9f7e237a7b7

commit afcdfc7ac7b5379e4dbacb1584ae99b023d42aba
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Mar 5 22:08:52 2004 +0000

    Some IO objects may not be cleaning up file resource properly...Try and protect against it
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1264 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a16b4a3596853f2153bfe0df0a8cbe54382d5d58
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Feb 28 23:00:58 2004 +0000

    Removed a lot of old IndexedCallback stuff.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1254 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c602493a83e2050f401fa6925ec7e9269b45e4e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Feb 14 01:18:46 2004 +0000

    Removed all XML generation from source (getting rid of all indexed callback consumers except Object which uses a CVS committed Definition class). Fixed all numerical derived classes so that: 1. They all use the same equal/eql logic.  2. Removed all compariable methods that are already inherited. 3. Changed method signatures that want RubyNumeric to be RubyNumeric (versus IRubyObject)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1237 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4c689a812e20d4fcf2da0cdc9b527b00cc1960ef
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Feb 10 16:46:17 2004 +0000

    IO work (phase1)
    1. Make IO allow random access behavior (seek,rewind,pos)
    2. Allow most IO duplication (reopen, clone)
    3. Support almost all other previously missing IO method (sans pipe/popen related ones -- popen will be phase2)
    4. Fix RubyArgsFile bugs in testing kernel
    5. Made all rubicon tests for IO run correctly versus ruby 1.8 (exception: pipe/popen related ones)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1233 961051c9-f516-0410-bf72-c9f7e237a7b7

commit da1e0993189b265528a6aa5108d3ce668d87643f
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sun Jan 11 14:39:44 2004 +0000

    Added an (optional) CGLIB implementation of Callback.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1210 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dee1133e5a3e70d9ca321111993823aef699556f
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Mon Jan 6 14:47:09 2003 +0000

    Added Proc#yield and IO#fsync.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1176 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5858c541b148aad867b8e88b52fb524c0827a6a3
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Dec 30 19:44:41 2002 +0000

    Backout indexed dispatch for certain static methods (all rubicons testing blocked by this)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1174 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 080be12abc37e0354ccbed19415f26a9f0cc7e7f
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Dec 26 21:46:46 2002 +0000

    Moved IO class to definition XML.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1173 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d8c7bdab8430bb1f7826f7cad86d6c1aa9513a82
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Mon Dec 16 21:12:11 2002 +0000

    Reworked class and module lookup.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1171 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9e693afddc019d2f8d2b151dc4e047d018f2ebc2
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Sep 17 14:00:33 2002 +0000

    - removing some other "new AClass[0]"
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@840 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d667713f53902eb2be9e22076d1ecb9c190388a9
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Sep 17 13:07:22 2002 +0000

    - performance boost by removing "new IRubyObject[0]"
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@839 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 839de5dc5ea6ec9b3608a998c7c727bc12f50218
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Mon Sep 16 14:08:45 2002 +0000

    - remove Ruby#getGlobalVar and Ruby#setGlobalVar
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@835 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c77b91f42c4f3810140d44cbe603248a1d52b7ee
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Sep 10 15:18:12 2002 +0000

    - restructure of the code tree.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@782 961051c9-f516-0410-bf72-c9f7e237a7b7
