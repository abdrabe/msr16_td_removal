commit 0afe4d7c133ce89289c81ab8b7ebad28e3b68e69
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Sat Jun 22 14:13:53 2013 -0400

    Remove dead code in RubyString

commit c314f2645587709b2d80c46295a0bb006a305112
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Sat Jun 22 13:38:06 2013 -0400

    String#concat should preserve encoding. Fixes #756.
    
    Directly ported from:
    https://github.com/ruby/ruby/blob/ruby_1_9_3/string.c#L1962
    
    Looks like the logic changed at these commits:
    
    https://github.com/ruby/ruby/commit/443b1517cfbee8cf3a0c44f040939edf4f94b9a0
    https://github.com/ruby/ruby/commit/ad4b53b3b3ccc9be16a31435f7bed8bf1533362a

commit 801b7ed2294f898bef1e082751f0bd5ebde32832
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jun 22 11:48:21 2013 -0500

    Fix issue with 1.8 String#sub backref.

commit 2df9b8c03f613f5e6429849747c684ba098cf023
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jun 19 16:00:14 2013 -0500

    Avoid using $~ as an out parameter in Regexp search/match logic.
    
    This fixes issues where threads would step on each others results
    by updating $~ between the time the match was created deeper in
    the stack and retrieved higher up. The result was that the match
    logic would return another thread's MatchData.
    
    My fix is to never read $~ in these methods and only ever write
    it; this does not help the issue (across all impls) where $~ is
    shared and not reliable across threads, but it should fix issues
    where it was being used internally to pass MatchData to calls
    higher in the stack.
    
    Fixes JRUBY-7167 and JRUBY-7176.

commit 553a344cb28bfc4953b486f97f12d0443f0cb0ca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 13 13:25:01 2013 -0500

    Move lastline getting/setting into context, to hide it.

commit 3fc004fbe83155a4e02891de955d37e26e654ec8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 13 13:03:47 2013 -0500

    Start moving backref logic back under thread context.
    
    In order for us to start optimizing backref logic away, we need to
    hide how it is stored and retrieved. Moving back under
    ThreadContext allows us to have more flexibility in implementing
    new backref mechanisms.

commit bcc26747f56e05bd1ceda21d97fd4b0bc5255f0c
Author: Ron Dahlgren <ronald.dahlgren@gmail.com>
Date:   Fri May 17 16:15:20 2013 -0700

    Use RubyModule.JavaClassKindOf fixes jruby/jruby#614
    
    I've changed all of the relevant cases of anonymous KindOf classes to
    use the new JavaClassKindOf. This cuts down on some of the noise
    produced by anonymous inner classes, especially given that these
    replacement points all had identical implementations.

commit fadedfec0d774e1f6dc547e48962b945c8d09904
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jun 8 12:00:24 2013 -0500

    Deprecate and remove most of op_set19 logic that's the same now.

commit 110cf75747fc8c2f1bcb6091b34021a48759b04e
Author: Daniel Marcotte <dmarcotte@gmail.com>
Date:   Thu Jun 6 07:20:26 2013 -0700

    Fix String performance regression
    
    Port the single byte COW heuristic from the 1.8 code path to 1.9.
    
    This fixes #168.

commit ccd06acab658e7b40bedc6e3317f1f65039c201e
Merge: 097c752 f4bd113
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon May 20 19:18:46 2013 -0700

    Merge pull request #727 from tychobrailleur/string_concat
    
    Fix string concatenation with a number as per rubyspec behaviour.

commit c7ed4abd3c4d1dc501080e6ccb0756271e7a689a
Author: Gustav Munkby <grddev@gmail.com>
Date:   Tue May 14 15:43:41 2013 +0200

    Fix RubyString#byteslice on substring.
    
    As value.getBegin() already managed by makeShared19(), the method
    byteSubstr() need not take it into account.

commit c2c943229930781193ba0fb8b96f0080f775f38d
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat May 11 08:37:15 2013 -0500

    Make regexp interruptible.  Regexp will throw InterruptedRegexpError < RegexpError

commit f4bd113e19dfeea8977600909ada8302f580db06
Author: Sébastien Le Callonnec <sebastien@weblogism.com>
Date:   Sat May 11 09:01:39 2013 +0100

    Fix string concatenation with a number as per rubyspec behaviour.
    
    Following https://github.com/tychobrailleur/jcodings/commit/8536b4fdeecf3dec31ca868803654b3ab7829915, the incorrect behaviour of String#concat with
    a number was made obvious by throwing an EncodingException.  MRI changes
    the encoding of the String if the concatenated codepoint is within
    ASCII-8BIT range, and throws a RangeError otherwise.

commit d4ef2666d26f4353d7a66d987da1b22fda73204e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed May 1 09:26:08 2013 -0500

    No need for cached scope with backref logic removed.

commit 80a93d2d905ea7e86d6fe92e8216b406d766b592
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed May 1 09:23:25 2013 -0500

    Staticize the op tables.

commit 65a6e81472c4c3dee365c709cae6696d8bfa8781
Author: Sébastien Le Callonnec <sebastien@weblogism.com>
Date:   Wed May 1 13:57:27 2013 +0100

    Implement String#to_sym special cases.

commit a92bffe48597e6f4165bb85e81cf98dea04e75c1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Apr 30 21:20:30 2013 -0500

    Fixes in response to PR #684.
    
    * Use code range to determine ascii rather than scanning.
    * Fix bug in EmacsMuleEncoding exposed by new 7-bit logic.
    
    We will need a jcodings release for JRuby 1.7.4.

commit e70f25715793bc0d95c71747dbf83d8021e80995
Author: Sébastien Le Callonnec <sebastien@weblogism.com>
Date:   Tue Apr 30 14:21:17 2013 +0100

    Return self if no options and default_internal is nil.

commit 0b8d74b95580b97ddf034eb4d17cc2c31b8ed8a3
Author: Sébastien Le Callonnec <sebastien@weblogism.com>
Date:   Tue Apr 30 13:38:27 2013 +0100

    Fix some of String#encode! and String#encode rubyspecs.

commit 659f99fd865f67b7c5b3e585d0fc29848814d095
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 24 13:53:00 2013 -0500

    Fix additional backref-aware paths in Rational construction.

commit d00e21dfd6291f1a205686458f9502a1e8fc86e2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 15 16:26:32 2013 -0500

    Avoid using backref within native logic.
    
    Some native-implemented methods like String#to_r and to_c used
    Regexp logic to break apart the string. Because they called
    through the same paths that Ruby code calls through, they were
    forced to prepare for and use backref ($~) to hold the MatchData
    object. My changes provide a backref-free path in RubyRegexp and
    modifies our native logic to use that path. This eliminates the
    need for a DynamicScope to be created and pushed along those paths
    and should provide a path forward for eliminating scopes from Ruby
    code that does not directly reference $~ and friends.

commit bb98e4b8decffc0361b70a6c99c1ade5fed0abcb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 28 10:02:33 2013 +0000

    Move RuntimeHelpers to org.jruby.runtime.Helpers.

commit 798b0b70381f20c6a238471a258d732adc3948e7
Author: Jake Goulding <jake.goulding@gmail.com>
Date:   Mon Feb 18 20:59:07 2013 -0500

    Symbols can have encodings that need to be Marshaled
    
    Add a new interface to the few special objects that can be Marshaled
    with encodings.

commit 61678ac1a2514a9932276f8d527816a5980a94b3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 25 20:41:40 2013 +1100

    Fix more references to CPL.
    
    The phrase "Common Public License" was split across two lines in
    our default header, which caused it to be missed during earlier
    search/replace. Also, we did not replace the CPL URL in the
    header with the EPL URL.

commit 330fef3b0fc18af477ccea19bd278669667f31bb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 12 14:49:29 2013 -0600

    Switch JRuby's CPL license to EPL.
    
    Governance of the CPL license was moved to the Eclipse Foundation
    at some point in the past, and Eclipse blessed the EPL (Eclipse
    Public License v1.0) as the successor to CPL. Because the CPL
    contains a clause allowing transparent upgrades to future blessed
    successor licenses, we can make the move to EPL without
    re-contacting past contributors.
    
    The change in going from CPL to EPL largely just removes some
    punitive language that apparently made many companies nervous. All
    other language in the license remains identical.
    
    Several documents about Eclipse's move from CPL to EPL are here:
    
    http://www.eclipse.org/legal/cpl2epl/
    
    Note that Eclipse's move came before the blessing of EPL as the
    upgrade path for CPL, so they had to do a bit more legal juggling.
    With Eclipse now the administrator of CPL and with their blessing
    of EPL as the upgrade path for CPL, all we need to do is make the
    move.

commit b92e9f60e671f4e87c4683a0c7288b7090c5bbba
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Sun Dec 16 14:34:57 2012 -0500

    Avoid calling otherString.value.getRealSize() multiple times.

commit 27497715e7dafc04de9a8f6e4e9bbc746a57dafc
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Sat Dec 15 00:38:47 2012 -0500

    Avoid AIOOB when "" is require'd.

commit d9449bde14b344c6c16f30e5fdd4e24e1a3feec3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Dec 4 22:46:50 2012 -0600

    Micro-optimization for String#each_char for US-ASCII and 7bit.

commit b3ba69c0ebe9b8924eb5d8ce50ef4c6cadbb4616
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Sun Dec 2 00:33:46 2012 -0500

    We should try translating if the receiver's length is positive.
    
    This fixes #367.

commit 5e4aab28b26fd127112b76fabfac9a33b64caf77
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Sat Nov 17 22:25:00 2012 +0900

    Use Perl's Hash for String#hash
    
    Replace String hash function again, use Perl's Hash instaed of
    SipHash-2-4.  Perl's Hash is 10**5 times faster than
    Murmur2/SipHash-2-4.  Our understanding is Perl's Hash is not broken in
    regards to HashDoS attack[1] so far.
    
    For the case Perl's Hash is broken in the future, you can use
    SipHash-2-4 by passing "jruby.siphash.enabled=true" system property
    (false by default.)
    
    [1] http://2012.appsec-forum.ch/conferences/#c17

commit 0fe613d73bd5f62bedd9b6b49a85f572801cc5dc
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Tue Nov 13 21:34:31 2012 +0900

    Use SipHash-2-4 for String#hash
    
    Replace Murmur2 with SipHash-2-4[1].  The SipHashInline implementation
    is at [2] and the author presents it to JRuby.
    
    [1] https://www.131002.net/siphash/
    [2] https://github.com/nahi/siphash-java-inline

commit 6988573207874c588fa9b2fc383de2316cf06057
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 6 10:56:55 2012 -0600

    Same-encoding transcode should not transcode.
    
    This could be further improved to share the byte[] backing the
    incoming ByteList, but the code isn't quite structured that way
    right now.

commit 47a88ba5a70aa90d1c139fdaa2394df36806552d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 30 21:25:24 2012 -0500

    Fix #366
    
    DNode logic was always calling the 1.9 version of String#append
    even in 1.8 mode. For badly-encoded or mixed-encoding text, this
    could cause a failure due to 1.9's more-strict encoding checks. I
    modified the logic to call the version-specific append function
    and added the same type-specific logic in that append.

commit 5fbe6853b50cb50be71b40caa4b81f2fb52aacb1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Oct 25 15:02:36 2012 -0500

    Fix String#to_r and to_c to not require caller's scope for backref

commit c6013c59228b377aa9f8fb0626340fa7831af667
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 17 10:59:42 2012 -0500

    Move Java-sourced dynamic call logic to MethodNames enum.

commit bcdd8589ae1695b32764b840456955791d0df5b3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 15 17:24:29 2012 -0500

    ASCII-8BIT encoding from Ruby corresponds to ISO-8859-1 in Java.

commit ad753d13a1b0f8f920258ef43525ab6d65ce2185
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 15 15:01:58 2012 -0500

    Fix JRUBY-6933
    
    String#split fails after doing a regex on UTF-8 chars.
    
    The logic for splitting with a String mixed zero-based and begin-
    based offsets into ByteList's bytes, which caused it to fail when
    begin != 0. Modified the enc-aware character shift offset
    comparison to always be begin-aware.

commit 8a773ea56a9d2957af3c1866851b94c9f8424de7
Merge: 9e85bb2 7033a99
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Sep 28 19:25:17 2012 -0700

    Merge pull request #255 from ryenus/fix-6510
    
    JRUBY-6510 fix String.encode!

commit 9649428af078bd7b8b689fccbb08a9f7f08b610b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 17 16:01:42 2012 -0500

    Improvements for DStr/DSymbol interpretation for #301.
    
    * Special-case core classes in RubyString.append19 to avoid
    dyncalls and transient objects.
    * Special-case core classes in DNode's EvStr handling to use
    append19 directly rather than coercing to a throw-away transient
    String.
    * Don't create a shared string in DNode, since it's a new ByteList
    that's almost immediately written to anyway.
    * DSymbol knows super will produce a String, so use more direct
    path that doesn't immediately convert to Java String. See #300.

commit c91ffa830cdb61213ad5cee672bc408830d299f5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 17 11:29:42 2012 -0700

    Improve interpreted DStr by avoiding transient strings.
    
    For an expression like "foo#{i}bar" we sometimes would create the
    "foo" and "bar" strings only to concatenate them. For interpreter,
    this only occurred if encodings were different, which was rare. I
    fix that in this commit to always use the "foo" and "bar" ByteList
    directly.
    
    Compiler still creates "foo" and "bar" all the time. That must be
    fixed.

commit 7ceb0f41140063e36f61785fbdbff0343d64f9de
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Aug 31 00:32:09 2012 -0500

    Fix a few m17n issues and remove related excludes.

commit 91a60f38e45b540a5bc8ba8afe5ec1d8f7babdc1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Aug 27 13:51:59 2012 -0500

    Fix JRUBY-6860
    
    String#slice on strings with multibyte chars fails
    
    String#slice was missing range checks on the length that would
    prevent walking off the end in unguarded methods it called. Added
    those checks.

commit 9901bf4d8f353229a440f8b8e0000a47ded6287f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Aug 27 12:58:39 2012 -0500

    Fix JRUBY-6863
    
    multibyte strings after String#slice get wrong result on String#index(rindex)
    
    Patch and test by Tsuyoshi Yamane <yama.tsuyo@gmail.com>

commit ff42564963ac0d5b8b6471f23fd3441fb2db6fba
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Aug 22 18:42:34 2012 -0500

    Fix JRUBY-6827
    
    ClassCastException with DummyDynamicScope in String#rpartition? with -X+C
    
    String#partition and rpartition need read/write of backref.

commit 7033a995320b6719e60c415fdd37448692ece796
Author: ryenus <ryenus@gmail.com>
Date:   Wed Aug 8 14:13:38 2012 +0800

    fix JRUBY-6510, check type of the only 1 arg, also align arg name w/ transcode

commit 2a0a2215ec4303856e7f65e6c000e205112f6087
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Aug 6 12:21:13 2012 -0500

    Fix JRUBY-6819
    
    java.lang.ArrayIndexOutOfBoundsException in String#each_line
    
    When the string is shorter than the separator, we walk off the
    end. Modified it to check that there's enough bytes left in the
    string before memcmp'ing it.

commit d033d8d737d54e2824354418081c228f54f39b7f
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 27 15:56:05 2012 -0500

    Make string encoding methods have mysterious > 0x7f code and nothing else have it.  Fixes JRUBY-6744 to not throw transcoding error

commit b8181cda909f6e42d7c0b7fffaabbe2a502f273b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 27 02:19:54 2012 -0500

    Inline all calls to ThreadContext.getRuntime to access the field.

commit 47fd4acb720385b7d7852e1876e28520aa0cf484
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 27 01:55:07 2012 -0500

    Remove all safelevel checks throughout JRuby (plus misc cleanup).

commit 4a982fe537e75c9fcd3c9f95e131104621a56a91
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Jul 2 16:04:51 2012 -0500

    Hmmm I wiped out a decl

commit 971549d228501ee9f5304748a63d232951e08e16
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jun 29 14:39:45 2012 -0500

    Use util instead of RubyString method

commit 48232d9c4eebf248b0a676d4fade3f9a8a75f82b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jun 29 13:56:14 2012 -0500

    Start to bust out transcoding into util

commit 454c4447cae26ddcaa9bc75764d694699f057875
Author: John Shahid <john.shahid@benchmarksolutions.com>
Date:   Sun Jul 8 13:23:19 2012 -0400

    [encoding] ascii strings that originate from a binary string should be ascii/utf-8 encodable without throwing an exception.
    
    A new rubyspec was added that demonstrates the issue (https://github.com/rubyspec/rubyspec/pull/146).

commit ae453fe5582fafccdfb945eeab6c77297f28077e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 2 12:35:39 2012 -0500

    Fix JRUBY-6717
    
    jruby1.7.0preview1 doesn't work on Windows with jdk7
    
    On some Windows systems (such as the reporter's) it appears that
    the default Windows-1252 jcodings encoding does returns null for
    getCharset(). I'm not sure why, but in this particular path I
    believe it is safe to simply fall back on the Java default Charset
    for transcoding.

commit ede8fd9417158e6762079278ed7be270ef342f12
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu May 17 17:35:55 2012 -0500

    Fix JRUBY-6588
    
    Multiple fixes and improvements for transcoding. We are still
    passing everthing through Java Charset logic, which means the
    intermediate phase is always UTF-16, but we will now error out
    properly. The test case from the bug passes now.

commit 8fecee704ce6c7441fa3d907ee09113f44b89977
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 15 23:08:38 2012 -0500

    Fix JRUBY-6572 and unexclude a bunch of passing tests.
    
    I mostly just traced through the MRI logic for handling binary
    mode and tried to match up code. There's also a few fixes to make
    some of our ported logic match MRI more exactly.
    
    We have accumulated enough fixes that test_io_m17n has many tests
    working now. I removed them from excludes.

commit 61239b373024fca80a5b05f746ed4f1955dcdbad
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 15 18:41:32 2012 -0500

    Fixes for TestM18N#test_sprintf_s

commit 224ff97e26c0ebd361a03fb1f066631941d45f1c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 15 18:34:10 2012 -0500

    Fix JRUBY-6582
    
    We were missing encoding negotiation that MRI does during % with
    string args.

commit 766bb8e50525e0379af08731365ecc85228cab55
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon May 14 15:23:43 2012 -0500

    Tweaks for #159.

commit c2abc8caed9dfb383d4ab8d54267ba3cf7b81c20
Author: ryenus <ryenus@gmail.com>
Date:   Sun May 6 22:04:30 2012 +0800

    #6606 - respect external encoding instead of hard coding UTF-8

commit cf23b566341e951996fdff2074d0a1657c44aadf
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed May 9 16:01:36 2012 -0500

    RUBY-6637: String encoding difference between jruby --1.9 and MRI 1.9 (force_encoding a no-op in this case?)

commit 8768b8f4707be599d9e6a3d13ba8a457b67baebf
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Apr 29 23:01:17 2012 -0500

    Fix JRUBY-6634
    
    String#setbyte was not forcing copy of the shared backing store.
    As a result, the original ByteList would be modified, affecting
    all strings sharing it. In the compiler, this affected all strings
    with the same literal.

commit 4c3308092c61dde68086fe35e940456ba4644933
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Apr 11 15:25:06 2012 -0500

    missing clear code range to match up with MRI better

commit a58b782438195ac2b1b26ea7c739696526170161
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 13 16:17:34 2012 -0500

    2.0 mode fix for String op_format.

commit e6bf20a9485ff44c47ccbcd1d277d1f0526385f4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 12 15:30:51 2012 -0500

    More socket refactoring and miscellaneous cleanup
    
    * Cleanup TCPSocket and TCPServer
    * Use SelectableChannel.blockingLock wherever we're changing blocking
    * Clean up a bunch of deprecations

commit de86b5a319d3c2503e0ad6d61d5a24c4dcf49bb8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 7 23:05:25 2012 -0600

    Fixes to almost make 1.9 spec run green again.
    
    * Implement IO#getc/chars/each_char/readchar properly
    * Fix bad boolean logic for # strings in String#inspect

commit f1c0006661fdbf1b1c1eabe4d38f5ca2b4361c4c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Mar 3 17:36:40 2012 -0500

    Fix arity for String#match's restarg form.

commit ff8ebc9230260af770ea47307078c82b7c12f1d2
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Thu Feb 23 02:07:25 2012 +0100

    sync String#squeeze

commit 0821c5af4f7d9050378524d3d8853d874540ca9c
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Thu Feb 23 01:50:17 2012 +0100

    fix chop!, test_string 2 failures, 3 errors

commit 64228a0799278422729e2a84a987ebce6267da55
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Thu Feb 23 01:26:37 2012 +0100

    fix trans again and String#count

commit dd7275363e4350e6f6a8e5ae933996f072dd5052
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Wed Feb 22 21:43:20 2012 +0100

    fix trtrans for 1.9

commit ab4bf541ecd6a357777869a44f7cc8f55792373b
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Wed Feb 22 02:08:44 2012 +0100

    The test suite is a joke

commit 6f480f3f2a3728ecab46aeec9fc7a5bdd72b0a5a
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Wed Feb 22 00:43:31 2012 +0100

    1.9 String#upto fixes

commit bd38348e5108d3c74131119775ee2dd96cd6b588
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Tue Feb 21 22:46:40 2012 +0100

    Proper 1.9 String#byteslice

commit 7b53849472f62a8f39ca8e35a47f83d3868e00e0
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Tue Feb 21 19:39:05 2012 +0100

    fix String#strip/lstrip/rstrip, always use ascii whitepace

commit 2c30d23a2962b38f0cce30c1792d56244836fec8
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Mon Feb 20 22:45:06 2012 +0100

    Brand new 1.9 String#inspect, test_string 10 failures, 3 errors

commit 31fb58ae661f35855b7c1064cac723e301a76ec7
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Feb 17 10:39:28 2012 -0600

    JRUBY-6463: File.read('foo').strip Leaves Trailing Newline Under 1.9

commit 60c689744b582f310a80ade28b31249212d684f2
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 15 10:16:24 2012 -0600

    JRUBY-6416: JRuby 1.6.6(1.9-mode) freezing in Rails application without any error, when manipulating a String with special characters

commit ff481bf0f489ed4b6ce90dd533f1cb3eb62d2510
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 13 12:57:04 2012 -0600

    Fix JRUBY-6434
    
    sprintf does not support name references, like sprintf('%<xyz>s', :xyz => 'abc')
    
    * Added %<foo> support to Sprintf
    * Moved %{foo} support from Ruby kernel to Sprintf, since it was
    incorrectly matching %<foo> stuff (and was brittle anyway)

commit 15bbf002a774918aa7772e3431f101326a20df61
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 13 12:45:35 2012 -0600

    Trailing whitespace cleanup.

commit 17e20abdea5186b5d7b5960616d2cebf3081538b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Feb 10 09:44:56 2012 -0600

    19: dest string was not getting started with proper encoding and coderange

commit c29f47c54c5db1570bee307b1eab112d821c4daa
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Thu Feb 9 14:15:51 2012 +1000

    Back each RubyString with persistent native memory when passing to a native function, as the transient memory backing (usually on the C stack) leads to confusion when it is reclaimed, and the native code was expecting it to be persistent.  This results in approx 150% (worst case) performance penalty for :string parameters, but its worth it to avoid differences between CRuby FFI and JRuby FFI.
    
    Fixes part of ruby-ffi #192 (https://github.com/ffi/ffi/issues/192)

commit 8b22798f7230a64eebee7eba2b8bbe2ca9703423
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 6 10:19:49 2012 -0600

    Deprecate and remove uses of defunct JRubyMethod.backtrace flag.

commit 868714a9ad04a9b9d66903cebd11f6cd867a02e2
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Thu Feb 2 21:03:25 2012 +0100

    fix coderange for 1.9 String#sub!

commit 68f61dd8531c5b9fe84f667dc8f182529fba4dea
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 1 15:05:38 2012 -0600

    JRUBY-6396: Fix strip! for single byte strings passed through mbc codepath

commit 4d33d3019b91ec96afc0f1c28a289167f9b92ef6
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Sat Jan 21 01:58:52 2012 +0100

    Dont use StringBuilders when calling a method

commit 77de6b6f189fdd7c0d58ab2183a687d2b5251ba4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jan 20 08:57:25 2012 -0600

    Fix compilation error under Java 5: no String.getBytes(Charset).

commit 2c1870bd91f722fcdf14357ec75f8635dd635b11
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Jan 19 10:47:21 2012 -0600

    [19] JRUBY-6240: java.lang.IllegalArgumentException when running simple RDoc conversion

commit 2a0f09e11e608ecfbf13090aed00720c8b654f8a
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Jan 18 16:33:25 2012 -0600

    [19]: Fixes String#inspect mutating from default_internal to underlying string impl

commit a59aff9287d636d60058a781bbb5462c9ed669c0
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Jan 18 14:59:30 2012 -0600

    JRUBY-5809: [1.9] String.inspect produces wrong output on UTF-8 string

commit b95f806d94479a08776745130107cdc2b9ffa1ec
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 17 17:46:02 2012 -0600

    Remaining fix for JRUBY-5633
    
    String#encode(opts) not properly implemented for --1.9

commit 467ce0a956425da5913454b8413084e391ac1794
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 16 12:34:16 2012 -0600

    Fix JRUBY-6323
    
    JRuby does not pay attention to either -U or LANG in determining encoding for ARGV (it is always ASCII-8BIT)
    
    Added and used utility methods for producing internally-encoded
    Strings from Java strings that came from an external source like
    command-line arguments. This allows ARGV to reflect the proper ruby
    internal encoding.

commit 90249a73e890a444b6a8855c402e0c2cdad355d1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 9 12:46:48 2012 -0600

    Add a JRuby utility method to String for unseeded hash.

commit 33a9b80c641b0715c7752abd946241e9cfe406eb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 29 15:13:12 2011 -0600

    Implement the most basic functionality in Encoding::Converter.

commit ee4a05617fbb8e6c4413e03f5a3d9a6f5b1a943e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 29 11:20:08 2011 -0600

    Implement String#byteslice (1.9.3)

commit ac0c25aef181893f83dc87d1f66845031ba52de3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 29 11:08:39 2011 -0600

    Implement String#prepend (1.9.3)

commit f007944b459e7c5e33b8296433d8b9d704bf02cc
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Wed Dec 7 13:36:13 2011 +0900

    [SECURITY] Random String#hash to avoid DoS attack
    
    This is the fix for CVE-2011-4838.
    
    Randomize String#hash (in Ruby world) and internal RubyString#hashCode()
    (in Java world) for 'Denial of Service via Algorithmic Complexity
    Attacks' explained in [1].  Introduce the runtime-local seed for hash
    randomization which is set at runtime initialization and use it as the
    seed for MurmurHash 2.0 [2].  MurmurHash is used in CRuby 1.9 and it
    should make the attacks difficult. (Assuming that no reverse function
    has been found for MurmurHash 2.0)
    
    Credit to Alexander Klink <alexander.klink@nruns.com> and
    Julian Waelde <jwaelde@cdc.informatik.tu-darmstadt.de> for reporting
    this issue.
    
    [1] http://www.cs.rice.edu/~scrosby/hash/CrosbyWallach_UsenixSec2003.pdf
    [2] http://sites.google.com/site/murmurhash/

commit a1aabe707882e2615d07a95aa9c1ce6a8d3cf344
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 15 17:22:29 2011 -0600

    Fix JRUBY-6272: Encoding exception running JRuby 1.6.5 (1.8 mode)
    
    Don't use cat19 for Hash#inspect in 1.8 mode.

commit c090e2e3d736dca59b3d2b395ef06df24f5ea9f7
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Fri Dec 2 09:25:18 2011 -0600

    Revert "Fixes JRUBY-6143"
    
    This reverts commit 1cf1d8c1ed069fc3833b9750abd6af7d7d042a83.

commit 54f0c95098cdc2c0b055edf29901cf16985caecb
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Fri Dec 2 09:25:11 2011 -0600

    Revert "Fix small whitespace problem"
    
    This reverts commit 65a0d25193f4aad985179f059b2ce04108feea5e.

commit 65a0d25193f4aad985179f059b2ce04108feea5e
Author: Matt Wilbur <mwilbur@idirect.net>
Date:   Fri Nov 18 09:01:46 2011 -0500

    Fix small whitespace problem
    
    Signed-off-by: Hiro Asari <asari.ruby@gmail.com>

commit 1cf1d8c1ed069fc3833b9750abd6af7d7d042a83
Author: Matt Wilbur <wilburm@gmail.com>
Date:   Tue Nov 1 18:45:12 2011 -0400

    Fixes JRUBY-6143
    
    Signed-off-by: Hiro Asari <asari.ruby@gmail.com>

commit 25a96eff0ba3693e98f30d4480b21b2a8a1f78dd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 30 04:33:14 2011 -0600

    String#== and === are the same method in 1.9.3.

commit 25f9e69567eb6d9d70bc3836d4776c1371776ad0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 22 12:21:23 2011 -0600

    Expand invokedynamic to more Java calls and enable.
    
    * Java calls of fixed-arity <= 3 and not receiving block dispatch through indy
    * All return types coerce along indy paths except BigInteger and ByteList
    * Cleaned up duplicate code in InvocationLinker.createJavaHandle

commit 74c74e63d4b70f69ddddbf13a3990e5577830987
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 17 16:33:57 2011 -0600

    Ruby 1.9.3 no longer has rest-arg #initialize on BasicObject.

commit 35874f3d0ca4097d14570a18372c59aa237cb70a
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Oct 24 15:12:22 2011 -0500

    Missing try/catch on unloadable encoding (patch by headius)

commit 1c3213729741e3aa79332684d2ec96137c785772
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Oct 18 16:54:25 2011 -0500

    JRUBY-5324: StringScannershould be 1.9 aware

commit 6e7fb9c403f2b3b7aae92b022b8334cfe6b3e2bc
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Oct 13 16:15:01 2011 -0500

    JRUBY-6116: Errors on String#lines

commit 25428dc9b51d7f43a1fdd7e0bba1269b355161e4
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Fri Sep 23 15:09:43 2011 +1000

    Add setNativeHandle/getNativeHandle to RubyBasicObject and use that to store/retrieve the native cext handle.

commit 5512c59a734fe09485ece988f3425450dbaebf92
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Sep 20 01:55:08 2011 -0500

    Encoding fixes for JRUBY-6033:
    
    * String#% was not setting base encoding of new string to same as format string, as in MRI
    * Array#to_s and Array#inspect did not use encoding-aware methods for building the string
    * Hash#inspect ditto

commit 6982b065dbd54ee519d055c59b63607d1fdcf10e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Sep 21 23:24:14 2011 -0500

    Move RString and RArray native handles to varTable.
    
    RString and RArray are cached in RubyString and RubyArray to avoid weak-caching
    handles or recreating handles frequently. However these fields add an additional
    32 or 64 bits to the size of all String and Array instances even when C exts are
    not in use. Since C ext use on JRuby is very uncommon, I've moved these fields
    into the lazily-allocated variable table, in the same manner as the rarely-used
    object_id. This reduces the size and allocation cost of all String and Array
    instances for the good of all JRubyists.
    
    The cost of retrieving the handles increases slightly due to hopping through
    getMetaClass.getRealClass, the accessor, and the array, but that cost likely
    pales in comparison to the already-high cost of C extensions, and only impacts
    Array and String instances that require native handles.

commit b683ba9f75b6997eba847963954f369818bbfd93
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 12 14:44:30 2011 -0500

    Move stringio bits under org.jruby.ext.stringio

commit bc21084cee97805c1083d69774914f1f7ab47975
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 12 14:37:57 2011 -0500

    Move zlib bits under org.jruby.ext.zlib.

commit 8798e1f8d09f86d18fccd258eb5a8d457f15d108
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Sep 8 17:32:08 2011 -0500

    Fixes to get Java 7 green:
    
    * method_missing paths for attribute assignment must also return the last param instead of the return value.
    * recent JDKs shut down parent's streams when child process terminates, so soften our close policy in that case.
    * replace void-returning signatures with IRubyObject signatures (indy logic doesn't handle it right yet)
    * replace non-IRubyObject arguments with IRubyObject (indy logic doesn't handle it right yet)

commit 0f6a60e8f71ea978fd8557a9cfcce8278dce0caa
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Wed Sep 7 00:03:04 2011 +0900

    JRUBY-5778: Improve Zlib compatibility.
    
    Fix internal/external encoding handlings and added encoding tests.

commit a9c26f04e463d42b370beb9fb89846af663d1a7e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 5 12:00:58 2011 -0500

    Minor perf improvement and bytecode reduction for interpolated strings.

commit 67c85a14d4a3d547a485e6c193c149647713466e
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Sep 1 16:45:57 2011 -0500

    Reversed logic from MRI

commit e96d141a6d89c1c9f8c1c6dfdad0d98b61a6681d
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Aug 29 16:55:30 2011 -0500

    Generic boxed version of squeeze! should still work with no-arg list

commit e2bdd6e92032c8238c4794c27a955ab7b41ef935
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 25 19:21:17 2011 -0500

    Remove deprecated String methods and eliminate one deprecation warning.

commit 8fdffdebfe98e1f355107712abe43131f56bcc57
Author: Loren Segal <lsegal@soen.ca>
Date:   Wed Mar 23 00:07:51 2011 -0400

    Add support for String#encode(opts) (where opts = Hash)

commit 51091b358fb87fbdbef3927448d07703ecf3684a
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Fri Jul 29 18:04:58 2011 +0900

    Remove unused import of sun.rmi.runtime.Log :)

commit b7b313bed842e1852201c5779ad9f99b8cd29ad9
Author: Douglas Campos <qmx@qmx.me>
Date:   Thu Jul 14 02:53:28 2011 -0300

    refactoring logger for some core classes

commit 437f98611cee1b87dfd764576e1543dc234bf4a8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 11 11:16:18 2011 -0500

    Minor tweaks to String/CharSequence Java return coercion.
    
    * Add a mapping from CharSequence to string converter
    * Propagate String through to Charset from RubyString.newUnicodeString

commit 3a96fef3d3e190a408ddec98e2db9144bedee117
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jul 10 04:14:25 2011 -0500

    Fix compilation error introduced by my signature change.

commit 2e739ca692cb2eec31f00810ff963bf198e13925
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 8 18:14:10 2011 -0500

    Fix JRUBY-5809: [1.9] String.inspect produces wrong output on UTF-8 string
    
    * Remove some hacks for 1.9 String#inspect no longer needed (and causing unicode text to inspect wrong).

commit c58a86d895f31108c6646cd52e733b59d8c5429c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jun 8 23:33:50 2011 -0500

    Initial support for directly binding Java invocations from Ruby. Only no-arg calls with coercible return values (or void) supported for now.

commit 9ccc428fa21f7b3a1dd75445102696f1b452de76
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed May 25 15:51:08 2011 -0500

    JRUBY-5807, JRUBY-5669: Various spec failures for lstrip,strip,rstrip

commit 0b67eb4f6961aae9933fde9b6b9578f8f081ce14
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 24 17:17:52 2011 -0500

    Add Rubinius::ByteArray (reverse and utf8_char missing right now).

commit 74079fde564167bc42495601e27844186b05b617
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Thu May 19 12:40:47 2011 -0400

    Fix JRUBY-5665 for 1.9 mode.

commit aa4348057f1c2bab3c1958f53d78a9b1d5c8a80f
Author: Brian Browning <bwbrowning@gmail.com>
Date:   Thu May 19 17:33:25 2011 +0200

    5665 fix - check for tainted and pass it along
    
    Signed-off-by: Hiro Asari <asari.ruby@gmail.com>

commit dd0ede8696d8b684baacb15f5904279aff6debec
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 2 12:20:27 2011 -0500

    Replace most slow core-to-core calls to ==, hash, and <=> with lighter-weight global cache hits.

commit 75d0b970c25c1a528c3c5bbdcd9fc638fe583df1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 31 19:38:44 2011 -0500

    Fix JRUBY-5646: RubyString.newUnicodeString in 1.9 mode produces ASCII-8BIT

commit c8f7efe59da4c2e08c3213698f8ccdfe404e7bae
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 31 18:59:19 2011 -0500

    Fix JRUBY-5641: String.each_line: Newline handling differs between 1.9 and 1.8 compatibility mode

commit 455899d62eac3514f0384a9ec060c9d8f74bc7bc
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 29 14:39:07 2011 -0500

    Fix some regressions from perf optz.

commit e294b4aefa0bf7feda41f4fb7adb7c4ad06bbe7b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Mar 19 02:51:07 2011 -0500

    Fast-path dup for String and some micro-optz for chomp(!).

commit 7fd4e3f8f703d9113f431bbe10da8860daa37649
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Mar 2 13:53:13 2011 -0600

    wipe out old coderange before setting new one.  Add some missing logic in cat19

commit 7d8517f51e7d31687d611e573de4c03194fcb212
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Mar 1 15:45:58 2011 -0600

    Tweak zero-sum change to lookupCharsetFor

commit a4ae3798b1cfdab1c79e0abf0322fb30af420ac7
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Feb 28 14:11:38 2011 -0600

    First step towards breaking encoding/transcoding into utility method(s)

commit 617654c2da4fc793529fac7a8845b903ae1b6919
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 16 16:55:05 2011 -0600

    Fix bottleneck in making Java Strings from Ruby String in 1.9 mode (rubyspec runs are ~10x faster)

commit ad351694ef33b15a2d4f886043eec04a311a3cc0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jan 28 13:57:31 2011 -0600

    Move regexp options into a class.

commit 9d6725a0bd7b9b1ae5dc19c71921d3015894c471
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 27 17:12:43 2011 -0600

    Partial fix for JRUBY-5334: Abbrev.abbrev with multi-byte strings returns another result
    
    * rindex was not using 1.9 position-adjusting and searching logic in regexp.

commit db3453d2051b3196d5ab5abcc4b09ae7d637d9eb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 26 23:17:03 2011 -0600

    Fix recursive call back to decodeString by moving toString's old logic there.

commit 028579935f48d49f7e60c28d37422832ed4ef34f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 26 23:02:44 2011 -0600

    Fix JRUBY-5388: Requiring a filename with accented characters fails
    
    * When converting a require/load name to a Java String, be sure to decode using the encoding

commit 891409e4b2333d9b73ad9db8ab9faadb6892e53b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 26 22:21:47 2011 -0600

    Improve and expand fix for JRUBY-5406 and centralize encoding lookup logic in EncodingService.

commit 95fab0b215a789c8bdabd5de8dc346ab0816b9e1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 26 19:13:36 2011 -0600

    Fix JRUBY-5406: [1.9] String#encode does not support "locale" as an encoding
    
    * Using Charset.defaultCharset to get locale encoding; good enough for now
    * Only using default external for "filesystem" encoding. Windows needs some additional love.

commit 517349e5c13e3fe87a9848f32aa2ad0a2e53ba41
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 22 09:13:36 2011 -0600

    Fix one of 1.9 internal unit tests involving casecmp

commit 89ec56363e45f892ba7f72be9598132bc58ea12e
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Jan 19 09:00:28 2011 -0600

    String#* only needs to copy the coderange since the result string must contain all the original source chars

commit ec65c66634d3de7d86ece2e527dbd0ad2765b525
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jan 7 14:33:10 2011 -0600

    gsub! cannot modify a frozen string

commit f76e97c99f0960ae99cdf2da9686c567e51eba7a
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jan 7 14:21:37 2011 -0600

    Whoops 1.9 method does not need 1.9 check

commit 49cab2231cf53118251e2e165be7ddb70dc10f40
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jan 7 13:05:03 2011 -0600

    Actual patch to fix count with invalid sequences

commit b3286d28972cb8e2abc1c77e7144e85e1519a14d
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Wed Jan 5 22:29:37 2011 -0500

    JRUBY-5271 fixes for 1.9 mode

commit 1cda7a9156fce640d5c4418dec358e59b02c9c71
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Wed Jan 5 01:51:43 2011 +0900

    JRUBY-5004: removed unused local variable

commit e1fe9320d05713b1657d023c0dabcf8241d12e20
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Mon Jan 3 23:52:35 2011 -0500

    Redo fix for JRUBY-5271.

commit 3a44a9853579a5c00e04460da4f583fa0472db39
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Mon Jan 3 23:31:20 2011 -0500

    Revert "Fix JRUBY-5271: String#ljust taint bug"
    This introduced some spec failures.
    
    This reverts commit cacb1bedea1fe272477735f065c881bcfd2f7a1d.

commit cacb1bedea1fe272477735f065c881bcfd2f7a1d
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Mon Jan 3 23:14:46 2011 -0500

    Fix JRUBY-5271: String#ljust taint bug

commit 0c5e9d7421f578c0fd2970d445f69663252cf03d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Dec 17 02:03:03 2010 -0600

    [1.9] Minor tweaks and fixes to get ActiveSupport tests running cleaner.
    
    * Enumerable#map needed to yield all incoming args as an array
    * Dir.entries takes an optional options hash now (stubbed)
    * String#gsub and #encode were overzealously performing frozen checks

commit 4a97d517b70c250cd6faf04366bc3411ab1c3d74
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Dec 13 22:10:59 2010 -0600

    ENEBO

commit 3b6acd99509e3385931f8194407073a09b4cff18
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Dec 13 18:18:59 2010 -0600

    Add coderange to StrNodes

commit ce007975d51de24eea69109fb2120d9a072db7dd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Dec 3 13:30:20 2010 -0600

    [1.9] Implement String encoding marshalling. No tags go away, because our default internal/external are still wrong.

commit 162567ee7f4981b044841a57a7d6ad4fa1a73011
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 2 03:00:26 2010 -0600

    [1.9] Implement encoding support properly for Integer#chr.

commit fd0fa789b21b30f294e8286b72b75fe3b688c27a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 1 12:07:42 2010 -0600

    Merge "backtrace" branch to master, now that it runs clean on all our various test cases.
    
    This is a squashed merge encompassing the following commits from "backtrace":
    
    commit eb0e24242050199ac1cc4cf6e48d93025f0186f4
    Merge: 32137de ea48d8d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Dec 1 12:03:28 2010 -0600
    
        Merge remote branch 'origin/master' into backtrace
    
    commit 32137decc9351dd7b6a19c49c7955808f535bb9c
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Dec 1 09:41:29 2010 -0600
    
        Fix remaining failures for test-all.
    
        * Disable CheckClassAdapter temporarily, since it disallows what should be valid JVM identifiers.
        * Use the presence of $RUBY$ in method name as an additional indicator that we're processing a compiled Ruby body during backtrace gathering.
        * Move some largely-static properties out of "init" target in build.xml, so they're available whether init is triggered or not (e.g. run.jvm.model).
    
    commit ee2a624201d5e9cd408d6ae793160aeb99b50b3d
    Merge: cd50ae5 88ad204
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Dec 1 08:01:22 2010 -0600
    
        Merge branch 'master' into backtrace
    
    commit cd50ae5f06b95a2fffab6bc1f3a7419f478d0a52
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Nov 30 19:15:07 2010 -0600
    
        Get remaining spec failure with -X+C passing.
    
        * Embed the actual Ruby method name into the Java method for block bodies, rather than __block__.
    
    commit 52bbfffcae1aed62bf4afcb692bed9725e4e1564
    Merge: 4ed7235 1aace5e
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Nov 30 01:37:15 2010 -0600
    
        Merge branch 'master' into backtrace
    
    commit 4ed723579101fffd8bfa73b30dc6e4e8991866f2
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Nov 30 01:31:44 2010 -0600
    
        Precompiled (AOT) specs *nearly* green.
    
        * Mark __method__ as reading frame "name"
        * Fix AOT-based stack trace mining logic
    
    commit 64e20aa939b5b9c6e41e0e9fe09039a0bb92794a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Nov 29 16:50:55 2010 -0600
    
        Jitted specs running green.
    
        * eval needs to set method name into the binding, so it's there for "__method__" in the eval'ed code.
    
    commit fd442c0a815bcab9eb6c9aa1b71e1f8a260ee03b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Nov 29 16:06:53 2010 -0600
    
        Interpreted specs green on backtrace.
    
        * Tagged some __method__ specs for which backtrace behaves like 1.9, which Matz apparently likes but was afraid to backport. Odd cases anyway.
        * Fixed method name for the block used to define_method.
    
    commit cedb27e430b422c1158f66b4dcc7769922433506
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 24 18:35:22 2010 -0600
    
        Reinstate deprecated java_to_ruby and ruby_to_java I removed, since it's still needed by some external libs.
    
    commit b48b17910de662b4e2d20ee8f4b5cc734eefc1ed
    Merge: f39007e 2ae4995
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 24 13:40:58 2010 -0600
    
        Merge remote branch 'origin/master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
        	src/org/jruby/RubySymbol.java
        	src/org/jruby/runtime/CompiledBlock19.java
        	src/org/jruby/runtime/Interpreted19Block.java
        	src/org/jruby/runtime/InterpretedBlock.java
        	src/org/jruby/runtime/MethodBlock.java
    
    commit f39007eca676c1e6ec9f891ac63b7c5d907b0d1b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Nov 18 14:01:29 2010 -0600
    
        Start normalizing the method/class names generated into Java by JIT and AOT compiler, to wrap up the remaining spec failures.
    
    commit 76e42c4b4522dc87c066d20051d02d1e4005b860
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 20:40:33 2010 -0600
    
        Disable dynopt for now, to allow better stabilization on the main feature of this branch: frame elimination.
    
    commit d03099690df2e16d423e8b6a8969e0264983237f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 15:00:14 2010 -0600
    
        Encapsulate "coreMethods" hash in Ruby and add "bound method" logic to default (non-generated) class populator. `ant test-all` runs green now.
    
    commit ed7458f72bce55b11e5231f8e7b9d590c09ca53d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 10:46:43 2010 -0600
    
        Fix incorrect use of fastSetInstanceVariable instead of fastSetInternalVariable in FFI.
    
    commit f09626121b6a8bea6ab39a3c8ed3ccd69f56b505
    Merge: f780b97 e8ca689
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 10:15:16 2010 -0600
    
        Merge branch 'master' into backtrace
    
    commit f780b972b1f3e18f4c2608d9536e797a0845cd1a
    Merge: 25ab5d3 6967ea7
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 09:04:42 2010 -0600
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/runtime/ThreadContext.java
    
    commit 25ab5d3d3f8c1fbf0fa334427b1485d322e83f86
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Nov 7 00:42:54 2010 -0500
    
        Don't do dynopt against calls that receive blocks; non-local flow is not properly handled yet.
    
    commit a4ad27056dcc3acf6bae0b0af7e618966d08a6dd
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Nov 6 15:22:40 2010 -0500
    
        Tag caller specs that do not pass with new backtrace logic (peculiar eval caller behaviors).
    
    commit eed8902084cfa06d4648935c1f70da57bf0c7a9c
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Nov 6 00:32:59 2010 -0500
    
        More fixes to get specs and tests green on backtrace branch:
    
        * Hash#index was not being bound properly from RubyHash#index19
        * Range#min and Range#max need super, and therefore need frame = true
        * tc_owned is a bad test and fails on system like OS X where (for some reason) / may be owned by user
        * test_trace_func had been hacked for a bad class result (Integer, instead of Fixnum)...fixed that
    
    commit 9d9f94c30de76fa25e738e70e84ea09163eca5cb
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Nov 5 20:03:22 2010 -0500
    
        Fix Kernel#caller to replace .java lines with Ruby lines. Brings specs mostly to passing.
    
    commit de433c771830e95c54f8196453208f2b312191aa
    Merge: 3ffe1cf e25c58f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Nov 5 17:40:02 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyIO.java
        	src/org/jruby/compiler/impl/StackBasedVariableCompiler.java
        	src/org/jruby/evaluator/ASTInterpreter.java
        	src/org/jruby/java/proxies/JavaProxy.java
    
    commit 3ffe1cfba86f52ee96d89f3a1c352597f22f76b7
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Oct 27 01:42:06 2010 -0200
    
        Fix compile error I accidentally merged.
    
    commit b081253fb3cdf5141f7f0cf76d3f8546837d9f42
    Merge: fc3028d ad68e22
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 26 16:30:25 2010 -0200
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
        	src/org/jruby/internal/runtime/methods/DefaultMethod.java
        	src/org/jruby/runtime/ThreadContext.java
    
    commit fc3028d9da2750c9d1c394600ab8ee712388724d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 26 14:39:29 2010 -0200
    
        Add better description for class bodies in backtrace
    
    commit d796555494c2237116c7477c932fd96cd30d2e20
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 26 11:36:29 2010 -0200
    
        Clean up and add color to Rubinius backtraces.
    
    commit 012f5357ce649bd5a996211fe231f26097bf4f5b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Oct 24 16:23:04 2010 -0500
    
        Fix classloader check to allow for compiled method handles, which use a no-arg constructor.
    
    commit 473d48aac6a5523304188d1d433e4c12df989b89
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Oct 24 16:10:32 2010 -0500
    
        Improve Proc-binding-based eval position info by propagating block's position into the binding and through to the backtrace frame.
    
    commit bcfd16b519b145c9ee055db1592dfaced05b71a0
    Merge: 4902faa 5b49583
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Oct 24 11:07:15 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyTime.java
        	src/org/jruby/runtime/ThreadContext.java
        	test/org/jruby/test/TestRubyException.java
    
    commit 4902faaf1678d5aecdef8b0b66f8ec78062aeec5
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Oct 21 09:28:45 2010 -0500
    
        Fix badly-merged RubyProc.to_s19, missing opening brace.
    
    commit 69177d7098f9dc4ff9096d08eee25c0d8bb4f971
    Merge: 801e764 f895837
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Oct 20 21:50:53 2010 -0500
    
        Merge branch 'master' into backtrace
    
    commit 801e7641b8838a8ae8931a9c6dcc5cf050096c4a
    Merge: 0c60a89 dda4644
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 19 23:16:41 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyDigest.java
        	src/org/jruby/RubyProc.java
    
    commit 0c60a89aa746f286588b218681e9ad25b11318c4
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 19 23:06:15 2010 -0500
    
        Only compile direct recursive calls when we haven't branched to another method body (e.g. for rescues) and we're not compiling a closure or class body.
    
    commit 18333fe82c808e8ed49eef898f19c86fa2d764b2
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 12 17:04:13 2010 -0500
    
        Get 1.8 specs running green except for a handful of Kernel#caller specs (which don't expect to see .java files in the trace...not sure how to deal with that).
    
        * Fix another literal-block-calling path that wasn't using callIter
    
    commit 366740120ee76d8df3f977edc1727b60b2d4ad63
    Merge: b64390b 6b243a3
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 12 10:35:14 2010 -0500
    
        Merge remote branch 'origin/master' into backtrace
    
    commit b64390b8cf0d2cb13e06d352969a093b5e86818d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 12 10:33:39 2010 -0500
    
        Remaining fixes to get precompiled mode passing all our tests. Still some spec failures.
    
        * Bump up permgen max for test runs
        * Fix stack-based scope initialization to not leave an unused nil on stack
        * Ensure compiled method handles properly wrap pre/post logic for dummy and backtrace frames.
    
    commit 96bd3cbde91fc505b37ee13cbea6ffa3e8690c58
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Oct 11 18:36:34 2010 -0500
    
        First fixes for backtrace branch in precompiled mode:
    
        * Add test-precompiled build target for running just precompiled
        * Eliminate extraneous toplevel scope being pushed for precompiled loads (because that logic is all in the generated "load" method now.
        * Add a new scope descriptor decoding path that properly sets up a toplevel scope
    
    commit 0ebbd6ac46c9ac04558f5200f980f26f798b9413
    Merge: fc387be ac455fc
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Oct 6 21:53:18 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyIO.java
    
    commit fc387befff57ada6c116b646a3dfb767cc926ee5
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 28 15:57:58 2010 -0500
    
        Renumber arguments for consistency.
    
    commit bbc91d3c4039bf6c26ceffd4899dcaaeaa3d46d0
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 28 15:40:38 2010 -0500
    
        Fixes to get specs a bit closer to running green.
    
        * Move pre/post logic for Script.load into generated code, so it's the same everywhere.
        * Make pre/post-load push a frame, so top-level of a script is always framed
        * Remove break handling from non-literal block call paths in CachingCallSite
        * Make sure all literal block calls are using CallSite.callIter, which handles break
        * Fix a bad test in testCompiler that needed visibility tweaks and framing
        * Add complete doco for CallSite
        * Fix Kernel#caller to trim from top of stack instead of bottom
    
    commit 4e814a24d5b2ef1b6567a3076a463ff9d08e2a0d
    Merge: 91dc13a 3dbcef3
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Sep 27 17:43:30 2010 -0500
    
        Merge branch 'master' into backtrace
    
    commit 91dc13a2f0b74bc1054d83378782416465ecc1b8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Sep 27 01:02:48 2010 -0500
    
        Fixes to get test-compiled (but not precompiled) passing 100%.
    
        * Fix eqlInternal's RubyNumeric branch check if classes are equal
        * Provide file and line from all BlockBodies, so Proc#to_s can always use it
        * Fix rejiggered Struct#each and Struct#each_pair to call the appropriate internal version
        * Fix ruby_test's IO.new suite to not use STDOUT directly, risking that it get closed
    
    commit dc4af45352607ebb8a95d70befdcdb15c1111c58
    Merge: ec8bb7f 90275be
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 21 09:52:10 2010 -0700
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
        	src/org/jruby/RubyDir.java
        	src/org/jruby/RubyKernel.java
        	src/org/jruby/compiler/ASTInspector.java
        	src/org/jruby/javasupport/util/RuntimeHelpers.java
    
    commit ec8bb7fc31d4acd4ebcb040f088e19fb427448e8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 19 16:21:38 2010 -0700
    
        Remove frame = true from all core class methods, to reduce their call costs. A few remain for invokeSuper and methods that may still need frames.
    
    commit ec276b6ca0c6009702839b12d97664b9e52b1023
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Sep 16 14:10:43 2010 -0500
    
        Eliminate RubyTuple use that snuck in.
    
    commit f80254100cfc17ac6eb558e465fc1fb9122c3ee4
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 14 10:07:53 2010 -0500
    
        Special case a few immutable core types in equalInternal/eqlInternal.
    
    commit eb66c45145e4fd1f8c28e9a8c544114f034116e8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 18:26:13 2010 -0300
    
        Performance changes for backtrace logic:
    
        * Back off using Java stack trace for Proc's to_s file+line, since it's prohibitively expensive
        * Move the Backtrace stack to being a fixed-size array of objects updated, rather than created, when a push happens
    
    commit 6f0ade5ab28946b8800431d3454d2e57fc0dbe19
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 11:36:07 2010 -0300
    
        Add generation guard around trivially-inlined logic.
    
    commit c4d8705217174580d35757dc85c5c646e980b57f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 06:18:38 2010 -0300
    
        Full speed ahead with a caching mechanism for calls from core classes. Only works for core class methods right now, but opens the door to expanding that.
    
    commit 5874abc01104f6c0f435f8ac4643ed0f77cf7cff
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 03:43:37 2010 -0300
    
        Localize some fields used in Array#include? to speed up the loop.
    
    commit 346245cd5e154574d14736cf4b9e0b4b98260d14
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 11 15:02:41 2010 -0300
    
        Allow passing a number of iterations to bench_quicksort.rb.
    
    commit b4687022a1f00d0b63838b1c9daf00753fcfa93e
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 11 11:55:15 2010 -0300
    
        Fixes to get run-junit-compiled 100% passing on backtrace branch.
    
        * Fixed a couple tests that are too sensitive to core method line numbers or expected only .rb elements in the trace
        * Added a mechanism for procs to retrieve the most recent Ruby frame, for to_s purposes
        * Added comments for hybrid backtrace logic
    
    commit 15cd9b16cb2750d0e40ba478d07fe5bf265dc620
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 11 08:07:57 2010 -0300
    
        Add better logging to AnnotationBinder (for showing framed/scoped core methods), ASTInspector (for showing methods detected as framed/scoped and for reporting deopt flags as they are set), and JITCompiler (for dumping jitted methods' full classes and inspector results). New property jruby.jit.dumping=(true|FALSE).
    
    commit c4e6176498590d791868055025c2e72ded1ccf13
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Sep 10 02:10:20 2010 -0400
    
        Improve dumping of generated bytecode by including class and method name when possible.
    
    commit 07fc4215f6873f449f89d4f5da7a7e2e8963bc70
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Sep 9 23:39:20 2010 -0400
    
        Make attr accessor's var accessor field volatile, to guarantee visibility across threads.
    
    commit e3a7cf5cd4d8ccd08407955779bdd94feb5e4ac8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 13:26:48 2010 -0500
    
        Add missing "in" to caller backtrace lines.
    
    commit 7140c339f386959853f747d86cb2ea9a8afa6f2a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 12:10:50 2010 -0500
    
        Fixes to get tracing tests running in interpreted mode:
    
        * Off-by-one line numbers were off for MRI too. Fixed to correct line numbers
        * call and return for Ruby methods need to use impl class, not self class
    
    commit cbc9c4edab56807a023817d06db9c22441fa4b53
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 10:31:57 2010 -0500
    
        Fix runInterpreterBody to properly unwrap RootNode for "gets loop" execution.
    
    commit 3a09773058d8d58d5bf8f1b6fbebc494fc18f7c6
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 10:01:43 2010 -0500
    
        Make --bytecode attempt a recompile, so that dynopt and no-compile modes can still print bytecode.
    
    commit 4e48e722ba5ded10975af348738237fcb7fe9b2a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 09:23:38 2010 -0500
    
        Add a "full" backtrace style which does not omit any Java frames and interlaces the Ruby frames.
    
    commit 6f5057e3ae1e372bd66602dcc26864adc3270128
    Merge: 7006d31 811fd8d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 07:48:47 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
    
    commit 7006d3175bbf4630921dfecaa4faef2a39a77205
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 4 16:04:28 2010 -0500
    
        Bytecode size reductions for stack-based nil-initialization of locals and for x, *y and x, * forms of masgn.
    
    commit 3a8fb16f020c2b9aaa6228605bdb3d8fd1b78ccf
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 4 14:52:04 2010 -0500
    
        Do not do direct recursive invocations for heap-based scopes, since the scope is not currently being reset.
    
    commit ec00e99636667eff97a891917ae9ef37f94a6eb7
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Sep 3 19:55:24 2010 -0500
    
        Turn on dynopt by default, to aid testing of new logic.
    
    commit 9508e8a6925fce4f57a386ede867b3f8f9b67d38
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Sep 2 12:40:38 2010 -0500
    
        Fix Time test that expected two separate Time.now objects to to_s the same.
    
    commit 65ba8b37a8a232495453e71b2a560c761b40893f
    Author: Nick Sieger <nick@nicksieger.com>
    Date:   Mon Aug 30 14:50:03 2010 -0500
    
        Use new backtrace info to set a more useful Java thread name
    
    commit 75b100604af39de52b26bdb21669136234424a0b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 30 11:37:49 2010 +0900
    
        Fix ifne/ifeq bug in dynopt guard and switch DefaultMethod to not flip generations on JIT in dynopt mode.
    
    commit fe3b408629e94b7db0436152968bd6d2232f6c7c
    Merge: eea60da 85c64c6
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 29 20:33:06 2010 +0900
    
        Merge branch 'master' into backtrace
    
    commit eea60da3905c87c16fbb4e6c78fd7a07f842e4bd
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Aug 27 14:09:44 2010 +0900
    
        Modify Java Fixnum fib bench to use the long call paths where possible, to be more like what compiled Ruby does not.
    
    commit a189563d9073208292e91aff3eb1c88489bd113d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Aug 25 15:07:21 2010 +0900
    
        Fixes for jitted/compiled backtrace generation
    
        * SClass in a method body needs to frame, so it has a jump target for non-local return
        * Compiled methods need to always have their ruby name in the method name, so it can be mined out appropriately
        * Synthetic calls, like to rescue bodies, need to gobble caller frames to avoid multiple entries
    
    commit 276226de611cb8d5af942148109c2a51982e7640
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Aug 25 14:03:44 2010 +0900
    
        Add callNumber tracking to method handles, to properly handle return jumps.
    
    commit b94bcf119a54f52ab9be3c86bc5cc85078f20eee
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Aug 25 13:16:25 2010 +0900
    
        More fixes for hybrid backtrace:
    
        * Get generated trace to be RaiseException's Java trace
        * Add Ruby exception name to the RaiseException message
        * Rewire and repair trace calls
    
        All main suite tests now pass in interpreted mode.
    
    commit dc9fcd3de0f3070507ac0a0647973d1e9f16ae4f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 23 14:38:47 2010 -0500
    
        Fix debug logging of exceptions being raised and patch a couple tests for new backtrace structure.
    
    commit 3acd3201d85e4da9186fa17d3a04bdc9db742e29
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 23 13:23:04 2010 -0500
    
        Include original source file in compiled Ruby, add missing "in" line for MRI rendering, and soften requirements in test_backtraces to allow for native elements in the backtrace.
    
    commit 728cf3983fbeffba944fe34a8b0e410cc1de041c
    Merge: 88a64de 0e9c956
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 23 00:18:07 2010 -0500
    
        Merge branch 'master' into backtrace
    
    commit 88a64de879446be3398ba7671b5fa1f3e46ce02f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 17:29:21 2010 -0500
    
        Turn on "positionless" compilation, since compiled code no longer needs to update interpreter backtrace frames. Also fix nil/null backtrace rendering.
    
    commit 5712a4ce285a5b3662c8ef8def2599223a232626
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 17:18:17 2010 -0500
    
        Fix off-by-one line numbers from interpreter frames.
    
    commit 519f4625b9d9658f50b986b1add560903ee453de
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 17:10:47 2010 -0500
    
        Remove some old backtrace code no longer in use and get all "backtrace" method handles to generate with no frame at all (since Java stack is used now).
    
    commit 424d967df8a3b6ba277bdb1b530d4f7f62ecbc4a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 16:52:29 2010 -0500
    
        Get Kernel#caller working with hybrid traces, get Rubinius rendering working again (partially), separate gathering and rendering of backtraces.
    
    commit a00822740712ddd924896feccc10f015fd20d4be
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 15:32:08 2010 -0500
    
        Mine method names out of AOT and JIT compiled stacktrace elements and get JIT using the original name of the method.
    
    commit 039d184ac5f798aed21870a7552b66c5973ca0eb
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Aug 14 22:16:48 2010 -0500
    
        Simplify in-class encoding of StaticScope data.
    
    commit 876a762b8af88955bee598dfd0421805d9b47c40
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 01:41:44 2010 -0500
    
        Fixes to hybrid traces to get tests working better:
    
        * Omit Kernel#raise and the KernelJavaAddons rbRaise from traces
        * Handle getBacktrace when there's been no preparation
    
        Also modified test/testException.rb to allow internal line numbers for the "load" call, rather than MRI standard "whatever line it was called from".
    
    commit 06f1bd171d6897f651b3cebfd76551080acbfe40
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 00:39:59 2010 -0500
    
        Move backtrace management to a separate stack and implement mixed-mode backtrace generation.
    
    commit ca40e73a7c136dfdd3853f0cd62a73bf70a3a08f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Aug 21 20:56:50 2010 -0500
    
        Get all major interpreter entry-points passing through simple, known method bodies. First step toward mixed-mode backtraces.

commit 0d401705bdebb97ebee93ac3bc74357962bb5850
Author: Nick Sieger <nick@nicksieger.com>
Date:   Tue Oct 12 13:15:59 2010 -0500

    Delete extraneous javadoc @param

commit 98bb3b64797b952d3d65cd3e20426f96ba37e08d
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Sep 21 22:34:09 2010 +0200

    String#gsub with pattern and replacement respects $KCODE when the pattern collapses

commit e70f1d506f6868f4e403cae39ac9a69ab8b4bf20
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Sep 21 22:28:06 2010 +0200

    String#split with Regexp respects $KCODE when splitting between characters

commit c490db57b5d9b866835a35588cee86e9bccbfe70
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Sep 21 22:16:46 2010 +0200

    [1.9] fix String#upto specs

commit 3ceede5cd748f7af1dea1b97db65e5737ddf81d9
Merge: 414605b 69c2bac
Author: Tim Felgentreff <timfelgentreff@gmail.com>
Date:   Fri Sep 10 18:00:36 2010 +0200

    Merge remote branch 'origin/master' into cext
    
    Conflicts:
    	.gitignore => cext added cext build results
    	build.xml => cext added osfamily-specifiers to git invocation
    	lib/ruby/1.9/mkmf.rb => master added functions, cext added jruby support
    	src/org/jruby/RubyBignum.java => cext made LONG_MIN, LONG_MAX and ULONG_MAX public fields

commit 7bf2da0175e1f8c956162e3b066c00620cce9182
Author: Tim Felgentreff <timfelgentreff@gmail.com>
Date:   Wed Sep 1 23:55:59 2010 +0200

    only grow underlying byte array, don't shrink

commit 85c64c6b625255cb20a193c9aae1740bb0c90269
Author: David Calavera <david.calavera@gmail.com>
Date:   Sat Aug 28 14:33:01 2010 +0200

    [1.9] String#inspect returns a string with \#<char> when # is followed by $, @, {

commit d1d6f7b3ed2eff967dcd22b382c81c817c4550bc
Author: David Calavera <david.calavera@gmail.com>
Date:   Sat Aug 28 14:30:03 2010 +0200

    fix JRUBY-4979: String#inspect seems to be broken with --1.9 option

commit c4e46dc874d4584627aee552f5aa839eaa15429f
Author: David Calavera <david.calavera@gmail.com>
Date:   Wed Aug 18 18:49:35 2010 +0200

    String#sub! with pattern and block raises a RuntimeError when self is frozen

commit d4057864fcd7c374ede8e46f9ec7ff9e903e2582
Author: Tim Felgentreff <timfelgentreff@gmail.com>
Date:   Wed Aug 11 19:09:43 2010 +0200

    implement a resizing method for RubyString

commit edc9eac5b583c4b9f9d2fa2e9ddb1a0c5ffc1a16
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Wed Aug 4 17:48:21 2010 +0900

    JRUBY-4987: ArrayIndexOutOfBoundsException in String#lines paragraph mode
    
    "foo\n".lines('').to_a # => ArrayIndexOutOfBoundsException
    Parsing last "\n" causes OOB access.

commit a23126def0f56942601f6b6a6ad37f7d85b5e1ea
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Mon Jul 12 23:38:57 2010 +1000

    Rework RString a bit to ensure state is cleaned up on the last downcall.

commit 0c064a13d8d372f3da01f6e233f25e437828d7f4
Author: David Calavera <david.calavera@gmail.com>
Date:   Fri Jul 9 19:59:19 2010 +0200

    String#gsub! with pattern and block raises a RuntimeError if the frozen string would be modified

commit 57847284480c6c6bd5d4cd41dcd45263069e66b1
Author: David Calavera <david.calavera@gmail.com>
Date:   Fri Jul 9 19:29:55 2010 +0200

    fix JRUBY-4929: String#gsub with one argument should return an Enumerator

commit d46e019930fc06ffe47ab11ef77e253c0c0b27b5
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Sun Jun 27 20:48:50 2010 -0400

    Use frozenCheck() when appropriate.

commit b163b9fc9ac779fd27a21d6ab7d259083cb1236f
Author: David Calavera <david.calavera@gmail.com>
Date:   Sun Jun 27 23:26:44 2010 +0200

    [1.9] fix NPE clearing empty strings

commit 0b0fd3ef078570741c91a4e08d3e21ce5c233026
Author: David Calavera <david.calavera@gmail.com>
Date:   Sun Jun 27 21:31:15 2010 +0200

    [1.9] fix String methods that raise a RuntimeError working with frozen instances

commit a8c843e21e0cbcc3456c77127fe5a9716c321e1c
Author: David Calavera <david.calavera@gmail.com>
Date:   Sun Jun 27 20:32:29 2010 +0200

    [1.9] String#succ and String#next return subclass instances when called on a subclass

commit 67a5e02e46ea921e0cd641ea6d0e4ea34e4f3a41
Author: David Calavera <david.calavera@gmail.com>
Date:   Wed Jun 16 22:09:13 2010 +0200

    fixes JRUBY-4883: String passes class extensions to subclasses when we call a non mutable method

commit 602c1f2872b2a39aded0680c92409fb321bc6509
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Mon Jun 7 23:12:25 2010 -0500

    Fix String#each_line and String#lines specs.

commit 69f4953e731b86d595b69e1a4b62e25ed8c9a49d
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Mon Jun 7 22:41:33 2010 -0500

    Fix a String#strip! spec, and clear an apparently stale spec which no longer exists.

commit baa11e09aef91e240218ef26cbd08a83ed13b959
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat May 22 20:19:29 2010 -0500

    Various fixes for Ruby 1.9 Dir specs.

commit 9992832b23139fe63201a3f4462535be4cf556f6
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Sat May 22 21:53:41 2010 -0500

    Fix JRUBY-4813: RubySpec: String#sub! with pattern and block raises a TypeError when self is frozen
    
    Also take care of the 1.9 mode.

commit 1b919d492bd5cf2132383d291369c14972f47f63
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Apr 23 14:31:57 2010 -0500

    Fixes (and more) for JRUBY-4737: Compatibility issue with Spring property from 1.4.0 to 1.5.0.RC1
    
    It appears that JRuby 1.4.0 allowed various objects to coerce to "void" by returning null, so this commit fixes that.
    
    In addition, I've tried to unify some of the toJava logic, making most implementations call super.toJava if they can't coerce to the requested type (allowing RubyBasicObject's implementation to try some other avenues or error out). I also added some additional coersion cases for Time to java.util.Calendar, java.sql.Date/Time/TimeStamp, and joda's DateTime (it already did java.util.Date).

commit ed0bbfe064f0e084cb3ab497deaaf13535c8e0b3
Author: David Calavera <david.calavera@gmail.com>
Date:   Sat Mar 20 17:06:55 2010 +0100

    fixes JRUBY-4648: StringScanner#getch should always return Strings, never String subclasses
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>

commit 9b1f32c2ad5ef8aa7c81d470dd855b49d601d4bc
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 25 20:05:47 2010 -0500

    Minor perf improvements to marshalling and simplification of lazily-initialized collections in RubyModule.

commit 26323269fcfb2341ff8fa3b198037e1290982926
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 10 16:21:23 2010 -0600

    Fixes for JRUBY-4553: Scalability: JRuby suffers from Java Charset lock contention

commit a55fcb067f99286c294536cfecfdeff70d2fd848
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 9 11:36:03 2010 -0600

    Sweater unraveling for JRUBY-4615: java integration specs interference
    
    The original problem here was that depending on what order JI-related code was used, a different object could get cached for a java.lang.Class in ObjectProxyCache. Normally, it should just be the proxy wrapper, but some paths inserted a the RubyClass version of the class. This led to peculiar failures if specs were reordered.
    
    The fixes made here are as follows:
    
    * Eliminate all remaining to_java_object logic, which is where the bad OPC.put originated from
    * Move all coerce*ToJavaObject logic from JavaUtil into the appropriate toJava overrides
    * Fixes and modifications surrounding the above two changes

commit 944db049955c3a2a8423f5b2ef40236232a8619a
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Feb 23 15:05:16 2010 +0100

    Latest RubySpecs, freshest tags

commit 08e98f0db46fb461001b60036b2565285a36822e
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Feb 23 14:37:32 2010 +0100

    Fix one RubySpec failure for String#split
    
    This one: String#split with Regexp taints the resulting strings if self is tainted

commit 53592cab95ec97a3f927def27c9f6d9dcacbf2a3
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Jan 19 14:45:56 2010 +0100

    Additional tweaks JRUBY-4463 bugfix.

commit 4f22d6bc7549075af866b6c7406ad419dd90c8b4
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Jan 19 13:28:37 2010 +0100

    JRUBY-4463: [1.9] String#<< crashes with negative argument
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>

commit b1db83ca58984fda8fc31b7485a73e25bf462761
Author: David Calavera <david.calavera@gmail.com>
Date:   Sun Jan 17 20:30:59 2010 +0100

    fixes JRUBY-4424: [1.9] Leading underscores handling in String's hex, to_i, to_f different from MRI
    
    Signed-off-by: Charles Oliver Nutter <headius@headius.com>

commit c5f4a4a73f1871b154f19bcf65beedf67694664e
Author: David Calavera <david.calavera@gmail.com>
Date:   Wed Jan 13 16:01:02 2010 +0100

    JRUBY-4458: [1.9] (:A..:z).to_a goes into infinite loop and eventually crash JRuby
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>

commit c2fd361aa6dac641d4cfd4d1623b5b48e93aa21b
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Jan 12 22:41:33 2010 +0100

    JRUBY-4463: [1.9] String#<< crashes with negative argument

commit 895b65fd6d9896949bd68a3e7d6839917dcdb72d
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Jan 12 20:57:23 2010 +0100

    JRUBY-4464: [1.9] String#tr! and String#tr_s! crash in some cases
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>

commit e6c72780d9942527d89c535298026f8403416cbc
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Jan 12 14:09:02 2010 +0100

    [1.9] Fix Array#join and Enumerable#join for 1.9

commit 4d6c364fba608450958f3fbe32a75edab74e6d79
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 30 23:51:53 2009 -0600

    Add a global to_java method when JI is enabled to permit pre-coercing objects to specific Java types.

commit 1fdd7824993d786bcba399d5d4a59a4f2b9ae0aa
Author: Nick Sieger <nick@nicksieger.com>
Date:   Wed Dec 30 13:11:54 2009 -0600

    Clean up some dead code and change some convert class names in prep for JRUBY-3709

commit 2f3802343d0de9440a71e099002d3b66f51c0a51
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 23 00:40:00 2009 -0600

    Use accessors for those pesky ByteList fields and update bytelist.jar to a current version with accessors and deprecated fields (for compile warnings and because we'll want to privatize them some day).

commit 02b8e01b4686b05da6762dd69950835d57dcd653
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Dec 19 14:24:28 2009 -0600

    Remove MiniJava and all the tendrils it extended through JRuby. Useful remainder moved to org.jruby.java.codegen.RealClassGenerator.

commit 83ff6157444a11d2257e2a3338ba72af31514ea2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Dec 15 21:07:17 2009 -0600

    Add reification items to allow extending RubyString and creating a new subclass.

commit ac5bde5a92f4e2a80118d8eccfdd73ec5dcb5ac4
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Fri Dec 11 07:11:59 2009 +1000

    Optimize String#slice!() for head/tail slicing.  About an order of magnitude faster when slicing from the head of a large buffer.

commit 680ed76351cf25ce85c46fcb4efb49a4d06afe2e
Author: Daniel Luz <dev@mernen.com>
Date:   Thu Dec 3 20:32:19 2009 -0200

    JRUBY-4305: Fixed String#encode returning garbage from unused buffer space under certain conditions
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>

commit d2f026031c23e2b8561e8a1bf53ea2d6488d07bc
Author: Daniel Luz <dev@mernen.com>
Date:   Thu Dec 3 20:16:53 2009 -0200

    Fixed various forms of String#encode using shared buffers as first step
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>

commit b664b53d61ee910f13fd6ca883a11dbe1ebb8326
Author: Daniel Luz <dev@mernen.com>
Date:   Thu Dec 3 20:12:30 2009 -0200

    JRUBY-4304: Fixed String#encode() returns a String with a shared buffer
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>

commit 1022103f1df259428d479baa5cbdb529b4490d3f
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Sun Nov 22 06:43:14 2009 -0800

    JRUBY-4260: Remove String#each in 1.9 mode
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>

commit a00c0118b86033694e48e3cf6fb86998e14db3d3
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Nov 6 10:03:11 2009 -0600

    Change common methods to have Common on end and make any 18+19 methods with 19 suffix not have 19 suffix

commit 2947d2c1d18622906115bb1978f7d2e01bfee716
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Nov 5 12:06:37 2009 -0600

    For extra errant ;

commit aa64873d24cb159c6caed8c24b953c34906cc22d
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Nov 5 12:04:01 2009 -0600

    Remove warnings from file (where did some of these ;; come from?)

commit 480efa2988c6b7beccbaadc6b5d1fe89c502f675
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Oct 25 22:28:12 2009 -0500

    Fix for JRUBY-4084: Working with the enumerable methods on arrays containing strings created by splicing can raise a Java Exception
    
    Thanks to RJ Lorimer for the fix!

commit ac73a4946d03ab780bda374b5620c13ee4ac1bc1
Author: David Calavera <david.calavera@gmail.com>
Date:   Mon Oct 12 16:45:27 2009 +0200

    String.encode support improvements
    
    Signed-off-by: Charles Oliver Nutter <headius@headius.com>

commit 2998019d69498722418a27ddcc0d27890b668205
Author: Nick Sieger <nick@nicksieger.com>
Date:   Tue Sep 22 22:56:08 2009 -0500

    Get JRubyTestSuite working on windows.
    
    - `javac' must be on path
    - path expansion should account for drive letter
    - RubyString(): Get utf8 bytes out of a string instead of "plain" bytes
    - Remove RubyString constructor that took a String; should be using CharSequence version
    - Don't run Tempfile perms test on windows
    - Fix Dir.entries on Windows

commit afbd15d850150f55ba2a3669ac9bcc62a17d1332
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Sep 22 19:58:59 2009 -0500

    [1.9] Rudimentary String#encode! support, using java.nio.charset.Charset stuff. Characters are passed through UTF-16, so there's potential for loss.

commit 7a67bd07c400f7ebfdcc09175e3fbee7f8cc3a9c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Sep 22 09:34:37 2009 -0500

    Simplifications of existing coercion protocols; trying to reduce the weight of code that needs to be reworked.

commit 5b7a2f1b3bfab16ea505083f469cd411539d991b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Sep 16 10:40:40 2009 -0700

    [19] COW split was not considering begin offset (plus remove extra find method in exchange for indexOf in ByteList

commit 79ae9a9bdb990d7115922a08642be9da447b6247
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Sep 1 22:44:54 2009 +0200

    defaults IO encoding, merged with headius' patch
    
    Fixes JRUBY-3433: Encoding.default_internal and Encoding.default_external missing
    Part of work for JRUBY-3605: [1.9] IO.initialize missing option hash parsing
    
    Signed-off-by: Charles Oliver Nutter <headius@headius.com>

commit 3cf471f5504548c29420e5e4ae023ccce0f7f256
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sun Aug 30 14:32:52 2009 -0500

    [19] Wrong scope for sub! backref.  Added some missing annotations

commit cbef2a3a84bdbc8d2f419fc603677e7eb99e3615
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Aug 10 15:33:36 2009 -0500

    [19] Allow String.force_encoding to accept Encoding argument.  This makes erb work and rdoc

commit da0fdfeab2d6639be42bc787f11456a6d998e460
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Aug 5 21:41:08 2009 +0200

    Remove some tags and make conversion from bytes to longs/bigintegers use the same methods as MRI. First part of converting Convert.

commit 38b0f93ab38280889f6e2ac819284de29b9a1f40
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 4 15:44:44 2009 -0500

    Add a boundscheck to the encoding-aware portion of RubyString.inspect to avoid array overrun when string is not encoded as expected. Also restore deflate spec which appears to still be broken in some way (JRUBY-3775).

commit 6c327cf6ad90d29c4460e203e1f062457154d1d9
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Aug 3 18:01:04 2009 +0200

    [1.8.7] Loads of String methods

commit a5add56753a0410755796530af079bd3e0071eef
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Jul 31 12:06:55 2009 +0200

    Start the process by converting ARGF to be 1.8.7 compatible.

commit 5cb010871e68cc5760980196c8276e26f20546e0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun May 17 03:24:52 2009 -0500

    Fix for JRUBY-3638: Multi-Threading issues with JRuby 1.3RC1 and soap4r
    
    Whew! This was a doozy! The problem here was as suspected, a "dummy" scope was being shared across calls/threads and causing the backref/lastline to step on each other. This would not simply affect multi-threaded cases either; it could easily break cases where only a single thread happened to read a bad backref from a previous call, or even a single thread read its own backref from an earlier call in the stack trace.
    
    The fix is detailed largely in the bug. No test cases accompany this because a new core construct has been introduced to produce a hard failure if we ever make this mistake again. It's a very tricky thing to test since it depends on either thread-unsafety or one call reading a backref and one call writing a backref in ways that are not immediately apparent yo the compiler. So these are fairly specific and localized issues that have far-reaching effects.

commit 66b28d6e25993dac775867702563e32e7bc75b41
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 8 20:58:55 2009 -0500

    Migrate to having backref/lastline on DynamicScope again, with inspector changes to ensure the scope is available. Does not yet pass all tests.

commit 77ece6d2c7a56beaef4dd74a04e8226ec7bacff4
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Mar 22 16:03:09 2009 +0000

    Simplify tainting.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9458 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d96392237b51c99897581e0bb3fc8e3debe5b943
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Mar 22 16:01:19 2009 +0000

    Simplify tainting.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9457 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 93fca51199bbb9cdda372582ee69b312d1fc35ce
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Mar 22 14:10:33 2009 +0000

    Fix string conversion order for 1.9 String#[]=.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9454 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e9f8f283755f8b148c8ac901e7530724cc9dc976
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Mar 21 17:08:16 2009 +0000

    1.9 String#[]= should be named group aware.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9445 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 93a4a9148aa5d384001db0eb97e688da9e0c4746
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Mar 21 16:54:08 2009 +0000

    1.9 String#[] should be named group aware.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9444 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 48618daa524b114d9187615caa3625709136bb99
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Mar 20 01:26:07 2009 +0000

    Remove some noise.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9440 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5f3bea9666b7239074ef6549dabeb1cb9b0a8656
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Mar 20 01:23:36 2009 +0000

    Fix tainting.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9439 961051c9-f516-0410-bf72-c9f7e237a7b7

commit afb53a2671c696d9205e94db2d181bd920959ffe
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Mar 20 01:08:27 2009 +0000

    Simplify 1.9 case for String#scan.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9438 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d4c25b17b050e34eb74af19f7a0a210dc885c739
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Mar 20 01:02:42 2009 +0000

    Ditto for String#scan.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9437 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d40b7cb11308fc251810f3193d286b08015acb38
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Mar 20 00:37:20 2009 +0000

    Ditto for 1.8 String#sub.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9436 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9116f7edccf5ef064c0e1dfb97dd532d4e10c24c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Mar 20 00:20:57 2009 +0000

    Simplify 1.8 String#gsub by using flags directly.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9435 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 63318818ba3354bf3832af05ff880dda8c8c5e0f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Mar 12 18:08:01 2009 +0000

    Fix for 1.9 String#chomp!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9394 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 51280d4dbe9f2bddfee78ac09da47b6284c62ffd
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 25 20:12:03 2009 +0000

    Do not modify in escapeCodePointCat (internal use).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9321 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f4848d0774e3c06c8ee42389b91f443ed8a4eb76
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 25 20:05:30 2009 +0000

    1.9 String#chomp. Coderange may change.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9320 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 86d5d53b4f8cd7e220772bdb35d381c2bfc3abd4
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 25 19:51:09 2009 +0000

    1.9 String#delete sync.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9319 961051c9-f516-0410-bf72-c9f7e237a7b7

commit aa4f9c61c8d934847b01b928049abe4ec26aee6c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 25 19:13:18 2009 +0000

    Fix one byte opt for 1.9 trtrans.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9317 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f8af48a00d9af54f8f9556311b643b22867dbd66
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 25 18:58:22 2009 +0000

    1.9 trTrans sync.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9316 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e4fdb79925caf27dd429b8f6d46c0a91a0b42751
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Feb 24 03:14:52 2009 +0000

    Fix 1.9 String#gsub tainting.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9292 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e71a15738f33c8d4dde0969a91a1a618e049fef9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Feb 24 02:55:14 2009 +0000

    Use flags directly to simplify tainted/untrusted.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9291 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 37f69c9a3eb1e063502eb2609b675286358bb1e9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Feb 24 02:36:36 2009 +0000

    Use flags directly to simplify tainted/untrusted.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9290 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5b90b3f6e2084ebfc42af39801c7e98fb9b2678b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Feb 24 01:32:50 2009 +0000

    Much simpler, RubyBasicObject specific, _branchless_ infectBy that doesn't use interface calls. Covers 99% of core methods.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9288 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1e930388f3c34fe2d974ce9480a70adafee5ba6
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Feb 24 00:58:42 2009 +0000

    1.9 String#sub/sub! trusted support. 8/3.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9287 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 07a1e0607ae0939bcb293368f460845069c5a8d0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 23 23:48:34 2009 +0000

    Optimize most common case.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9286 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5ba0611d75a6f2ab4b857629a3cc8b721206fddc
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 23 23:45:27 2009 +0000

    Vararg version of 1.9 String#match 10/3.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9285 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cf7611abb4a2b8bd33f77f8dce62ee5713579457
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 23 23:21:14 2009 +0000

    Fix shared bug in 1.9 String#rindex.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9284 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dfc7e44ab5932e5670c6c2db70d9034a77cb32dc
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 23 23:17:51 2009 +0000

    Fix shared bug in 1.9 String#index.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9283 961051c9-f516-0410-bf72-c9f7e237a7b7

commit be6ee9ba041a23aef2c6c7d2a379e0d7bc90e425
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 23 23:15:16 2009 +0000

    Fix 1.9 String#index 10/4.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9282 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 218611bff7db661ace61ab872f9ed586720ec32b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 23 09:42:16 2009 +0000

    Fix taint/untrust propagation during gsub.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9277 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5276187cd178537c8b30c2c063dede410dc92a59
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 23 08:18:12 2009 +0000

    String#% does not appear to prepend prefix for zero. Fixes test_MOD in 1.9 test_string.rb.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9273 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 912aabd816d357027ba922192676e2e13e3ac4d0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Feb 21 20:08:50 2009 +0000

    1.9 String#hash return value should be affected by encoding/coderange information.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9260 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 793cf7fc14818a772d6883815697d1d386437d56
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Feb 21 19:21:10 2009 +0000

    Fix eql? protocol for hashing String subclasses.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9259 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 983b80d7b232e98e8d0c6fe9b23ccbc12a7e1447
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Feb 21 16:07:00 2009 +0000

    Fix 1.9 String splicing.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9258 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a82f0127c87ba8be96b876642f6c6aaf5d20c771
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 16 22:59:00 2009 +0000

    1.9 Range#each.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9202 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0f4a40c4515bfb5f33350726efe5ad2cfc6a04ce
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 16 22:39:52 2009 +0000

    More consistent naming.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9201 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3fc5ce1617043d6064b37002348ec1a8a271bfd8
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 16 22:34:30 2009 +0000

    Ugh. 1.9 Range#step.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9200 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4d6a96ef688ad0d01d3a7dd4d9ac36613b7d1ecd
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 16 01:39:24 2009 +0000

    Ditto for populateCapturesForSplit.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9184 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b7832615c1147c19e677d316593771431108dff6
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 16 01:36:32 2009 +0000

    Parameterize populateCapturesForScan with 19 flag which is going to be constant propagated anyways. So still no runtime checks.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9183 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 14efbb3f564142929b14402334ca602214db9af7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 16 01:26:15 2009 +0000

    1.9 String#scan cleanup.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9182 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 683bbaa2657c7b0f370bfcf83fc8a4738ab728e9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 16 01:20:25 2009 +0000

    More meaningful name.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9181 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 429bd7074eaf80095df032ea28fb908984e5759c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 16 01:16:05 2009 +0000

    More bullet proofing.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9180 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8ec3f8bc2033f1de6a721273cc0bec6182b2ce8a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 16 01:13:02 2009 +0000

    1.9 String#sub/sub! cleanup.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9179 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 248c28eedf9556f4d0943c571954e8a47acb98f0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 16 00:14:34 2009 +0000

    1.9 String#split for String and Regexp arguments.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9178 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2c92cf916ca9c0a6e43bb882bbf08d5df3778e79
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Feb 14 22:36:17 2009 +0000

    Make RubyBasicObject Comparabe<IRubyObject>.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9154 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f8ed15cb51b3bd7a0252f983cc651ee187af457b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Feb 14 22:10:09 2009 +0000

    String should be Comparable.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9153 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5028b35830dc95110247141022dbac598789f75f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Feb 14 21:20:23 2009 +0000

    Cool optimization for substrings when we're sure indexes are in bound and length won't be negative. Number of String methods will benefit from this.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9147 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b16f574a18246a48ea4a622379936acda31e5151
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 13 21:39:11 2009 +0000

    Partial 1.9 regexp based String#split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9139 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d72244b8e94611de0278f366dca7bd4746d72ea0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 13 20:28:46 2009 +0000

    Handle multibyte splitter properly.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9138 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8010e5d4fe42adfca1738cde491eeda30c8b0c85
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 13 03:18:28 2009 +0000

    Handle multibyte case for 1.9 awk split separator detection.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9137 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a0b7a6ac1e563d2de450fc73b35a091c6e40059b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 13 03:04:05 2009 +0000

    Simplify...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9136 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 180f7eb41b2ddc7db8feb36da0abd8597e7cdecd
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 13 03:02:15 2009 +0000

    Optimization for singlebyte 1.9 awk split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9135 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4d65860db4ed265d766e25dbbe7544b27eb6b201
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 13 02:56:40 2009 +0000

    Simplify...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9134 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ca7e144710a4eb2235847e96cfff34fa559abc03
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 13 02:45:12 2009 +0000

    Even more simplifications for 1.8 String#split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9133 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 46629958ab106f81937bc371910d75836e536e3e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 13 01:57:10 2009 +0000

    Further simplifications for 1.8 String#split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9132 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a35615f2fbc9260809d4c2a30cea4203fba9b567
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 13 01:38:18 2009 +0000

    Simplify 1.8 String#split for awk split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9131 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 42420226f71c80527ef237be7ab699285aa22074
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 13 01:22:35 2009 +0000

    Simplify 1.9 makeShared for String.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9130 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f578ec46c00e3a68979d6c99cf6bc7dbb1927283
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 13 01:10:08 2009 +0000

    Partial 1.9 String#split implementation, 1.9 awk split in place.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9129 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5c54709238f68b89f3650393296fb6b1d89e034b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 11 23:16:52 2009 +0000

    Simplify 1.9 String#gsub.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9099 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dc140d0fc4d4798c28496d135c16119c69796347
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 11 22:44:52 2009 +0000

    Simplify 1.8 String#gsub.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9097 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4cb5058dff75ac2825a6c39901b000f475a0dac8
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 11 22:21:55 2009 +0000

    Precious RubyString line diet: move all argument boxing deprecated methods to the bottom. Remove redundant comments.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9096 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d57b0d00b10920f88a9cf6d6868cea80d316019a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 11 21:54:08 2009 +0000

    Precious RubyString line diet.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9095 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a548d0dabf9e4cbbe8cc835d9ff8bb4305f01daa
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 11 21:51:28 2009 +0000

    Precious RubyString line diet.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9094 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4be696e4ebaf410a951d34225a15b8b3c7b2968e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 11 21:51:03 2009 +0000

    Precious RubyString line diet.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9093 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cdb75fce1f2ebdfc3126934dd19d7751bb532f79
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 11 21:50:39 2009 +0000

    Precious RubyString line diet.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9092 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d13728bd81213d676ff51d8146adbe004ad9eba3
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 11 21:49:25 2009 +0000

    Precious RubyString line diet.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9091 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0f7dcf269a9fd39ae4cc10d1f9428de8bd28ae21
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 11 21:48:50 2009 +0000

    Precious RubyString line diet.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9090 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 995920c2469a05e12bdcdc17dd7c2a0f544e5ba5
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 11 21:45:52 2009 +0000

    Precious RubyString line diet.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9089 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9bca2fb6b297fec0394b0f99020a6238b0fc1d21
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Feb 11 21:42:27 2009 +0000

    1.9 String.gsub.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9088 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4f4595e09bcfd817a64c41b4badff5f8ebf3aa4f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 9 17:18:29 2009 +0000

    Add a straight through String path for RubyString construction, using default encoding to getBytes. Should fix JRUBY-2974: multi-byte exception message turned into garbled characters when Java Exception nested NativeException.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9072 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1b9f1d73d0afd9ca5dbbdb60f4feb9481eeeb4ac
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Feb 7 15:27:48 2009 +0000

    Reuse checkIndexForRef in 1.9 String#setbyte.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9054 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1b84fe066bb1900847b14bee4f3594cdffa987f5
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 6 19:11:15 2009 +0000

    Remove code duplication via checkLength.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9046 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 625335d5990d96d9d00a0b69df2e0e8f4612bd47
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 6 18:39:42 2009 +0000

    Reuse checkIndex in 1.9 two argument String#[]=.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9045 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e4f348fdb652dbfdf60f9785c05d79b18f442de3
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 6 18:30:07 2009 +0000

    Fix 1.8 String[]=, and simplify two argument version of String[]=.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9044 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9c3651ffce87a6c38fbb48700b358008b3417288
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 6 00:59:44 2009 +0000

    1.8 String#[] for String arguments should return the argument shallow dupped if matched.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9038 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 73968bf39cd8a045f8b773e52d42a1b40c6bf7b1
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 6 00:50:27 2009 +0000

    Reuse SINGLE_CHAR_BYTELISTS for Strings that will end up one byte long and would mark shared the source string. Nice 25-30% boost for "aa"[1,1] like cases.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9037 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8424498ebb68a68806fba8a8e112e1b84b105321
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Feb 6 00:13:30 2009 +0000

    Use fix2int only when the type has just been checked against fixnum.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9036 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2238aa87247ef8a40d1f2e946ba2d92eb81f8313
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Feb 5 23:55:41 2009 +0000

    Use num2int in 1.8 String#[] for duck typed.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9035 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 607020b1105297cb1e0dbaf6434a1fad19b2a952
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Feb 5 23:35:32 2009 +0000

    Special Fixnum case for 1.8 String[] that does int/long checks.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9034 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 82f315a6899d26f91b0bb8dfaff9a4ee123d109e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Feb 5 23:13:06 2009 +0000

    Fix the specs (conversion order was to blame).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9033 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 190e26338e5cdef1b8bbf51bb28f486d9d781645
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Feb 5 23:07:24 2009 +0000

    Reuse bounds checking in 1.8 String#[]=.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9032 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3a9b301a707405fbfe530e8478f732df443789a9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Feb 5 22:51:33 2009 +0000

    Reimplement 1.8 String#insert.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9031 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 713d3acf44a1f289629374a2fde1f1b2955b9612
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Feb 5 22:38:19 2009 +0000

    1.9 String#insert, extract index checking logic. Fix 1.9 String#[]= bounds checking.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9030 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ebaca4514ab2dac50f132aaa2c09c7607e236d68
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Feb 5 20:40:11 2009 +0000

    Rename method to better reflect 1.9 usage.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9025 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 09541c9594f4809416ac03bbe95a25c998bfe156
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 30 17:33:16 2009 +0000

    Fix 1.9 String#include? commit.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8954 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cc53e0140ed8d3255a4a98f40ddfa6e5572257ea
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jan 30 03:18:20 2009 +0000

    Revert r8945: "String#include_p?" temporarily since it is failing tests.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8947 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 01036096163277c588b02e9098aa6d6c7cd31fbb
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 30 02:55:41 2009 +0000

    1.9 String#include_p?.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8945 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ed20c0419cd26c8e91e69f5758cd62c55db352d5
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 30 01:04:44 2009 +0000

    RubyMatchData.updateCharOffset (maintains separate table with real character positions matched). Used by 1.9 MatchData#begin/end/offset to report correct positions.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8944 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1b67340e88437ac21991fc1870d69f7534fcf74b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 29 01:41:09 2009 +0000

    Remove an old comment from asJavaString in RubyString.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8926 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a4e72aa4da6fe3c2288eb248744a249969aae8b1
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 29 01:04:03 2009 +0000

    1.9 String#=~, Regexp#=~.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8919 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d56d9dd0f2dfcf6ed5e65e66f5edd04924827968
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 27 22:26:22 2009 +0000

    singleByteOptimizable case for 1.9 splicing.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8908 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9685b73c4053d2ba827e3b8b5116b9c10b9ef437
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 27 21:58:05 2009 +0000

    Introduce Fixnum specific RubyNumeric.fix2int().
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8907 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9e16d90281bbdd655670e8e7370780a64d8c9fcf
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 27 21:55:11 2009 +0000

    Minor simplification.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8906 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9669f709866bf9faf98efa91285e432f9db12d3c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 27 21:41:24 2009 +0000

    Simplify 1.8 String#slice!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8905 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d73231d1e2c74474fe5c4268d7c7b94f48ea2995
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 27 21:38:20 2009 +0000

    1.9 String#slice!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8904 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d93a773334c6412d780e301947845888d9dd144c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 27 21:25:52 2009 +0000

    Code range juggling again, sigh...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8903 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 08aeff7be80d7660c48a7233dad9ae5165d59213
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 27 21:14:55 2009 +0000

    Use modifyAndKeepCodeRange in 1.9 String#reverse!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8902 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 59c77c98b71c542035bff12bbda1fff021c62d4e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 27 21:13:27 2009 +0000

    1.9 String#[]=.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8901 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2fa1c1ede8b8c4f34663f1b5a9ba6093d02ea244
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 27 19:17:09 2009 +0000

    Does not need to modify.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8900 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 21fc38a5d51e24d4400e746ccd6eb95b64554386
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 27 19:12:20 2009 +0000

    Use correct modify version since in 1.9 mode it should clear coderange info.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8899 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7e24adbe63872e70aaf66e7b6e4e7acbdf330060
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 27 18:58:33 2009 +0000

    1.9 splicing.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8898 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0215829b55e27d771217a3f982dfb521b2b14e3b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 27 01:58:15 2009 +0000

    Faster, more COW aware String splicing.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8897 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cd96ae6547fe247c6d0619923f10bf21f7a92394
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 26 20:02:06 2009 +0000

    Upto 40% faster two argument 1.8 String#[]= for non Fixnum first argument.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8894 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 85d98923ff1f5819107953b68e3dd33d7d6f1c61
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 25 20:34:09 2009 +0000

    Add logic to automatically coerce incoming IRubyObject to RubyString in the invoker, rather than requiring all receiver methods to do it. Beginning of coercion formalization.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8890 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5c2437f824dfd38fe3208a0a19c14c0e3bb3e8dc
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 19 22:37:53 2009 +0000

    Minor cleanup for 1.8 String#[]=.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8845 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2796cb3b5b0d4d0e2241e4d95212522074e2f8ac
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 19 21:57:46 2009 +0000

    Simplify substr19.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8844 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 580b193dd7d3bc401fffb9a8406d5dd3c6fbca84
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 19 19:39:00 2009 +0000

    Do not pass encoding instance to utf8 specialized routines, ugh.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8843 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c29a3c68755fd6110c03ce243ab97dfd16ff187c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 19 16:05:30 2009 +0000

    Make substr19 use utf8 specialized nth/offset routines.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8842 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 02ccb08ac7d1d3574eb5ab3ed98bc76489c269e7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 19 12:01:00 2009 +0000

    Fix unsafe utf8 length so it's shared strings aware (begin > 0), also, use faster utf8 length version when unsafe is not available.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8840 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 351b158a9e4c3fdd67697894554c9e9a58cd16ec
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 19 03:15:18 2009 +0000

    Unsafe based fast utf8 length routine 1.9 uses (4-5x faster than naive one). Though, it requires the string to be valid (so it has to be scanned before for coderange at least once).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8839 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 25a654d7d59b3adb3bc4b700dd37c90c070df3ac
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 23:25:19 2009 +0000

    Remove spurious check.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8836 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e3007b70f3c6cfc9d911fc3bd5c4405862927ae4
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 23:24:59 2009 +0000

    Remove spurious check.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8835 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 323fe06c3cbcb3d3cd89ddb1c64e8fac25b9c639
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 23:22:27 2009 +0000

    1.9 subpatSet.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8832 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b391425fd0a60deb922749a0280d198bc45bb12a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 23:13:45 2009 +0000

    Simplify 1.8 subpatSet.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8831 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ac503d4e5956060eb6edbb37d97773389b7b8b63
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 21:49:54 2009 +0000

    1.9 String#[].
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8830 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 30540d2278c3be62f6112590bb8d67d6102c8d28
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 21:01:12 2009 +0000

    Explicitly name binding.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8829 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b296c9565a7dd2374fe7b5132e53aca37029b9a9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 02:34:01 2009 +0000

    Use proper cat in String#inspect (1.9 mode).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8823 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 607acc928b380c1a7140a5e35e0cb1ec23dd6293
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 01:48:14 2009 +0000

    Finally make 1.9 String#sub use 1.9 regex substitution.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8822 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d9fcdef7f7da7ecd4b5e1a42a341b024d26900e1
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jan 17 23:31:32 2009 +0000

    Don't use fastAref on hash in 1.9 String#sub.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8820 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c8aa3c08c3a3ac3ef7f5834adf17a840cb684180
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jan 17 23:15:07 2009 +0000

    Use proper String#inspect in MatchData#inspect.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8819 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2dd43a7dac088a154e9d42c087424d2b4737e069
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jan 17 23:00:17 2009 +0000

    1.9 String#sub, sync regexp in match.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8818 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a63c2a989c8340bce000c1861419c45d648d2266
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jan 17 20:42:55 2009 +0000

    1.9 regexp conversion protocol for 1.9 String#sub/sub!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8817 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5cb0ee597310eff69fb237b50028253d3c30664b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jan 17 17:12:20 2009 +0000

    Use specialized encoding negotiation in 1.9 String#sub/sub!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8816 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 95651779f0790807a73f9ef51db36b049b22bc59
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jan 17 16:59:01 2009 +0000

    1.9 String#rpartition and fix the build.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8815 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7946b4a9ac6579cafebe89217775598849123294
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jan 17 16:31:19 2009 +0000

    1.9 String#rindex.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8814 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f816bf7f9db44ceac29e656120d23a2b59e8cc2d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 16 21:01:12 2009 +0000

    Ugh, remove import.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8810 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d5d2f6ab8d4fc828cbd14381f91a303ad4830c8a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 16 20:59:20 2009 +0000

    1.8 String#rindex cleanup.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8809 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d42acc396f69e8f57b4a496be537bbe44d2ab0a8
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 16 20:23:53 2009 +0000

    1.9 String#index and additional encoding negotiation RubyString <-> EncodingCapable.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8808 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 309710c65c3009596848a57c297648e86f724b2e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 16 17:59:56 2009 +0000

    Use negotiated encoding.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8807 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6ba58dcd320c8a0ba9e138d383ddfbf465b54bea
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 16 17:57:53 2009 +0000

    Use negotiated encoding.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8806 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4e3a52ed660e43e359d38ebd1fbf91a76db1130a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 16 00:07:14 2009 +0000

    1.9 String#rindex internals.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8800 961051c9-f516-0410-bf72-c9f7e237a7b7

commit af3bf7a3fb13ea186015d2df6509c18466360953
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 15 23:55:39 2009 +0000

    Add binding name to 1.8 String#rindex.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8799 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d1f342399c15f6925f0e18c6d9aa7b4cdd60b08f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 15 23:54:57 2009 +0000

    Add binding name to 1.8 String#index.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8798 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4f52781ba3b1c0d907b91a2c57a879b8d2b81504
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 15 23:53:19 2009 +0000

    1.9 String#partition.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8797 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f4bc64880d6d60b3b06f641e9a4558884e1914cc
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 15 22:48:40 2009 +0000

    String#index/rindex cleanup.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8796 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 26b3614941e64533be7e87413d9cebfda45b0aad
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 15 22:31:29 2009 +0000

    Do not mark MatchData as used until it really escapes, nice boost for some String methods.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8788 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0f9beb04542ad94ee81ed6db0ea8c006fcaa1a2f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 14 23:43:41 2009 +0000

    1.9 Regexp.match.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8778 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2ae431007218e3c2e8979ef30dde28bce8abdd64
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 13 19:48:07 2009 +0000

    Fix aiobe in 1.9 String.ljust.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8748 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 296da631ae50735e38aee3430740c6fe9b08d322
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 13 00:41:52 2009 +0000

    Use 1.9 version of updateBackRef in 1.9 String#scan.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8735 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7fe25a5dc3886ac3f0348a81b13d0bea8fac6648
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 13 00:03:38 2009 +0000

    better name.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8734 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0ee5a4ae1f74619509a23b7de769c949e6c1dad4
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 13 00:03:07 2009 +0000

    better name.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8733 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 642f1808ed15a6c676657d98e9af6e0f8acecd3b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 13 00:00:36 2009 +0000

    better name.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8732 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1bcfdc76196b4eb21e1707db105effc13597b7e7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 12 23:57:12 2009 +0000

    better name.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8731 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 54931f1532b352b6c2c635087fd7f406498c01a6
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 12 23:55:50 2009 +0000

    better name.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8730 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9aacacbf35b31d27cfde460edd78b9ddee16c21e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 12 23:49:46 2009 +0000

    Change argument order.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8729 961051c9-f516-0410-bf72-c9f7e237a7b7

commit df389b4667ef17690c80d730bd315512ffdd7c68
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 11 17:39:34 2009 +0000

    More regexp preprocessing logic and 1.9 regexp caching, More correct 1.9 String#scan.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8703 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ece1b6e7c7a30f21278034079519e5496bd5638e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 7 00:58:21 2009 +0000

    Remove no longer used paths.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8621 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5c1a9f0ad9a5761c79f895d13bcc70354e9fcf61
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 7 00:39:23 2009 +0000

    Do not create RubyRegexp instance also for String#scan/sub/gsub String arguments. Saved tons of GC pressure for string heavy code.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8620 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6ea4fa6f0fa0ef9cf3d2a4349bb46b287e04957a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 6 21:44:27 2009 +0000

    Even faster String#split (doesn't create RubyRegexp instance).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8618 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 97cc8ff3a71c11659524bb6a263ebfc5e99a5007
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 6 19:41:21 2009 +0000

    Split getPattern in RubyString for quoted/not quoted.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8614 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f01e17dd95e5a18868e36b39a7fb84d7a1746b6b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 6 00:17:48 2009 +0000

    Totally refactor Regexp initialization logic and Regexp cache lookups in order to make 1.9 logic saner for 1.9 preprocessed regexps.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8607 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5f3c48ffcc13b6b42d5b22810d5ee0fde1fea83c
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jan 5 22:42:22 2009 +0000

    JRUBY-3276: New IO#readpartial and IO#seek spec failures (initial patch from coderrr)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8606 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 83b8c72faaf25555bb9a1968ba434353bef74565
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jan 3 16:17:24 2009 +0000

    Reuse ByteList in String#intern/to_sym.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8577 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4306ab442612b820b5aca0da12ff4fc4ae80e740
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jan 2 08:56:58 2009 +0000

    String optz:
    
    * Reduced bytecode emitted for literal strings
    * Caching bytelists for literal strings in the same way as other literals, rather than on a static array
    * Increased starting size for dstr to 20 bytes from ByteList's default 4
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8559 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4a6aa353febea2917d83a97be06469d99b7bc6f3
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 2 02:53:47 2009 +0000

    1.9 Symbol#inspect.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8554 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1537f111a9aa4900c2f9e2837419bc8c5ae83179
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 2 01:56:33 2009 +0000

    1.9 String#intern/to_sym.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8551 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 740d66233778d7856b7cc074dc9c23afc6a74835
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 2 00:36:03 2009 +0000

    Fix tainting for String#%.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8546 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9801ea19bc82ada8866a8347be93e9609a009ed0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 1 23:45:08 2009 +0000

    Make Sprintf method take ByteList to write to instead letting it operate on it's own internal buffers. This allows the consumers to guess/allocate more memory and prevent huge amounts of arraycopy and object allocation by writing directly to target buffers. Also, Symbol#inspect 3-5x faster by not using intermediate java Strings.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8542 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2dc9ff9b47cb850963e82fac3f0c6de0253e0407
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 30 19:15:01 2008 +0000

    Another encoding aware RubyString.cat method.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8515 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7d5165ea0ba94dd24264aa62c4c64057182d6001
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 30 11:05:34 2008 +0000

    Remove unnecessary cast.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8512 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 720afc7862ff9c8e4e7512ffca0b8a9ad8604d63
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 29 20:04:51 2008 +0000

    Use 1.9 makeShared for 1.9 String#sub.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8498 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8d6cf0fc284c700e636b3abd0b285f150d5052d6
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 26 22:18:17 2008 +0000

    1.9 String#chomp/chomp!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8464 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4e460ca2cf80590719dcdd33f31fea8198198acd
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 26 21:23:30 2008 +0000

    Some 1.8 String#chomp/chomp! refactorings.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8463 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1ed5f6c6b5e32cc947165faf2bacd12498b55886
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 26 20:41:24 2008 +0000

    Use always receiver's metaclass.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8461 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e8319c1f8c8e4725182cac54123b551606a6d5ff
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 26 20:12:40 2008 +0000

    1.9 String#chop/chop!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8460 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 53c7a884fbd7d2e8f6d62b145787bb9cee2389f3
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 26 19:55:04 2008 +0000

    Better 1.8 String#chop/chop!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8459 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e323dc202f4fca24ec4741c6634f3778effdb37c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 26 16:28:48 2008 +0000

    1.9 String#upto.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8457 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 49404491e7973bb0760a3489b5be0e53c3192718
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 24 14:56:48 2008 +0000

    Ditto for 1.9 String#each_line/lines.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8454 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e89562ce60bf1a380bc0ab7c7018a11c243fbe94
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 24 14:52:56 2008 +0000

    Use shallow copy of value in 1.9 String#each_char so it can't be mutated by user, makeShared will cause self to COW safely in any case. No additional String instance created that might leak into ObjectSpace so there's no need for modifyCheck as well.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8453 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c20f30ae7344ee0ee14bfd03709250324796ed67
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 24 14:44:52 2008 +0000

    Introduce another version of makeShared19 so we can choose which value we want to use to create shared substring from.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8452 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8c4cca70435d9a1403aa97a3b53577840a0289f1
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 24 13:00:15 2008 +0000

    String is no more Enumerable in 1.9.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8449 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 442c6d59ef37e060f0cf157e084a32d21fd908f1
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 23 21:25:03 2008 +0000

    Split String#each_line/lines so proper method names are propagated to Enumerator.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8448 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c0bdc622a9dca3380b8a5b6482ea4941d0f6c23d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 23 21:11:09 2008 +0000

    1.9 String#each_line/lines.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8447 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b002b27b7035496713a76886729a5042dacb321d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 23 13:57:42 2008 +0000

    Ditto for String#each_codepoint/codepoints.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8443 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f953dc9e902b3ac6a4ea741626a6e36564a9c26e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 23 13:42:23 2008 +0000

    Ditto for String#each_byte/bytes.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8442 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e4a6d69cb317dcaff2a551896ca2ef8494305992
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 23 13:39:47 2008 +0000

    Split 1.9 String#each_char/chars so proper method name is propagated to Enumerator.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8441 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ab54fa29d71607f9ce0b94946dfeed0f297ce607
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 23 12:50:05 2008 +0000

    Bulletproof 1.9 String#each_char/chars.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8440 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 37ae38886225b013bb55a2316711a2c6ea13aec3
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 22 23:42:39 2008 +0000

    1.9 String#chr.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8437 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 042b9c912d68c3621478f9e29e737f791c578ea7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 22 23:21:42 2008 +0000

    Create empty ByteList holder so it also contains precalculated coderange.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8436 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5eb5168360db65858a3a235d0a37ca4d778dc594
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 22 22:56:23 2008 +0000

    1.9 makeShared and substr equivalents.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8435 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ca74911eb01ec53138e34cb665ee4d0e15a77991
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 22 17:46:28 2008 +0000

    Empty strings are always considered 7bit.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8432 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e97ba4e56ecef71fdf9022a04bac35a5d2b2df4c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 22 17:42:48 2008 +0000

    Even better 1.9 String#succ.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8431 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 23161f3127036f6e50ac2c633b5a995ccc71ef9d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 22 13:17:16 2008 +0000

    RubyString.subLength helper.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8430 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9ab659d8c052f4221388711073faf9e9c409f5f6
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 22 01:25:42 2008 +0000

    Remove bogus import.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8429 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9dbba138b48f95d3fbb6f6bdae0e675ee2fa61c3
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 22 01:17:29 2008 +0000

    1.9 String#succ/next.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8428 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bc9bc03747e4fd9eab61023de32784c726d7e5e4
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 21 17:18:32 2008 +0000

    1.9 String#match.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8425 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 65b2a5b12cde59c541d439f1438391c40473e94e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 21 16:32:47 2008 +0000

    1.9 String#ljust/rjust/center. Couple times faster for smaller strings or singlebyte strings, but we degrade much quicker for multibyte strings as the length increases due to lack of 1.9 special utf-8/other multibyte parallel scan optimizations.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8424 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d6c0cfd801662a620a830055138c8323cee9edbb
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 21 00:43:14 2008 +0000

    1.8 String#ljust/rjust/center cleanup.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8423 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ea80b66a02f99c3b6d4982fba750055b36d0199c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 20 22:27:29 2008 +0000

    Oops, strings remain shared after String#clear.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8421 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9e330b9e671ae8eadccaeec43ccf6151e6771843
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 20 22:23:25 2008 +0000

    1.9 String#oct.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8420 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ad545baace7b421cc04396406efa16e41e719209
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 20 22:19:56 2008 +0000

    1.9 String#hex.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8419 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 079623c69a04cc96287ee840ff5b48b7d5e072fd
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 20 21:58:36 2008 +0000

    1.9 String#clear.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8418 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5212d1edd68152f3da56ed33a55039558d98eb53
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 20 21:41:05 2008 +0000

    1.9 String#ord.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8417 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 92d80eab13c4a748c1068419766450b884cde0ea
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 20 21:06:55 2008 +0000

    Fix 1.9 Illegal char codepoint escape for String#inspect.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8416 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7839014a74ba69a50af40ee76cf0f37e8c5c11e6
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 20 19:56:16 2008 +0000

    1.9 String#<</concat.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8413 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f9911c30220ec7062f2977bd0894f3e55404448f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 20 17:50:12 2008 +0000

    1.9 String#inspect.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8412 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f35a786c5a84c0131922e6eacad0ce25e7c15f1f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 19 02:22:44 2008 +0000

    1.9/1.8 String#dump.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8406 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fc21204ef8d20aeedc17c619c506d8c13c2a6b46
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 18 21:58:23 2008 +0000

    Fix 1.9 String#casecmp.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8405 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 35910f4a2684834b84121bcb694ebd1fd6d5fdcb
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 18 21:51:09 2008 +0000

    1.9 String#replace/initialize_copy.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8404 961051c9-f516-0410-bf72-c9f7e237a7b7

commit eb7f67525face5dc63aaf39d133e12deff42e0d8
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 18 20:52:10 2008 +0000

    1.9 String#count.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8403 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 062edd2a5b334f458d44bd0467f7dbfe471098f5
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 18 20:04:38 2008 +0000

    Use arity split versions.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8402 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4b93f07a413a58928a48acc6db3f38e9374ee81c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 18 19:58:03 2008 +0000

    1.9 String#squeeze/squeeze!. Almost 2x faster than 1.9.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8401 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 45ea5f2c384f6711fc251a376e8f18a9528ff0cb
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 18 18:01:12 2008 +0000

    1.9 String#delete, again much faster than 1.9.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8399 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 532c6ffc9fed10dc600820a0a4a8eb6397f83898
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 18 02:18:04 2008 +0000

    Complete trSetupTable and trFind used by 1.9 String/delete/squeeze/count.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8392 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0c84738db4074f9f64464bf44fa1df6bfc136732
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 18 01:26:14 2008 +0000

    1.9 String#tr_s/tr_s!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8391 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 585193aaa73f560f0865ed1eae1f5b90bcc9d12a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 18 01:21:38 2008 +0000

    1.9 String#tr/tr!. For whatever reason 2-5x faster than 1.9.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8390 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 84853c270d72341f888a6f4a40b48cd022514a4a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 18 01:03:29 2008 +0000

    Wowsers, 1.9 trtrans.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8389 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b50c09e0013474decd89f2a4111be1b898280e89
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 16 00:20:54 2008 +0000

    1.9 version of trnext.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8361 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9c96d90584ada583789042c01e02de68b7f25e72
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 15 23:50:36 2008 +0000

    1.9 String#end_with? arity split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8360 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e87793b42789aec4e9fb889a5f8e8a9c77ffbce8
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 15 23:43:56 2008 +0000

    1.9 String#start_with? arity split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8359 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 847f61604cf5d5c56c7ec7deb10c07aa134a566f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 15 23:24:01 2008 +0000

    String#squeeze arity split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8357 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 683d92d4d1c886f97fb2eae8224ea8d29c967af2
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 15 23:11:27 2008 +0000

    String#delete arity split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8356 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f2658600fa67d1c77e344ea0d333a9b85a3aa4ba
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 15 22:55:09 2008 +0000

    String#count arity split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8355 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1a8d8293a1491f86054227ee1ea4a473c3058ec7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 12 23:41:11 2008 +0000

    Optimization for String#reverse/reverse!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8330 961051c9-f516-0410-bf72-c9f7e237a7b7

commit de23046fcff6d91c68a2a85c02c5f8177dc64672
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 12 18:25:49 2008 +0000

    1.9 trFind (translation table lookup).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8329 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 52b732b8049099ae63329bb42153e0ae7e1d1538
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 12 01:36:01 2008 +0000

    Make more javaish name and remove final sigs for private methods.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8328 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0b775d5994f0eab25c0bc2b67636cfb0fd7ccdac
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 12 01:30:48 2008 +0000

    Multiple simplifications for translation tables used by String#count/tr/squeeze/delete in order to recognize common pieces in 1.8 and 1.9. 1.9 RubyString.setupTable implementation.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8327 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ba43390727760d73dbac2e8f427fe98ffdc0fe39
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 12 00:04:09 2008 +0000

    Optimization for 1.9 String#reverse/reverse!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8326 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2003daa7840510b2f083a2d4caed460d5c20a32c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 11 22:54:00 2008 +0000

    Fix multibyte case for String#reverse!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8325 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3eba19e84530d2d1369c79afd5c723c7d0642c43
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 11 22:40:51 2008 +0000

    1.9 String#reverse!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8324 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 811ed0317ce50950153b6b4338368f0520cb7ab7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 11 22:29:14 2008 +0000

    1.9 String#reverse.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8323 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 69615efdeab239806171cb6b23b95ad78bb1066a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 11 21:45:28 2008 +0000

    Reworked String#reverse/reverse!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8321 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 659d30a50cd025e7b25cb5ed896337d168bbf2ac
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 11 20:29:48 2008 +0000

    1.9 String.try_convert.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8320 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 166acbb61427b6794696c2e80ea190aa1cc804ca
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 11 19:28:58 2008 +0000

    1.9 String#end_with?.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8319 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f4a2a36b9f426f935a02c9a6100546dbd7628532
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 11 18:56:50 2008 +0000

    1.9 String#start_with?.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8318 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ef0cc55479762dc881d3cdb68aa4b271245b256f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 11 18:32:22 2008 +0000

    1.9 String#setbyte/getbyte.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8317 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 08a3b8c963d734c3d2093455fd4c1c5f84dab9a7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 11 18:13:11 2008 +0000

    Simplify String#sum.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8315 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 48b61f349abce692eb5e17595df707b9a764917a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 11 18:10:33 2008 +0000

    Proper 1.8/1.9 String#sum, for whatever reason it's 3x faster.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8314 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9415fce36c913573af665291caa432d964574075
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 10 22:36:58 2008 +0000

    Bind String#codepoints/chars/bytes.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8310 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 14f3691a7a9a4e17bd50d1ba4a812f45efdedff9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 10 21:31:21 2008 +0000

    Use own caseCmp to compare byte buffers.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8309 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f62b3c23fc90e28986b4cc732a3191aadfe8cea2
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 9 23:47:43 2008 +0000

    1.9 String#casecmp.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8307 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a8fa5f8123e27977683c8d2129e17a30d7cbe746
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 9 02:07:00 2008 +0000

    Ugh, use argument encoding.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8305 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b34b477fc7e1c6e191e50f581659af29add884df
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 9 01:23:55 2008 +0000

    Misc cleanup and TC use.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8304 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 622c2b569b9ea4d0e71d0be6dcd0709337e31f2e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 9 01:09:40 2008 +0000

    Use TC for String#count
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8303 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 102aeae2519185567535fc6a37321cdabd0685d4
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 8 21:11:38 2008 +0000

    Fix dist build.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8302 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2cec232ea1b3e83b650281afc3ca13898e0f98ea
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 8 01:32:50 2008 +0000

    Committing another part of String#rstrip impl. Surprisingly it is 30-40% faster than previous one. Probably a Hotspot bug that might be related to range check elimination.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8301 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6073224f10a33b69d664df8dd9e3368165fb9267
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 7 22:33:36 2008 +0000

    String#succ cleanup.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8300 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5b8425047538e9c57b873449aa10fa24279858de
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 7 21:57:33 2008 +0000

    String#chomp cleanup.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8299 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 71bf53aa78ac65a8bf3f9f306254b3f8376e92fd
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 7 19:46:19 2008 +0000

    An opt for RubyString.strDup so thre's zero additional cost by having coderage dupped.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8298 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f01f0b652683dac790fb700bf810f0ea68cb7532
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 7 19:17:45 2008 +0000

    1.9 String#strip/strip!. ...And fix the build.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8297 961051c9-f516-0410-bf72-c9f7e237a7b7

commit db5bd9288e69aa600001a9d85ea95a027b16c08d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 7 18:46:23 2008 +0000

    Fix String#rstrip!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8296 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 812cc54c11a11bb6912ad2eb2c66d879b0bcdb50
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 7 18:29:15 2008 +0000

    1.9 String#rstrip/rstrip!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8295 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 51d788145a6df1ba2459c3a3a46f77d7bcd6438a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 7 17:15:30 2008 +0000

    1.9 String#lstrip/lstrip!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8294 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 75cf7dfb75cb0ed2a5b4aee6c9541aae4d75dc1c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 7 15:24:57 2008 +0000

    1.9 String#swapcase/swapcase!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8293 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f61d6f758afda529278e3de1bb01665a4bdaba14
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 7 14:19:17 2008 +0000

    1.9 String#downcase/downcase!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8292 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 76075afeab8f6bb640f45189ef550b42ec4120f0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 7 14:06:28 2008 +0000

    1.9 String.upcase/upcase!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8291 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 32278d1ee02c9ba39f866a18feb073a4430e6abf
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 7 00:40:17 2008 +0000

    1.9 String#capitalize/capitalize!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8288 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8be7b01ed328bba802e6c7e38bce6bc43199f635
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 6 23:05:34 2008 +0000

    Replace bogus isDigit, isUpper, isLower, isLetter, isAlnum, isPrint by jcodings equivalents which use true character type tables.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8287 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d7f9678a500754980270f5b0434f7741c47a4fb9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 6 22:48:46 2008 +0000

    Remove bogus conversion.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8286 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 91f4e064e99dc2009fcad4ee734aa0f5773da3e8
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 6 22:36:06 2008 +0000

    Use AsciiTables directly, that's for they've been extracted.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8285 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 647b37bdb8887f77ea86a881ab9f6f93848d3100
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 6 22:31:56 2008 +0000

    1.9 String#eql?.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8284 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bfd88584766096ce699858b7584a48b2121c213b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 6 22:22:50 2008 +0000

    1.9 String#==.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8283 961051c9-f516-0410-bf72-c9f7e237a7b7

commit df267c4d5c569ac08232bdf6b77aa47c7141bd17
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 6 21:57:37 2008 +0000

    1.9 String comparisons.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8282 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5cc00444a186d43c3c4e39ca6ebf1e2b0ff12f27
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 6 21:49:06 2008 +0000

    1.9 String#<=>.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8281 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 26d53c18b52819b0427248c2fc39d08eb09d11c2
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 6 21:04:20 2008 +0000

    fix the build and more correct String#==.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8280 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 66f85e6dc280f98ecd9379349caa3e79e6a5fa53
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 6 20:34:48 2008 +0000

    1.9 version of RubyString.eql (used by Hash internally) 1.9 rb_any_cmp/rb_str_hash_cmp. This is one of very few situations we have to perform runtime check against 1.9 mode, though it turned out performance drop is negligible.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8279 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e07f8fb1b2f8750e89915502981cffede2b3bf42
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 4 01:04:34 2008 +0000

    Reintroduce and deprecate RubyString.substr(int, int).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8265 961051c9-f516-0410-bf72-c9f7e237a7b7

commit efc67921ac1dc07e45c9d3fc4e9138e721b150b0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 1 23:55:06 2008 +0000

    Whoops, forgot to commit.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8242 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3b580ca425d6f8e2f7d24c123dfae60fc31fe954
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 1 23:41:27 2008 +0000

    RubyString.isComparableWith.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8240 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3a928c6183ec49f4477a940f23a20787d1254090
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 1 23:25:39 2008 +0000

    1.9 String#*, and an opt for both modes, 25% faster.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8239 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4d961e80895d130ae6d9bf56a47b52481d0a08f1
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 1 22:39:45 2008 +0000

    1.9 String#+.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8238 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cbd3bb5f6e2d87fd08d4c9f57ed793c1758cdb09
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 1 20:16:05 2008 +0000

    US-ASCII (newUsAsciiString) specialized string construction routines since they're used quite a bit in 1.9.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8233 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 52faf195ca6fcdc8f46efc1ab3ce9bd594b4d64d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 1 17:49:48 2008 +0000

    RubyString.setEncodingAndCodeRange.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8232 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 528f4a4259c58e8156ff9ce31109bc29ea7e4628
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 1 17:40:59 2008 +0000

    RubyString.codeRangeAnd().
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8231 961051c9-f516-0410-bf72-c9f7e237a7b7

commit df57693641da63f6c161b15db1df96fc9b14d6ac
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Nov 30 16:34:40 2008 +0000

    Fix for JRUBY-3198: String#slice! not working correctly when used with string read from file. String#each was to blame as it should mark self as shared.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8213 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e2ad9e0a2b0ad43a23c28e360e7b4fecdd81cfda
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 23:02:41 2008 +0000

    Remove parameterless RubyString.substr
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8181 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b591bbe1f84264b12514857a5cebe28fee9a6ca6
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 22:46:21 2008 +0000

    More code range utilities.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8180 961051c9-f516-0410-bf72-c9f7e237a7b7

commit acf48fb3c99d50d8990abc483eec4116b6771d64
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 18:50:49 2008 +0000

    String#scan simplify even more.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8178 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7bfe2cd42db74df9be4509cfbc54a92c7c203073
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 18:41:17 2008 +0000

    Small fix.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8177 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8d1159ff744464844c763a85c4c422a6d12a7445
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 18:27:31 2008 +0000

    Oops, actually use the encoding.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8176 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c33e1def9a22e020fbccac59cdcae52416ad8c74
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 18:22:28 2008 +0000

    Fix the build.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8175 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1cd6542458f5f6f826792c60729c00ce1a4f3f8d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 18:19:12 2008 +0000

    1.9 String#scan.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8174 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2a4bb1bc9c57ac9b0f2787a4b7a519af2fc0a1c2
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 17:54:45 2008 +0000

    more appropriate name.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8173 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e02bd942ad8c6c9f20e756e1311a282e4b38842c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 17:53:56 2008 +0000

    Simplify String#split to use new capture strategy.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8172 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 45caaeb18dcebd05531635c81ddcc585e4ce1fc0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 17:28:35 2008 +0000

    Totally rework String#scan to use new capture strategy, 15% faster.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8171 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bb02c36ded8adcabe5f7697aac46149f2459c611
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 02:42:15 2008 +0000

    Simplify things.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8166 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cb379f7c91b7d7ae22c8abc6c6f57cf3447f4fd4
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 02:35:12 2008 +0000

    Use lazy capture placeholders in String#gsub.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8163 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1212743648ab61cf0df0d266b663181bda9dceea
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Nov 27 02:16:39 2008 +0000

    1.9 String#sub, ugh..
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8162 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c54b1edeaf1e30482b81113b10959d7062e2ea42
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Nov 26 23:34:06 2008 +0000

    Code point retrieval helper.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8157 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7d40f21345a8069e6edf9ba115b9749612037a32
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Nov 26 20:44:23 2008 +0000

    RubyString.checkEncoding and String specialized RubyEncoding.areCompatible.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8151 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d17dc85dbb977d87ff90a9cbef3db5926b87aa4d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Nov 26 01:23:59 2008 +0000

    Fix comment.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8141 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c516db057b6898c01c68e179adbd8b90aba70bc1
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Nov 26 01:16:23 2008 +0000

    1.9 String#each_byte, String#each_char, String#each_codepoint.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8140 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7d8618428268a9d2203ef01c0a4702e59d7b5381
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Nov 25 23:41:01 2008 +0000

    1.9 String#bytesize and encoding aware String#length and String#size.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8139 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d392b18207d0ad5497393a6c9bddccfa2b73ed43
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Nov 25 16:28:16 2008 +0000

    String#sub split and cleanup, String#gsub cleanup, even more perf squeezed.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8131 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 267c2433e943f7a506e1f2b075abbce503e487f8
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Nov 25 00:01:42 2008 +0000

    More String#scan split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8127 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2eb55ba77a8a77c80b9b46b60f992700f51abe1a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Nov 24 23:38:04 2008 +0000

    More String#split split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8126 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 882c9462e37023662ddf5b443994965cc0163ffa
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Nov 24 21:48:02 2008 +0000

    RubyString.singleByteOptimizable().
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8125 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1bdfc20cc94ee6cdffe75c495bdb4d42de6b6305
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Nov 23 01:39:33 2008 +0000

    Use Range.begLenInt where possible.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8101 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7bbedee05b951db8dfcad7c92470b4fc10c2b36e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Nov 16 23:57:16 2008 +0000

    Remove all remaining references/dependencies on MethodIndex's int indicies and related fields.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8081 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7bc5a4b77c134501937aed1b91a0e9a879b7f5d4
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Nov 12 17:33:26 2008 +0000

    Introduce newStringNoCopy routines for String construction where resulting strings need not remain shared.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8058 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8bf10492cde986b6eda548fa4cf90c4a82d810cb
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Nov 11 21:08:55 2008 +0000

    String#force_encoding, String#valid_encoding?, String#ascii_only?
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8054 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 928ccd710a3a535ccdea2be66788663027064a2b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Nov 11 18:48:57 2008 +0000

    1.9 String#encoding
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8049 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 05dd875d10f1a223d1bc0ff952a9f423e70dee91
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Nov 9 20:29:13 2008 +0000

    Support for coderange information in RubyString (stored directly in flags). This might seem like a discrepancy since encoding itself belongs to ByteList, but it seems coderanges are more String specific than Encoding specific (e.g. there's no coderange info for Regexp and IO).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8037 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 25a58fba2fa81f8cab635e1a70d27cb9691de6cc
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Nov 9 18:41:20 2008 +0000

    First encoding aware String construction routines (optimized empty Strings by ByteList reuse for different encodings)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8036 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fa75396e350b356e02fbcff0adcb74dbe903ae63
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Nov 7 18:36:44 2008 +0000

    Introduce notion of encoding capability for String, Regexp and File ruby classes.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8010 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3d6d3488de997e1d6bfa895f3b24186e372791ed
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Nov 7 02:25:30 2008 +0000

    1.9 Encoding class and runtime encoding services. Support for finding, listing names and aliases, lazy loading, proper encoding name constantization. Very lazy encoding loading scheme to exploit encoding method devirtualization which 1.9 can't do. Next big step: make jcodings Encoding a ByteList member (so we get for free String, Regexp and File/IO encoding storage).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8006 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8707827fb36bd5eecab032dcb2826d5134592c5c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Nov 2 20:41:29 2008 +0000

    Fix for JRUBY-3083: jruby -e '~"heh"' does not error out with NoMethodError
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7993 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bee5753e087ae0441dca93111ef89bdc9fde52b5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Oct 30 05:46:28 2008 +0000

    Fixes for JRUBY-2374: Unicode chars in script/console freezing up.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7954 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b58e9ab403130d6d0ff6d3e23e47b66d3296d3f4
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Oct 17 09:25:51 2008 +0000

    Fix for JRUBY-3039, make all RubyString constructors public
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7885 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4f07fc593e96609b553afa2140b82bfc709636f8
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Sep 23 22:12:04 2008 +0000

    1.9 Array#pop, Array#shift.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7772 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 147bf33f7d22067419cf8d335e5562c59e812533
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Sep 13 17:42:47 2008 +0000

    make String#scan, String#sub use safe Encoding.length.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7692 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a79267d89e70f291934f734920a6500190a19d09
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Sep 8 20:28:13 2008 +0000

    Sync trunk with split joni/jcodings, also make String#split use Encoding.length(byte[]bytes, int p, int end) routine.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7660 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e275166475540e7663a5c6830e9a7bea5e564961
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Sep 7 22:44:43 2008 +0000

    Outlining logic showing up as "too big" to inline during logged bench_string_ops run.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7650 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1927a7663b582a1cca34044f609cc2b7a728e495
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Aug 31 04:53:57 2008 +0000

    Miscellaneous call optimizations:
    * Partial arity-splitting of super invocation (really only useful for Java to Ruby calls
    * Moved callSuper logic into RuntimeHelpers, modified all callers to use the new methods, and deprecated callSuper on IRubyObject
    * Eliminated 30-some more uses of indexed IRubyObject.callMethod and deprecated one of them
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7596 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 16c2535acd64558d402fb75f37709dc1644cbcb8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Aug 10 21:21:51 2008 +0000

    Clean up numerous cases where we box args unnecessarily by calling newer specific-arity "invoke" methods on RuntimeHelpers.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7429 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 55c83e74fc0219c30389455395f377eb4812bf3a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Aug 5 23:39:45 2008 +0000

    Full implementation of 1.9 Complex/Rational. Those classes are _very_ tightly integrated with the rest of core library (Nil, Kernel, String, and all Numeric descendants). Lots of default behaviors are dramatically changed (e.g. 10 ** -5 returns Rational instance now) so it might be difficult to test it all at once. 1.9 Complex and Rational classes are not rubyspec compatible, we fail then the same way 1.9 does (in 1.9 mode, though jruby should fake requiring Complex and Rational then). 1.8 mode should stay unaffected.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7378 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 83cf236934451b56f33a0fba81bdc0a55973e751
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jul 14 23:26:10 2008 +0000

    JRUBY-2801: Incorrect argument splatting/array construction passing splatted args through a block that yields
    More RubyObject.getRuntime() reduction
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7170 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 72975c6c9467ac11677b86f3886e555911e50299
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Jul 9 00:34:32 2008 +0000

    lots of RO.getRuntime removal
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7131 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 989fa3665d17108685dbb7329698a1f1d1a116f3
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Thu Jul 3 08:04:39 2008 +0000

    JRUBY-2735: String#% should use to_ary to convert the argument to Array
    
    This fixes one rubyspec failure.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7090 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ce32d8287a0aab50bb9b37bf4ec5b85051ea8695
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Jun 10 13:34:01 2008 +0000

    JRUBY-2628: StringIO's methods (new and truncate) should raise appropriate exceptions.
    
    Regression tests added to rubyspecs.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6922 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 65eacd21190627f4aab5ef721e462993b1060f6e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon May 19 17:29:17 2008 +0000

    Fix for JRUBY-2539: String#rindex should try to convert an argument to a string via to_str.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6737 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3bb6b82f878bb1fabc16c2155d3cc814c5c0677c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri May 16 23:54:50 2008 +0000

    Early work on a new Java layer that's lighter-weight, more "raw", and more explicit.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6719 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6977b68ccb65e1b1c1f177d7364edd63e160c0c7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu May 8 17:25:08 2008 +0000

    More RubyString from CharSequence construction cleanup and deprecations.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6642 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 00aca220ac642aaa9ea2d8c45424df44a38de5e7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu May 8 01:32:26 2008 +0000

    Deprecate and disable inefficient RubyString.setValue(CharSequence value).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6639 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e0909f476789ee087661a8aa787ca00e5665e2a2
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu May 8 00:41:58 2008 +0000

    Use shared empty String where possible.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6638 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 333712de83b3181fbd94c631542048c719c2eb51
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat May 3 19:46:16 2008 +0000

    Make (conditional) constant propagation a bit easier for hotspot.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6620 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 81bc116031b60cc180efc52ecccf86a06c6f2979
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 26 17:51:42 2008 +0000

    Annotations for backref set/get and visibility set/get.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6574 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4710fde94682b2d6f2cada05b4c3eed498cc55d5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Apr 18 19:39:25 2008 +0000

    Remove CallbackFactory references and other spurious imports from a number of files.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6536 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3f4c48e37de2b76be3f6d5ec2c6aeb238ee33abc
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 9 18:37:52 2008 +0000

    Arity-split a bunch more methods on String, deprecate variable-arity versions, and clean up some String method annotations.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6437 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6dc3317b5f56a7d1210eeb43cd52895cd4dc5f2f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Apr 8 01:48:04 2008 +0000

    Re-add variable-arity versions of split methods, since they may be used by third-party extensions. 1.1.1 won't break APIs.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6428 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1fd10693e2d804b174e40f79dc6f4baaf68ffbcd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 7 19:34:58 2008 +0000

    Cleaved a couple more methods into specific-arity pieces. Seems to be working out nicely.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6425 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fbc9e2d86cd3fdc515a3867c68bd6fde91713d02
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 7 17:17:55 2008 +0000

    Merge branch 'arity'
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6424 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c49783ca8ce85e19254365f4024e11037155f002
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Mar 30 17:16:40 2008 +0000

    Fix for JRUBY-2341: String#[]= should raise an IndexError if string index not found.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6373 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3c9d7551f0f26ea2572940148235ad7acdabe930
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Mar 26 03:53:20 2008 +0000

    Fix for JRUBY-2316: Range#step doesn't work with custom object that only respond to #succ, #<=> (major cleanup and almost a rewrite of Range class).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6339 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 040cd965ab6dc3497251f47e3d4b1a7cd99bc21d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Mar 25 02:18:28 2008 +0000

    Reimplement String#upto to obey duck typing and "succ" semantics.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6335 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f8a029af815ecf044f5268707b5855b85c738db0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 20 22:14:18 2008 +0000

    First round of logic to pregenerate method binding code, to avoid walking methods and annotations at startup.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6298 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 424a1cbff5aea37f2f92cc208d29d2544f092828
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Mar 19 12:21:15 2008 +0000

    Annotate the rest of the Java classes with names, parents and inclusions. Also add a warning to install_doc.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6291 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 852d904134ad970a20497fdcc5d752dd4ae49766
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Mar 7 22:04:54 2008 +0000

    The RC3 Surprise!
    
    Allow annotation defined ruby methods to optionally specify ThreadContext as first parameter
    Convert easiest and most common methods to accept ThreadContext when method or child method can use context
    
    These changes give about 15% improvement on petstore bench and about 10% in ar-bench.  In ar-bench getCurrentContext calls go from 14 million down to 2 million.  The remaining calls largely can be removed but they were much more invasive.
    
    IRubyObject op_eqq and op_equal both not have ThreadContext consumer, but we could see no use of this in any extensions and figured it worth the trouble of converting.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6143 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cd84f1be73e5beed7342ccfa8e7162522a19e24f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Feb 12 22:09:07 2008 +0000

    Store string share level in an integer to avoid reading a volatile twice (the common case).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5922 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0fa5d6d76930efc440c36443636959f7ded848ee
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 28 17:46:29 2008 +0000

    Get rid of TMP_LOCK flag in RubyString.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5765 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 63b1851ce5af7913edd0755c1ac19daad4286f3f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 21 00:29:38 2008 +0000

    Support for regexp literal flag and add a few test cases for that.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5678 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a562366faf1d5292c693836c1ff1fad8de78c008
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 20 23:22:44 2008 +0000

    Major regexp cache simplification. Enable global, cross runtime regexp cache capable of storing ANY type of regexps. Some other RubyRegexp cleanup as well.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5676 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 11d711c13d31d3ede73d1c8e71aa5655fd0f65af
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 17 22:46:10 2008 +0000

    Skip string quoting before the cache lookup and use the cache for all regexps (regardless of options and KCODE) including interpolated ones.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5650 961051c9-f516-0410-bf72-c9f7e237a7b7

commit efc1318b6c4187f2594ae6e2d3288878b00906f7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 16 02:55:58 2008 +0000

    10% perf improvement for cloning or anywhere we initialize an empty string; use newStringShared(ByteList.EMPTY_BYTELIST), since in most cases we wipe out the contents immediately anyway.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5625 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b3d416662a9b358da11a63a1900dd8a917340322
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 12 23:24:11 2008 +0000

    Multiple cleanups:
    * Remove most Arity.checkArgumentCount calls since they're handled by generated method handles now
    * Add javadoc comments to MethodFactory impls and their public methods.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5576 961051c9-f516-0410-bf72-c9f7e237a7b7

commit aadea35369507f888b0b97afa2f59c68a63425a0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 12 03:15:55 2008 +0000

    Temporary fix for static threadlocal regexp cache.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5553 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3b6e2f26bf9377754f0a4218e2ed05e84b6be729
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 10 00:20:34 2008 +0000

    Reintroduce op_eqq and eql into IRubyObject and enable shortcircuit versions of eql? method for Symbol, Fixnum and String.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5544 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d9790efdb64f6fbe0741bb18a40fbfd90f0f550b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 3 07:42:10 2008 +0000

    Fix for JRUBY-1867, validate Module#autoload args.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5469 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b96499a6ec369fc4a3dcf3a8346b685049d12dd5
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 3 00:44:08 2008 +0000

    Use an additional guard in String#each_line.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5464 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a694709e87e269be436ed1d176a688712beb9d5d
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jan 1 05:09:53 2008 +0000

    Remove unused callbackfactorys
    Add partial impl of Etc with some cooler pieces of it still commented
    Remove many warnings
    Some generics to lessen warnings
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5456 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d24b918c8800daf3e5d1a27cdc644b59d0dd0a23
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Dec 28 01:56:28 2007 +0000

    Fix for JRUBY-1806 from Vladimir.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5388 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7f2a49b57195e78b9749db1efdfc599a822c8e28
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 27 12:48:45 2007 +0000

    Fix for JRUBY-1796: String#each_byte behaves differently than MRI in some cases (patch by Vladimir).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5379 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 773306d59927b007191fea0da48f68bb56b8eec5
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 27 12:45:35 2007 +0000

    Fix for JRUBY-1795: String#index works incorrectly with FixNum parameters (patch by Vladimir).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5378 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d9967d90d6e34c13204229ea92d9fcb8173b8fd9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 27 12:42:52 2007 +0000

    Fix for JRUBY-1794: String#initialize should be private (patch by Vladimir).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5377 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 245824bc99754d24745cbe7c021529f30062c9fb
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 27 12:39:33 2007 +0000

    Fix for JRUBY-1793: String#insert incorrectly handles tainted argument (patch by Vladimir).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5376 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1e2ae8f7a01b293012b50194a7c4582e1f852c7f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 27 11:34:06 2007 +0000

    Prevent some COW pathological situations by smarter ByteList management for cat() methods.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5373 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e749e3c1e7a8f813b79f20615f41b52a733dbc99
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 27 08:11:04 2007 +0000

    Fix for JRUBY-1792: String#insert behaves differently than MRI in some cases (patch by Vladimir).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5372 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 49d62c7bbc31cb57f2ee9a7a3c61b2cf2ac95cc6
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 25 21:42:20 2007 +0000

    Fix for JRUBY-1783: String#crypt thwors IOOBE when high-order bytes present in the argument (patch by Vladimir)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5357 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a8f6c6c3e0df5ab1608c1301fde1e5fa53ac9f71
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 25 18:02:23 2007 +0000

    Allow Rubinius String#gsub spec to run successfully.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5355 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0f3f657d03792bec7ae444f9feb5ba0203bd9166
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 25 17:35:32 2007 +0000

    Allow Rubinius String#sub spec to run successfully.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5354 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b68907aace910c49ef63455b213130e82c265fbf
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 25 17:27:03 2007 +0000

    Allow Rubinius String#scan spec to run successfully.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5353 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dc8b4122a2c82490a71213bf14c629834076e26e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Dec 24 20:14:41 2007 +0000

    Fixes for JRUBY-1778, from Vladimir
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5346 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 576356b2e6748b87c056da336de4543fb4a19978
Author: MenTaLguY <mental@rydia.net>
Date:   Sat Dec 22 03:59:53 2007 +0000

    concurrency comments and fix RubyString field comments
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5335 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 12b0a1c6dd46d8c200d06cbbb671a068d7ea5aeb
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 20 20:15:40 2007 +0000

    Remove tmplock from String#gsub.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5317 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 918cd9f76100be900628fd28c2fe576f26e2ce49
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 20 15:50:43 2007 +0000

    Fixes for JRUBY-1757, from Vladimir
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5313 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d39217ce1aed6b02bc732c1306ba7878b84eff5e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 20 14:12:24 2007 +0000

    Fixes for JRUBY-1752, from Vladimir
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5311 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8250150c1f83ee82d4bf5fbad06b91c56f9ed4d9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 20 13:05:31 2007 +0000

    Fixes for JRUBY-1745 from Vladimir
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5309 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1895f3e0046958c5157723fb515d5215140a83e9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 20 11:20:12 2007 +0000

    Fixes for JRUBY-1750 from Vladimir
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5307 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 965a40502f173cbf516d8a3f9cacbe8cd747a436
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 20 11:04:50 2007 +0000

    Fixes for JRUBY-1746 from Vladimir
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5305 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0ae605aff4a25beed46fbee5fcb238a8faf3e49f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 19 03:12:32 2007 +0000

    Remove bogus check: (JRUBY-1731).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5297 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 327a5a6978ef72338212352711e6ae8117490253
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Dec 18 16:47:58 2007 +0000

    JRUBY-1737: String#% can't handle some string arguments with underscores (patch by Vladimir Sizikov)
    JRUBY-1738: Kernel.sprintf with argument of some non-standard type doesn't invoke to_int on it (patch by Vladimir Sizikov)
    JRUBY-1742: String#% with %s and %p handles tainted status of ar (patch by Vladimir Sizikov)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5293 961051c9-f516-0410-bf72-c9f7e237a7b7

commit df2ca1c3fa6b7a7f10f547051ba588486d9b8d32
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Dec 17 19:19:44 2007 +0000

    JRUBY-1733: String conversions with 0dNNN and 0oNNN formats are incorrect (patch by Vladimir Sizikov)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5286 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c8a60c62dbae1f6c8b1de333fe96406f04148793
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Dec 17 18:46:16 2007 +0000

    JRUBY-1732: String#rindex works incorrectly with FixNum parameters (patch by Vladimir Sizikov)
    JRUBY-1730: String#slice! and String#[]= with negative ranges behave differently than Ruby (patch by Vladimir Sizikov)
    JRUBY-1726: String#inpect and String#dump behavior is different from Ruby (patch by Vladimir Sizikov)
    JRUBY-1672: JRuby File.rename() behavior different from Ruby, causes log rotation issue (patch by Vladimir Sizikov)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5285 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 68bda076c4d3fced0949ae8719a654f18ea39847
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 17 15:57:28 2007 +0000

    Fix for JRUBY-1729: String#split works incorrectly with negative argument.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5283 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e389d07b921f46266feb9b28a62abbfecbf3907e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Dec 14 21:17:54 2007 +0000

    JRUBY-1723: String#initialize and String#replace on frozen strings behave incompatibly with MRI  (patch by Vladimir Sizikov)
    JRUBY-1706: [PATCH] Bad format for "frozen" error messages (patch by Vladimir Sizikov)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5264 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c1f9bb1dbafc855a0402ba9eba5f9540dcdff40c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 14 17:48:26 2007 +0000

    Fix for JRUBY-1718: OutOfMemoryException in simple String#scan case.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5261 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5ace69d0a164de16bc4bdfb8c52369a72f6cba80
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Dec 14 16:01:50 2007 +0000

    JRUBY-1721: String#slice and #[] on tainted string might incorrectly return untainted string (patch by Vladimir Sizikov)
    JRUBY-1722: String#<=> doesn't handle non-string arguments, but in MRI it does (patch by Vladimir Sizikov)
    JRUBY-1719: String#capitalize! handles frozen empty string incompatibly (patch by Vladimir Sizikov)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5260 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 22fb39152d1e10e2fcd56c15f561f1fe0931cdd7
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Dec 14 15:41:15 2007 +0000

    JRUBY-1720: String#count incorrectly works with high-order bytes (patch by Vladimir Sizikov)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5259 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 78c73c019d80be4b2a54fc6ed4dda158916aa9e5
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 13 01:57:56 2007 +0000

    Remove bogus check from String#sub
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5236 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1df1409e1547b23d7d6edeecb33f5e6943a82254
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 12 22:23:50 2007 +0000

    Oops. Fix String#justify required argument count.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5233 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 55ea7cdfbd32ccd0431874c03954b3858361901d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 12 22:01:41 2007 +0000

    Don't use scanArgs for String#justify since it produces a new array that's actually not used.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5232 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4424dd90123e3ba4f8068f9567427b68ea4b2f7c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 12 21:53:48 2007 +0000

    Restore and add a comment to getUnicodeValue() method that's used by AR-JDBC.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5231 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 595979fe921b7b7210d76be39ce932cfb366ccbb
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 12 21:52:03 2007 +0000

    More ASCIEncoding facility exploitation. Remove some unnecessary 0xff masking.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5230 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ee3e63f11a0ccbcd1f55db47832678ce0a41e2a9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 12 20:57:55 2007 +0000

    More RubyString cleanup.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5228 961051c9-f516-0410-bf72-c9f7e237a7b7

commit eeae683579067be5a37d72e74e201bfd1c696c1a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 12 20:20:49 2007 +0000

    Make RubyString methods exploit Joni encoding framework (ASCIIEncoding for 1.8) for some operations like (upcase, downcase, swapcase, awk split). They are faster, since they have fast character type lookup planes and are more reliable than '<' and '>' comparisons.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5227 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7b6889abbf1b902b33f3f5729bcb83c15be26b75
Author: MenTaLguY <mental@rydia.net>
Date:   Wed Dec 12 03:15:13 2007 +0000

    define initialValue for ThreadLocal rather than doing it the long way
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5219 961051c9-f516-0410-bf72-c9f7e237a7b7

commit eff5e06eb04be2e2140c83802de90e14eee42a61
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 11 22:40:22 2007 +0000

    make String#+ a little closer to bytelists.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5215 961051c9-f516-0410-bf72-c9f7e237a7b7

commit aecb7feb1249ea1deaf26ad52204d84ae8237b22
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 11 04:10:06 2007 +0000

    Fix broken String#split.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5208 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3ebdff689db8e1e3e87a5dc4db546047d74d7fc9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 11 03:25:29 2007 +0000

    First phase of Joni related String/Regexp optimizations:
    - Major RubyRegexp and MatchData cleanup (Compiler/ASTInterpreter synchronized).
    - Enabled lazy Region instance creation (only when groups defined).
    - Heavy lifting for String#scan, String#sub, String#gsub, String#split by direct joni Matcher access and smarter backref management.
    - Enabled joni Matcher reusing for aforementioned methods.
    - Enabled thread local Regexp cache for String arguments that are converted to regexps.
    - Global variable ($=) made ineffective.
    In most cases the modified methods are now 2x - 5x faster (depending on string size)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5207 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a27447b1356d09cb4d73ea7664138ac2eb34f567
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Dec 7 21:05:20 2007 +0000

    Remove some dead code/imports from RubyString
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5194 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d747708eb3730a7752c6594d4d2a12cefdc7fab4
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 5 23:18:08 2007 +0000

    Regexp/Matchdata cleanup. String minor fixes.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5171 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b22c6abb720151c7d5bb07aefcb6c81814931191
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 5 22:19:29 2007 +0000

    Remove "intern by default" from many call paths and explicitly intern only when the result will be passed to a method that requires interned strings. This should help reduce the amount of interning going on, easing some permgen pressure. The ultimate and best fix would be to forego interned strings in favor of an artificial ID.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5170 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cedfcb20726e851ca074a7b93b56dfc3055d0956
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 3 18:32:39 2007 +0000

    Fix for JRUBY-1657: (Joni regression) "".index("") returns nil instead of 0 (patch by  	 Vladimir Sizikov).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5151 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8795a034cbaf313ebf73ccae0123433ac04b95d4
Author: MenTaLguY <mental@rydia.net>
Date:   Sun Dec 2 21:12:14 2007 +0000

    RubyString: atomic sharing flag updates
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5144 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 50c567cf7f662ef918b8b140203d8e55da11c843
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 2 14:32:02 2007 +0000

    Introduce TMPLOCK_STR_F and TMPLOCK_OR_FROZEN_STR_F flags to RubyString, will be required for correct String#gsub implementation. Interestingly, inlining testFrozen gives performance boost (probably by not pushing "string" constant on stack every mutable String operation).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5141 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8d25ec3e0fdd08c83e23465ff1a8a467ff35e994
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Dec 1 23:04:29 2007 +0000

    Hash#[]= should not copy the key's ByteList.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5137 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dfa272194009a47fdada098bb65a3abc5821a0c3
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Nov 29 14:01:26 2007 +0000

    Fix for JRUBY-1560, by Peter Brant.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5110 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b01a5756657a6a6994275d2a4d31326f6daaa7ed
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Nov 29 13:20:34 2007 +0000

    Fix the AR-JDBC mess I created by pruning to much, and fix JRUBY-1624, patch by Vladimir Sizikov
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5104 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fa0e97a1269111030482cae9b3701580566e515b
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Nov 29 11:55:58 2007 +0000

    Remove most toString dependencies, fixing a bug in ByteList#dup(length) and hopefully improve performance of StringIO#gets
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5101 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 75c172d7c12a142e8e0912db8bf9c0c993082f7d
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Nov 29 10:42:54 2007 +0000

    get rid of toString usage in aset and aref
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5100 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ace69f3054b9954aa1633886665cda4b0d93d956
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Nov 29 10:34:05 2007 +0000

    Refrain from using toString in String#oct. Partial fix for JRUBY-1631.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5099 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0d6d958ff106cc653a5104e298699540f8f8dd8e
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Nov 29 10:06:10 2007 +0000

    Partial fix for JRUBY-1631, better implementation of String#casecmp, by Alexey Verkhovsky
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5098 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c13ae46e43d4e705bacee4daed629fc1fa0d3041
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Nov 28 11:47:51 2007 +0000

    Make String#crypt use ByteList instead of String, partial fix for JRUBY-1631
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5082 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2bb2dff23d81e87184e0b13250995b74d2a7f206
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Nov 27 11:09:30 2007 +0000

    Merge Joni as new regular expression engine
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5072 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4d75cc1470f5843b4b66f89f50ed81b88b27b431
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 26 10:01:20 2007 +0000

    Remove the three generic type conversion methods from RubyObject/IRubyObject to TypeConverter utility class. They were never overridden, and so there's no need for them to live in the IRubyObject/RubyObject hierarchy.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5047 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3e9c6ccab41022a64edb2c85e5eaf98a8aabfb26
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Nov 24 00:07:31 2007 +0000

    Removing a couple more callMethod implementations; remaining are heavily used, so I may stop here for now and copy-paste then into new IRubyObject impls.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5014 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ee97a647e0255d046071c3e530ba82a4ebe7f51d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Nov 17 02:21:16 2007 +0000

    JRUBY-1532: String#chomp misbehaving in 1.1b1, Patch by Peter Brant.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4954 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a67353e354c28f0804a429587a5311f95eb6cbeb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Nov 16 20:09:31 2007 +0000

    JRUBY-1571, array index error doing String#map.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4950 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 813b80a9a5f9d70ad65f06efad62968546a65c48
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Nov 10 22:15:31 2007 +0000

    JRUBY-1358: Failure in ruby_test String#aset test
    
    Disable totally borked UTF8 tests until Joni or Rej becomes our mainline regex engine.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4908 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0a1748f4603fbcc5091c1a9179c7b718d8141487
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Nov 10 21:12:16 2007 +0000

    JRUBY-1507: Ruby String aset ([]=) with 3 args does not work is start index is one past string length
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4906 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0e0b2c6b332d370abb9d295fcec1955acff80117
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Nov 10 06:05:16 2007 +0000

    Block refactoring: Detach Binding from Block.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4900 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b13d510c1a617cd792d486e702dbd3e21dd5c89c
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Tue Oct 30 06:44:22 2007 +0000

    Concurrent SymbolTable implementation. About 5% faster (in bench_symbol) than the ST code introduced in 4580 (which is mostly reverted here), and now threadsafe.
    
    As with the concurrent vars code, should perform especially well in multi-threaded applications.
    
    For interpreted mode, caches the symbol at the SymbolNode (almost identical to Fixnum handling).
    
    Still _much_ slower than MRI in bench_symbol (unlike vars/constants, where we're faster now).  Could be much faster if we cached the Symbol in compiled code.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4787 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 71dee7236e8a801884dd7ddb68b7757c2b9d1aac
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Oct 20 13:18:52 2007 +0000

    Fix regression in String#split for empty string argument and added some tests for it. Fixes JRUBY-1448.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4651 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bad1f67887904cd217bbf0239cc1a7354598e89e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Oct 20 01:07:29 2007 +0000

    Fixes for JRUBY-1409, only alias the methods that MRI does; rebind others.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4631 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9bc9825436ea08670905a6e2a06d760a97b71d70
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 19 20:52:01 2007 +0000

    Migrate JRubyMethod annotation to use String[] for names and aliases. Thanks Brad C from my blog.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4623 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 66c49ea267e3be2c4dfb6f0de39a5b58a35a473e
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Oct 15 15:42:29 2007 +0000

    Implement special case for split with string argument
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4589 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 95c346df5368a3f5f06fa9d14022efb85eaa6809
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Mon Oct 15 07:45:22 2007 +0000

    Vars have landed. Does not include concurrent SymbolTable (will follow in the next day or so). Also need multi-threaded unit tests, work in progress.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4588 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c5b2a03bdd992583c111f700ac5d92d5ab375a31
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Oct 14 15:54:36 2007 +0000

    Fix for JRUBY-1429: make String#each_line non-pathological.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4585 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a9fa4f5bce2db9e329aef116a1f9e45b399ffbb2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 12 17:28:06 2007 +0000

    Fix framing of sub/sub_bang to allow all RubyString tests to pass
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4581 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0b7a2dae2ec0baa531f313568ffc9b7382f89592
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 12 01:50:08 2007 +0000

    Migrate annotation-based method binding to generate DynamicMethod implementations directly, with arity checking built-in
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4575 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d2b68b348a66f5daf579466c7200126b7ce8ce3f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 8 20:33:53 2007 +0000

    Fix arity to calculate right and correct a few bugs that resulted from it being wrong.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4517 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ba060fb4180f15563ba664403ba62cdd66391e40
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 8 16:35:11 2007 +0000

    Migrated String to annotated methods
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4511 961051c9-f516-0410-bf72-c9f7e237a7b7

commit eb244ba9e37961159fcd0dcca2afc16223e18795
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Sep 30 21:19:53 2007 +0000

    Cleaned up and expanded the annotation-based method binding logic to support non-fast methods and potentially fast methods that want to accept a block. Moved most of the conditional callback-generation logic into InvocationCallbackFactory.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4442 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 06b35f459d410386df261e63f1e663442eb13dcf
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Sep 30 15:28:00 2007 +0000

    ObjectSpace fixes so we don't call runtime.isObjectSpaceEnabled twice.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4432 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3e88cfab0d224fb9efa8d18336993e2c78ce495e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Sep 27 16:40:57 2007 +0000

    - Identified and extracted construction paths for class/module/singleton/IncludedModuleWrapper, now there's no unnecessary null checks or assignments in their constructors (they take very few arguments so even asserts are not needed).
    Each of those constructors have a comment what is it the responsible for, also, two RubyClass.newClass() and two RubyModule.newModule() methods have been extracted.
    - Fixed logic that sets the parent/constant for Modules, now matches MRI (only setConstant/getConstantAt are used here).
    - RubyClass rewritten, special attention has been put on allocation logic, now Class.new(...) doesn't fire a separate allocator class. (btw, logic of "class B < A;end" and "Class.new(A)" must be split since in second case superclass and allocator are not known until initialize is called). Class/Object allocation implementation mimics MRI's weirdest quirks in behavior, is _much_ simpler that it has been and much faster. This also allowed creation of generalized clone/dup implementations matching MRI. (only our special ivars need a care here).
    - Rewritten bootstrapping of Object/Class/Module.
    - Core classes (except Exception hierarchy, they should also be in future) are now cached in runtime (MRI caches them in static VALUE's like rb_cObject) Ruby.getClass(String), Ruby.getModule(String) and Ruby.getClassFromPath(String) should be used only by either interpreter or compiler and when the class name is not known at compile time.
    - Fixed and simplified nodes: classNode, moduleNode, sclassNode, defsNode. Compiler has been synchronized here as well.
    - No more __attached__ as ivar, it is now MetaClass field (which means lazy ivars for singletons). Compiler also updated.
    - added and dosumented isModule() to IRubyObject (isClass(), isSintleton() documented).
    - Fixed test_autoload test (Object.class_eval do;autoload :SomeClass, 'somefile';class SomeClass; end;end) should raise LoadError, now matches MRI.
    
    - Fixed a number of minor bugs:
       1.instance_eval, was creating a metaclass for Fixnum instances (also affected Symbol/FalseClass/TrueClass/NilClass)
       marshaler objects were kept in singleton classes
       Range.inspect, was modifying the begin field (when it was a String)
       Many bulletproofings in Marshal/Unmarshal (like unmarshaling an instance of nonexistant class), TypeErrors/ArgumentErrors matching MRI.
       Fiber.new in 1.9, doesn't call #initialize method by funcall, fixed
       number of method arity fixes and many methods are made fast now
       fixed initialize/initialize_copy logic, further simplification, no ClassCastExceptions possible now
       Fixed defineClass(under)/defineModule(under) logic
       bulletproofed cases such: class A;end;module A;end
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4409 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f8063d1560a13e92230cccc517586d872daf3575
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Sep 25 09:23:22 2007 +0000

    Fix for JRUBY-1385 - don't return same object from String.match
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4386 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 84f5a2c64dc4f3b9f86960381c26acf42fdd77bf
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Sep 24 22:20:54 2007 +0000

    Fixes for JRUBY-1357: Failure in ruby_test String#chomp test, and enable tc_chomp test.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4381 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 361ac13ae85391dfafc9b70c49839af4d0baa4c0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Sep 24 18:30:09 2007 +0000

    fix JRUBY-1355: Failure in ruby_test String#rstrip test and enable tc_rstrip test
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4378 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bec10e7bff4d1d70eb88efe7653d4dba75efc830
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Aug 29 21:05:52 2007 +0000

    Fix and simplify conversion semantics. Remove a few unnecessary callMethod calls.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4232 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 94809836f29c92e41775dda970535480491639ea
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Aug 29 12:50:45 2007 +0000

    - Enabled assertions during all test runs, and made fixes and modifications as appropriate to get those assertions passing again.
    - Removed -da from jruby startup script to allow specifying -J-da on command line
    - A few optimizations to IOOutputStream/IOInputStream to use CallAdapter and lightweight strings
    - Cleaned up the gaggle of private RubyString constructors to four core versions, and added lightweight versions of a few public construction methods
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4225 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0eb2e2d24761be7774550350da496abaefdbabd8
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Fri Aug 10 08:06:53 2007 +0000

    Eliminate unnecessary array copy in RubyString.newUnicodeString.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4144 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3eee7681b5e2ca9e18ca65304791eef82bde9d12
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Aug 7 19:02:21 2007 +0000

    Add Java based kind_of? for some of our Java based implementations
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4120 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fc17861832a4f30aecf7840dc1dcee181618f93f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 7 03:10:35 2007 +0000

    Move backref and lastline into Frame, since there's only ever one copy of them in a given frame. This also will make it possible to turn on stack-based variable AST inspection very soon.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4107 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 256b3cd316ecaa50627af6aa49143cb89ee836e8
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Jul 20 11:29:20 2007 +0000

    Fix for JRUBY-1195, by Ye
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4049 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8beb29598e452024de3a2e637d5a1540ffcba5cf
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Jul 17 17:38:54 2007 +0000

    Hide Regular Expressions behind a common interface, meaning that implementations can be switched out much easier. Also add the /j flag to Regexps, for running with Java regular expressions instead of JRegex. All of this is in preparation for REJ and Oniguruma stuff which we should take a look at sooner or later.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4038 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5747fd3ec8312c6a621ef48b17b2f3dd034de75b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jul 9 20:03:49 2007 +0000

    Remove various unused imports and code (e.g. make my cref patch more concise)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3978 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8d0864e82a157ec872a9f106f2ab35e3aa34253f
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Jul 9 10:58:27 2007 +0000

    Fix for JRUBY-1184; ''[0...-1] should return '', not nil
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3975 961051c9-f516-0410-bf72-c9f7e237a7b7

commit af6e40c24dc8a1911a6c9649da129552912699e7
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Jul 8 12:30:32 2007 +0000

    Fix for JRUBY-1193; The new backref handling requires us to call RubyMatchData.use before using it; the problem in JRUBY-1193 was caused by RubyString.each, specifically.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3972 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 78cbe773471d332a3c21735e15928769efb108f0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 2 15:36:43 2007 +0000

    Landing Marcin's flags/OS changes; the memory savings alone will make us rich beyond our wildest dreams.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3952 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3855b2a7b32d013fbc4dbc8cdc3b4c6e9a9c8f0d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jul 1 18:59:57 2007 +0000

    Committing brand new dynamic STI generator; it's passing all tests, installs rake, runs rails. Any bugs, we'll find them in place.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3935 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a9ab9b77c1c3ef1bc5a529a035f9777d02d07c1b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jun 25 16:14:55 2007 +0000

    Remove extra sample scripts which were removed for 1.0
    Last of ablaf is gone (clean up from removing serialization before 1.0)
    Conditional support for parsing with/without extra positioning information for IDE:
      - For runtime this saves considerable amount of memory/object creation during parsing
      - Runtime can still parse with extra positioning information if desired
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3913 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 91a824abc497e389bcf80f92ead807012471b5a5
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jun 24 17:23:04 2007 +0000

    fixes for JRUBY-1164: String#rindex should give 0 when searching for "" (breaks Rubyzip). Patch by Anders.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3912 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cbb8346594efd6fb2b731f8e3db67b7f287ddf0c
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Jun 18 16:56:57 2007 +0000

    Improve strip and case implementations a little bit
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3891 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 331c897ec653bc1392a51084d12a692502502a05
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Jun 18 16:32:47 2007 +0000

    Remove out of date comments and make strip_bang use lstrip_bang and rstrip_bang, like MRI does
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3890 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0e053d9bbd84abc8e1c51e2f5b60ca604d76ceab
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jun 18 16:05:10 2007 +0000

    fix for JRUBY-1154: ArrayIndexOutOfBoundsException in RubyString#justify (patch by Ronny)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3889 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7d2d39049966d69975a0f873dbfc897b8b01b49e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jun 17 17:33:16 2007 +0000

    RubyObject#convertToTypeWithCheck() fix to allow nil through and String#index fixes to obey checkStringType() semantics
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3882 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 64df78cd5a40ababe857963d4418ae17ac57a826
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Jun 8 10:30:26 2007 +0000

    Fix sub_bang to only try UTF8 handling when utf8 is actually used. This otherwise can lead to bad indexes. No obvious test case for this, sad to say, but it should probably be something with regexps on binary data.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3859 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d490af4a9d510b46750d3a638162282991658f1c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 7 06:11:00 2007 +0000

    Added STI for inspect.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3847 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 68ea5e2d6179792686408a0f34c136c3232d5e92
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu May 31 03:50:49 2007 +0000

    Fix for a zero-length copy happening in sub_bang for some Rails tests after the UTF8 fixes.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3781 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 816924af886286de3732782268886c1017c91689
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed May 30 02:29:12 2007 +0000

    Fixes for JRUBY-828, going for it even though we may need to examine it more....
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3766 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3c84126930f98a129a2ae478ca1ee827a4ab3a7a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue May 29 20:42:24 2007 +0000

    fix for JRUBY-1009
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3761 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fbacb873b7c0bba3ab88234680659cf957b3c204
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue May 29 19:11:57 2007 +0000

    JRUBY-1016: File.expand_path not handling directory starting points properly
    JRUBY-1017: File.extname doesn't handle single period properly
    JRUBY-1010: String#sum with negative argument causes NativeException
    JRUBY-1011: String#sum should only accept one argument
    
    [All issues reported by Daniel Berger and patched by David Montag...Way to team up on these guys :)]
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3759 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0f755c536715cca7b51d8fb3372a61b9900a3192
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon May 21 22:15:26 2007 +0000

    Fix for JRUBY-956 (ArrayIndexOutOfBoundsException in String#gsub)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3698 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 02aba6ccdbf9cf23f8e4dbd6afcaa6f5705090a2
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue May 15 00:23:45 2007 +0000

    fix String#split 1.4 compat issue from 3650
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3656 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5751dc243e5daa0787788cc7727278f6319086c9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue May 15 00:01:57 2007 +0000

    fixed String#scan from 3650
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3651 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 28e209608118d6e9c16dcdb6cb2d8039e7617ee2
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon May 14 23:41:26 2007 +0000

    Lot's of String stuff, notably String#split (and other methods: scan, sub, gsub, tr, ljust rjust, center... and more).
    Also partial work targeting JRUBY-688
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3650 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 23bf5337526a6ba513bdddd02895bf32d2dc5eb2
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Apr 25 22:16:14 2007 +0000

    JRUBY-735: When printing out the ugly internal representation of anonymous types and classes with no to_s, JRuby is escaping the #
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3562 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9db3b8a8b6fc0df410be0c5a807d1c8da68b936c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 23 01:05:30 2007 +0000

    Fix for JRUBY-734.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3530 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e421186fd854c658a7cac4868e944d102c30a257
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Apr 22 19:18:54 2007 +0000

    Fixes and tests for JRUBY-807, correct eql?/== behavior for hashes.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3527 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1742e48d5561cdc2e90fca3b335c89a0f3d9a84
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Apr 20 02:08:54 2007 +0000

    JRUBY-840: Cow fixes, Enumerable rewrite and arraycopy hunt (Marcin)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3511 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fdc2cb3d8801f10322476c86158510232f1119ec
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Apr 19 01:49:31 2007 +0000

    JRUBY-838: rand() with big arguments blows up
    Miscellaneous warning removal (unused vars and imports)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3500 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d465fd9bc7ee6ae38475299bd82e65ac9d1311b4
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Apr 16 10:41:12 2007 +0000

    Add several new STI's
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3470 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3d7b6d73463accb504dc4d554a51348749973fc1
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Apr 16 06:13:56 2007 +0000

    Improve implementation of MatchData
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3467 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a0d3eb7678b575214239ac1e4f16f6d4a0cc0628
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Apr 15 17:06:23 2007 +0000

    Make substr public again
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3465 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a6328f417d7f831bec1d60b01d92c5a24407f2f0
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Apr 15 11:27:13 2007 +0000

    Improve performance of RubyMatchData somewhat by using COW. Also provides the same semantics as MRI for ASCII matching. Further, fixes a bug in String#+, where the first buffer has a value.begin != 0.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3463 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7a77daca5662ec40025900d080e4e71c7271a278
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Apr 15 01:44:36 2007 +0000

    Committing Marcin's excellent Hash and String copy-on-write work for JRUBY-818. ant test is solid, mephisto appears to work well, and with one small bug fix, activesupport, actionpack, and actionmailer appear to run the same as on trunk (maybe a little better?). Also, I found and fixed a small bottleneck that now shows patched JRuby rdoc'ing faster than trunk. So we're gonna go for it.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3462 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1d9caa988978c6383a5c37757a19cea136de3c5f
Author: Nick Sieger <nick@nicksieger.com>
Date:   Sat Apr 14 18:53:04 2007 +0000

    JRUBY-816: string should not accept fixnums outside range 0...256 (Bill Dortch)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3461 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 11bb307393d33e77ad13eef22996986a95098f08
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Apr 14 11:47:34 2007 +0000

    Handle the gsub argument more correctly
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3459 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 56921e8385af2ec469b4fb7cfcccfa7fba088d23
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 9 01:56:07 2007 +0000

    JRUBY-785 fixes: use the module index from object's *actual* module, not hardcoded to ARRAY et al.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3411 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3fa144ebbc464129d9d83ee34463bab17c2d0f9b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 7 07:07:51 2007 +0000

    Added three more nodes to the compiler, added a couple extra STI methods the shootout uses, fixed a bug with dstr node compilation, enabled const nodes as "safe" since they appear to be working right in the contexts I've tried.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3407 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 958ad3b9bfc5cae3a21185dec303ac7af7d77482
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 7 02:59:27 2007 +0000

    Expanding STI to a few more methods, and doing a sweep of all "direct" callers to make them use STI.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3406 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 085e9b23399d22a3ccab1d36aadb827401cb3070
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 7 01:28:18 2007 +0000

    Added a few more method hot spots to STI
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3405 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f4c15912b1d4edc84b06c882195d27df371d1023
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Apr 6 23:13:04 2007 +0000

    More cleanup of STI and expanding it to conversion methods and hash.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3404 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d62fa2e40430284407348c6aba9247c83b521086
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Apr 6 08:33:30 2007 +0000

    Convert Java strings to and from UTF8 when crossing into and out of Ruby space
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3403 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b103366f520f4603150606f740bce8b5e69ef09d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Apr 3 22:26:49 2007 +0000

    Removing StringMetaClass
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3365 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2713c33b840f07a50ea1b8b8741a8cdd5476d4df
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 2 08:46:40 2007 +0000

    JRUBY-748 Bil Dortch's performance improvements for ByteList. Thanks!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3351 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 603357aaa9f3ef0e0c5e1572ca1fc980590ba67c
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Mar 31 21:33:57 2007 +0000

    Fix some small stuff
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3350 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 06ca6fbda14aedc7d2ad5b702b7b88a9366dc4e6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Mar 31 11:06:43 2007 +0000

    Small coercion fix from Ruby 1.8.6: String#[]= should try to_int on arg 1 and use the result.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3348 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0bb5a90b33cb7e9a5deb09009ad2dcffd6cd06d6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 29 07:59:13 2007 +0000

    Small optimization for convertToString for RubyString instances
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3323 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8c2bc8cfe9f4bcaa23b9e8544c55d7f9dc6c54b1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 29 07:08:05 2007 +0000

    More IRubyObject cleanup; removed initCopy, moved setFrozen around, moved checkArgumentCount to Arity
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3322 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c02ca0e641c238d2fc8985fe7f939b8b3df6f95
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 29 05:54:41 2007 +0000

    Fixes for JRUBY-734, along with a first run at cleaning up IRubyObject.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3319 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6c1b1a7c15f270387d8743a851c96c14fdc893e4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 27 21:43:13 2007 +0000

    JRUBY-730: make extended strings return objects of their own type from split
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3309 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b0d4a231c2c25e561f6bd876762e583fd32f65d1
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Mar 25 18:38:56 2007 +0000

    Reasonably complete fix for JRUBY-670 and JRUBY-671
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3276 961051c9-f516-0410-bf72-c9f7e237a7b7

commit da8baebe1933e98f326c92cf14f375bd79aaba45
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 21 23:25:35 2007 +0000

    Added a few remaining missing StringBuffer-like methods to ByteList, along with tests. Removed most remaining uses of StringBuffer/toString in RubyString to use ByteList (tr got a noticeable perf boost).
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3261 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e6f4065982c1ab8f0d0d278e6ef8c42bbe668886
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 13 23:29:16 2007 +0000

    Fixes for rest of 6, 7, 9, and 10 in JRUBY-553. The remaining three are weird, I'll post to bug.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3194 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 58b1ac3666016b5629a293ff3fc1d809cd512f81
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 13 22:43:51 2007 +0000

    More string fixes for JRUBY-553, for failures 2, 3, 4, 5, and part of 6 (no more argument error)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3193 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4c961a714bc9e519344674137ac7de9bd06fb7cb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 13 19:38:51 2007 +0000

    JRUBY-553: \010 should not be replaced with \b in inspected strings. Failure 1 in the original list.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3191 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b33e830c0be8e696874cef0d5958753ecf07b1c7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 13 08:53:11 2007 +0000

    Reverting scan changes; we must not have tests that are hitting it, because it hosed up IRB prompt somethin fierce.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3187 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 75ee2352b6b84e6712e11a8ebc4361408bc48280
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 13 08:13:42 2007 +0000

    Optimizations for each_line and scan using improved MatchData; bulk gem update works now.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3186 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f5d499b05fc77e37e38fcfab0a3d55159dbcf1e8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 12 20:17:45 2007 +0000

    Eliminate ThreadContext.yield and add an overloaded version in Block instead. One less "utility" method on TC.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3181 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 768b724a7ef4942d89923756ac1c5183ac5bf24a
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Mar 11 19:05:37 2007 +0000

    Make regular expressions use JRegex
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3176 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bcd3301fcd97db90d50558b5bb3c60d7d9226beb
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Mar 10 00:20:02 2007 +0000

    The Bill Dortch sprintf special commit....
    
    JRUBY-667: String#to_f and Float(str) do not support MRI behavior
    JRUBY-609: PrintfFormat needs to be completely rewritten
    JRUBY-39: Floating point formatting discrepancy: "%02f" % '5'
    JRUBY-581: Kernel.(format|sprintf) does not correspond to MRI's behaviour
    JRUBY-678: RubyBignum test assertion failure in build 3151
    
    In addition to this fix I also removed old PrintfFormat and a few stragglers...There could be some follow work in method_missing in RubyObject and RubyKernel since I removed those old printfformat consumers in a pretty innefficient way.
    
    Thanks Bill it is great stuff!!!
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3152 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d6e2fa17e560a1403afb34468170a99b56b2fc99
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 8 23:44:51 2007 +0000

    Additional optimizations for arity and STI methods.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3150 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c00f3a8eae5dfa596b418a8f266029a9c379c7f9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 8 23:12:37 2007 +0000

    Added to_i to STI and fixed a major bottleneck for simple Arities.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3149 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f95f5220c0d640d918a1ae20a5c908168d8d0335
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 8 04:48:39 2007 +0000

    Fixes to STI: make add/alias methods flush it correctly, expand to fcall and vcall, add to_s, ensure all appropriate paths are calling via STI
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3141 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bfa108819511ccfb206c6b3c3cb7eed495079925
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Mar 4 15:46:19 2007 +0000

    JRUBY-657: String.to_str logic wrong
    JRUBY-658: Derived classes of String should not call explicit to_str method
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3124 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 85bab5348f57081e7cc8e5cdf1046b9717ad24b6
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Mar 2 16:44:52 2007 +0000

    JRUBY-399: MRI desn't allow defining singleton methods for Floats and Bignums
    
    Removed unused imports
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3105 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e1f59db32dc0fe5071920ebd8bd3268bf681cb22
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 22 19:44:09 2007 +0000

    Backout STI internal invocation
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3064 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 964722d3a902761a36092db4f9eb2e76f9963c8f
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 22 19:23:42 2007 +0000

    Removed unnecessary object creation and comparison
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3063 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e75a867db054fba093c32dbc5e3280140d5ccd5e
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 22 18:55:27 2007 +0000

    Fixes to RubyString.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3062 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 972877610a58418cc1a3317f59c8f7ae9ef8c1e8
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Feb 20 23:05:11 2007 +0000

    JRUBY-202: ::A = 1 should work
    
    Jira issue creation is down so I will explain other changes in detail here:
    
    1) Change D*Node (DStrNode, DRegexp, DSymbolNode, ...) to use same logic as
    MRI and also remove superfluous ArrayNodes + extra DStrNode for all D nodes
    except DStrNode itself.   This may remove some cannot convert Foo to String
    errors (though I could not come up with any test cases -- though I know
    some exist).  This also includes an optimization of just grabbing bytelist data
    is StrNode is an element (since there is not point in eval'ing that node).
    
    2) AST nodes which contain literal String data now hold that data as a
    ByteList.  The overall benefit of this is that we only need a single clone
    of the bytelist versus string to bytelist conversion each time we use the
    literal.  BTW- You may wonder why we need to clone:
    
    1.upto(10) do
      a = "aaaa"
      # Add destructive op to a  here to screw up literal
    end
    
    Once we get COW strings we can get rid of cloning.
    
    The next phase is making the parser/lexer itself fully work with ByteLists.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3033 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bba808cfd29f5ff4ac96c1d37007736c1e268327
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Feb 19 16:45:04 2007 +0000

    Cache the Ruby hash value for a String
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3027 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a2107e60085a5063bca76d897783a512bbd7eddc
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Feb 18 15:18:18 2007 +0000

    JRUBY-606: Get rid of un/under-used IRuby interface
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3022 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d8424d42a02b1ba5b8b47c8f53bb4e3c6dcf56ac
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Feb 18 10:24:55 2007 +0000

    Fix for JRUBY-600. Compilation with 1.4 should work.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3018 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9fc274f4addb651ecb38f66b9a989248cdf1946e
Author: Nick Sieger <nick@nicksieger.com>
Date:   Fri Feb 16 06:18:39 2007 +0000

    JRUBY-570: a little cleanup; some copyrights inadvertently changed, and avoid
    extraneous StringBuffer.toString in a couple places
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3009 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ba941779cfc4123140eb4dc085f3d6ec561ab8f2
Author: Nick Sieger <nick@nicksieger.com>
Date:   Fri Feb 16 05:32:51 2007 +0000

    JRUBY-570: nuke plaincharset.jar!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3008 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1b3753296b128b8271b743a37fa7a2da5c49ebad
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 15 11:29:08 2007 +0000

    Make all our IO uses ByteList directly
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3003 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9d39dfdffc4bf0b2a39afcee341c32a67cb35ac2
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 15 10:05:17 2007 +0000

    Add objAsString and use it in some places where it's needed.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3002 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6eb3d26b5cb1296e55af275f5fc78c6c7fdaff60
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 15 09:46:00 2007 +0000

    Fix for JRUBY-590. Several changes didn't call stringMutated().
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3001 961051c9-f516-0410-bf72-c9f7e237a7b7

commit aafb64a670a2a013337541e87515e34cca74e781
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 12 17:01:43 2007 +0000

    strip was broken for completely blank strings (should result in "")
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2985 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c401bdfacc8b0fb7715e321d46079f01e844ccbd
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Feb 10 11:33:41 2007 +0000

    Improve performance of gsub by about 20-30%
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2976 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 92a9db7934a21b62c2c912f9602b5198a9dfd3bd
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Feb 10 10:26:41 2007 +0000

    Safe microoptimization of gsub
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2975 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8169a980a437ed4b2e8483aa6032bfaa4f99bb92
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Feb 9 14:48:30 2007 +0000

    Fix for JRUBY-556, by Marcin
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2972 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 734858ac13838ef7f6a35a7ec02afcee8fbcca15
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 8 16:29:42 2007 +0000

    Make our rb_str_cmp faster and more MRI-compliant
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2971 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d81f2dea5648c681f7a0b221ed8f39a3be00eb49
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 8 16:03:55 2007 +0000

    Give RubyString and ByteList a better hashcode
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2970 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1fd378cae8bf2c203a6e39bd36cf31d975775ee9
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 8 13:11:04 2007 +0000

    Improve performance in various parts of the system by never cloning a byte array that will go out of scope immediatly. These are safe to retain. Also, new implementation for StringIO that uses ByteList directly.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2965 961051c9-f516-0410-bf72-c9f7e237a7b7

commit edb8139e505263a0791c37b10988ded4fc0ae5ed
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 8 11:16:27 2007 +0000

    Improve marshalling of Strings
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2964 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b75acd823e2ecd312a2540a844d2358faf9ab4c1
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 8 09:57:25 2007 +0000

    First round of simple ByteList improvements. Don't copy a byte array twice, and don't do range check twice
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2962 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4c6b4672454b25351d017b61c8af2df30235cda9
Author: Nick Sieger <nick@nicksieger.com>
Date:   Thu Feb 8 04:35:33 2007 +0000

    guess this goes under JRUBY-565: a few more byte list improvements
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2961 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c1c089ceba262e6cda4c9b683080ddb836894e64
Author: Nick Sieger <nick@nicksieger.com>
Date:   Thu Feb 8 02:59:30 2007 +0000

    Baseline for improvements to ByteList.  18 tests to ensure
    refactorings do not break it.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2957 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ef423f1b886650195114fe952a1a6407fbb63f82
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 7 22:27:41 2007 +0000

    - Create a NULL_BLOCK to replace null checks against blocks:
      - Now isGiven() on a block tells you whether it is supplied or not
      - yield on the NULL_BLOCK throw the correct exception
        - We were not throwing this correctly by most callers with my landing of
          the block branch
        - We were generating NPE in cases where we called something that requires
          a block and supply none
    - Block.blockObject => Block.proc
     - Rename and type since this is just a convenience reference for association
       from block to what proc it might represent
    - Remove unused blockAtCreation (this may become relevent for Ruby 2 but why do
      it now
    - Remove ThreadContext and IRuby from Frame
    - Remove Scope
    - Put Visibility directly on Frame
    - callingzsuper dead code
    - Now that modules have a proper superclass we can get rid of special code in
      callSuper
    - ArgsPushNode.childNodes should not return null
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2956 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8c2cdaf024c051bc2cda4adcf1f3d80343ea5ba3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Feb 7 10:30:14 2007 +0000

    Modify RubyString to use the more efficient ByteList rather than mercilessly reallocating byte[] for every mutation. Allows gem source index to update correctly and improves performance close to what it was before.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2955 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d1e187ee1a48a02764375e108a6f62ab580de2ad
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 6 04:18:52 2007 +0000

    First round of changes for JRUBY-565, converting RubyString's internals to byte[] and using PLAIN encoding for most uses of Java strings internally. More to come, including improving (and re-fixing) UTF8 support.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2951 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ec88c41cc3fe7a7e984acb75718383aee7371033
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Feb 5 21:32:51 2007 +0000

    Splicing a string on regexp and specifying a return should set backref
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2950 961051c9-f516-0410-bf72-c9f7e237a7b7

commit abb698c4480e43967ac2bd986fb4862f0337539d
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Feb 3 18:25:54 2007 +0000

    Add %p to our printf format specifiers
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2929 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b9e4c483f2017ed6fbd35af4ea975671b329797b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Feb 2 15:23:04 2007 +0000

    JRUBY-496: singleton class chain structure malfunction or singleton methods not properly dispatched
    (by Marcin)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2922 961051c9-f516-0410-bf72-c9f7e237a7b7

commit beca166768368e248fbbb9ba945020d4d27c3253
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jan 29 19:32:57 2007 +0000

    Remove most warnings in code (sans WIP areas)
    Unbreak Java 5/4 problem
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2877 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 904e1db343d9223a24e4b3e380e920d4d1c029cd
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Jan 28 18:47:24 2007 +0000

    Fixed a problem when comparing a String to a blankslate proxying a stringlike object
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2866 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fa021e6350a9913aec4080deb761bacd7e9414e2
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Jan 28 17:44:32 2007 +0000

    JRUBY-488: Kernel#dup, Kernel#clone and initialize_copy should obey MRI protocol
    
    Patch by Marcin
    
    Nice...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2864 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c9db4cbbcca01aa65287532b82330e37ff81173
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 28 03:44:22 2007 +0000

    Big set of changes for marshalling bug JRUBY-472; getting closer to having things sorted out. One known failure in "ant
    test" is due to our modules defining methods on a singleton class, which appears to be incorrect and harder to fix. I'm
    on it though.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2857 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0f9fc55e73a74c5a8ff6318c8031c26b93400164
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 27 18:03:18 2007 +0000

    Some files did not commit right in the merge...take 2
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2852 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3c0520ea19b5a84643aa2e0a8ac36b4bcfe058ea
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jan 22 22:48:29 2007 +0000

    Remove Java 6 API to one that works in earlier versions.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2818 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ff9a3a7cf7a90fae99447aa308860bec01c5cfbf
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 22 06:34:50 2007 +0000

    Fixes for JRUBY-471. each_byte now uses "& 0xFF" to unsign the bytes and split falls back on raw bytes if unicode fails.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2813 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a401461c95ec437f986f1edfb90eb60bed22b993
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 21 15:49:20 2007 +0000

    Minor fix for the regex process of escaping incoming regex characters.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2809 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3e9ad77df8100d3a417c57a18cd77d4c01b44e9a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 21 14:22:20 2007 +0000

    removing unused import
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2808 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 35e8e413b7e0e2cc4efc43ebf20ae54d1147acff
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 21 14:18:18 2007 +0000

    Final fixes for JRUBY-468. String.split will now correctly split strings with UTF8 characters in them, and inspect will allow such characters to pass through as well.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2807 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0140ec2a68aa69659e27189bffa24dee3fac204e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 21 13:27:12 2007 +0000

    More work for JRUBY-468: cleaning up escaping of the incoming regex.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2806 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 646c18c0bb6813701617871c882f99d03b93a4c8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 21 13:03:14 2007 +0000

    Second commit for JRUBY-468. Refactored, rewrote String#split to avoid using Regexp and MatchData, preferring straight-up use of Java's Pattern and Matcher.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2805 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c02e482e63400582e1dfed203f09fab54eefbf81
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 21 11:06:10 2007 +0000

    First round of changes for JRUBY-468. Added KCode enum, eliminated Split class, starting to get KCode used where it should be.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2804 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1eef0fd6c5b6eb8046466386f02bac86bfb3628a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 15 22:04:18 2007 +0000

    Adding back missing arity checks for STI-based methods
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2745 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 97b2ec4b358263fcd35023bb1f1b6c7cdba88a53
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 14 00:59:44 2007 +0000

    Big commit of work from last week:
    - Beginnings of STI-based dispatcher
    - CacheMap modifications to make STI "safe"
    - Code for JITing pure Ruby methods (currently disabled)
    
    Additional work on STI and the JIT will come along shortly. This will also fix current trunk failures during ant testing the compiler.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2732 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 780c79c3c4894f224c360ce3621e40e44d1f8498
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 7 01:20:38 2007 +0000

    Good night, sweet DirectInvocationMethod, And flights of angels sing thee to thy rest.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2690 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9ab0feefb6992bbcba1cb30d54dcf03f8e9e5489
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Jan 5 09:34:07 2007 +0000

    Fix for JRUBY-97, by Damian and Tim. Good work
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2675 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 825d104959b36307f9f8edac2ae8d60af85b6b9a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Dec 31 22:50:06 2006 +0000

    Fixing String#eql? which is supposed to *only* do a strict comparison between strings
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2630 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 32e3222d3defac9ee5f76c3651f4699f62271215
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Dec 30 22:00:22 2006 +0000

    merging refactored method stuff plus fast/simple invocation changes to trunk
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2623 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 973ff26ab45284d9e3addd798a87cb359be61e6c
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Nov 30 17:07:31 2006 +0000

    Whitespace fix, due to faulty tab settings the other day
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2519 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7b23b70f45474e63112c871e538a0247a1f5722b
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Nov 28 10:12:43 2006 +0000

    Fix for JRUBY-213. Nowadays matching a string against a string is TypeError'ish in MRI. So we follow suit.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2507 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a99c8643e2996a04338dcb2ea5ad169c29e5f798
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Nov 25 16:59:09 2006 +0000

    Fixed JRUBY-290, and also added support for lang parameter to regexps in EvaluationState
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2474 961051c9-f516-0410-bf72-c9f7e237a7b7

commit accd69543aeec606dd2490c5f67964fb52c543a5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Nov 19 04:35:39 2006 +0000

    hardcode String, Fixnum, and Symbol equals and hashCode methods; this brings their HashMap behavior in line with how Ruby handles them
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2446 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2dd5163ec669daa4112bef0bb39f8975c6b82b55
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Nov 19 01:30:42 2006 +0000

    Landing String overrides of comparable functions to speed those up...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2444 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 174e3d01468001668ab299227d4af11aea65341c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 14 03:09:59 2006 +0000

    damn the torpedos! full speed ahead! landing enebo_lexical branch changes plus TC-passing optimizations and a few small compiler updates
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2423 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d60db5020589825949720b70242a62920f7c794c
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Oct 23 09:15:11 2006 +0000

    Fix for JRUBY-203 (inspect not correct for ascii 8)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2372 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3f04b7ea16a8eaf59cf5de721f876360711e6521
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 10 05:18:55 2006 +0000

    cleaning up a large number of looped calls to IRuby.getCurrentContext
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2320 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9be47462f004ba9a9f729a46448fde9e304fe848
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Oct 5 12:45:15 2006 +0000

    Fix for JRUBY-21, implement String#crypt
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2283 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 39c46ceddd2033806c64aede42f0f510136c9575
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Oct 5 12:27:44 2006 +0000

    Fix for JRUBY-141, RubyString#replace(int,int,RubyString) and RubyString#substr made public
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2282 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 49a56f9e6e617c2833c9cb7581e53e9a47e1c5ca
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Sep 29 15:48:05 2006 +0000

    JRUBY-60: Range exclusive bug (in String)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2247 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 524049357e360ba81a21756f54071c67d3796180
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Sep 7 01:40:03 2006 +0000

    merging headius to trunk
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2232 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dc9ebc85bd64040a28aeb6d23b3a4c90f21a9b7b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Aug 5 05:54:15 2006 +0000

    optz: avoid multiple calls to IRuby.getCurrentContext in a single method
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2165 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 173179d78158ff41cbc9d65d8b787e15ba7d40f6
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Aug 2 02:20:18 2006 +0000

    Miguel power block
    JRUBY-3: Bogus 'warning: (...) interpreted as grouped expression' warning
    JRUBY-46: RubyString.java not compiling using JDK 1.4
    JRUBY-23: Array.min,Array.max with block gives error: `min': yield called out of Block
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2158 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 45e45e79f1fdd11588b95835c7396a9cd8357a83
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Jul 27 00:29:46 2006 +0000

    JRUBY-44: String to_sym, intern not filtering out empty, null-bearing Strings
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2147 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cccee89bfaae3a3760338a826fd15b3ce92217d7
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jul 25 14:24:19 2006 +0000

    JRUBY-38: "FooBar".slice!(6..2) throws inappropriate RangeError
    JRUBY-40:  String ljust/rjust 2 arg support missing
    JRUBY-42: README refers to an erroneous file; normalize punctuation
    JRUBY-43: Inaccurate Rubicon file reference; Formatting
    Updated comment to reflect defect in Jira versus SF
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2145 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a8e43a822520f7203c4842afdaaebaa2bf3fb0f4
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Jul 23 15:58:12 2006 +0000

    JRUBY-37: String aset(regexp, integer) support missing (Miguel)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2144 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ccaba8b36154afea86c2482886e84c7df5ddad99
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Jul 20 00:44:32 2006 +0000

    Fix JRUBY-32: Rubicon string test "FooBar"[/([A-Z]..)([A-Z]..)/, -1] fails (patch by Miguel Covarrubias)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2132 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 255e6b7523a9be2320010ced17c52ad015356915
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jul 17 19:40:46 2006 +0000

    upto bug [JRUBY-12]  patch by Miguel Covarrubias
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2128 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4b12521bf34cff2c9841b1dacb1a929f6def5327
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Jun 22 02:11:16 2006 +0000

    Reverse hashCode no longer calling ruby hash method (caused fresh rails app to not run)
    Applied patch to skip over \r chars for non-binary files on windows (work-around until more comprehensive solution decided) [Ola Bini]
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2083 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5651ee18343f68cfdd3bed6d5960e8ad3f35c766
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jun 20 02:43:53 2006 +0000

    Do not call 'hash' when calling Java's hashCode().
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2078 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 185c54edbc79bd7b73f1c9400146d9a0aa45b0bb
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jun 6 02:40:53 2006 +0000

    conditional String/StringBuffer patch (Charlie)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2055 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2bd29f53a209c88fd232485690df5a124628c573
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu May 25 12:47:46 2006 +0000

    Implement String.insert
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2038 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 53bb7c8d2b009e9348aeb0827ea406318c7e55de
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Apr 29 14:56:37 2006 +0000

    - BigNumber.to_s missing optional radix argument
    - String.each_byte returning negative byte values
    - String.sum had wrong bitsize calculation
    - String.sum did not work when bitsize was 0
    - String.to_i missing optional base argument
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2024 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f03e5dc81769f463c456e2268d0bb08c108684f8
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Apr 28 02:24:46 2006 +0000

    - Integer should import Precision NOT Enumerable
    - "".gsub(/\n/, "\n") was returning "\n"
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2021 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 21d377548a641852efbd1889574ea94093c5be6c
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Apr 26 01:49:35 2006 +0000

    Consolidate quote and escapeSpecialChars
    Add some more tests to better test special char escaping
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2017 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dbc75f5775b42f401554a0465098c530e42532d6
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Apr 22 22:54:21 2006 +0000

    - to_s/inspect should return IRubyObject (inspect in object by default calls
      a method which may not actually return a string -- kaboom)
    - MatchData.inspect should return #<MatchData:0x14ae2c1> not to_s
    - Remove unused import
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2010 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d2fa6867c5eba8eef93412239a18fb80d64ad1c4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 15 18:01:40 2006 +0000

    replaced invalid dup impls for DirectInvocationMethods
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1989 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9f2efc63a858fa0507245b207025eab027840a04
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Apr 9 20:58:31 2006 +0000

    Make RubyString use a StringBuffer instead of a String as its internal representation.  This change makes one test case go from 262 s to 0.7s.  Various other function fixes thrown in (with quite a few new unit tests) and some conversion to make more mutable functions use StringBuffer APIs more.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1974 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c3af18ad1a172547f99265449070b1ba01b70fa1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Mar 26 21:21:40 2006 +0000

    multiple fixes to make RubyGems work:
    - YAML is looking for an IO to come in, but GzipReader does not === with IO. I think perhaps it's an issue with IO not ==='ing correctly. Commenting out this check allows YAML to continue. This is temporary. (credit to Tom for noticing this)
    - in a "readline" method in yaml.rb, an IOError is rescued and ignored; at this point, nil should be returned, but because of a bug in the interpreter (unfixed as yet) the IOError is returned. I modified it to explicitly return nil for the moment. This is temporary.
    - Zlib::ZStream#finish doesn't appear to work correctly, because the underlying @stream doesn't have a finish method. I only ran into this during some other testing, but I commented it out for now.
    - A couple style and grammatical fixes in zlib.rb
    - A rogue "1" in GzipReader.readchar (I'm guessing it was a typo)
    - Comparable#== can also return nil if <=> returns nil (like if one of the compared objects is nil)
    - Dummy implementations of File::Stat#symlink? and File::Stat#blksize, used within FileUtils for copying files
    - String#oct needs to return 0 for empty strings
    - Time#<=> needs to return nil if the object compared to is nil
    - Time#utc and at can accept floats
    - GzipReader#gets separator now sorta works (only for single-char seps right now)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1943 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5073cc752efc231540d1aa632ff959ad6cc1aeda
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 9 20:02:46 2006 +0000

    merging eval, array, lastclass, and jirb changes from cnutter_work1
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1916 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 60b46ca55a8a4fc640014ac4a377cab2b1be3aed
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 1 00:55:34 2006 +0000

    fixed: []= on an empty string "" is valid; also fixes slice!(0,0) occurring in yaml parser
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1900 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1d43870a42678f709851fcd9349d32a5f5be0dca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 2 19:51:50 2006 +0000

    merging cnutter_work1 to HEAD
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1869 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 918507aed1bf53ad95fefa25f3be76b4503d0f79
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Dec 6 20:52:56 2005 +0000

    More complete chomp/chomp! (patch by Tim Azzopardi)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1842 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4ede4bfb0b4fcc29ce09b82da5f1164b5894d258
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 10 15:09:14 2005 +0000

    TC method refactoring, renaming, inlining of TC-related IRuby methods
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1825 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f5643d27aa7a2dd836ef19c758a0a13351434da4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 21 01:04:27 2005 +0000

    merging cnutter_work2 to HEAD...damn the torpedos! full speed ahead!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1807 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c0fab8d04fa8e9ab360549a713b46891222be5e1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Oct 20 21:13:50 2005 +0000

    Reverted bad "call" dispatching for internal String behavior. The resulting code is fairly ugly (lots of casting and encapsulation-busting) but I'll remedy that before converting any more methods.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1806 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 01ca9286afda4864b9a97217ebe1c30f79ccd45b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Oct 20 16:21:41 2005 +0000

    big refactoring of method calling, moved scoping/framing resposibility to methods themselves, eliminated RubyModule.call0, renamed method callables appropriately
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1805 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ebd70b6d4c06376091d96db9bc904a9e2e38dc41
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Oct 16 06:04:40 2005 +0000

    began converting methods into direct-invokable, first-class object style
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1802 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4dfdacd80c56018084c618f3bbab7b542653d95e
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Sat Oct 8 13:07:06 2005 +0000

    Introduced IRuby interface for Ruby runtime object.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1798 961051c9-f516-0410-bf72-c9f7e237a7b7

commit eea94b8d712be31e67c668f7451b30352c91ff2f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 5 16:52:18 2005 +0000

    eliminating null checks on instanceVariables by always instantiating it on get
    encapsulated internal "value" field for RubyString's java.lang.String
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1795 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ca6b16e996ea9af83ce593594b9c69b9364a9924
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Aug 28 13:29:33 2005 +0000

    Kill RubyClasses (core class/modules now initialized in Ruby)
    Store all top-level classes as constants within Object (fixes things like Object.constants) instead of second datastore
    Always load all core classes (remove lazy loading)
    Convenience function RubyModule#getClass added
    Convenience function Ruby#getObject added
    JavaObject and JavaArray are now Java::JavaObject and Java::JavaArray to be consistent
    classes defined under another class/module are now defined in the parents creation routine
    Removed some masking warnings
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1739 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 31d6374bddf26d6c286c9f865a85d5ac17ebb941
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Jul 13 16:49:30 2005 +0000

    New method caching system
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1730 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 803c66ee682936beecc8a43fe2cfc90fe5645b22
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jun 21 14:03:26 2005 +0000

    My Laptop drive is sounding funny (dropping a little earlier than normal -- but completely safe)
    ReflectionCallback is simpler - removed some indirection levels and split out new dispatch mechanism as...
    new ReflectedMethod which has less levels of indirection than reflectioncallback and will replace it entriely once all builtin classes use MetaClasses.
    Many protocol conversion protocols are being followed.  Almost all in numerical methods and a few in array, pack.
    Several classes have been changed to have a FooMetaClass.
    'ant test' is running between 25-20% faster right now and this should increase as I convert more builtin classes
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1716 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7a83c48af56081c1c2132111d535f28d10cf3afb
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Dec 31 20:55:52 2004 +0000

    Update license to GPL/LGPL/CPL
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1574 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 49aa6e52e2393f8c17a3c126aed59b8fd08b68aa
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Wed Dec 22 13:13:24 2004 +0000

    fix class clone bug
    fix freeze/taint bug for cloned/dup'd objects
    add test cases
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1526 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6092b4f4cec046b0aced054c3c19c42ce76e8ed8
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Fri Dec 17 02:37:16 2004 +0000

    Cleaned up unused imports.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1493 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 40383241ec93bfe226df70f8338e54bf9255140f
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Wed Dec 15 23:45:14 2004 +0000

    - Simplified method definition for builtin classes.
    - Added metaclass support for builtin classes.
    - Added ruby 1.8 allocate support.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1489 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b72a2862ae5b2f01f9a767ef2ce248fd785857c4
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Mon Dec 13 00:26:02 2004 +0000

    Replaced org.jruby.util.Asserts with Java 1.4 assert.
    Fixed String#capitalize.
    Replaced RubyString.nilString(getRuntime()) with getRuntime().getNil().
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1482 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8081fdc23459ab3e7b62155a53b7f18b561f93c1
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Dec 12 14:55:16 2004 +0000

    removes type parameter from CallbackFactory.getXXXMethod()
    and removes CallType from AbstractCallback and ReflectionCallback
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1476 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 870e1da9b41bfdbae259e1fc5f18fc8b76686998
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Dec 12 09:25:42 2004 +0000

    removes the instance variable runtime in RubyObject
    reintroduces the variable in RubyNil, RubyBoolean, and RubyClass
    delegates all calls to Fixnum,Array,Boolean,String,ArgumentError,IndexError and TypeError.newXXX to Ruby
    fixes all imports
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1469 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e6b5100a49718fc8d3cf73e804b366eae694748d
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Mon Nov 29 14:12:07 2004 +0000

    Remove (or add a comment) to some empty blocks.
    Remove unused RubyDir#matches method.
    Remove some RegExp Adapter remains.
    Rename RubyObject#argCount to RubyObject#checkArgumentCount
    Fix the stacktrace of Exceptions.
    Fix RubyFile#expand_path method.
    Add LocalJumpError class.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1434 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c15ab526440e25745b45a2ab3aaab1b5a7334d1f
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Nov 28 14:54:57 2004 +0000

    code cleanup
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1428 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1562832239a5e5d73b1ee98dade51601e343257
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Nov 16 20:30:04 2004 +0000

    Rename references of org.jruby.Ruby from ruby to runtime.
    Remove unused methods from the IRubyErrorHandler interface.
    Add "same" method to RubyObject to fix "equal?"
    Fix JavaObject cache.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1408 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c3988bcedc9973ff7f8c24ac6423ecb89f3ada35
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Aug 25 03:00:14 2004 +0000

    Fix regex/string rubicon tests
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1327 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7bb5b92d373bc0f09341d4633a1b28780f566843
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Jul 7 23:44:10 2004 +0000

    Missing frozen check
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1321 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 83ca1988efc1e67d360010f573b77a83d9d9bf03
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat May 29 23:26:55 2004 +0000

    Messy Commit: 1. Module refactoring (fix bad unit tests) 2. String additions (casecmp, lstring{,!}, rstring{,!}) 3. Allow equal to return nil when needed. 4. testFrozen consolidation
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1309 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4e8afef0dba3b66a390c9ba70b997174b975fc0e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Feb 15 16:31:46 2004 +0000

    RubyString rubicon fixups
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1239 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 627c890b45dccbb1236f6d7cdf988d3b888c679e
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Jan 15 15:09:00 2004 +0000

    Converted RubyString to CallbackFactory.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1214 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1a6ba07cf0d843cf1076f7a2966380ae607fb9f
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Nov 24 17:21:49 2002 +0000

    Made numbers use XML definitions and indexed-callback.  Also made all numeric classes pass rubicon tests
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1154 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0cedd6ee30319d7793af1defe2e9af3297d4ee90
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Nov 15 05:01:06 2002 +0000

    Enable auto-building of Definition files from XML + an updated RubyString (with matching String.xml)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1124 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d1ea50bce46807175d13d9482f3735c51d7ee194
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Mon Oct 21 17:14:27 2002 +0000

    Some more String updates.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1009 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d44c642bfd6c5f01f71aa6b0130eac3d297dc8e0
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Mon Oct 21 16:23:08 2002 +0000

    Some String methods brought closer to MRI behavior.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1008 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 071ed000f33c0365312b14268163563a6c8b3054
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sun Oct 20 20:32:13 2002 +0000

    Handle missing env variables more gracefully.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1002 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cb471b0baf022b33bea8a5a5c74aed7a41aa8b92
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Mon Oct 14 21:23:10 2002 +0000

    Added ancestor-tag to class xml.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@987 961051c9-f516-0410-bf72-c9f7e237a7b7

commit eccea34130a50f676343b6006e19f6e3042facfd
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Fri Oct 11 19:37:17 2002 +0000

    Some refactoring
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@969 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ee25dae4131085c41c6e62f1d748899c0522aba2
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Fri Oct 11 14:41:26 2002 +0000

    Moved a few methods to indexed calls.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@965 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f65b3192105333e10cc92fa8c8372b0f7bb46f4b
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Oct 5 21:53:55 2002 +0000

    Removed some dead code; some refactoring.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@950 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ccaf90d659764c18b94049288d419a32dc0addd3
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Fri Oct 4 20:24:59 2002 +0000

    Partially converted String to definition-style.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@934 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 06f34f3a6e4941994e00090d1365045e229680be
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Sat Sep 21 23:05:19 2002 +0000

    - Some MetaClass refactorizations,
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@881 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 762f2d405b00b2fa2c57571772e86ed9bd93419c
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Mon Sep 16 20:34:09 2002 +0000

    Added support to change the class of Java::JavaMethod#invoke()'s return values.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@836 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c77b91f42c4f3810140d44cbe603248a1d52b7ee
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Sep 10 15:18:12 2002 +0000

    - restructure of the code tree.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@782 961051c9-f516-0410-bf72-c9f7e237a7b7
