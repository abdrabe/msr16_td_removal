commit e9c524a0ff5f401c39067465d5d137f1dcdff12d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jul 16 16:13:52 2015 -0500

    Restore missing str2fnum signatures. Fixes #3139.

commit 4fb81b7ab483b3072de64861ebe9741721aea15b
Author: Ben Browning <bbrownin@redhat.com>
Date:   Fri Jun 5 14:35:01 2015 -0400

    Don't call modify() on RubyStrings so eagerly when freezing them
    
    This fixes #3019, where in certain cases it's possible to end up with
    RubyString instances backed by very large unique ByteLists where only
    a tiny portion of the bytes in the ByteList are actually needed.
    
    What was happening is `modify` was being called on RubyString
    instances too eagerly, resulting in unnecessary duplication of their
    underlying ByteList instances instead of sharing when possible.
    
    The two changes here are in `RubyString#newFrozen` and
    `RubyString#resize` and I believe are more correct based on the C
    implementation of these methods.
    
    For `RubyString#newFrozen`, which roughly corresponds to
    `rb_str_new_frozen` in
    C (https://github.com/ruby/ruby/blob/v2_2_2/string.c#L932), the logic
    looks to me to return the shared string and I don't see it calling
    `str_make_independent`, which is roughly the same thing as
    `RubyString#modify`. So, I just removed the call to `modify`.
    
    For `RubyString#resize`, which roughly corresponds to to
    `rb_str_resize` in C, shared strings are only made independent if
    their length
    differ (https://github.com/ruby/ruby/blob/v2_2_2/string.c#L2155). Thus,
    instead of unconditionally calling `modify` here, I moved it into the
    conditions that are true when the length differs.

commit 2f7aebdf30680493a700fe203446bc98575f4329
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Tue Jun 2 17:24:19 2015 -0400

    Introduced a RegexpSupport to house shared regexp utility methods.

commit 40beb472cb17c6c0cbf46ba199a9461e0e7bd877
Merge: c0c086e e237201
Author: kares <self@kares.org>
Date:   Mon May 25 16:54:09 2015 +0200

    Merge branch 'jruby-1_7'
    
    * jruby-1_7: (54 commits)
      [travis-ci] re-try sudo: false
      dry out the two (Java helper) respond_to_p19 methods
      respondsTo JRuby API under 1.9.3 does not do respond_to_missing? like MRI does
      sleep should convert it's "time interval" argument the same way as MRI
      respond_to_missing? should always get a symbol name passed (fixes #2946)
      add a respond_to_missing unit test (on 1.9)
      introduce and use conversion( just like MRI does) on #timeout's sec argument
      add missing ' ' (space) in exception message ... TypeError from `sleep('invalid')`
      DateTime.iso8601 fails with an error if a second fraction is present
      [build] switch to 1.7.21-SNAPSHOT for test-jruby-jars
      refactor Timeout's scheduled tasks to an inner class (for easier identification)
      further hand drying of the Timeout module impl
      less (int) casting noiz
      add some (internal) generics for an improved readability xp
      inner class' Finalizer fields id and finalized can be final
      generix-ize the environment field (at least internally) + use a StringBuilder
      unnecessary (int) cast
      missing throw statement in RubyString's concat
      tune timeout to work when scheduling or argument convenrsion throws (see #2940)
      return empty Ruby array for empty dir list
      ...
    
    Conflicts:
    	.gitignore
    	.travis.yml
    	VERSION
    	core/pom.xml
    	core/src/main/java/org/jruby/RubyArray.java
    	core/src/main/java/org/jruby/RubyBasicObject.java
    	core/src/main/java/org/jruby/RubyDir.java
    	core/src/main/java/org/jruby/RubyEnumerable.java
    	core/src/main/java/org/jruby/RubyFile.java
    	core/src/main/java/org/jruby/RubyGlobal.java
    	core/src/main/java/org/jruby/RubyIO.java
    	core/src/main/java/org/jruby/RubyKernel.java
    	core/src/main/java/org/jruby/RubyModule.java
    	core/src/main/java/org/jruby/RubyString.java
    	core/src/main/java/org/jruby/RubyTime.java
    	core/src/main/java/org/jruby/ext/timeout/Timeout.java
    	core/src/main/java/org/jruby/java/proxies/JavaProxy.java
    	core/src/main/java/org/jruby/util/Dir.java
    	core/src/main/java/org/jruby/util/encoding/CharsetTranscoder.java
    	docs/man/pom.xml
    	docs/pom.xml
    	ext/pom.xml
    	ext/readline/pom.xml
    	ext/ripper/pom.xml
    	lib/pom.xml
    	lib/ruby/1.9/date/format.rb
    	lib/ruby/1.9/io/linux_console.rb
    	lib/ruby/shared/gauntlet_rubygems.rb
    	lib/ruby/shared/rubygems.rb
    	lib/ruby/shared/rubygems/available_set.rb
    	lib/ruby/shared/rubygems/basic_specification.rb
    	lib/ruby/shared/rubygems/command.rb
    	lib/ruby/shared/rubygems/command_manager.rb
    	lib/ruby/shared/rubygems/commands/cert_command.rb
    	lib/ruby/shared/rubygems/commands/cleanup_command.rb
    	lib/ruby/shared/rubygems/commands/contents_command.rb
    	lib/ruby/shared/rubygems/commands/dependency_command.rb
    	lib/ruby/shared/rubygems/commands/environment_command.rb
    	lib/ruby/shared/rubygems/commands/generate_index_command.rb
    	lib/ruby/shared/rubygems/commands/help_command.rb
    	lib/ruby/shared/rubygems/commands/install_command.rb
    	lib/ruby/shared/rubygems/commands/list_command.rb
    	lib/ruby/shared/rubygems/commands/mirror_command.rb
    	lib/ruby/shared/rubygems/commands/outdated_command.rb
    	lib/ruby/shared/rubygems/commands/owner_command.rb
    	lib/ruby/shared/rubygems/commands/pristine_command.rb
    	lib/ruby/shared/rubygems/commands/push_command.rb
    	lib/ruby/shared/rubygems/commands/query_command.rb
    	lib/ruby/shared/rubygems/commands/search_command.rb
    	lib/ruby/shared/rubygems/commands/setup_command.rb
    	lib/ruby/shared/rubygems/commands/specification_command.rb
    	lib/ruby/shared/rubygems/commands/uninstall_command.rb
    	lib/ruby/shared/rubygems/commands/unpack_command.rb
    	lib/ruby/shared/rubygems/commands/update_command.rb
    	lib/ruby/shared/rubygems/commands/which_command.rb
    	lib/ruby/shared/rubygems/commands/yank_command.rb
    	lib/ruby/shared/rubygems/compatibility.rb
    	lib/ruby/shared/rubygems/config_file.rb
    	lib/ruby/shared/rubygems/core_ext/kernel_gem.rb
    	lib/ruby/shared/rubygems/core_ext/kernel_require.rb
    	lib/ruby/shared/rubygems/defaults.rb
    	lib/ruby/shared/rubygems/dependency.rb
    	lib/ruby/shared/rubygems/dependency_installer.rb
    	lib/ruby/shared/rubygems/dependency_list.rb
    	lib/ruby/shared/rubygems/deprecate.rb
    	lib/ruby/shared/rubygems/doctor.rb
    	lib/ruby/shared/rubygems/errors.rb
    	lib/ruby/shared/rubygems/exceptions.rb
    	lib/ruby/shared/rubygems/ext.rb
    	lib/ruby/shared/rubygems/ext/builder.rb
    	lib/ruby/shared/rubygems/ext/cmake_builder.rb
    	lib/ruby/shared/rubygems/ext/configure_builder.rb
    	lib/ruby/shared/rubygems/ext/ext_conf_builder.rb
    	lib/ruby/shared/rubygems/ext/rake_builder.rb
    	lib/ruby/shared/rubygems/gemcutter_utilities.rb
    	lib/ruby/shared/rubygems/indexer.rb
    	lib/ruby/shared/rubygems/install_update_options.rb
    	lib/ruby/shared/rubygems/installer.rb
    	lib/ruby/shared/rubygems/installer_test_case.rb
    	lib/ruby/shared/rubygems/local_remote_options.rb
    	lib/ruby/shared/rubygems/name_tuple.rb
    	lib/ruby/shared/rubygems/package.rb
    	lib/ruby/shared/rubygems/package/old.rb
    	lib/ruby/shared/rubygems/package/tar_header.rb
    	lib/ruby/shared/rubygems/package/tar_reader/entry.rb
    	lib/ruby/shared/rubygems/package/tar_writer.rb
    	lib/ruby/shared/rubygems/path_support.rb
    	lib/ruby/shared/rubygems/platform.rb
    	lib/ruby/shared/rubygems/psych_additions.rb
    	lib/ruby/shared/rubygems/rdoc.rb
    	lib/ruby/shared/rubygems/remote_fetcher.rb
    	lib/ruby/shared/rubygems/request.rb
    	lib/ruby/shared/rubygems/request_set.rb
    	lib/ruby/shared/rubygems/request_set/gem_dependency_api.rb
    	lib/ruby/shared/rubygems/requirement.rb
    	lib/ruby/shared/rubygems/resolver/current_set.rb
    	lib/ruby/shared/rubygems/security.rb
    	lib/ruby/shared/rubygems/security/policy.rb
    	lib/ruby/shared/rubygems/security/signer.rb
    	lib/ruby/shared/rubygems/security/trust_dir.rb
    	lib/ruby/shared/rubygems/server.rb
    	lib/ruby/shared/rubygems/source.rb
    	lib/ruby/shared/rubygems/source/installed.rb
    	lib/ruby/shared/rubygems/source/local.rb
    	lib/ruby/shared/rubygems/source/specific_file.rb
    	lib/ruby/shared/rubygems/source_list.rb
    	lib/ruby/shared/rubygems/spec_fetcher.rb
    	lib/ruby/shared/rubygems/specification.rb
    	lib/ruby/shared/rubygems/ssl_certs/AddTrustExternalCARoot.pem
    	lib/ruby/shared/rubygems/stub_specification.rb
    	lib/ruby/shared/rubygems/syck_hack.rb
    	lib/ruby/shared/rubygems/test_case.rb
    	lib/ruby/shared/rubygems/test_utilities.rb
    	lib/ruby/shared/rubygems/text.rb
    	lib/ruby/shared/rubygems/uninstaller.rb
    	lib/ruby/shared/rubygems/uri_formatter.rb
    	lib/ruby/shared/rubygems/user_interaction.rb
    	lib/ruby/shared/rubygems/util/list.rb
    	lib/ruby/shared/rubygems/validator.rb
    	lib/ruby/shared/rubygems/version.rb
    	maven/jruby-complete/pom.xml
    	maven/jruby-dist/pom.xml
    	maven/jruby-jars/pom.xml
    	maven/jruby-noasm/pom.xml
    	maven/jruby-rake-plugin/pom.xml
    	maven/jruby-stdlib/pom.xml
    	maven/jruby/pom.xml
    	maven/pom.xml
    	pom.xml
    	test/pom.xml
    	test/test_dir.rb
    	test/test_kernel.rb
    	test/test_respond_to.rb
    	test/test_timeout.rb

commit 351421135065bff6f19fc298f050856e0f8f5bc8
Author: kares <self@kares.org>
Date:   Fri May 15 12:24:43 2015 +0200

    missing throw statement in RubyString's concat

commit 12484922ef18a342782248c50f5bba1e3fe74b04
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat Apr 18 08:18:34 2015 -0500

    Fix test_byteslice in test:mri (more readily mark substrings cr to unknown)

commit d2ea85fd3c1837df40925a9fce6cd023c539f9ea
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Apr 17 12:23:57 2015 -0500

    Propagate coderange out of StringLiteral through all consumers.

commit f41b6d9e38741292a3b274be54b1686b1dc4bd5d
Author: Teemu <teemu@aikais.in>
Date:   Mon Feb 9 19:52:18 2015 +0200

    Make filepaths with null byte fail
    
    This patch applies to several methods that deal with filepaths in Dir,
    File, File::Stat, IO, and Kernel. All of these methods now raise an
    argument error if a null byte is detected in a path argument.
    
    Some of these methods are also slightly refactored, mostly by replacing
    context.runtime with just runtime where applicable.
    
    Conflicts:
    	core/src/main/java/org/jruby/RubyDir.java
    	core/src/main/java/org/jruby/RubyFile.java
    	core/src/main/java/org/jruby/RubyFileStat.java
    	core/src/main/java/org/jruby/RubyIO.java
    	core/src/main/java/org/jruby/RubyKernel.java
    	test/mri/excludes/TestFile.rb

commit 7fc5ec18fe8eb61476113cd6ef540ce3196f7d9d
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Apr 3 20:13:02 2015 -0400

    Updated String#each_char to taint resulting strings.

commit 68b59c87292191363858eaa60702bb190dc8441f
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Apr 3 13:22:16 2015 -0400

    Removed dead code.

commit 01a0761d636eab1b6d4d585c3fd1d7a12cdb113b
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Apr 3 11:42:28 2015 -0400

    Refactored the String#squeeze helpers to better match the String#swapcase ones.

commit bdc49053e8c07dd347a4bbff68babd16b0937e15
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Apr 3 11:39:05 2015 -0400

    Moved String#swapcase helper methods out to StringSupport.

commit b16be5dbd1494beb9c77f0c2794f402c6ec18363
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Apr 3 10:39:24 2015 -0400

    Fixed error messages.

commit f978838dbf9ca4c26e08b32109a734fc795d6471
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Apr 3 08:51:55 2015 -0400

    Completed String#setbyte.

commit 16c2b331b432726d903e81253bf39c655ee880c9
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Thu Apr 2 17:41:09 2015 -0400

    Moved RubyString#squeeze_bang helper methods to StringSupport.

commit 613aa3e5cbe4c5ef71cf443b7c6fcef8f2d1f847
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Thu Apr 2 15:43:22 2015 -0400

    Moved RubyString#multiByteCasecmp to StringSupport.

commit bb1c024752bf75eee7c85d7a47a24b529113b3e6
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Wed Apr 1 10:07:24 2015 -0400

    Moved most of RubyString#trTrans19 to StringSupport.trTransHelper.

commit 36925626c2976f6e5894a897cc51ca3ae932deff
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Wed Apr 1 10:06:01 2015 -0400

    Added modifyAndKeepCodeRange to the CodeRangeable interface.

commit ea14f4d6dcb4bbeed3d38021ad763bcb0d8d9b4e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Mar 29 12:53:00 2015 -0500

    Minor reformat.

commit bc2f11d9108bb94d03612e5606c9b57a79ddba33
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Mar 29 12:51:36 2015 -0500

    Fix backref handling in RubyString.split19, used by str_to_r logic.

commit c13e0f4856135b72cc301fd4c467179a95241197
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Mar 29 09:59:38 2015 -0500

    Minor reformatting.

commit cf3f68428df54ee6b84fb0e838a7229a2ba583e8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Mar 29 09:59:22 2015 -0500

    Extra check for null bytes in the salt.

commit 7ecf2a3de5eaee8b7c136f5f0a1c3f733e350b9c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Mar 28 22:39:21 2015 -0500

    Remove dead scan impls.

commit c7a6d942dbb6008db83997571e01127ee8d8fc4b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Mar 28 22:37:32 2015 -0500

    Clear regs in case we have a reused MatchData.

commit 980d9469282fa689ee7ccf4ef0dd13162c802545
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 26 19:27:39 2015 -0500

    Fixes for each_line.
    
    * Properly get *current* default separator, not default default.
    * Pass separator to Enumerator.

commit 07f2d97c7974cda897ac0076384aea57da251201
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 26 19:26:57 2015 -0500

    Revert to version that doesn't handle exception.
    
    We need to fix these to return the values in MRI, since much of
    our logic depends on making decisions based on these retvals.

commit 7c87bbdb75633c2eac8f626ee0ff24dd3329c63c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 26 18:28:57 2015 -0500

    Wrong value for len.

commit c765b8aa5bed61f8b38f0578699849f8a81c1858
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 26 18:01:52 2015 -0500

    Fixes for String#split exposed by COW.

commit ebf7836249cb0763518d3e62ce83f806b5f0a3af
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 26 15:32:37 2015 -0500

    Botched this part.

commit a1b39e7757d12ecb71f78e1293ae92dec5416e78
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 26 15:08:53 2015 -0500

    Another MRI null terminator glitch.

commit 0bf7559d18bd2c9e251054abbda2eb8bc169fbae
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 26 14:47:06 2015 -0500

    Update missing bits of String#succ for errors, broken chars.

commit 5b9c9ed9cae842b6faff815f7030e5842711da7a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 26 12:51:47 2015 -0500

    IDE reformatted.

commit 4c32db8f0b3b887275c069bd9fbb229d1c5a1f93
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 26 12:51:27 2015 -0500

    MRI does not have this check.

commit c9a868d0e7b46255fce5c835792ce99047f3ce9c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 26 12:35:15 2015 -0500

    Bits and bobs for String#split.

commit b91937af880a680fea92ab4b2f113041e29f7e90
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 26 11:40:07 2015 -0500

    Port missing bits of String#scan that do simple search with string.
    
    rb_memsearch renamed to something a bit less C-like.

commit 88f0db240e218904efd4ea2d5d61facb8e94abac
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 25 14:11:18 2015 -0500

    Restructure String insert/aset/replace logic to error properly.

commit 44146c40760e0827349bae6e26e6fe1fd12e474e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 25 13:29:12 2015 -0500

    Tweaks for String#rindex.

commit 87b100fc4abf391100d4fceac693cbc765d63ddb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 25 13:28:45 2015 -0500

    Port of MRI String#each_line logic to fix MBC issues.

commit e9ed3c058b6d0b094d79e7541a9a188c7c9ecf72
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 24 17:23:53 2015 -0500

    String#crypt needs a raw byte[] version from jnr-posix 3.0.11.

commit 8aa9c0f6280dad17143df38b9fbb564311e572b3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 24 15:07:35 2015 -0500

    Fix crypt modifying salt string's encoding.

commit 872792d77752d51512afcdc6fa2dc251d09119b6
Merge: 8f973b7 7906a10
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 23 23:55:25 2015 -0500

    Merge remote-tracking branch 'origin/master' into string-quagmire

commit 54d68b14b116a10c7a07075e5e1570b680aaee4e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 23 22:05:07 2015 -0500

    MRI does not have this short-circuit check.

commit dd733e43fd0753c50c70022ca70ee2550808816c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 23 20:01:38 2015 -0500

    Repair backref logic for String#[].

commit 6f1d6e70e5228d42baa913a2f1759db40bead317
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 23 19:12:42 2015 -0500

    Fix negative index handling for String#[]=.

commit f04e522fe4e4be8aa316b57d9db8bc5b9627dc3d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 23 18:43:13 2015 -0500

    Properly copy code range for String#*.

commit 5de26786ab966239058e3af1114d9a242afbc912
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 23 18:03:36 2015 -0500

    Tweak port for differing buffer logic.
    
    I can't see how s could ever == t in the original code, since t
    is set in this block to the address of a new buffer also allocated
    in this block.

commit 0f3475fade686d9b0cf2b541c1dc6c037895dcf8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 23 17:45:31 2015 -0500

    Fix negative 32-bit codepoint handling in inspect logic.

commit cf1c6b16a02605abb6bd3dbb60c9dd5840404ef2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 23 17:25:59 2015 -0500

    Allow full 32-bit codepoints in String#<<.

commit b9b728be5abe069f8438d6e9f5856d8709f2f42e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 23 15:47:45 2015 -0500

    Need to use preciseLength here to avoid too-short stream.

commit 0c9ebf67f6b0dfaadf64fb404714facc5db6740e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 20 18:24:57 2015 -0500

    Tidy up semantics of matchdata out param in search/match.
    
    Previously the semantics were a bit of a mix; some consumers
    passed the out param *and* wanted the matchdata set into context,
    some did not want it set, and some did not pass an out param. The
    modified logic always uses *either* context.setBackref *or* the
    out param in all cases.
    
    Methods that use regexp match/search and need matchdata set now
    skip passing the out param, localizing backref setting for those
    methods back to where it should live.
    
    This also fixes matchPos to not require the IRubyObject[] out param
    if the caller is not interested in the coerced string.

commit b59faa29004918fb34971508b71dd01e3ef5a053
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Mar 20 18:22:17 2015 -0400

    Simplified String#reverse.

commit 349f57ba8ec51f33e7d178329972d41422cdedbb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 20 14:06:43 2015 -0500

    Use proper coercion for force_encoding.

commit 610160556fe4fd4b9b618a9a128c5d751b3b8f30
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 20 14:06:26 2015 -0500

    Update String#chop(!) to match MRI.

commit 34b5582c6a6ee4c85dfeb9abb2b51cfd97800d73
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 19 20:21:33 2015 -0500

    Updated port of String#end_with?.

commit a8a36a736b824cbb340ec563a5f008880fca2c0d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 19 19:15:40 2015 -0500

    Less confusing to just process all in the loop.

commit 6fa1e10691ac9ed716494095387c5e556210dbcb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 19 18:45:09 2015 -0500

    More tweaks for tr.

commit a823be5e65d49e3c56e105b1c8fea265a3a090d5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 19 18:19:29 2015 -0500

    Missing e <= p check from MRI.

commit 9715da5fb81a86d8a373a0bf6b74056472a81739
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 19 15:35:52 2015 -0500

    Re-port Regexp#=~ and some downstream functions.

commit 436dd30ea264929980de24902f7b163b8857a190
Merge: fe821de 3ffcfa9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 19 13:28:35 2015 -0500

    Merge branch 'test-encoding-fixes' into string-quagmire
    
    Conflicts:
    	core/src/main/java/org/jruby/RubyString.java

commit fe821dea617104d5cfb29c654c5a013316995439
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 19 01:26:19 2015 -0500

    Re-port tr logic from MRI.

commit 6120fcad2211820cd7c97cb293b730e727882d73
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 18 22:44:33 2015 -0500

    Fix error type.

commit 6ee71037eb0852869b8d340cf585c13c7bc05f86
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 18 22:27:47 2015 -0500

    Fixes/ports to get multi-encoding rindex working correctly.

commit 05b48fb76f9babb87a39228c792b20c196673dc4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 18 10:43:57 2015 -0500

    Fix String#b to not mutate original ByteList.

commit 714712e15a9e2e8cb8a5b04a89fbf66dbef349be
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Tue Mar 17 15:34:49 2015 -0400

    Moved String#<=> helper methods to StringSupport.

commit 3466bba020eecdc8d174f3c54312241169de194f
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Mon Mar 16 18:15:53 2015 -0400

    Moved RubyString#addByteLists to StringSupport.addByteLists.

commit 336aeb1f1a6ec99314af30a29788ba4dcda17519
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Mon Mar 16 17:26:24 2015 -0400

    Moved RubyString#isCompatibleWith to StringSupport.areCompatible.

commit af940b1ffb8c810730a2bf717f36f4c4ff4c2354
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 13 10:16:36 2015 -0500

    Compat fixes for String#inspect wrt dummy UTF encodings.
    
    See #2581.

commit e9a219f56a32f5f6ff93aa77fc92e06713976d7b
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Mar 13 15:38:57 2015 -0400

    Moved RubyString#choppedLength19 to StringSupport.choppedLength19.

commit 9717929a3c1099e92cf2e2684db895a5d1a6e296
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 13 14:32:02 2015 -0500

    Incorporate MRI fix for bad single-byte string character counts.
    
    See https://bugs.ruby-lang.org/issues/10078

commit f2350fe565313348739644210caa9403f5550491
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 13 13:34:10 2015 -0500

    Fix String#b to force the dup to modify.
    
    Without modify here, the BINARY encoding gets applied to the
    still-shared ByteList from the original. Caused various issues in
    tests that use #b.

commit 8574cb3d77bb4601cec1d0fa8363a6c0cbc10e85
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 13 12:29:55 2015 -0500

    Move String#inspect's "actual encoding" logic out and use it.
    
    This is STR_ENC_GET/get_encoding/get_actual_encoding used in
    several String methods. This fixes issues with the UTF-16/23 dummy
    replicas confusing the transcoding system.

commit 912e77d01e5a61c49a49fac9ef299c24c2039c29
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 13 10:16:36 2015 -0500

    Compat fixes for String#inspect wrt dummy UTF encodings.
    
    See #2581.

commit 74861ebae5326b1b935307776e88de4b1a834d47
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Thu Mar 12 17:34:02 2015 -0400

    Moved RubyString.delete_bangCommon19 to StringSupport.

commit e66f08e30959728355e6c3ad1cb265a4066e699f
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Thu Mar 12 17:31:19 2015 -0400

    Made RubyString#delete_bangCommon19 static.

commit 6259dff6d06edd90e305649ec8dac2426d6e4ab1
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Tue Mar 10 21:48:42 2015 -0400

    Delegate to prevent some code duplication.

commit a67797e9cc073eaf4f1781d23f5606d787946235
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 3 18:14:33 2015 -0600

    String#lines should use each_line Enumerator to create ary.
    
    Reduces warnings noise in test:mri runs.

commit 85249b23fd016dbdfeaf0b5bc984453f76a402da
Author: Teemu <teemu@aikais.in>
Date:   Sat Feb 28 15:37:10 2015 +0200

    Warn on block for String#lines
    
    "passing a block to String#lines is deprecated" is displayed when a
    block is used. MRI does this since 2.0.

commit 36b73a565a902b7b3dc78e2877fabbece3080be1
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Mon Feb 16 11:14:14 2015 -0500

    Delegate RubyString#isAsciiOnly to StringSupport.isAsciiOnly.

commit 7886e2db9fef29315460ecd77868995ac7a9d493
Merge: 6baf79e 258be73
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Feb 16 09:16:40 2015 -0600

    Merge branch 'jruby-1_7'

commit 258be734700d5dcc653f3ba6517cf4e4c0d0b0bd
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Feb 16 09:15:27 2015 -0600

    Fix #2528. RegexpError: invalid multibyte character

commit a07774e67bf5d4f347229162d9868569208a38cd
Merge: 944a8b7 b6f907f
Author: Christian Meier <m.kristian@web.de>
Date:   Mon Feb 9 21:39:34 2015 +0100

    Merge branch 'jruby-1_7'
    
    Conflicts:
    	VERSION
    	core/pom.xml
    	core/src/main/java/org/jruby/RubyString.java
    	core/src/main/java/org/jruby/RubyStruct.java
    	core/src/main/java/org/jruby/ext/bigdecimal/RubyBigDecimal.java
    	docs/man/pom.xml
    	docs/pom.xml
    	ext/pom.xml
    	ext/readline/pom.xml
    	ext/ripper/pom.xml
    	lib/pom.rb
    	lib/pom.xml
    	maven/jruby-complete/pom.xml
    	maven/jruby-complete/src/it/integrity/verify.bsh
    	maven/jruby-dist/pom.xml
    	maven/jruby-dist/src/it/integrity/verify.bsh
    	maven/jruby-jars/pom.xml
    	maven/jruby-jars/src/it/integrity/verify.bsh
    	maven/jruby-noasm/pom.xml
    	maven/jruby-noasm/src/it/integrity/verify.bsh
    	maven/jruby-rake-plugin/pom.xml
    	maven/jruby-stdlib/pom.xml
    	maven/jruby/pom.rb
    	maven/jruby/pom.xml
    	maven/jruby/src/it/integrity/verify.bsh
    	maven/jruby/src/it/runnable/pom.xml
    	maven/pom.xml
    	pom.xml
    	rakelib/test.rake
    	spec/regression/GH-2524_bigdecimal_loss_of_precision_with_different_excution_order_spec.rb
    	test/externals/ruby1.9/excludes/OpenSSL/TestASN1.rb
    	test/externals/ruby1.9/excludes/OpenSSL/TestCipher.rb
    	test/externals/ruby1.9/excludes/OpenSSL/TestDigest.rb
    	test/externals/ruby1.9/excludes/OpenSSL/TestX509Name.rb
    	test/externals/ruby1.9/excludes/OpenSSL/TestX509Request.rb
    	test/externals/ruby1.9/openssl/test_asn1.rb
    	test/pom.xml
    	test/test_adding_pem_to_x509store.rb

commit 858c6370c59bc5a6ec7b5214cd84fc553664b8a9
Author: kares <self@kares.org>
Date:   Mon Feb 2 11:28:55 2015 +0100

    allow converting RubyString instances to java.lang.Character (char)

commit 331bae699079c1969a29e27b293f8d30eadadbcb
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Jan 28 15:26:15 2015 -0600

    Fixes #2528. RegexpError: invalid multibyte character

commit 4e9d41494cf83fa087d58e87360cba685c35e99d
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Jan 28 15:26:15 2015 -0600

    Fixes #2528. RegexpError: invalid multibyte character

commit 042bf1731604f5fc8b700c017fa2e34db0514e7d
Author: Smit Shah <who828@gmail.com>
Date:   Sat Jan 17 00:27:58 2015 +0530

    Use MRI's implementation for String#freeze

commit 60831545df8f11092ab37405081ec7f27a2bc587
Author: Smit Shah <who828@gmail.com>
Date:   Sat Jan 17 00:00:49 2015 +0530

    Implemented String#scrub! method

commit 2a65f1a683644409a18f2a84196bfce111d6fa8c
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Tue Jan 13 19:54:12 2015 -0500

    Moved the core of RubyString#replaceInternal19 to StringSupport.replaceInternal19.

commit a80f883a3041cc09cde93bfbdd826437d03a7f83
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Tue Jan 13 16:04:17 2015 -0500

    Work on moving the core logic of RubyString#replaceInternal to StringSupport.replaceInternal.

commit c70a612547ce9606bb3d8affacf134de750307d7
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Tue Jan 13 12:44:10 2015 -0500

    Partially move RubyString#associateEncoding to StringSupport.associateEncoding.

commit 87d9fbb993f784a8bddbbc4dabc8795be318081e
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Tue Jan 13 12:39:33 2015 -0500

    Added clearCodeRange to CodeRangeable.

commit e6b0dc9440052e89445b6a88d88976908591a6e5
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Tue Jan 13 12:36:00 2015 -0500

    Replaced usages of RubyString#isCodeRangeAsciiOnly with CodeRangeSupport.isCodeRangeAsciiOnly.

commit 2442c94a4b96b30b048043b335205f233dc77c27
Merge: c3d9dea 899b638
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 12 12:25:29 2015 -0600

    Merge remote-tracking branch 'origin/jruby-1_7'

commit 899b638b7fc93f41a90a338d16662535587d9e41
Merge: d99bfd9 81c0cee
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 12 12:08:10 2015 -0600

    Merge pull request #2349 from k77ch7/GH-1675_casecmp_on_UTF16LE_encoded_string
    
    Fix for issue 1675 on jruby-1_7: String#casecmp on UTF-16LE encoded string

commit 0d4e9f7dec19550592d60e9b40b16699bb4e3858
Merge: 6ffbfc9 c400f2d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 12 11:36:04 2015 -0600

    Merge branch 'string_end_with_implicit_conversion' of https://github.com/lumeet/jruby into lumeet-string_end_with_implicit_conversion
    
    Conflicts:
    	core/src/main/java/org/jruby/RubyString.java

commit 20dc9ece5096335b222b7ae598d7ce1038baa423
Merge: 8c588f4 b110106
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 6 15:30:46 2015 -0600

    Merge remote-tracking branch 'origin/jruby-1_7'

commit b110106302e6505e482206f48162350a5e11c037
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 6 15:30:07 2015 -0600

    Clean up and align logic in String#start_with? and end_with?.
    
    Whitespace is your friend.

commit 65dde3ac2191e3635a59f578e4bc099fc7b3e489
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 6 09:50:21 2015 -0600

    Remove a couple 1.7isms that snuck in via merge.

commit cbfa1e0c924c464195cb9d6db3c3cfc179fb918f
Merge: 131970a d7db423
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 6 09:40:11 2015 -0600

    Merge remote-tracking branch 'origin/jruby-1_7'
    
    Conflicts:
    	.travis.yml
    	VERSION
    	core/pom.xml
    	core/src/main/java/org/jruby/RubyDir.java
    	core/src/main/java/org/jruby/RubyIO.java
    	core/src/main/java/org/jruby/RubyString.java
    	core/src/main/java/org/jruby/runtime/load/ClassExtensionLibrary.java
    	core/src/main/java/org/jruby/util/io/ChannelDescriptor.java
    	core/src/test/java/org/jruby/embed/ScriptingContainerTest.java
    	docs/man/pom.xml
    	docs/pom.xml
    	ext/pom.xml
    	ext/readline/pom.xml
    	ext/ripper/pom.xml
    	lib/pom.xml
    	lib/ruby/shared/gauntlet_rubygems.rb
    	lib/ruby/shared/rubygems/dependency_resolver/current_set.rb
    	lib/ruby/shared/rubygems/resolver/current_set.rb
    	lib/ruby/stdlib/rubygems.rb
    	lib/ruby/stdlib/rubygems/basic_specification.rb
    	lib/ruby/stdlib/rubygems/commands/open_command.rb
    	lib/ruby/stdlib/rubygems/core_ext/kernel_gem.rb
    	lib/ruby/stdlib/rubygems/core_ext/kernel_require.rb
    	lib/ruby/stdlib/rubygems/ext/build_error.rb
    	lib/ruby/stdlib/rubygems/ext/ext_conf_builder.rb
    	lib/ruby/stdlib/rubygems/package/file_source.rb
    	lib/ruby/stdlib/rubygems/package/io_source.rb
    	lib/ruby/stdlib/rubygems/package/source.rb
    	lib/ruby/stdlib/rubygems/remote_fetcher.rb
    	lib/ruby/stdlib/rubygems/request/connection_pools.rb
    	lib/ruby/stdlib/rubygems/request/http_pool.rb
    	lib/ruby/stdlib/rubygems/request/https_pool.rb
    	lib/ruby/stdlib/rubygems/request_set.rb
    	lib/ruby/stdlib/rubygems/request_set/lockfile.rb
    	lib/ruby/stdlib/rubygems/resolver.rb
    	lib/ruby/stdlib/rubygems/resolver/activation_request.rb
    	lib/ruby/stdlib/rubygems/resolver/api_set.rb
    	lib/ruby/stdlib/rubygems/resolver/api_specification.rb
    	lib/ruby/stdlib/rubygems/resolver/best_set.rb
    	lib/ruby/stdlib/rubygems/resolver/composed_set.rb
    	lib/ruby/stdlib/rubygems/resolver/conflict.rb
    	lib/ruby/stdlib/rubygems/resolver/current_set.rb
    	lib/ruby/stdlib/rubygems/resolver/dependency_request.rb
    	lib/ruby/stdlib/rubygems/resolver/git_set.rb
    	lib/ruby/stdlib/rubygems/resolver/git_specification.rb
    	lib/ruby/stdlib/rubygems/resolver/index_set.rb
    	lib/ruby/stdlib/rubygems/resolver/index_specification.rb
    	lib/ruby/stdlib/rubygems/resolver/installed_specification.rb
    	lib/ruby/stdlib/rubygems/resolver/installer_set.rb
    	lib/ruby/stdlib/rubygems/resolver/local_specification.rb
    	lib/ruby/stdlib/rubygems/resolver/lock_set.rb
    	lib/ruby/stdlib/rubygems/resolver/lock_specification.rb
    	lib/ruby/stdlib/rubygems/resolver/requirement_list.rb
    	lib/ruby/stdlib/rubygems/resolver/set.rb
    	lib/ruby/stdlib/rubygems/resolver/spec_specification.rb
    	lib/ruby/stdlib/rubygems/resolver/specification.rb
    	lib/ruby/stdlib/rubygems/resolver/stats.rb
    	lib/ruby/stdlib/rubygems/resolver/vendor_set.rb
    	lib/ruby/stdlib/rubygems/resolver/vendor_specification.rb
    	lib/ruby/stdlib/rubygems/source/git.rb
    	lib/ruby/stdlib/rubygems/source/lock.rb
    	lib/ruby/stdlib/rubygems/source/vendor.rb
    	lib/ruby/stdlib/rubygems/ssl_certs/AddTrustExternalCARoot-2048.pem
    	lib/ruby/stdlib/rubygems/ssl_certs/DigiCertHighAssuranceEVRootCA.pem
    	lib/ruby/stdlib/rubygems/stub_specification.rb
    	lib/ruby/stdlib/rubygems/text.rb
    	lib/ruby/stdlib/rubygems/util.rb
    	lib/ruby/stdlib/rubygems/util/stringio.rb
    	maven/jruby-complete/pom.xml
    	maven/jruby-dist/pom.xml
    	maven/jruby-jars/pom.xml
    	maven/jruby-noasm/pom.xml
    	maven/jruby-rake-plugin/pom.xml
    	maven/jruby-stdlib/pom.xml
    	maven/jruby/pom.xml
    	maven/pom.xml
    	pom.xml
    	test/externals/ruby1.9/excludes/TestM17NComb.rb
    	test/pom.xml

commit d7db4239e84288970fbb17c80f88a05fbe835ea9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 6 09:23:57 2015 -0600

    Fix zero-length search string behavior in String#start_with?.
    
    Fixes #2434.

commit ca550725bb9eb127b2dba903814752dc0da2fc2d
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Mon Jan 5 18:33:03 2015 -0500

    Simplify calls to StringSupport.index by calculating arguments rather than passing them.

commit 65d7bd81e483f4096d80ca8c93ca57a3826400d0
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Mon Jan 5 17:29:02 2015 -0500

    Added more methods to CodeRangeable interface to consolidate code.

commit 7bc93177348258cc7efebe521d719f6b513a3ee6
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Mon Jan 5 16:54:39 2015 -0500

    Cleaned up parameter lists in StringSupport by introducing a new common way to get a ByteList from a string.
    
    This is probably going to expand beyond the notion of 'having a code range' -- I'll address that in a future clean-up.

commit 8ced6d20a675b63c4a93ebe2a774c56e595ce8b9
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Mon Jan 5 16:34:15 2015 -0500

    Moved the private variants of RubyString#strLength to StringSupport as static methods.

commit 9e53642bce94b1d9dd9860070faec382fccedf74
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Mon Jan 5 14:22:55 2015 -0500

    Use the correct ByteList when calculating string lengths.

commit d82038ecdc6f151c561104863ef7598f267f3e59
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Sun Jan 4 18:24:47 2015 -0500

    Only coerce to RubyString once.
    
    This was generated via IntelliJ's refactoring tool.  I should have caught that the same call was being made multiple times.  Note for the future.

commit a25440c8f783e513863073d53a8ab65b775f8a5e
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Jan 2 22:19:08 2015 -0500

    Cleaned up the arguments to StringSupport.index a bit.

commit 8382aef7fbf76dbb24f07519a02a28cc5253f4b8
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Jan 2 22:14:10 2015 -0500

    Moved RubyString.strIndex19 to StringSupport.index.

commit e70f71e3b41378708b3e62077988eb9d8a7a6ab5
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Jan 2 22:09:00 2015 -0500

    Made String#strIndex19 static.

commit 8d89690e7fb1fffe2bf72424f3e8cd9372ba0893
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Jan 2 15:17:17 2015 -0500

    Moved RubyString#succCommon19 and supporting methods to StringSupport.

commit 78481a61e00e8c1059577811c3d2c353ff554fd1
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Jan 2 15:00:49 2015 -0500

    Reordered and renamed the parameters to StringSupport.rindex to be more sensible.

commit 278fef08a888066e23dad519549c72b060325d4a
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Jan 2 14:56:48 2015 -0500

    Renamed StringSupport.strRindex19 to StringSupport.rindex.
    
    The 19 suffix should be dropped unilaterally.  The prefix didn't add much given the context of the method, so I removed that as well.

commit 142a627de352ec11d6fe2504da32e82f4e265165
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Jan 2 14:38:39 2015 -0500

    Annotate implemented methods as overridden.

commit 2badf1d4174e46f263a4551d3a788ee44f9f2be2
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Jan 2 13:56:25 2015 -0500

    Moved String.strRindex19 to StringSupport.

commit 7b994d63e71cac49dcfd17a6b2372cf5edcec505
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Jan 2 13:53:46 2015 -0500

    Made String#strRindex19 static.

commit 81c0ceecac660b303e20901c324fb4e9c154ccd9
Author: kiichi <k77ch7@gmail.com>
Date:   Sat Dec 27 23:47:54 2014 +0900

    fix issue: casecmp on UTF-16LE encoded string

commit c400f2d5e56debe24cea4575ff8c273d4745514e
Author: Teemu <teemu@aikais.in>
Date:   Fri Dec 26 10:09:42 2014 +0200

    Make String#start_with? and #end_with? raise implicit type conversion errors

commit aec88447efc940fa8251c2606896472196487b09
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Wed Dec 24 10:00:55 2014 -0500

    Revert "Fixed #2388: String#b improperly updates encoding of source string."
    
    This reverts commit 4e4073299cd2199116e8396f6984d7ace0063cf9.

commit 4e4073299cd2199116e8396f6984d7ace0063cf9
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Wed Dec 24 08:50:01 2014 -0500

    Fixed #2388: String#b improperly updates encoding of source string.

commit bee9d0286a0a5c6d82dfa8096480eb948c8c8108
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Wed Dec 24 08:46:23 2014 -0500

    Fixed #2388: String#b improperly updates encoding of source string.

commit 2cc654b81fc746a0820d8b1e08708d5786c07d29
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Wed Dec 24 08:39:06 2014 -0500

    Removed an unused reference.

commit fce7ea8cd28ebbdbf175574e492126865d025ad2
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Dec 22 13:00:36 2014 -0600

    Fix #2342. Java::JavaLang::NullPointerException: org.jruby.RubyString.crypt(RubyString.java:2660)

commit c116c344ff7021c1101344a3b4231b5401c24d88
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Dec 19 17:24:23 2014 -0500

    Removed unused arguments and changed return types to not use JRuby core classes.

commit 8c70402271f8d501ebfa94a5bef0ee8627441f6e
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Dec 19 14:38:51 2014 -0500

    Moved dumpCommon19 and necessary tr-related methods and classes to StringSupport.

commit 099afa7a683612d7b19dcfd1865221f98bed5f7d
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Fri Dec 19 14:15:28 2014 -0500

    Made RubyString#dumpCommon19 a static method.

commit 6f80e75ebd00d2813542599fb854517913ed8547
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Thu Dec 18 13:51:02 2014 -0500

    Moved RubyString.dumpCommon to StringSupport so it can more easily be shared.

commit d77e59e18e17f0ec239db9dea5a0ffe34069f52a
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Thu Dec 18 13:47:07 2014 -0500

    Made String#dumpCommon a static method.

commit 63a4d7fab179041c88ea50d1c96675ad8c84b39c
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Thu Dec 18 13:45:16 2014 -0500

    Updated String#dumpCommon to take and return a ByteList.

commit 371ba6242a1a17cd35567838aea5422225219a1f
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Thu Dec 18 13:38:07 2014 -0500

    Removed the forking 1.9 logic from RubyString#dump.

commit d2a0d62a78e4c4bba96eaf5a71e59257754c6cef
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Thu Dec 18 13:33:49 2014 -0500

    Moved a helper method from RubyString to StringSupport.

commit 3594f3e89efb64c68568fcc4cf0821145f0b0e7b
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Thu Dec 18 10:53:25 2014 -0500

    Made RubyString#positionEnd a static utility method so it can be used outside of RubyString.

commit facb858d8f3d70a2b94f447096576a73bc7dd06f
Author: Joe Kutner <jpkutner@gmail.com>
Date:   Mon Dec 15 17:20:28 2014 -0600

    added String#b method

commit c5207d58564755384af7ee894b7db2853ed994bc
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Dec 15 12:58:35 2014 -0600

    Clear code range when modify/expanding string for IO.read(..,buf).
    
    Fixes #2316.
    
    Test added to MRI in http://mla.n-z.jp/~w3ml/w3ml.cgi/ruby-changes/msg/36766

commit 98ee132a08c414e00051a719d3c31a34a563ccae
Merge: 08ce901 81879f1
Author: Christian Meier <m.kristian@web.de>
Date:   Fri Dec 12 14:32:39 2014 +0100

    Merge branch 'jruby-1_7'
    
    Conflicts:
    	.travis.yml
    	VERSION
    	core/pom.xml
    	core/src/main/java/org/jruby/Ruby.java
    	core/src/main/java/org/jruby/RubyClass.java
    	core/src/main/java/org/jruby/RubyFile.java
    	core/src/main/java/org/jruby/RubyRegexp.java
    	core/src/main/java/org/jruby/ast/SymbolNode.java
    	core/src/main/java/org/jruby/common/RubyWarnings.java
    	core/src/main/java/org/jruby/compiler/ASTCompiler.java
    	core/src/main/java/org/jruby/compiler/BodyCompiler.java
    	core/src/main/java/org/jruby/compiler/CacheCompiler.java
    	core/src/main/java/org/jruby/compiler/impl/BaseBodyCompiler.java
    	core/src/main/java/org/jruby/compiler/impl/InheritedCacheCompiler.java
    	core/src/main/java/org/jruby/compiler/impl/InvokeDynamicCacheCompiler.java
    	core/src/main/java/org/jruby/ext/tempfile/Tempfile.java
    	core/src/main/java/org/jruby/parser/ParserSupport.java
    	core/src/main/java/org/jruby/parser/Ruby19Parser.java
    	core/src/main/java/org/jruby/parser/Ruby19Parser.y
    	core/src/test/java/org/jruby/embed/ConstantCompilationTest.java
    	default.build.properties
    	docs/man/pom.xml
    	docs/pom.xml
    	ext/pom.xml
    	ext/readline/pom.xml
    	ext/ripper/pom.xml
    	lib/pom.xml
    	lib/ruby/1.9/rexml/entity.rb
    	lib/ruby/2.0/net/http.rb
    	lib/ruby/2.0/rexml/document.rb
    	lib/ruby/2.0/rexml/entity.rb
    	lib/ruby/shared/gauntlet_rubygems.rb
    	lib/ruby/shared/rubygems.rb
    	lib/ruby/shared/rubygems/available_set.rb
    	lib/ruby/shared/rubygems/basic_specification.rb
    	lib/ruby/shared/rubygems/command.rb
    	lib/ruby/shared/rubygems/command_manager.rb
    	lib/ruby/shared/rubygems/commands/cert_command.rb
    	lib/ruby/shared/rubygems/commands/cleanup_command.rb
    	lib/ruby/shared/rubygems/commands/contents_command.rb
    	lib/ruby/shared/rubygems/commands/dependency_command.rb
    	lib/ruby/shared/rubygems/commands/environment_command.rb
    	lib/ruby/shared/rubygems/commands/generate_index_command.rb
    	lib/ruby/shared/rubygems/commands/help_command.rb
    	lib/ruby/shared/rubygems/commands/install_command.rb
    	lib/ruby/shared/rubygems/commands/list_command.rb
    	lib/ruby/shared/rubygems/commands/mirror_command.rb
    	lib/ruby/shared/rubygems/commands/outdated_command.rb
    	lib/ruby/shared/rubygems/commands/owner_command.rb
    	lib/ruby/shared/rubygems/commands/pristine_command.rb
    	lib/ruby/shared/rubygems/commands/push_command.rb
    	lib/ruby/shared/rubygems/commands/query_command.rb
    	lib/ruby/shared/rubygems/commands/search_command.rb
    	lib/ruby/shared/rubygems/commands/setup_command.rb
    	lib/ruby/shared/rubygems/commands/specification_command.rb
    	lib/ruby/shared/rubygems/commands/uninstall_command.rb
    	lib/ruby/shared/rubygems/commands/unpack_command.rb
    	lib/ruby/shared/rubygems/commands/update_command.rb
    	lib/ruby/shared/rubygems/commands/which_command.rb
    	lib/ruby/shared/rubygems/commands/yank_command.rb
    	lib/ruby/shared/rubygems/compatibility.rb
    	lib/ruby/shared/rubygems/config_file.rb
    	lib/ruby/shared/rubygems/core_ext/kernel_gem.rb
    	lib/ruby/shared/rubygems/core_ext/kernel_require.rb
    	lib/ruby/shared/rubygems/defaults.rb
    	lib/ruby/shared/rubygems/dependency.rb
    	lib/ruby/shared/rubygems/dependency_installer.rb
    	lib/ruby/shared/rubygems/deprecate.rb
    	lib/ruby/shared/rubygems/doctor.rb
    	lib/ruby/shared/rubygems/errors.rb
    	lib/ruby/shared/rubygems/exceptions.rb
    	lib/ruby/shared/rubygems/ext.rb
    	lib/ruby/shared/rubygems/ext/builder.rb
    	lib/ruby/shared/rubygems/ext/cmake_builder.rb
    	lib/ruby/shared/rubygems/ext/configure_builder.rb
    	lib/ruby/shared/rubygems/ext/ext_conf_builder.rb
    	lib/ruby/shared/rubygems/ext/rake_builder.rb
    	lib/ruby/shared/rubygems/gemcutter_utilities.rb
    	lib/ruby/shared/rubygems/install_update_options.rb
    	lib/ruby/shared/rubygems/installer.rb
    	lib/ruby/shared/rubygems/installer_test_case.rb
    	lib/ruby/shared/rubygems/local_remote_options.rb
    	lib/ruby/shared/rubygems/name_tuple.rb
    	lib/ruby/shared/rubygems/package.rb
    	lib/ruby/shared/rubygems/package/old.rb
    	lib/ruby/shared/rubygems/package/tar_header.rb
    	lib/ruby/shared/rubygems/package/tar_reader/entry.rb
    	lib/ruby/shared/rubygems/platform.rb
    	lib/ruby/shared/rubygems/psych_additions.rb
    	lib/ruby/shared/rubygems/rdoc.rb
    	lib/ruby/shared/rubygems/remote_fetcher.rb
    	lib/ruby/shared/rubygems/request.rb
    	lib/ruby/shared/rubygems/request_set.rb
    	lib/ruby/shared/rubygems/request_set/gem_dependency_api.rb
    	lib/ruby/shared/rubygems/requirement.rb
    	lib/ruby/shared/rubygems/resolver/current_set.rb
    	lib/ruby/shared/rubygems/security.rb
    	lib/ruby/shared/rubygems/security/policy.rb
    	lib/ruby/shared/rubygems/security/trust_dir.rb
    	lib/ruby/shared/rubygems/server.rb
    	lib/ruby/shared/rubygems/source.rb
    	lib/ruby/shared/rubygems/source/installed.rb
    	lib/ruby/shared/rubygems/source/local.rb
    	lib/ruby/shared/rubygems/source/specific_file.rb
    	lib/ruby/shared/rubygems/source_list.rb
    	lib/ruby/shared/rubygems/spec_fetcher.rb
    	lib/ruby/shared/rubygems/specification.rb
    	lib/ruby/shared/rubygems/ssl_certs/AddTrustExternalCARoot.pem
    	lib/ruby/shared/rubygems/stub_specification.rb
    	lib/ruby/shared/rubygems/syck_hack.rb
    	lib/ruby/shared/rubygems/test_case.rb
    	lib/ruby/shared/rubygems/test_utilities.rb
    	lib/ruby/shared/rubygems/text.rb
    	lib/ruby/shared/rubygems/uninstaller.rb
    	lib/ruby/shared/rubygems/uri_formatter.rb
    	lib/ruby/shared/rubygems/user_interaction.rb
    	lib/ruby/shared/rubygems/util/list.rb
    	lib/ruby/shared/rubygems/validator.rb
    	lib/ruby/shared/rubygems/version.rb
    	maven/jruby-complete/pom.xml
    	maven/jruby-dist/pom.xml
    	maven/jruby-jars/lib/jruby-jars/version.rb
    	maven/jruby-jars/pom.xml
    	maven/jruby-noasm/pom.xml
    	maven/jruby-rake-plugin/pom.xml
    	maven/jruby-stdlib/pom.xml
    	maven/jruby/pom.xml
    	maven/jruby/src/templates/osgi_all_inclusive/src/test/java/org/jruby/embed/osgi/test/JRubyOsgiEmbedTest.java
    	maven/pom.rb
    	maven/pom.xml
    	pom.xml
    	spec/tags/ruby/core/symbol/length_tags.txt
    	spec/tags/ruby/core/symbol/size_tags.txt
    	spec/tags/ruby/core/symbol/versions/encoding_1.9_tags.txt
    	test/pom.rb
    	test/pom.xml
    	test/test_file.rb
    	tool/globals_1_9_3.rb

commit e911ed094ddaf200fe714369e9c8a476df121a3b
Merge: 40e4c8f 1eedf72
Author: Christian Meier <m.kristian@web.de>
Date:   Fri Dec 12 13:54:31 2014 +0100

    Merge branch 'jruby-1_7'
    
    Conflicts:
    	core/pom.xml
    	core/src/main/java/org/jruby/RubyString.java
    	core/src/main/java/org/jruby/embed/internal/EmbedRubyRuntimeAdapterImpl.java
    	core/src/main/java/org/jruby/runtime/load/LibrarySearcher.java
    	core/src/main/java/org/jruby/util/AbstractFileResource.java
    	core/src/main/java/org/jruby/util/FileResource.java
    	core/src/main/java/org/jruby/util/JarFileResource.java
    	core/src/main/java/org/jruby/util/URLResource.java
    	core/src/test/java/org/jruby/embed/ScriptingContainerTest.java
    	lib/ruby/1.8/rexml/document.rb
    	lib/ruby/1.9/rexml/document.rb
    	lib/ruby/2.0/rexml/document.rb
    	spec/tags/1.8/ruby/core/file/readlink_tags.txt
    	spec/tags/1.9/ruby/core/file/readlink_tags.txt
    	test/test_file.rb

commit 238637a7616398a29bce80dadeba09e94662e76a
Author: Kevin Menard <kevin@nirvdrum.com>
Date:   Tue Dec 9 11:41:51 2014 -0500

    There seems to be no point in manually inlining a method here.

commit 729acbf5f72fa8c62e82ab77758fd9bcc849e9cd
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Dec 4 09:16:41 2014 -0600

    See if newlines makes that tag work.  Less unbreak bizarreness of crypt with non-ascii encoded strings passed to something expecting clean 8bit strings

commit 9f8b6a5cdf20e657c9e02c9ee4f62859e2377ef8
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Dec 3 18:02:00 2014 -0600

    Forgot I switched order ot parameters to match C call

commit 2f9f89837b9322281dd59eb902dd3a20df2247e2
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Dec 3 17:38:38 2014 -0600

    Remove no longer used JavaCrypt

commit f309f0f1a1d55101ec7bbbbd27f0d948734bbffe
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Dec 3 17:37:33 2014 -0600

    Hook up new native crypt code (disabled uses pure Java version of DES)

commit f09369818fb5b6edc8c29fa17908bbe94492b7a1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Nov 8 17:50:58 2014 -0600

    Always copy cr for shared string duplicate. MRI bug 9882

commit 4018f94a5570dd14d071b9673038afdf8f24fa7c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 5 18:20:53 2014 -0600

    Fix dumb typo.

commit bc0485cc86b9ddd9ec6b4470b14faf6e3d813d3f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 5 12:27:46 2014 -0600

    Mark necessary perf improvement as a FIXME.

commit 0898d327c6a345ccf6e1c23ebd5fc2deaca64b92
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 5 12:27:16 2014 -0600

    Pass enumerator method name through for chars, codepoints, bytes.
    
    Eliminates spurious warnings when doing e.g. str.chars.any? {}.

commit 502e659261181034f6db16896bfaea70fbe55c15
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Nov 5 10:17:50 2014 -0600

    Remove Ruby as argument to newRange

commit 80727e1eb73354591c9252e00bb82e3def8a4865
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Nov 5 10:00:29 2014 -0600

    context tweaks and some mild naming changes

commit 451b1c7062eea0e58685cfca32920c3e4eb47a23
Author: Chris Heald <cheald@gmail.com>
Date:   Wed Nov 5 03:36:20 2014 -0700

    Fix multiple Range stdlib failures
    
    * Add ducktyping support for Array#[], Array#[]=, String#[], and String#[]=
    * Fix re-initialize check on initialize_copy
    * Fix infinite recursion when inspecting cyclical ranges

commit 2e609b0a9b0a423622677b3293fb99bbc2e47cd2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jul 27 17:34:00 2014 -0700

    Finish porting String#scrub for speed and compat.

commit 04152f661cdf6b754556e4fb0a7bc6fff51833a2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jul 22 02:45:48 2014 -0500

    Fix strDup to use real class, as in MRI.

commit 3fb61e6fdfb0e7bf2debc1a1ee3f73aee895d73b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jul 9 17:37:17 2014 -0500

    Use maxLength, not singleByte, to determine max char width.

commit bc65fa5b8e375f2e78d88401a104be45fbf329da
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jun 24 17:41:53 2014 -0500

    Minor cleanup and tag a few more failures.

commit 37a2d3491df9e369a470abe494c4ce5a0098fbf1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jun 24 17:08:19 2014 -0500

    Bring String#bytes, chars, codepoints in line with MRI Array logic

commit d6a40dcf6a637a10bc2f1eee52b148ec445f5423
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jun 23 16:24:54 2014 -0500

    Fix separator resolution and encoding for gets.

commit 28588ed678aa94b85a71cf41d555c00fbf76dff0
Merge: 02eb2f4 1d03c28
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jun 23 14:16:24 2014 -0500

    Merge remote-tracking branch 'origin/master' into new_transcoder
    
    Conflicts:
    	core/src/main/java/org/jruby/RubyBasicObject.java
    	core/src/main/java/org/jruby/RubyIO.java

commit 2ba246503cbf59c97243406553313b2f005dc3ec
Merge: 60442ef 5a36c57
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat Jun 14 08:23:08 2014 -0500

    Merging with jruby-1_7

commit 11281db562d4bd3aa974ac863f47236102c9d12b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jun 4 21:37:55 2014 -0500

    Numerous fixes to get CI specs 100% again.
    
    * OpenFile needs to register as finalizable to flush on exit
    * Kernel#p needed some port cleanup
    * String#gsub's logic needed port cleanup
    * Removed passing tags for String#inspect and String#scrub.

commit d0fc86f7df97e2a98cfa0a4afd5e8e6d0d63fe71
Merge: ecc42a6 b3ff6cf
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 27 20:19:20 2014 -0500

    Merge remote-tracking branch 'github/master' into new_transcoder

commit 5303e9a6d2657624dd42a038c15d33e5611c069c
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Sat May 24 03:28:06 2014 -0400

    String#rindex should handle matchdata strings
    
    A string extracted from a matchdata object shares the same
    byte array as the string it was matched against. When doing a
    rindex between a string from a matchdata and the string the matchdata
    was matched against the same byte array is passed into ByteList.memcmp
    which will always return 0 as ByteList.memcmp just checks for equality
    of the byte arrays.
    
    I fix this by passing bytes() instead getUnsafeBytes() into the
    ByteList.memcmp method so that the byte arrays are different.
    
    Fixes #1688

commit d4495e5af9eb805e158f1bee2e41019e3eddd9a6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri May 23 21:47:57 2014 -0500

    Fixes for popen progname, env, and other misc.

commit b032f4be972ccdf4960360712f085034901c5452
Author: Chris Seaton <chris@chrisseaton.com>
Date:   Fri May 23 00:28:33 2014 +0100

    [Truffle] Use JRuby's implementation of String#inspect.

commit 5c9cdfe905bad8cc3c469276ca2bbd8aad9b4f67
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri May 16 12:51:44 2014 -0500

    Start porting IO open/initialize logic.

commit 1d491712e40506cb45182747411b0bd2052b0fa4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 13 13:04:46 2014 -0500

    Start port of write logic plus fixing flush and more cleanup.

commit 78b66c2c8049bb874e9620ae6b17d8f04b5f3d25
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 13 10:45:19 2014 -0500

    Wire up static IO.read logic, eliminate old read logic, cleanup.

commit f38e7fd38a64269b58be83ab4c6f659c56d666b2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 13 08:53:45 2014 -0500

    Fix most seek logic, cleanup old gets remnants, minor cleanup.

commit ff52b15efd88f06fbebc054abdd09cb4f7387f64
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon May 12 18:27:03 2014 -0500

    Implement logic for IO#read, getbyte, ungetbyte, ungetc.
    
    read specs are nearly passing now. It will be a long tail, since
    any methods using ChannelStream will lose or steal data from the
    new way, and there aren't many tests for various combinations of
    read and write.

commit 706b4539517e1c444250334ea261ac56542d02cf
Merge: 75887be c3e7c29
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu May 8 04:54:10 2014 -0500

    Merge branch 'master' into new_transcoder
    
    Conflicts:
    	core/pom.xml
    	core/src/main/java/org/jruby/RubyFile.java
    	core/src/main/java/org/jruby/util/TypeConverter.java

commit 953c31084f54675a4ec6c20b975a3ec03028d268
Author: Chris Seaton <chris@chrisseaton.com>
Date:   Wed May 7 19:41:01 2014 +0100

    [Truffle] Go from half ByteList, half String implementation of RubyString, to just using ByteList.

commit 9c758b4f31c0eeb50d77b3dad28438aca365e857
Author: tduehr <tduehr@gmail.com>
Date:   Thu Feb 27 21:54:56 2014 -0600

    fix initialize visibility

commit 66e3f4ea91b2970643395a3157c4a28c2b924e45
Merge: d94ccff 43a1bae
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Mar 17 10:36:50 2014 -0500

    Merge with jruby-1_7

commit c2336e5b46c116d766dbd6eb95a23c1205e633e8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 14 13:20:10 2014 -0500

    More port-fixing for regsub and other stuff.
    
    * More exact port of rb_reg_regsub
    * Reverted fix to ASCGET logic that breaks a test; unknown reason
    * Expanded strBufCat and related methods to take byte[].

commit a9763203c177f47b66284f798b817651ab9566fe
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Sun Mar 16 12:32:26 2014 -0400

    String#{to_r,to_c} should not use backref when calling gsub internally

commit cd23ab1d43bf1c8536fcf917a97fc58932cffec6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 11 11:45:52 2014 -0500

    Many more fixes and removed excludes for new transcoder.
    
    * Moved ECONV flags to use those from jcodings
    * Many port fixes and tweaks.
    
    Nearly there!

commit 99e97bf7cc542fe131c5475a4fd425d482c47df4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 5 08:35:16 2014 -0600

    Get most of Converter converted over to new transcoder.

commit 50efa498c59cd268ff5be9baeb928f5500807eb0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 4 09:43:26 2014 -0600

    Reimpl a bit of gsub pipeline to match MRI better.

commit 3b1c79c0cfcd89895771ae5f32d3397af4fc37da
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Feb 26 13:27:03 2014 -0600

    Fix some bad specs and make String#replace public again.

commit e0dcc5967b436e75dc6b406ffb4688b9d6d0b228
Merge: ca1bf5f acf5d25
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Feb 26 13:07:55 2014 -0600

    Merge branch 'initialize_fix' of github.com:tduehr/jruby into tduehr-initialize_fix

commit 5653f6310c7131888e17a780d689ac7f83a5fd1e
Merge: af68447 9cb8243
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 21 15:59:52 2014 -0600

    Merge remote-tracking branch 'origin/jruby-1_7'

commit 9cb8243408288061d95f8d49de3e4fd63ad97dd4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 21 15:58:04 2014 -0600

    Properly get one-byte bytelists from cache when indexing with byte
    
    Fixes #1361.

commit 458aaeab996edb56c8c844b88fa726c7edc6af2a
Merge: 470776c d95b41a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 21 00:32:55 2014 -0600

    Merge remote-tracking branch 'origin/jruby-1_7'

commit d95b41a88b0967968f53166b7c8bd1de3406e7f2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 21 00:31:40 2014 -0600

    Fix stupid isCodeRangeValid bug.
    
    Dear god, how long has this been here?

commit acf5d258db69e9ba73f329b809c0924d7e843c82
Author: tduehr <tduehr@gmail.com>
Date:   Thu Feb 20 16:22:22 2014 -0600

    correct visibility of initialize* and respond_to_missing? methods

commit f0d2c9b4956e202bf4fffe6f624f139c978bfe93
Merge: 1d1938f bbf8e8f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 20 14:30:38 2014 -0600

    Merge remote-tracking branch 'origin/jruby-1_7'

commit bbf8e8fc243ab92fff0840f4fc80ded5bbd155d2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 20 14:28:55 2014 -0600

    Fix #1511 by choosing original encoding appropriately.
    
    The new logic here chooses the original (format) string's encoding
    when appending a US-ASCII string if the format string contains
    non-ASCII characters or its encoding is not ASCII compatible.

commit 011e35c479f856df9cae4d7847c13ad2dcde592d
Merge: 1cbfd3a fbe18f5
Author: Thomas E Enebo <tom.enebo@gmail.com>
Date:   Fri Dec 13 07:25:58 2013 -0800

    Merge pull request #1310 from dmarcotte/lazy-enum-size
    
    Ensure Enumerator#size reflects changes to its underlying object

commit d81b40cdc49fabf6cccbb385638a74ede807a977
Author: Josh Ballanco <jballanc@gmail.com>
Date:   Sat Dec 7 19:50:34 2013 +0200

    Use `invcmp` for String and Time `<=>` operators

commit 8f2768b79f32001a2b83fb16325e6f13c3f2c63a
Author: Josh Ballanco <jballanc@gmail.com>
Date:   Fri Dec 6 13:16:23 2013 +0200

    Remove redundancy in string comparison methods
    
    This change removes a redundant RubyString type check and branch in
    RubyString's `compareTo` method. It also combines the `op_cmp19` and
    `op_cmpCommon` methods, as there is no longer a need to separate these
    paths (since the Ruby 1.8 `op_cmp` method is no more). Additionally,
    calls directly to `op_cmp19` are replaced with calls to `op_cmp`.

commit fbe18f5ed3a77ed4a6ea0494da598d09baf29879
Author: Daniel Marcotte <dmarcotte@gmail.com>
Date:   Thu Dec 5 18:10:03 2013 -0800

    Java enumerators lazily compute Enumerator#size
    
    For internally created enumerators (i.e. created with
    enumeratorizeWithSize), ensure that calls to Enumerator#size reflect the
    current size of the underlying object being enumerated by
    introducing a function type which can be lazily computed on calls to
    Enumerator#size.

commit 92ab69370fae5b4dfb50990a927001552ee14c9c
Author: Daniel Marcotte <dmarcotte@gmail.com>
Date:   Fri Nov 29 12:00:23 2013 -0800

    Enumerator#size support for strings

commit 1a2a1469c60b19d419956b56551c309aa6564f73
Merge: 54605a0 2c3e807
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 26 21:25:07 2013 -0600

    Merge branch 'jruby-1_7'
    
    Conflicts:
    	core/src/main/java/org/jruby/RubyString.java
    	test/externals/ruby1.8/ruby/test_string.rb
    	test/externals/ruby1.9/ruby/test_string.rb

commit 2c3e80747ed6752660751006944517e05503abf2
Merge: d00a80a 65d2e85
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 26 21:00:50 2013 -0600

    Merge branch 'issue-1177-string-concat' of github.com:lucasallan/jruby into lucasallan-issue-1177-string-concat

commit a97d7365ae6dd1df55cb40201ad5c555bffdd68b
Merge: 351790d a6411a8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 26 01:39:04 2013 -0600

    Merge branch 'jruby-1_7'

commit a6411a85603f7eed950006307d13ee511f004104
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 26 01:38:16 2013 -0600

    Port bits and pieces more for encoding + string logic.
    
    May help #1255.

commit 14c8b980383354b964ebf886d7cc7a2077af8ab6
Merge: d3c0714 382e402
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Nov 22 01:03:05 2013 -0600

    Merge branch 'jruby-1_7'
    
    Conflicts:
    	spec/java_integration/types/map_spec.rb

commit cdf13ae716e4245e404befdddedd3807dec9d3e6
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 21 23:13:51 2013 -0600

    *Only* encode Java Strings as UTF-16 if that's default internal.

commit d3c07143fef64cf3d04962089e944e150b6bb3b5
Merge: 3ca2a90 17cb0b2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 21 20:02:16 2013 -0600

    Merge branch 'jruby-1_7'
    
    Conflicts:
    	core/src/main/java/org/jruby/ext/pathname/RubyPathname.java

commit 17cb0b2403d75e99831ad3db6e501e916eb15066
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 21 19:52:34 2013 -0600

    Fix Java String coercion logic to use fast path.
    
    Java Strings that enter Ruby through JI pass through JavaUtil's
    converters. Unfortunately the converter for Java String was using
    the slow-path Charset#encode logic rather than our thread-local
    UTF-8 encoder logic. The former creates a number of buffers and
    other objects, while the latter will ultimately only create the
    final byte[] if the incoming String is of a reasonable size.
    
    This commit also fixes the generic encodeBytelist used by
    RubyString.newString(..., java.lang.String) and friends to be
    smart about how it encodes the string, using the fast path UTF-8
    and UTF-16 logic as appropriate.

commit bdbe36e32b2511789bb9b0e7655a847267808537
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 21 19:48:24 2013 -0600

    Add RubyString.newUTF16String and newUTF8String.
    
    These new methods explicitly produce UTF-16 and UTF-8 Ruby strings
    from incoming Java strings. The old newUnicodeString method will
    now choose UTF-8 or UTF-16 based on whether the default internal
    encoding rather than always doing UTF-8.
    
    This allows a user to specify that the Ruby default internal
    encoding should be UTF-16, and we will start encoding all Java
    strings accordingly. This may not be a common way to run, but for
    situations requiring the fastest-possible Java string handling, it
    is an interesting option.
    
    This also seems like "the right thing to do" if a user sets UTF-16
    as default internal encoding, so it has a logical justification
    outside of performance too.

commit 1d3204ea4fc034010ba393f6afb11f8a7d8ec76d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 12 15:24:36 2013 -0600

    Remove old Generator impl, move toward unifying coroutine logic.
    
    The old Enumerator#next logic used our internal Generator impl,
    which proved eventually to be leaky and slow. As of JRuby 1.7.5,
    Enumerator#next moved to a Java implementation that was both
    faster and better about cleaning up dangling instances, but the
    block form of Enumerator.new still used the old Generator logic.
    
    This commit eliminates the old coroutine-based Generator in favor
    of a trivial version matching Ruby 1.9+. The block forms of
    Enumerator.new now create this trivial Generator and then fall
    into the same "Nexter" logic introduced in 1.7.5 for #next.

commit 031d58e95b21e1d15f43e79ca9509cf2dda8ce02
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 30 23:52:03 2013 -0500

    Remove most non-parser references to CompatVersion.
    
    This also removes compat logic from annotation-based method
    binding and invoker generation. I believe only the parser remains
    to be de-versioned.

commit 0c7100e6c17a9a9879f0f94128f1b9e9d19770ea
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 30 18:22:35 2013 -0500

    Remove "untrust", since it is being deprecated in 2.1
    
    See ruby/ruby@1f828497d1e8df2b7b68ac2a093ab4439585d88a

commit 87239f7fb162acdedb972fc6ef34b0627d6e0914
Merge: d3777a5 98dc135
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sun Oct 27 15:14:05 2013 -0500

    Merging with 1.7 branch

commit 98dc1353dbf196ea9bf461a69af82190f0bfad1e
Author: Jake Goulding <jake.goulding@gmail.com>
Date:   Sat Oct 26 11:08:09 2013 -0400

    Improve String#rindex performance for pathological cases
    
    When the haystack string contained a non-single-byte character, code
    would previously call `StringSupport.nth` for every backwards
    step. `nth` walks all the way through the string from the
    beginning. The combination of these caused O(n^2) behavior.
    
    Now `rindex` follows MRI's pattern of simply walking backward until we
    find the previous character.
    
    Fixes #1140

commit 9b9a08a32482983ce8d8edb0e1e02eb5ad256c2d
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Oct 10 12:27:15 2013 -0500

    closes GH #1109. String#bytes now returns an Array

commit e9a7df4f319b4f609ef6ff1c944663a0f4a95880
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Oct 10 11:54:02 2013 -0500

    De-version String

commit 3881057ee43b7ed59ec0ef7d3ca66f149d7b49f3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 9 20:15:45 2013 -0500

    String#index given Regexp past end of string should return nil.
    
    Fixes #1087.
    
    See http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/23660
    
    and the commit that fixed it: https://github.com/ruby/ruby/commit/6a3931e0f630f56d4acd2b232f58c0225f03f52b

commit c70a8dfc54807c372f9d08aa4d54a0b48e52b4fc
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 9 20:15:45 2013 -0500

    String#index given Regexp past end of string should return nil.
    
    Fixes #1087.
    
    See http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/23660
    
    and the commit that fixed it: https://github.com/ruby/ruby/commit/6a3931e0f630f56d4acd2b232f58c0225f03f52b

commit 71eec5f892ce7f57c734936de1c2cf311eab0408
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 8 15:30:34 2013 -0500

    Add String#b method.

commit 697e6895affa646849a685ed58f6f84795c853aa
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 4 23:37:52 2013 -0500

    Eliminate calls to Ruby.is1_8 and is1_9.

commit d1f89e004fdc78dff75407c82123e6c9e8b406bb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Sep 12 18:48:16 2013 +0200

    Make ClassIndex into an enum, to prevent issues like #1004.

commit a9415db3cff112c283fbed50aa1bc87376c8e718
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Aug 21 09:31:20 2013 -0500

    Guard RubyString.makeShared with 1_9 checks, so encoding is set.
    
    We have a number of places in 1.9 logic where it eventually falls
    back into 1.8 logic due to lack of version-splitting. In the case
    of JRUBY-7195, the element grab from a MatchData shared the logic
    in RubyRegexp.nth_match between 1.8 and 1.9 modes. However, the
    logic there does not properly create new strings, leaving their
    encoding set to default.
    
    This commit modifies all paths to RubyString.makeShared I could
    find with logic to use the "19" version if in 1.9 mode.
    
    Fixes JRUBY-7195.

commit 1158df5a7ad82af49c031104b6e652924ebc9368
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 8 01:21:50 2013 -0500

    Large port of MRI IO transcoding logic, to fill in our gaps.

commit dbdbfb31583dab0d14e31dbdd505b2e71d781f21
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 6 12:19:15 2013 -0500

    Patch up things that broke from my mega-port.
    
    * GzipReader#read always returns ASCII-8BIT strings when given a
      length.
    * String#encode needed some ported logic to fit other pieces.
    * Get ECONV constants propagated into RubyConverter.
    * Encoding 7-bit strings from/to ASCII-compat encs is a no-op.

commit f147242d9ee877b203c20b026bae4b1674fc4e1e
Author: Chris Sinjakli <chris@sinjakli.co.uk>
Date:   Sat Aug 3 21:59:10 2013 +0100

    In Ruby 2.0, String#lines returns an Array, rather than an Enumerator

commit e14ea63badee16966ccd765a98a0f20e7de7f741
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Aug 3 04:21:46 2013 -0500

    Numerous fixes for StringIO in 1.9 mode.
    
    Much of the logic here for 1.9 mode is now a nearly-direct port of
    the MRI logic. This should bring us closer to supporting encoding
    properly for the key StringIO operations like read and gets.

commit 909334fe9b70a6b7b79491767d31efff9a7ce119
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jul 24 16:55:32 2013 -0500

    Use proper decoding instead of ByteList.toString.

commit 922313ce1a5fecb36d64f3d4c6f23ed19d1d658e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 22 19:31:12 2013 -0500

    Move XML transliteration into transcoder logic.

commit 05d7ba00caaf60f24c5f43517d11cdbfb591894f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 22 14:13:28 2013 -0500

    Additional fixes for Converter.
    
    * last_error implemented and mostly working
    * primitive_errinfo implemented; mostly working but not 100% match
    * More error cases handled and cleaned up buffer use a bit

commit 385cdf6ec280985fa12735cc5873f023e69eae69
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jul 13 17:45:36 2013 -0500

    Remove unused code.

commit 74a57ef575d1218cd1bb37323d4cee9b33b94f7b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 12 14:20:18 2013 -0500

    Allow disabling 8-bit transcode error with :undef. Fixes #616.
    
    ASCII-8BIT is basically treated as binary for general purposes, so
    when MRI is asked to transcode ASCII-8BIT data to a text encoding,
    it requires the data to conform to US-ASCII byte range or raises
    an error. On MRI, this error is UndefinedConversionError, and the
    user can opt to replace those high bytes by specifying :undef =>
    :replace as a transcoding option.
    
    On JRuby, we originally had a hard fail for this error that could
    not be disabled. I moved the fail into the transcode logic by
    treating ASCII-8BIT input encoding as US-ASCII for purposes of
    text transcoding. This causes the Java transcoding subsystem to
    raise an error.
    
    Unfortunately, the error raised is MalformedInputException,
    indicating that the input data is not well-formed character data.
    I believe this is *correct* but it means we would have to enable
    replacement using :invalid rather than :undef. To support compat
    with MRI, I chose to set the :invalid action to the :undef action
    in this situation, which allow :undef to replace high bytes as
    required. I also filed http://bugs.ruby-lang.org/issues/8630
    because I believe "invalid" is the proper treatment of high-byte
    ASCII-8BIT characters when attempting to do a text transcode.
    
    Fixes #616.

commit 28c6fbc4e883bc1c9e9242d1da1cb2b785f55339
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jul 3 12:46:45 2013 -0500

    Move to @mkristian's proposed layout, with some modifications.
