commit 45d3af1710e258ce7f4f85cb5ce624758e75ef1b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jun 15 22:56:15 2013 -0500

    Rework frame management, and backref/lastline along with it.
    
    These changes should bring us more in line with the way other
    implementations manage "frame" data and bindings that capture it.
    It should also reduce the cost of framing, binding captures,
    blocks and procs, and operations that manipulate blocks and procs
    like define_method and instance_eval.
    
    The new logic works as follows:
    
    * Rather than a binding immediately duplicating a frame, it
      instead grabs a reference to it and marks it as captured.
    * When popping a frame, if it has been marked captured it is
      discarded rather than being cleared. This moves the cost of
      creating a binding to the pop of the surrounding method, which
      reduces the cost of nested bindings re-cloning the frame many
      times.
    * Bindings that are still active (have captured a frame that has
      not been popped) will update the method's frame data in-place.
    * Once the frame has been popped, it will live only in that
      binding.
    
    This commit passes mspec ci and test:mri19, but I am continuing
    to test it for a while.
    
    Note that this commit also moves backref and lastline to
    the frame. They have always been frame-local, but for a long time
    we kept them on the scope so we could avoid touching the frame for
    methods that did not need it. However, because we used the scope,
    it was difficult or impossible to isolate backref and lastline
    changes to the block. Moving to the frame, which has a lifespan
    only as long as the method that activated it, makes isolation
    easier.
    
    This should also make it easier to fix thread-safety issues with
    backref/lastline, as reported in JRUBY-7167.

commit 51551463515b8fa5fd7a530187dc54b192892aa9
Author: Charlie Somerville <charlie@charliesomerville.com>
Date:   Tue Jun 11 21:04:51 2013 +1000

    fix up calls to invalidateConstantCache() in RubyModule

commit bcc26747f56e05bd1ceda21d97fd4b0bc5255f0c
Author: Ron Dahlgren <ronald.dahlgren@gmail.com>
Date:   Fri May 17 16:15:20 2013 -0700

    Use RubyModule.JavaClassKindOf fixes jruby/jruby#614
    
    I've changed all of the relevant cases of anonymous KindOf classes to
    use the new JavaClassKindOf. This cuts down on some of the noise
    produced by anonymous inner classes, especially given that these
    replacement points all had identical implementations.

commit fd4ec63c838db22eb0d4db58d657863b1acd13e2
Author: Ron Dahlgren <ronald.dahlgren@gmail.com>
Date:   Fri May 17 16:03:01 2013 -0700

    Added JavaClassKindOf implementation

commit e15b6040aef502f5dded0f0a61c997d78f32cf8d
Author: Charlie Somerville <charlie@charliesomerville.com>
Date:   Sat Jun 8 23:27:58 2013 +1000

    invalidate constant cache if included module has constants

commit 3708d7dfb2180c7e04c8e0514d092ffef67c6179
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jun 1 16:31:51 2013 +0900

    Improvements and expansion of reified variable logic.
    
    * Expand to ten variables.
    * Move variable-inspection data into MethodData, in prep for
      adding same data into compiled methods.
    * Reduce number of switches required to handle reified vars.

commit de01d3a30d4e86eee608d51363108f5d23ff7a01
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat May 25 12:57:43 2013 -0500

    Start enabling variable reification logic plus logging of vars.

commit ec6e0bf8c39678847a079244b278dc184d5590fd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 14 11:25:12 2013 -0500

    Add a NodeVisitor for gathering instance variable names.
    
    This commit also adds a method to RubyModule for walking all
    interpreted methods.

commit af3aeaef04465b2350e270eda461fdd9beae40ab
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue May 14 12:42:56 2013 -0500

    unused getRuntime() call

commit 6480caa5973054e0e64795dfa410fd52c0f84ae9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri May 10 13:04:49 2013 -0500

    Fix #497 by using nearest class's name for anon inspect prefix.

commit 4ebffba2942b359393f56cfe2e7df009b3c3afde
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed May 8 15:58:36 2013 -0500

    Remove extraneous println

commit 49a1b784df780db4286b28a1c62732ba4c57121c
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed May 8 15:57:28 2013 -0500

    Make callsite **blah work in 2.0 mode

commit 3b360bd930f9cf0384fe8e29cc827f12508bca06
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Fri Apr 12 08:42:23 2013 -0400

    @Override's in RubyModule

commit d41ae9cb19827c8fff526023abac272f4e285b8f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 3 17:26:58 2013 -0500

    Actually gnerate populators into package hierarchy.

commit a9cc918e4d297820c666aa3c47f4296408893353
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Wed Apr 3 01:49:42 2013 -0400

    avoid == to compare Strings

commit bb98e4b8decffc0361b70a6c99c1ade5fed0abcb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 28 10:02:33 2013 +0000

    Move RuntimeHelpers to org.jruby.runtime.Helpers.

commit 011bd7986a5649df12a014c10aac35046037790e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 21 20:40:51 2013 -0500

    Fix define_method not properly owning Methods.

commit 1bdfa89d3f93e686f3ac9529858d2e598c34cad4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 18 14:03:46 2013 -0500

    Add back enough Callback stuff to keep undeprecated APIS working.
    
    * define*Method are back to working, but deprecated
    * *CallbackMethod are deprecated
    * Callback is deprecated
    
    These will all be removed in the next major JRuby version.

commit ed0a495c611d967256722bb41aae3bb8b0f8f0c2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Mar 16 16:16:47 2013 -0500

    Remove support for and uses of deprecated Callback methods.

commit 1ca2dca9a4d5e8efd89929cdd2e9b466c4a30813
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 7 00:29:19 2013 -0600

    [2.0] Add TracePoint API (partial impl)
    
    TODO:
    
    * Try to avoid eagerly allocating binding. May not be possible.
    * Provide return values for return events
    * Properly handle exception value for raise events
    * Add block events and other missing events

commit d7a8c3b236cea493ec9a194bd32051ef3a994021
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 6 13:29:21 2013 -0600

    Re-add bind target check to define_method and simplify it.
    
    Logic for checking the bind target of UnboundMethod was
    overcomplicated and redundant in places, so I refactored it into
    a separate "check" method. I added a call to that method in the
    modified define_method logic to ensure the target is valid in the
    same way.

commit b874552a3e8af802c2ec368c03813213d17f0e28
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 6 00:50:21 2013 -0600

    Optimization to bind define_method with unbound method directly.
    
    Before this change, we would rebind the method passed to Module#
    define_method every invocation. However, since the only
    requirement for define_method against a method or unbound method
    is that the rebind would succeed (by having the method in the
    same hierarchy), rebinding for every object is unnecessary. This
    optimization removes that rebinding and just transplant the method
    from the source to the original DynamicMethod. Invocations of the
    name bound by define_method then perform exactly as the original.
    
    This could be more useful if the UnboundMethod could come from any
    module, since modules can in theory live in any hierarchy.
    Libraries of utility methods could be assembled via define_method
    into other classes. I may explore that as a feature to present to
    the other implementers.

commit 61678ac1a2514a9932276f8d527816a5980a94b3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 25 20:41:40 2013 +1100

    Fix more references to CPL.
    
    The phrase "Common Public License" was split across two lines in
    our default header, which caused it to be missed during earlier
    search/replace. Also, we did not replace the CPL URL in the
    header with the EPL URL.

commit 330fef3b0fc18af477ccea19bd278669667f31bb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 12 14:49:29 2013 -0600

    Switch JRuby's CPL license to EPL.
    
    Governance of the CPL license was moved to the Eclipse Foundation
    at some point in the past, and Eclipse blessed the EPL (Eclipse
    Public License v1.0) as the successor to CPL. Because the CPL
    contains a clause allowing transparent upgrades to future blessed
    successor licenses, we can make the move to EPL without
    re-contacting past contributors.
    
    The change in going from CPL to EPL largely just removes some
    punitive language that apparently made many companies nervous. All
    other language in the license remains identical.
    
    Several documents about Eclipse's move from CPL to EPL are here:
    
    http://www.eclipse.org/legal/cpl2epl/
    
    Note that Eclipse's move came before the blessing of EPL as the
    upgrade path for CPL, so they had to do a bit more legal juggling.
    With Eclipse now the administrator of CPL and with their blessing
    of EPL as the upgrade path for CPL, all we need to do is make the
    move.

commit 670ff45e41b553c6072cc8a39d0e2c14152ca953
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Jan 22 13:51:57 2013 -0600

    sad panda keeps company with goofy method names like newNameErrorObject

commit 6d62ffb95586ca959974ffba4f92c6119e1e37e6
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Jan 22 12:11:34 2013 -0600

    JRUBY-7079: Uninitialized constant NameError should store a symbol and not a string

commit 5049a0f42245f8501942593482f599c2cc542244
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 6 09:14:45 2012 -0600

    Use a SwitchPoint for Fixnum/Float reopening, FOR MORE SPEED.

commit d1898406206175543afaa19c08637d539abd7a51
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 28 09:37:40 2012 -0600

    Remove unused/rarely used params to const lookup, use StaticScope.
    
    In an effort to eliminate the deopt caused by const access from
    Ruby code, I'm working toward making all constant access work
    against StaticScope rather than against ThreadContext and the
    current DynamicScope (which forces us to push dummy scopes where
    we don't really need any). This commit starts pulling out calls to
    ThreadContext.getConstant, which requires a DynamicScope to be
    present, and also removes some unused or rarely-used arguments
    from the const lookup call chain to simplify the transition.

commit 525033f9fedc129e03ab199c7475d10c33a3b7e1
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sun Nov 25 11:51:52 2012 -0600

    Simple changes...return expression not true/false on expression. eliminate extra if check.

commit 09b8d86647bf4f873957d1b5247e0cba9f889858
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sun Nov 25 11:11:05 2012 -0600

    defineAlias methods used same logic as deepSearchMethod.  Also list form of defineAlias did not warn on our special restricted alias list

commit be64539177301fcc9e73abe4504fadc6bb7545e6
Author: Charlie Somerville <charlie@charliesomerville.com>
Date:   Sun Oct 28 20:53:31 2012 +1100

    Allow qualified constant names to be used in Module#const_get when running with 2.0 compat

commit 7152c1834a8f0237d2952d2bfdf5718f0be5e720
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Thu Oct 4 20:52:33 2012 -0400

    Passing no args to Module#undef_method and Module#remove_method should be noop. Fixes #327.

commit 09316871276d9dd9cec5ba355d92eec525b16c83
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Sep 19 03:23:11 2012 -0500

    Fix JRUBY-6885
    
    method_missing and private methods behave differently
    
    public_send was unconditionally raising an error if the requested
    name was defined, but not public. Modified to redispatch to
    method_missing.

commit bef3b7040c09e8d85f7042cf7360d55dbd369ed4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Aug 27 11:36:21 2012 -0500

    Fix JRUBY-6865
    
    JRuby allows invalid attr_accessor (MRI raises exception)
    
    Our test for local variable names (which applies in both JRuby and
    MRI to attr names) did not check for trailing ?. I added that one
    case.
    
    Note that in MRI all of this passes through ID parsing, which has
    logic for checking the type of ID I did not attempt to sort out.
    There are other cases we probably let through that MRI does not.
    
    Test submitted to MRI via https://github.com/ruby/ruby/pull/171

commit 22cd6f9ac78cfe634b997a9f2c913b8c2ea70890
Author: Andy Lindeman <andy@highgroove.com>
Date:   Sun May 20 10:37:21 2012 -0500

    Fixes JRUBY-6658
    
    * If an autoload is defined, yet the constant is defined by other means,
      another autoload for the same constant does not reset the process.
    * Fixes https://github.com/rubyspec/rubyspec/pull/136 under JRuby

commit 5e225d5fd1626a6c6318d078dfe57cb980ccaf42
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Aug 3 01:32:31 2012 -0500

    Invalidate method caches *after* adding aliases.

commit b1146b42bf2087757cc8c619849727a83d443f0d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Aug 1 11:32:25 2012 -0500

    Avoid excessive Integer object creation by caching generation obj.

commit b8181cda909f6e42d7c0b7fffaabbe2a502f273b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 27 02:19:54 2012 -0500

    Inline all calls to ThreadContext.getRuntime to access the field.

commit 47fd4acb720385b7d7852e1876e28520aa0cf484
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 27 01:55:07 2012 -0500

    Remove all safelevel checks throughout JRuby (plus misc cleanup).

commit 6226f5834f9d2682bdb8c119b2c448aacaada3ac
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 13 19:01:10 2012 -0500

    Fixes and tweaks to get compiled test runs green(er) on new MLVM.

commit cc6e09f4b3e83964fb2603fb9aec23e1718d4e4d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jul 3 10:50:03 2012 -0500

    Fix JRUBY-6753
    
    class_eval should inherit __name__ from the caller
    
    class_eval/module_eval were still being framed, which caused them
    to interfere with getting the actual caller name. Removed the
    framing and the bug is fixed.

commit b0005249d29eb158ee0dbdfe7c816d48c83f8680
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 2 10:44:00 2012 -0500

    Switch to CAS for preparing class variable map, rather than sync.

commit 53f010f542105b2fbcca49edde8ffc9efa5fbd37
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jun 29 16:26:44 2012 -0500

    Remove JavaPackageModuleTemplate method_added hook.

commit 82f049beaca8f0f69e191c7bc2da0c32879c7ddb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 28 10:52:13 2012 -0500

    Merge in "builtin" SSL support from jruby-ossl library.
    
    Squashed commit of the following:
    
    commit acfe60cb1e5c4329f84f582bfce130cf626e50ee
    Merge: 6e45697 27868fe
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Apr 28 10:00:13 2012 -0500
    
        Merge remote-tracking branch 'origin/master' into builtin_ssl
    
    commit 6e4569726f545a23969d8780837f250e746b1331
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Apr 28 09:57:38 2012 -0500
    
        Move OpenSSL .rb files under 1.8 lib and import 1.9 files.
    
    commit 79b52ffe7ab781c612a1c197c4de288a236058ae
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Apr 28 09:51:30 2012 -0500
    
        A few minor fixes for a large number of SSL test failures.
    
    commit 81fc6ebcbb0ac084b1ce84334927a7dc85552693
    Merge: 185faa0 ab2fd75
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Apr 26 23:40:22 2012 -0500
    
        Merge branch 'master' into builtin_ssl
    
    commit 185faa0d1024751e03d930c0f4a07b2f7add343a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Apr 7 10:43:23 2012 -0500
    
        Remove old OpenSSL stubs, fix OSSL version, basic tests passing.
    
    commit 3dabec5efca903f952f6c8a6ba27b4cd0eb26447
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Apr 6 16:58:13 2012 -0500
    
        Add bouncy castle jars.
    
    commit 52c25cae9867d39f598ce3eff56a375923c04506
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Jan 31 13:58:07 2012 -0600
    
        Spike of rolling jossl directly into JRuby.

commit 6df631dcb0981e423d03711238b14a6cd88eb801
Author: Wayne Meissner <wmeissner@gmail.com>
Date:   Fri Apr 6 12:11:15 2012 +1000

    Rework FFI jit to wire up DynamicMethod subclasses directly into the module method cache

commit 7cdd411a3d27611cf71d5d699bac16c91afba614
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 13 16:18:06 2012 -0500

    Module#mix from Ruby 2.0.

commit 02104c5360d004e1e427a54bc5707c9baca09535
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 13 14:39:00 2012 -0500

    Rest of annotated method binding for 2.0 mode.

commit ed5390cd580cd98ecc201c239a3c1bc7f2b036c1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 2 17:34:02 2012 -0500

    IR2JVM work.
    
    * Non-self calls binding directly (but permanently)
    * Permute fixes for arity
    * Casting fixes for non-static target methods

commit 37928dec2699c98e2623bd5878e68dc78e470994
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 16 11:01:16 2012 -0600

    Fix bad expectation in Module.new that module_exec passes self.

commit 9bf8973aec1c95d212d1ec5490b0a3289caf6867
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 16 10:47:23 2012 -0600

    Fix typo in 1.9-mode class_variable_set binding.

commit eee38a6d48716093104a73bf8872e54c2fa959f4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 16 07:14:43 2012 -0600

    Fix JRUBY-6238
    
    Issues with eval - wrong arguments
    
    module_exec with no args was allowing self to be passed as the sole argument.

commit b97c22a3028eca8f3f5227584a523e48357e65b3
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Thu Feb 16 02:07:36 2012 +0100

    class_variable_get, class_variable_set, remove_class_variable are public in 1.9

commit 8b3f41d33112e5a298768a4fa7db8ddc38feca25
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 14 13:37:26 2012 -0600

    Cache module name when there are no more anon components in it.

commit 698e1e39911f68536d7b670dddc0f5b90a0f3834
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Thu Jan 19 16:39:03 2012 +0900

    JRUBY-3194: Avoid NameError for concurrent autoload access
    
    Revert the synchronize change at d7ff5b9d.  I wrote 'removing
    unnecessary synchronized block' but I was wrong.
    
    IAutoloadMethod#load which is defined in RubyKernel.java removes
    Autoload object from RubyModule#autoloadMap after successful
    autoloading, and it must be done in synchronized block.  If not, other
    Threads could see orphan autoloadMap just between successful loading and
    autoloadMap clean-up by the initial Thread.  This causes NameError for
    constant access.
    
    PoC project is at [1].  Many thanks to David Kellum who prepared this
    for us!
    
    [1] https://github.com/dekellum/sinatra-threaded-autoload

commit 404c280fc7bf4c06efc43b83c503079cd9806d02
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 16 15:29:44 2012 -0600

    Fix JRUBY-6224
    
    In MRI 1.9 the flag for Module#const_get also controls lookup of toplevel constants but not in JRuby

commit 8b06816984e8edbbd7b6f0e9e2ce814c5c1f4cef
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Mon Jan 2 11:26:59 2012 -0500

    Remove rogue testing codde.

commit 832dbefe574e7cd7f873ea7e8f927f40aee3b17e
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Mon Jan 2 09:41:56 2012 -0500

    JRUBY-3797: include_class should be deprecated in favor of java_import (and/or import)
    
    Warn on the invocation of include_class.

commit e8d6431a58a7d0150f420e72762e218cb1c82326
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 29 09:58:21 2011 -0600

    Implement Module#public_constant and invalidate constants on toggle.

commit 656301d0cf410c2441fdc2c265bf2f571c2b8646
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 28 17:51:40 2011 -0600

    Implement most of private_constant.
    
    Notable missing items:
    
    * class Foo::Bar should fail if Bar is private
    * class ::Bar should fail if Bar is private
    * module Foo::Bar should fail if Bar is private
    * module ::Bar should fail if Bar is private

commit e5a18e49623edbd763d123a4b4a88d59f84d2552
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Dec 19 17:14:46 2011 -0600

    Reduce or remove some invalidations.
    
    * Creating a new singleton class does not need to flush constants
    * Don't lock and create invalidator list or walk subclasses/hierarchies if they're empty

commit 0a1ed62c94ef3c07d28932d7e99434b56d2c35be
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 14 17:02:00 2011 -0600

    Get MRI's tests running in JRuby's test suite.
    
    * Get minitest/excludes.rb in for minitest exclude support
    * Update test/externals/ruby1.9/*
    * Fixes to get tests running:
    ** Add dummy "continuation" library
    ** Add dummy "io/nonblock" library
    ** Fixes to Psych{Parser,Emitter} for recent changes to Psych proper
    ** Be more permissive on constant names, to allow encodings
    * Update externals for previously unexcluded failures

commit 25f9e69567eb6d9d70bc3836d4776c1371776ad0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 22 12:21:23 2011 -0600

    Expand invokedynamic to more Java calls and enable.
    
    * Java calls of fixed-arity <= 3 and not receiving block dispatch through indy
    * All return types coerce along indy paths except BigInteger and ByteList
    * Cleaned up duplicate code in InvocationLinker.createJavaHandle

commit 5e138533042b8884cba634c80064fd26f10188fe
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 17 16:05:55 2011 -0600

    Remove class name from backtrace data.
    
    Class name was only used for Rubinius backtraces, which nobody is
    using. JRuby's default backtrace is now very similar, so I've
    removed the Rubinius format completely. Also, for JRUBY-6218, we
    regressed on interpreter performance because class names are no
    longer cached. Also, in compiled Ruby code, the class names are not
    available most of the time. All this combined to convince me to just
    remove class name from the backtrace data.
    
    The "rubinius" backtrace style setting still works, but does not
    change anything (just uses the "jruby" style).
    
    This fixes the perf regression for the interpreter, but does not
    do anything to generally fix the regression for Class/Module name
    calculation performance.

commit abcb782c2f5b4a7907d5e4efe38ef9dac03bf859
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 17 15:52:34 2011 -0600

    Fix my botched calculateName return value.

commit c6e2447cdb627865c401be2662b789ae0ed23a39
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 16 23:48:51 2011 -0600

    Fix JRUBY-6201: File reading performance regression
    
    Oddly enough, the regression here was in Module#name for anonymous
    classes. For JRUBY-6030, anonymous classes that later gain a parent
    namespace were fixed to recalculate their new name. However, the
    change also made anonymous classes never cache their names. It turns
    out that the way those names were being calculated was rather
    expensive, and as a result a hidden perf issue surfaced.
    
    For master (1.7) I've modified the anonymous name calculation to cache,
    since it never changes (it is based on identity hash code). The full
    name has an improved version since it no longer caches.

commit a58ed70d8da769bb0d6b0cfd19cd1af5053206dc
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 21 12:47:58 2011 -0500

    Prevent cache leakage in extreme method churn situations.
    
    While working on a support ticket, it came to my attention that Rails was
    generating lots of new methods for templates due to some gap in caching.
    These methods were generated with a new name each time, using the __id__
    of the Template object that would eventually manage them.
    
    Because our per-class caching did not actively flush (only passively,
    by invalidating each class and letting subsequent calls recache), old
    method names never encountered again would stick around in the cache.
    This led to a leak, as more and more new method names were created,
    called, and then abandoned.
    
    By actively invaldating the per-class cache in response to an invalidation
    event, we avoid the leak. It does not appear to add significant overhead
    to the invalidation process.

commit 74a74dcf12c8df1fac8e25977bb36a30a6f3a489
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 18 19:30:02 2011 -0500

    Screw it...eliminate caching of the "calculated" colonized class name.
    
    There seemed to be no end of minor bugs by caching this name, so I am just removing it.

commit d8d08f07f35e0efb8fc5674a2a3c3d75b4abcfce
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Sep 28 16:32:04 2011 -0500

    Enable switchpoint call site invalidation and indirect call paths for invokedynamic support.
    
    SwitchPoint-based class hierarchy invalidation previously invalidated each in turn. This was
    known to be inefficient, since each invalidation forces the JVM to a safepoint in order to
    push invalidations out to code that has inlined through a SwitchPoint. I modified the
    invalidation logic to aggregate a collection of all SwitchPoints from child classes/modules
    and invalidate them as a batch.
    
    My benchmark was the time it takes to run the FFI specs. Because they run in rspec, and
    rspec redefines top-level methods for each example, ths SwitchPoint invalidation is hit hard.
    With the modified logic, the SP-based invalidation slows the suite to about 2x what it is
    without SP invalidation. This can still be improved, but it's good enough to enable SP
    invalidation for now.

commit cc53e219bb4c7c7051da2e7704f3410473e005ec
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Sep 27 03:35:57 2011 -0500

    Fix naming of pregenerated populators and get them loading again.

commit c248a88faea0a40575632d6b15e123dfd1a22fba
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Sep 19 16:04:18 2011 -0500

    never ever set your parent to yourself (you don't want to be your own father do ya?)

commit 755caf06eba534dc1ecb1a618f7ecf19f25978e2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Sep 18 22:18:21 2011 -0500

    Minor cleanup in RubyModule.calculateName from revert of logic.

commit d80e88cc124e1a12ceae0009a5f86d418572dec8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Sep 18 22:03:58 2011 -0500

    Fix anonymous class name calculation, to repair spec regressions in Kernel#instance_eval and Kernel#load.

commit e368031357b1f42be11d7d0006f37022404ed7f5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Aug 31 14:05:19 2011 -0500

    Refactor and clean up "full name" calculation, in response to @godfat's patch.

commit fa039bedc7917ade4d4151a203225553dee6a2b0
Author: Lin Jen-Shin <godfat@godfat.org>
Date:   Mon Aug 29 21:03:54 2011 +0100

    we need to update fullName cache for module, along with all its children
    
    fixed https://jira.codehaus.org/browse/JRUBY-6030
    (cherry picked from commit 26f39619ca0f30011295151e50db512ff146a72b)

commit 2c45f4f7e75cac2258951342a5df67cd516537f4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Aug 10 18:30:33 2011 -0500

    Use switchpoints for class mutation invalidation. Disabled by default, since switchpoints are slow in OpenJDK 7 GA.

commit 7ba2c07fe7c4a6290745eea5556779145ba6a964
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Aug 10 16:02:09 2011 -0500

    Add a SwitchPoint invalidator to method invalidation, in prep for lighter-weight invokedynamic dispatch guards.

commit 46ba1ddc8dffb8913ea1a385d45df2c16f6b92e2
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Sat Aug 6 00:32:28 2011 +0900

    2 autoload bug fixes
    
     * avoid NPE when autoload did not define the constant
     * allow to override autoload with constant definition
    
    Now it passes CRuby's bootstraptest/test_autoload.rb

commit d7ff5b9d356fd6d7bd79a4637f241e3c6c350de0
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Mon Aug 1 19:00:20 2011 +0900

    Clean up autoload code.
    
    Something like refactoring, but it includes some modification such as
    removing unnecessary synchronized block.
    
    Added comments for Autoload class and related methods.
    
    In general, autoloadMap must be accessed after checking ConstantMap.
    Checking UNDEF value in constantMap works as a guard. For looking up
    constant, check constantMap first then try to get an Autoload object
    from autoloadMap.  For setting constant, update constantMap first and
    remove an Autoload object from autoloadMap.
    
    For more details about how we're treating Autoload objects, please see
    comments in this commit.

commit f31ddd479011c67f14efaad9733bc16a24b877d4
Merge: eef82e7 72ce56a
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Thu Jul 28 13:02:53 2011 +0900

    Merge branch 'master' into autoload-threadsafe

commit b7b313bed842e1852201c5779ad9f99b8cd29ad9
Author: Douglas Campos <qmx@qmx.me>
Date:   Thu Jul 14 02:53:28 2011 -0300

    refactoring logger for some core classes

commit eef82e7708011596a23e23dc7c2f836b1d562f2f
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Fri Jul 22 15:13:35 2011 +0900

    Merged autoloadMap at LoadService and autoloadingMap at RubyModule.
    
    Before CRuby 1.8, autoload only supported toplevel constants. From 1.8,
    it started to support module constants. So there's no need to keep
    autoloadMap in global LoadService.
    
    I moved the map to RubyModule and merged it with autoloadingMap I added
    for this branch. It helps me adding proper synchronization around
    autoload resources.

commit f6731bd1ede70e29bcc4bae72633d12cb43892f7
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Tue Jul 19 15:07:47 2011 +0900

    Avoid race condition.
    
    This sample crashed. Sigh.
    
    $: << '.'
    loaded_features = $LOADED_FEATURES.dup
    1000.times do
      $LOADED_FEATURES.replace(loaded_features)
      autoload :C, 'c'
      t1 = Thread.new { C }
      t2 = Thread.new { C }
      [t1, t2].each(&:join)
      class Object
        remove_const :C
      end
    end
    puts :OK
    
    Avoid race condition between looking up autoloadingMap in RubyModule and
    autoloadMap in LoadService. This fix is too ad-hoc and must be refined
    in the future. Moving autoloadMap to RubyModule?

commit c1bb372dd26022a9e2e4c05ffff40578b9cac1be
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 18 01:32:47 2011 -0700

    Make all Class/Module.new block paths follow module_exec logic.

commit 2c6781ef4ec18ea6e4865aa505ee6b9a88d74a8f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jul 14 03:47:03 2011 -0500

    Fix JRUBY-928: Java arrays don't inherit from java.lang.Object in Rubified Java class hierarchy
    
    * After JI has initialized, rewire ArrayJavaProxy superclass to be < (Enumerable) < java.lang.Object.

commit 1db5fbbe20ae07afc6ac43ee7ccecebcaf338240
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Tue Jul 12 16:20:24 2011 +0900

    Clear autoloading entry in remove_const
    
    Removing constant while autoloading should behave like overwriting
    constant while autoloading. Of course, it could cause NameError in
    autoloading thread, but it's expected behavior in Ruby.

commit 4d1b64ee0616c71e95b0f4c258b010e58c32e2ee
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Tue Jul 12 11:07:38 2011 +0900

    Avoid infinite loop constant lookup
    
    RubyModule#getConstantFromNoConstMissing() did autoload lookup when the
    defined constant was UNDEF, then tried to detect the defined value at
    the next loop. It caused infinite loop since the constantMap holds UNDEF
    while autoloading in new thread-safe autoloading logic.
    
    Now resolveUndefConstant() blocks if other thread is autoloading, and
    returns correct value so making it simply return the given value from
    resolveUndefConstant(). I checked all resolveUndefConstant() occurrences
    in JRuby project and found there's no other loops.
    
    ant test passes!
    
    ant spec fails with 3 specs but it's from the intended behavir change
    that Module#autoload does not remove the constant from constant table if
    the loaded files does not define it now. The behavior is as same as
    CRuby 1.9, and needed for autoload thread-safety. CRuby 1.8 removes the
    constant, and it's hard to be thread-safe as far as it keeps the current
    behavior.
    
    I believe this JRuby/CRuby behavior incompatibility on 1.8 mode is OK to
    introduce since the behavior is hard to imagine before trying it so no
    one would depend on the behavior intentionally.

commit 4b7708732ae4d40c29ba42ae29e8d6690a6b8c23
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Mon Jul 11 13:34:54 2011 +0900

    Make autoload thread-safe (in progress)
    
    Added autoloadingMap to RubyModule to keep an autoloading state. It
    consists of a RubyThread which invokes autoloading and an Object
    assigned to the autoload constant while autoloading.
    
    While autoloading, constantMap keeps UNDEF for the constant and
    autoloadingMap keeps the assigned object instead. Constant lookup checks
    if the value in constantMap is UNDEF, and iif it's UNDEF, it checks
    autloadingMap as well.
    
    It's still in development. For now, it passes
    org.jruby.test.ScriptTestSuite but org.jruby.test.JRubyTestSuite causes
    infinite loop. I'll check later.

commit 6f159fe5dd51c062a5b1aab64a8ede916990877a
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Mon Jul 11 03:36:17 2011 +0900

    Deprecation of fast constant access paths.
    
    Each os those has the same definition as non-fast verision.

commit 5f39de83bf0b603c7d37199b9bbd2b6723e458a1
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Mon Jul 11 01:43:17 2011 +0900

    Deprecation of fast class var access paths.
    
    Each of those has the same definition as non fast versions.

commit 7588393ca5bfeba6182b87b8b47669ecab2fe403
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 9 10:02:23 2011 -0500

    Fix compilation issues under OpenJDK 7 after b142 with primitive + varargs now resolving as ambiguous.

commit 64ed70abac38ff52de9974e3eacee84bba3e7d2c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu May 19 15:27:41 2011 -0500

    Oops, make constant invalidation actually invalidate the cache properly.

commit 5f1316f81fede3ee106fc2aaefcedd8499b42fb3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed May 11 18:38:12 2011 -0500

    Move attr reader/writer method types out of RubyModule into appropriate package.

commit f6367310477a36b1c98b7c15b66bd845b4e456aa
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 27 19:52:14 2011 -0500

    Fix JRUBY-5729: Process.respond_to?(:fork) must return false
    
    DynamicMethod now has setNotImplemented and isNotImplemented, to indicate whether this is a "not implemented" method. JRubyMethod annotations specify notImplemented = true to change from the default false. Only patched fork, because ideally notImplemented methods would have no bodies at all and share an invoker.

commit 1a1864332f246cca9eaa6ea7f6959bf4f713850b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 13 17:44:23 2011 -0500

    Fix JRUBY-5674: Cannot override Fixnum operators
    
    * Enable "reopening" checks for Fixnum and Float in fast operator paths.
    * TODO: lighten the checks somehow, or invalidate fast operator call sites actively.

commit 209a77e3f29e3ac16434f60486509dc9b5da8fe8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 13 10:42:34 2011 -0500

    Re-fix JRUBY-5624: Class.new { p eval("self", binding) }
    
    * in 1.9, the block passed to Class/Module.new is module_exec'ed against the Class/Module.

commit a21364c86c8f58fd57bdebc6c7dd79c0a0f871b1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Apr 3 15:26:09 2011 -0500

    Remove volatile from attribute accessors, since they're verified before use anyway.

commit 86ce4a82afb10c201b8ecd6c62c871fa7d404bab
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jan 26 04:00:54 2011 -0600

    Fix JRUBY-5376: singleton_class.define_method creates private methods
    
    * Like 1.9, always use public visibility for define_method.

commit c57037fc1e2c8febd17423197cc6d07ec0c65ec9
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Jan 18 16:37:55 2011 -0600

    Refactor isArgumentScope a little

commit d39058c1c1764fe2a7074a001074f2fd0dcfdf1a
Author: David Calavera <david.calavera@gmail.com>
Date:   Wed Jan 5 10:33:50 2011 +0100

    fix const_defined? and const_get when the constant's name is the receiver's name

commit 94913c828e8b0eb497a20e2cecd45ea2d5d40c25
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Jan 4 20:09:38 2011 +0100

    fix JRUBY-5304: [1.9] Module.const_defined? and Module.const_get accept a second parameter to look up into the ancestors

commit 632441f330e9d7eaeaa431ea2187b3c83d2aaead
Author: Douglas Campos <qmx@qmx.me>
Date:   Thu Dec 30 19:59:36 2010 -0200

    deduplicating code and deprecating removeCvar
    
    java callers should not call @JRubyMethod bound methods
    see https://github.com/jruby/jruby/pull/17#issuecomment-643303 for more info

commit bb94669d1db7a7d3ec96be9e5a2450a096cafb84
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Dec 30 10:21:00 2010 -0600

    Cleanup from qmx (with tiny tweak to patch by me) to DRY up method search logic

commit 65f30012476d4efff6f47b984f8e14d32139976b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 8 14:25:01 2010 -0600

    Improve perf of Object#dup by implementing a new RubyBasicObject#syncVariables that's smart about the new variable table logic.

commit 42d8f82cdc2a6a9e54432b6643fe3db712479338
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Dec 4 07:54:49 2010 -0600

    Fix for JRUBY-4812: RubySpec: Module#remove_class_variable failures

commit 3a3419460c6e336f0bbdb7aee02c3e32fe508bd5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Dec 4 07:42:57 2010 -0600

    [1.9] Module#constants with an argument does not substitute Object's constants for Module's.

commit c63c63c178d2d77edb57be385f1b38e04038077e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Dec 4 07:21:42 2010 -0600

    [1.9] Modify Method#eql? and #== to work properly with respond_to_missing?-based methods.

commit ab76e5d4261e80fcccd63bee388df14e48bb75d3
Author: Douglas Campos <qmx@qmx.me>
Date:   Tue Nov 30 13:39:48 2010 -0200

    normalizing args number error message
    
    Signed-off-by: Douglas Campos <qmx@qmx.me>
    Signed-off-by: Hiroshi Nakamura <nahi@ruby-lang.org>

commit 73019d77c363319cd86d0f15604f94f9d8dc3e1b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 2 22:18:40 2010 -0600

    [1.9] Fix respond_to_missing? behavior for Kernel#public_method to pass false to respond_to_missing?.

commit 9103174645d1f834373a1e306c4073467538663f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 2 16:58:34 2010 -0600

    [1.9] Implement respond_to_missing? behavior for Kernel#method. Also fix respond_to_missing? arity.

commit fd0fa789b21b30f294e8286b72b75fe3b688c27a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 1 12:07:42 2010 -0600

    Merge "backtrace" branch to master, now that it runs clean on all our various test cases.
    
    This is a squashed merge encompassing the following commits from "backtrace":
    
    commit eb0e24242050199ac1cc4cf6e48d93025f0186f4
    Merge: 32137de ea48d8d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Dec 1 12:03:28 2010 -0600
    
        Merge remote branch 'origin/master' into backtrace
    
    commit 32137decc9351dd7b6a19c49c7955808f535bb9c
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Dec 1 09:41:29 2010 -0600
    
        Fix remaining failures for test-all.
    
        * Disable CheckClassAdapter temporarily, since it disallows what should be valid JVM identifiers.
        * Use the presence of $RUBY$ in method name as an additional indicator that we're processing a compiled Ruby body during backtrace gathering.
        * Move some largely-static properties out of "init" target in build.xml, so they're available whether init is triggered or not (e.g. run.jvm.model).
    
    commit ee2a624201d5e9cd408d6ae793160aeb99b50b3d
    Merge: cd50ae5 88ad204
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Dec 1 08:01:22 2010 -0600
    
        Merge branch 'master' into backtrace
    
    commit cd50ae5f06b95a2fffab6bc1f3a7419f478d0a52
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Nov 30 19:15:07 2010 -0600
    
        Get remaining spec failure with -X+C passing.
    
        * Embed the actual Ruby method name into the Java method for block bodies, rather than __block__.
    
    commit 52bbfffcae1aed62bf4afcb692bed9725e4e1564
    Merge: 4ed7235 1aace5e
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Nov 30 01:37:15 2010 -0600
    
        Merge branch 'master' into backtrace
    
    commit 4ed723579101fffd8bfa73b30dc6e4e8991866f2
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Nov 30 01:31:44 2010 -0600
    
        Precompiled (AOT) specs *nearly* green.
    
        * Mark __method__ as reading frame "name"
        * Fix AOT-based stack trace mining logic
    
    commit 64e20aa939b5b9c6e41e0e9fe09039a0bb92794a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Nov 29 16:50:55 2010 -0600
    
        Jitted specs running green.
    
        * eval needs to set method name into the binding, so it's there for "__method__" in the eval'ed code.
    
    commit fd442c0a815bcab9eb6c9aa1b71e1f8a260ee03b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Nov 29 16:06:53 2010 -0600
    
        Interpreted specs green on backtrace.
    
        * Tagged some __method__ specs for which backtrace behaves like 1.9, which Matz apparently likes but was afraid to backport. Odd cases anyway.
        * Fixed method name for the block used to define_method.
    
    commit cedb27e430b422c1158f66b4dcc7769922433506
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 24 18:35:22 2010 -0600
    
        Reinstate deprecated java_to_ruby and ruby_to_java I removed, since it's still needed by some external libs.
    
    commit b48b17910de662b4e2d20ee8f4b5cc734eefc1ed
    Merge: f39007e 2ae4995
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 24 13:40:58 2010 -0600
    
        Merge remote branch 'origin/master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
        	src/org/jruby/RubySymbol.java
        	src/org/jruby/runtime/CompiledBlock19.java
        	src/org/jruby/runtime/Interpreted19Block.java
        	src/org/jruby/runtime/InterpretedBlock.java
        	src/org/jruby/runtime/MethodBlock.java
    
    commit f39007eca676c1e6ec9f891ac63b7c5d907b0d1b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Nov 18 14:01:29 2010 -0600
    
        Start normalizing the method/class names generated into Java by JIT and AOT compiler, to wrap up the remaining spec failures.
    
    commit 76e42c4b4522dc87c066d20051d02d1e4005b860
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 20:40:33 2010 -0600
    
        Disable dynopt for now, to allow better stabilization on the main feature of this branch: frame elimination.
    
    commit d03099690df2e16d423e8b6a8969e0264983237f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 15:00:14 2010 -0600
    
        Encapsulate "coreMethods" hash in Ruby and add "bound method" logic to default (non-generated) class populator. `ant test-all` runs green now.
    
    commit ed7458f72bce55b11e5231f8e7b9d590c09ca53d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 10:46:43 2010 -0600
    
        Fix incorrect use of fastSetInstanceVariable instead of fastSetInternalVariable in FFI.
    
    commit f09626121b6a8bea6ab39a3c8ed3ccd69f56b505
    Merge: f780b97 e8ca689
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 10:15:16 2010 -0600
    
        Merge branch 'master' into backtrace
    
    commit f780b972b1f3e18f4c2608d9536e797a0845cd1a
    Merge: 25ab5d3 6967ea7
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Nov 17 09:04:42 2010 -0600
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/runtime/ThreadContext.java
    
    commit 25ab5d3d3f8c1fbf0fa334427b1485d322e83f86
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Nov 7 00:42:54 2010 -0500
    
        Don't do dynopt against calls that receive blocks; non-local flow is not properly handled yet.
    
    commit a4ad27056dcc3acf6bae0b0af7e618966d08a6dd
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Nov 6 15:22:40 2010 -0500
    
        Tag caller specs that do not pass with new backtrace logic (peculiar eval caller behaviors).
    
    commit eed8902084cfa06d4648935c1f70da57bf0c7a9c
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Nov 6 00:32:59 2010 -0500
    
        More fixes to get specs and tests green on backtrace branch:
    
        * Hash#index was not being bound properly from RubyHash#index19
        * Range#min and Range#max need super, and therefore need frame = true
        * tc_owned is a bad test and fails on system like OS X where (for some reason) / may be owned by user
        * test_trace_func had been hacked for a bad class result (Integer, instead of Fixnum)...fixed that
    
    commit 9d9f94c30de76fa25e738e70e84ea09163eca5cb
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Nov 5 20:03:22 2010 -0500
    
        Fix Kernel#caller to replace .java lines with Ruby lines. Brings specs mostly to passing.
    
    commit de433c771830e95c54f8196453208f2b312191aa
    Merge: 3ffe1cf e25c58f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Nov 5 17:40:02 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyIO.java
        	src/org/jruby/compiler/impl/StackBasedVariableCompiler.java
        	src/org/jruby/evaluator/ASTInterpreter.java
        	src/org/jruby/java/proxies/JavaProxy.java
    
    commit 3ffe1cfba86f52ee96d89f3a1c352597f22f76b7
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Oct 27 01:42:06 2010 -0200
    
        Fix compile error I accidentally merged.
    
    commit b081253fb3cdf5141f7f0cf76d3f8546837d9f42
    Merge: fc3028d ad68e22
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 26 16:30:25 2010 -0200
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
        	src/org/jruby/internal/runtime/methods/DefaultMethod.java
        	src/org/jruby/runtime/ThreadContext.java
    
    commit fc3028d9da2750c9d1c394600ab8ee712388724d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 26 14:39:29 2010 -0200
    
        Add better description for class bodies in backtrace
    
    commit d796555494c2237116c7477c932fd96cd30d2e20
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 26 11:36:29 2010 -0200
    
        Clean up and add color to Rubinius backtraces.
    
    commit 012f5357ce649bd5a996211fe231f26097bf4f5b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Oct 24 16:23:04 2010 -0500
    
        Fix classloader check to allow for compiled method handles, which use a no-arg constructor.
    
    commit 473d48aac6a5523304188d1d433e4c12df989b89
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Oct 24 16:10:32 2010 -0500
    
        Improve Proc-binding-based eval position info by propagating block's position into the binding and through to the backtrace frame.
    
    commit bcfd16b519b145c9ee055db1592dfaced05b71a0
    Merge: 4902faa 5b49583
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Oct 24 11:07:15 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyTime.java
        	src/org/jruby/runtime/ThreadContext.java
        	test/org/jruby/test/TestRubyException.java
    
    commit 4902faaf1678d5aecdef8b0b66f8ec78062aeec5
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Oct 21 09:28:45 2010 -0500
    
        Fix badly-merged RubyProc.to_s19, missing opening brace.
    
    commit 69177d7098f9dc4ff9096d08eee25c0d8bb4f971
    Merge: 801e764 f895837
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Oct 20 21:50:53 2010 -0500
    
        Merge branch 'master' into backtrace
    
    commit 801e7641b8838a8ae8931a9c6dcc5cf050096c4a
    Merge: 0c60a89 dda4644
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 19 23:16:41 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyDigest.java
        	src/org/jruby/RubyProc.java
    
    commit 0c60a89aa746f286588b218681e9ad25b11318c4
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 19 23:06:15 2010 -0500
    
        Only compile direct recursive calls when we haven't branched to another method body (e.g. for rescues) and we're not compiling a closure or class body.
    
    commit 18333fe82c808e8ed49eef898f19c86fa2d764b2
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 12 17:04:13 2010 -0500
    
        Get 1.8 specs running green except for a handful of Kernel#caller specs (which don't expect to see .java files in the trace...not sure how to deal with that).
    
        * Fix another literal-block-calling path that wasn't using callIter
    
    commit 366740120ee76d8df3f977edc1727b60b2d4ad63
    Merge: b64390b 6b243a3
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 12 10:35:14 2010 -0500
    
        Merge remote branch 'origin/master' into backtrace
    
    commit b64390b8cf0d2cb13e06d352969a093b5e86818d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Oct 12 10:33:39 2010 -0500
    
        Remaining fixes to get precompiled mode passing all our tests. Still some spec failures.
    
        * Bump up permgen max for test runs
        * Fix stack-based scope initialization to not leave an unused nil on stack
        * Ensure compiled method handles properly wrap pre/post logic for dummy and backtrace frames.
    
    commit 96bd3cbde91fc505b37ee13cbea6ffa3e8690c58
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Oct 11 18:36:34 2010 -0500
    
        First fixes for backtrace branch in precompiled mode:
    
        * Add test-precompiled build target for running just precompiled
        * Eliminate extraneous toplevel scope being pushed for precompiled loads (because that logic is all in the generated "load" method now.
        * Add a new scope descriptor decoding path that properly sets up a toplevel scope
    
    commit 0ebbd6ac46c9ac04558f5200f980f26f798b9413
    Merge: fc387be ac455fc
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Oct 6 21:53:18 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/RubyIO.java
    
    commit fc387befff57ada6c116b646a3dfb767cc926ee5
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 28 15:57:58 2010 -0500
    
        Renumber arguments for consistency.
    
    commit bbc91d3c4039bf6c26ceffd4899dcaaeaa3d46d0
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 28 15:40:38 2010 -0500
    
        Fixes to get specs a bit closer to running green.
    
        * Move pre/post logic for Script.load into generated code, so it's the same everywhere.
        * Make pre/post-load push a frame, so top-level of a script is always framed
        * Remove break handling from non-literal block call paths in CachingCallSite
        * Make sure all literal block calls are using CallSite.callIter, which handles break
        * Fix a bad test in testCompiler that needed visibility tweaks and framing
        * Add complete doco for CallSite
        * Fix Kernel#caller to trim from top of stack instead of bottom
    
    commit 4e814a24d5b2ef1b6567a3076a463ff9d08e2a0d
    Merge: 91dc13a 3dbcef3
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Sep 27 17:43:30 2010 -0500
    
        Merge branch 'master' into backtrace
    
    commit 91dc13a2f0b74bc1054d83378782416465ecc1b8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Sep 27 01:02:48 2010 -0500
    
        Fixes to get test-compiled (but not precompiled) passing 100%.
    
        * Fix eqlInternal's RubyNumeric branch check if classes are equal
        * Provide file and line from all BlockBodies, so Proc#to_s can always use it
        * Fix rejiggered Struct#each and Struct#each_pair to call the appropriate internal version
        * Fix ruby_test's IO.new suite to not use STDOUT directly, risking that it get closed
    
    commit dc4af45352607ebb8a95d70befdcdb15c1111c58
    Merge: ec8bb7f 90275be
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 21 09:52:10 2010 -0700
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
        	src/org/jruby/RubyDir.java
        	src/org/jruby/RubyKernel.java
        	src/org/jruby/compiler/ASTInspector.java
        	src/org/jruby/javasupport/util/RuntimeHelpers.java
    
    commit ec8bb7fc31d4acd4ebcb040f088e19fb427448e8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 19 16:21:38 2010 -0700
    
        Remove frame = true from all core class methods, to reduce their call costs. A few remain for invokeSuper and methods that may still need frames.
    
    commit ec276b6ca0c6009702839b12d97664b9e52b1023
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Sep 16 14:10:43 2010 -0500
    
        Eliminate RubyTuple use that snuck in.
    
    commit f80254100cfc17ac6eb558e465fc1fb9122c3ee4
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Tue Sep 14 10:07:53 2010 -0500
    
        Special case a few immutable core types in equalInternal/eqlInternal.
    
    commit eb66c45145e4fd1f8c28e9a8c544114f034116e8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 18:26:13 2010 -0300
    
        Performance changes for backtrace logic:
    
        * Back off using Java stack trace for Proc's to_s file+line, since it's prohibitively expensive
        * Move the Backtrace stack to being a fixed-size array of objects updated, rather than created, when a push happens
    
    commit 6f0ade5ab28946b8800431d3454d2e57fc0dbe19
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 11:36:07 2010 -0300
    
        Add generation guard around trivially-inlined logic.
    
    commit c4d8705217174580d35757dc85c5c646e980b57f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 06:18:38 2010 -0300
    
        Full speed ahead with a caching mechanism for calls from core classes. Only works for core class methods right now, but opens the door to expanding that.
    
    commit 5874abc01104f6c0f435f8ac4643ed0f77cf7cff
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Sep 12 03:43:37 2010 -0300
    
        Localize some fields used in Array#include? to speed up the loop.
    
    commit 346245cd5e154574d14736cf4b9e0b4b98260d14
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 11 15:02:41 2010 -0300
    
        Allow passing a number of iterations to bench_quicksort.rb.
    
    commit b4687022a1f00d0b63838b1c9daf00753fcfa93e
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 11 11:55:15 2010 -0300
    
        Fixes to get run-junit-compiled 100% passing on backtrace branch.
    
        * Fixed a couple tests that are too sensitive to core method line numbers or expected only .rb elements in the trace
        * Added a mechanism for procs to retrieve the most recent Ruby frame, for to_s purposes
        * Added comments for hybrid backtrace logic
    
    commit 15cd9b16cb2750d0e40ba478d07fe5bf265dc620
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 11 08:07:57 2010 -0300
    
        Add better logging to AnnotationBinder (for showing framed/scoped core methods), ASTInspector (for showing methods detected as framed/scoped and for reporting deopt flags as they are set), and JITCompiler (for dumping jitted methods' full classes and inspector results). New property jruby.jit.dumping=(true|FALSE).
    
    commit c4e6176498590d791868055025c2e72ded1ccf13
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Sep 10 02:10:20 2010 -0400
    
        Improve dumping of generated bytecode by including class and method name when possible.
    
    commit 07fc4215f6873f449f89d4f5da7a7e2e8963bc70
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Sep 9 23:39:20 2010 -0400
    
        Make attr accessor's var accessor field volatile, to guarantee visibility across threads.
    
    commit e3a7cf5cd4d8ccd08407955779bdd94feb5e4ac8
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 13:26:48 2010 -0500
    
        Add missing "in" to caller backtrace lines.
    
    commit 7140c339f386959853f747d86cb2ea9a8afa6f2a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 12:10:50 2010 -0500
    
        Fixes to get tracing tests running in interpreted mode:
    
        * Off-by-one line numbers were off for MRI too. Fixed to correct line numbers
        * call and return for Ruby methods need to use impl class, not self class
    
    commit cbc9c4edab56807a023817d06db9c22441fa4b53
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 10:31:57 2010 -0500
    
        Fix runInterpreterBody to properly unwrap RootNode for "gets loop" execution.
    
    commit 3a09773058d8d58d5bf8f1b6fbebc494fc18f7c6
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 10:01:43 2010 -0500
    
        Make --bytecode attempt a recompile, so that dynopt and no-compile modes can still print bytecode.
    
    commit 4e48e722ba5ded10975af348738237fcb7fe9b2a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 09:23:38 2010 -0500
    
        Add a "full" backtrace style which does not omit any Java frames and interlaces the Ruby frames.
    
    commit 6f5057e3ae1e372bd66602dcc26864adc3270128
    Merge: 7006d31 811fd8d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Sep 8 07:48:47 2010 -0500
    
        Merge branch 'master' into backtrace
    
        Conflicts:
        	src/org/jruby/Ruby.java
    
    commit 7006d3175bbf4630921dfecaa4faef2a39a77205
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 4 16:04:28 2010 -0500
    
        Bytecode size reductions for stack-based nil-initialization of locals and for x, *y and x, * forms of masgn.
    
    commit 3a8fb16f020c2b9aaa6228605bdb3d8fd1b78ccf
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Sep 4 14:52:04 2010 -0500
    
        Do not do direct recursive invocations for heap-based scopes, since the scope is not currently being reset.
    
    commit ec00e99636667eff97a891917ae9ef37f94a6eb7
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Sep 3 19:55:24 2010 -0500
    
        Turn on dynopt by default, to aid testing of new logic.
    
    commit 9508e8a6925fce4f57a386ede867b3f8f9b67d38
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Thu Sep 2 12:40:38 2010 -0500
    
        Fix Time test that expected two separate Time.now objects to to_s the same.
    
    commit 65ba8b37a8a232495453e71b2a560c761b40893f
    Author: Nick Sieger <nick@nicksieger.com>
    Date:   Mon Aug 30 14:50:03 2010 -0500
    
        Use new backtrace info to set a more useful Java thread name
    
    commit 75b100604af39de52b26bdb21669136234424a0b
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 30 11:37:49 2010 +0900
    
        Fix ifne/ifeq bug in dynopt guard and switch DefaultMethod to not flip generations on JIT in dynopt mode.
    
    commit fe3b408629e94b7db0436152968bd6d2232f6c7c
    Merge: eea60da 85c64c6
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 29 20:33:06 2010 +0900
    
        Merge branch 'master' into backtrace
    
    commit eea60da3905c87c16fbb4e6c78fd7a07f842e4bd
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Fri Aug 27 14:09:44 2010 +0900
    
        Modify Java Fixnum fib bench to use the long call paths where possible, to be more like what compiled Ruby does not.
    
    commit a189563d9073208292e91aff3eb1c88489bd113d
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Aug 25 15:07:21 2010 +0900
    
        Fixes for jitted/compiled backtrace generation
    
        * SClass in a method body needs to frame, so it has a jump target for non-local return
        * Compiled methods need to always have their ruby name in the method name, so it can be mined out appropriately
        * Synthetic calls, like to rescue bodies, need to gobble caller frames to avoid multiple entries
    
    commit 276226de611cb8d5af942148109c2a51982e7640
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Aug 25 14:03:44 2010 +0900
    
        Add callNumber tracking to method handles, to properly handle return jumps.
    
    commit b94bcf119a54f52ab9be3c86bc5cc85078f20eee
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Wed Aug 25 13:16:25 2010 +0900
    
        More fixes for hybrid backtrace:
    
        * Get generated trace to be RaiseException's Java trace
        * Add Ruby exception name to the RaiseException message
        * Rewire and repair trace calls
    
        All main suite tests now pass in interpreted mode.
    
    commit dc9fcd3de0f3070507ac0a0647973d1e9f16ae4f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 23 14:38:47 2010 -0500
    
        Fix debug logging of exceptions being raised and patch a couple tests for new backtrace structure.
    
    commit 3acd3201d85e4da9186fa17d3a04bdc9db742e29
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 23 13:23:04 2010 -0500
    
        Include original source file in compiled Ruby, add missing "in" line for MRI rendering, and soften requirements in test_backtraces to allow for native elements in the backtrace.
    
    commit 728cf3983fbeffba944fe34a8b0e410cc1de041c
    Merge: 88a64de 0e9c956
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Mon Aug 23 00:18:07 2010 -0500
    
        Merge branch 'master' into backtrace
    
    commit 88a64de879446be3398ba7671b5fa1f3e46ce02f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 17:29:21 2010 -0500
    
        Turn on "positionless" compilation, since compiled code no longer needs to update interpreter backtrace frames. Also fix nil/null backtrace rendering.
    
    commit 5712a4ce285a5b3662c8ef8def2599223a232626
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 17:18:17 2010 -0500
    
        Fix off-by-one line numbers from interpreter frames.
    
    commit 519f4625b9d9658f50b986b1add560903ee453de
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 17:10:47 2010 -0500
    
        Remove some old backtrace code no longer in use and get all "backtrace" method handles to generate with no frame at all (since Java stack is used now).
    
    commit 424d967df8a3b6ba277bdb1b530d4f7f62ecbc4a
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 16:52:29 2010 -0500
    
        Get Kernel#caller working with hybrid traces, get Rubinius rendering working again (partially), separate gathering and rendering of backtraces.
    
    commit a00822740712ddd924896feccc10f015fd20d4be
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 15:32:08 2010 -0500
    
        Mine method names out of AOT and JIT compiled stacktrace elements and get JIT using the original name of the method.
    
    commit 039d184ac5f798aed21870a7552b66c5973ca0eb
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Aug 14 22:16:48 2010 -0500
    
        Simplify in-class encoding of StaticScope data.
    
    commit 876a762b8af88955bee598dfd0421805d9b47c40
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 01:41:44 2010 -0500
    
        Fixes to hybrid traces to get tests working better:
    
        * Omit Kernel#raise and the KernelJavaAddons rbRaise from traces
        * Handle getBacktrace when there's been no preparation
    
        Also modified test/testException.rb to allow internal line numbers for the "load" call, rather than MRI standard "whatever line it was called from".
    
    commit 06f1bd171d6897f651b3cebfd76551080acbfe40
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sun Aug 22 00:39:59 2010 -0500
    
        Move backtrace management to a separate stack and implement mixed-mode backtrace generation.
    
    commit ca40e73a7c136dfdd3853f0cd62a73bf70a3a08f
    Author: Charles Oliver Nutter <headius@headius.com>
    Date:   Sat Aug 21 20:56:50 2010 -0500
    
        Get all major interpreter entry-points passing through simple, known method bodies. First step toward mixed-mode backtraces.

commit 055dd156a5dd51cd684ab6376f40eb5be997ca9a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 1 09:31:20 2010 -0400

    Fix for JRUBY-5168: Can't include interfaces in a synchronized class

commit aabfa79f434ef5ad491b708ae1cefb65458ff29e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 26 13:07:25 2010 -0200

    First stab at a basic instrumented profiler. Needs update of jruby launcher to pass --profile through.

commit 0c1914058d1519b4ecb35f84869d96a624982cb2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 22 22:02:48 2010 -0500

    Fix for JRUBY-5148: Module reopen doesn't work for included module
    
    When searching for an existing module or class, if the target "enclosing module" is Object, we should search its superclasses as well (picking up the included module's constants in the process).

commit 1510ba246e3f8011e9c8fbe1762e2a000d408f3c
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Sat Oct 9 12:14:59 2010 -0400

    Implement Module.class_exec and Module.module_exec.

commit 5de5edebb02bbb4a9c4b75c5d5741ae8e02c273c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Sep 9 23:39:20 2010 -0400

    Make attr accessor's var accessor field volatile, to guarantee visibility across threads.

commit 911d18d15f417ce1003f86efbe45fab7fa6e951c
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Wed Aug 4 14:10:44 2010 -0400

    Really fix JRUBY-4977.

commit 2b32739876396ba6b1f470fc987a5b7b3b68890d
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Wed Aug 4 13:04:33 2010 -0400

    Fix JRUBY-4977: Class#to_s doesn't match MRI (01x... versus 0x...)

commit 3de8d29ba756862303ddb993a4fc6b18fef89051
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 9 03:14:11 2010 -0500

    Tidy up and get reified objects working for Object subhierarchies. jruby.reify.classes=true to turn it on.

commit c4419e8d2254b03a598f97320e8255189c734b2f
Author: David Calavera <david.calavera@gmail.com>
Date:   Mon Jun 28 20:07:12 2010 +0200

    [1.9] implement Kernel.public_send

commit 43b8784a88584c3d73baeaeb765d8df7c3274233
Author: Nick Sieger <nick@nicksieger.com>
Date:   Thu Jun 10 09:53:59 2010 -0400

    Couple minor cleanups to get the build clean again

commit a5503a49df27a4f661b86c282c64a4ca2045cb32
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 10 02:41:33 2010 -0400

    Move back to an atomic generation ID and install some simple type/modification guards for dynopt calls.

commit a3db7ae821a250ac33c3f3ff6df5cf147c4c90fb
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Tue Jun 1 12:08:12 2010 -0500

    Based on suggestion by lopex, reverting this one.
    
    Revert "Some code cleanup; String comparison with equals(), removing unused imports, etc."
    
    This reverts commit b80e6e765b39404f1eccb6390e04df86d756ff39.

commit b80e6e765b39404f1eccb6390e04df86d756ff39
Author: Hiro Asari <asari.ruby@gmail.com>
Date:   Sun May 30 16:34:52 2010 -0500

    Some code cleanup; String comparison with equals(), removing unused imports, etc.

commit 3c271f5d8eb9ba8fc7bf53055451518f4b432c2c
Author: David Calavera <david.calavera@gmail.com>
Date:   Mon May 24 22:52:16 2010 +0200

    fixes JRUBY-4815: RubyClass doesn't include the base name in the class name after setting a constant with const_set

commit 752c1ed5768f343ccc0d5d95e1b39246dfb1633b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sun May 23 14:04:42 2010 -0500

    Add 1.9 Kernel#public_method

commit 6cfde5233601ccc4698860f7f8a7f344e3b60eb7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed May 5 12:56:35 2010 -0500

    Fix for JRUBY-4773: Lock contention in Ruby.allocModuleId(RubyModule)

commit e05b969291d44e3d42e14861e30ce189a52f1b5f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun May 2 02:09:26 2010 -0500

    Miscellaneous cleanup:
    
    * A number of findbugs items in the "threadsafe", "performance", "malcious code", and "experimental" warnings
    * Tidied up all NetBeans "yellows" in the files I touched
    * Removed now-defunct JRubyServer/Client/Service
    * Removed now-defunct ssa.rb and DAGBuilder

commit 454ecd96f060b5614fee67b79e0f3e329713ddd5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 29 12:05:20 2010 -0500

    Add double-checked locking (the safe kind) to the getting of class var table for write.

commit 0e5b4d5e52b47e72ed383e9fbf415f2d71013c2b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 26 13:48:42 2010 -0500

    No longer need another level of indirection to the generation object, since it turns out nothing needs to share it.

commit 9414a764ecf84b9c0f2871dabaf51b2036fc1b47
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 5 14:12:41 2010 -0500

    Better fix for JRUBY-2186 and improvement to prevent things like JRUBY-4693.
    
    JRUBY-2186 added logic to filter out singleton classes in completeion.rb. This commit just filters them during each_object, like MRI does.
    
    JRUBY-4693 reported a perf issue with Float multiplication that turned out to be just running a benchmark in IRB. We originally turned ObjectSpace on in IRB to allow completion to work, but completion only uses each_object(Module). This commit makes that work as well as each_object(Class) did.

commit 067a95aa14fd5868f68366a9ae8f203a23282232
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Mar 28 03:39:22 2010 -0500

    Fix for JRUBY-4214: module_function fails on some private methods

commit 9be937c6b88e03335c01613fb9d94d47144e56c4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 26 15:29:30 2010 -0500

    Switch class vars to using ConcurrentHashMap...for SPEED.

commit 9b1f32c2ad5ef8aa7c81d470dd855b49d601d4bc
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 25 20:05:47 2010 -0500

    Minor perf improvements to marshalling and simplification of lazily-initialized collections in RubyModule.

commit 10a114f67c9ea96dc916de0d78cc132e9cc720fa
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Mar 24 15:40:58 2010 -0400

    Add a JRuby::Synchronized module that makes a class's methods (and its subclasses' methods) be wrapped with synchronization.

commit 68f4623b500bc6be0faf37bcd39eb7b4b154b068
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 9 14:49:48 2010 -0600

    JRUBY-4251: Warning: already initialized constant When Multi-threading
    
    I fixed this by adding a "quiet" constant setting path and making the warning higher up and only when the value being set is different from the existing value.

commit 289e84870a276b90f472654bab12ff6ed01383cb
Author: David Calavera <david.calavera@gmail.com>
Date:   Mon Nov 2 00:01:03 2009 +0100

    fixes JRUBY-4197: [1.9] Module hierarchy issues in const_defined? method
    
    Signed-off-by: Charles Oliver Nutter <headius@headius.com>

commit 158390c034d47c1b38691b849e09b0290f51ca83
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 30 13:56:12 2009 -0600

    Fixes to reflection binding of methods for issues found in test-all now that "reflected" mode disables generated invokers as well.

commit 4f9b2a38d70c95347c89f196ed76db414470a6bf
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Dec 29 18:02:50 2009 -0600

    Fixes to make explicitly passing a Java array as the last argument to a varargs method work like it did before with varargs support still in place.

commit 5e57e9e640c61e2c2b62573bf26b3ddc3b1797b8
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Dec 17 15:31:15 2009 -0600

    JRUBY-4196: [1.9] Module improvements to pass some rubyspecs (patch mostly by David Calavera)

commit 13c40aeb515d14e62db6cb469a560d900a27647e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 16 00:59:55 2009 -0600

    Set reified class for all the primary core classes, so they'll work properly when extended and an interface gets included.

commit b761bbec68d2bfb61ba37e3ab6a8780550a12c83
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 24 15:19:14 2009 -0600

    Remove volatile from class serial numbers, since after talking with John Rose, having other volatiles around when classes update (like those in RubyModule.methods), will generally cause caches to update. And if it's delayed a bit, this is still unlikely to produce any visible failures.

commit a0decb399b5ce1916c45293c420ad4357ca029ce
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Nov 6 05:33:31 2009 +0100

    Cleanup of MetaClass-related logic.

commit 764d256067251ace178a42b53e016acec952e035
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Nov 6 05:09:05 2009 +0100

    More cleanup for RubyModule, RubyClass plus lazily allocating all CHMs.

commit adf69ad4458873d744c9bc0ee3ea57bfac97c5de
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 5 19:35:02 2009 -0800

    Clean up RubyModule's fields a bit.

commit 7497017d0098fb909c9d6459ea8bff180ed502f8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 5 18:50:45 2009 -0800

    * Update some templates where the .java version got edits instead
    * Fix some newArray with NULL_ARRAY to call newEmptyArray
    * Add separate paths for "array" and "nonarray" in block dispatch, to eliminate the avalue bool

commit af8a40fb1ab926f9d11409eb65006f2ed131ebbb
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Nov 3 13:41:32 2009 -0600

    Unused method

commit e8a7ea3c7228445114b2504c0b004c62fe3ea503
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Sep 28 11:10:42 2009 -0500

    [19] should have used warn instead of warning (this also unbreaks ant spec-short-1.9 run)

commit d7f241ca692ac88f251ba639c1cf3a7bf81bcf8f
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Sep 16 14:32:57 2009 -0700

    [19] attr has special two-arg case to match 1.8 semantics

commit 7e22b10beb0795b6e2b9305c6932bdab39629682
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Sep 1 14:35:13 2009 -0500

    Add 1.9 version of constants

commit 0d0e125ee8e52c101a8bbcdbbe455805fa4c4e6f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jul 9 10:51:22 2009 -0500

    Make jitting a method flip invalidation flags, and caching of DefaultMethod cache jitted version if possible.

commit 8868926c9d79d08adcce3dc57a1ee7ee36b28e03
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Jun 18 17:36:31 2009 -0500

    JRUBY-3702: The method methods

commit 4bf2d86aac23ef2e34a0b02529b4c493fa625eb9
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Jun 15 16:48:23 2009 -0500

    JRUBY-3419: JRuby Fails (MRI 1.8.6 works) in Sinatra helpers when no arguments

commit 29f26c42888049b45180e782ac5877c2157ff672
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jun 7 00:54:42 2009 -0500

    Too noisy, reverting for now.
    
    Revert "Use ASTInspector's list of scope-capturing methods for alias warning."
    
    This reverts commit 8b43aa09606133fb7dadce397deb3d21618eba85.

commit 8b43aa09606133fb7dadce397deb3d21618eba85
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jun 6 16:24:32 2009 -0700

    Use ASTInspector's list of scope-capturing methods for alias warning.

commit 3518b844ef68f39f9c2d2383095920a70ed2125d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri May 29 01:44:21 2009 -0500

    Fixes for JRUBY-3717 and JRUBY-3715

commit 854953308a4985e4ca2dc79828c5ed3bef82d582
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu May 14 12:43:11 2009 -0500

    Fix for JRUBY-3647: Severe performance degradation from 3d9140fafcda9c4fe6b9d5a1fec0ae9822877e03
    
    My lock-free approach to fixing JRUBY-3551 was clever, but introduced too much overhead into applications that do a lot of includes at runtime (usually in the form of obj.extend). So this falls back on the second-based fix, introducing a global hierarchy lock for when multiple threads concurrently tweak the hierarchy bits. Should still be as safe as before, only slightly slower for hierarchy modifications, and way faster for creating new classes or including modules.

commit 06d2ae5dd5b43bb4cf8df054331f4a63ce1c2e36
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 23 08:54:02 2009 +0200

    Oops, re-add missing volatile modifier on cache token.

commit 5bb43225f97baff92a82a78343f9f5b58bc4d026
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 23 08:27:57 2009 +0200

    Move the cache-invalidation token to an Object equality check rather than an integer compare as recommended by John Rose; no loss of performance, only slightly more overhead during invalidation, and zero chance of a token collision.

commit 3d9140fafcda9c4fe6b9d5a1fec0ae9822877e03
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 13 18:35:22 2009 -0500

    Fix for JRUBY-3551 and related failure potential in included module hierarchies. I have a test in process.

commit 998465a44506c7c7cf254348c89ededa4cee48b9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 4 18:15:48 2009 +0000

    Use a slightly lower-overhead addMethod variant during boot time to reduce startup overhead a bit.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9522 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 37b7840a30ef687f5e28a31e53ddf8eb110aaf18
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 1 02:10:59 2009 +0000

    Fix class variables by moving them to their own map.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9510 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3b266cf69f39ba501c32cc238cb898b24ed5a24c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 1 00:13:14 2009 +0000

    Get remaining variables using the new ivar table, and get all tests running (minus one cvar issue I need to dig into).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9509 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1a87714ed4824680eb24005bf01ae5b56472f119
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 1 00:12:48 2009 +0000

    Initial round of work on new ivar table.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9508 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ed03b981de0b0e0c5d78c59f76db9b895e9a3d24
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 19 04:23:46 2009 +0000

    Fix for fix for JRUBY-2435: Aliasing eval and other "special" methods should display a warning
    
    I missed class_eval, and java.rb had some code that tried to alias those special methods. You learn something every day.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9244 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2281338745d5bf33578d10268512d0c625a736e4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 19 03:20:06 2009 +0000

    Fix for JRUBY-2435: Aliasing eval and other "special" methods should display a warning
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9242 961051c9-f516-0410-bf72-c9f7e237a7b7

commit afa6cd5878607dbfd811f7356152334e2ff8ea02
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 12 09:02:32 2009 +0000

    Fix for JRUBY-3398: Attributes defined from Java tried to use current frame for visibilityattr definition from Java. This was causing java_class attr to be private in some cases, including after my upcoming defined? constant scoping fix.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9108 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8223413d60abf651e00d861ddf6f25114bb5585c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Feb 8 22:28:39 2009 +0000

    Test for JRUBY-2921 along with a fix for duplicate methods showing up in the methods list when overridden.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9068 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2fe04b7b7f0f3ad98da32d85aca59ef043bb2f36
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 5 11:23:18 2009 +0000

    Fix for the fix for JRUBY-3375. Thanks again :)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9014 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ae76855d2b9559158639192c12024dc03ae69758
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 5 11:14:44 2009 +0000

    Add 1.9 attr support from JRUBY-3375. Thanks to Hongli Lai for the patch!
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9013 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2b4606df16f07aa0c3ff7af7c7604ea2a77d8757
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 3 07:26:42 2009 +0000

    Fixes for JRUBY-3362: attr_accessor, attr_reader, attr_writer, and attr not obeying visibility
    
    Specs updated to grab new RubySpec.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8977 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 28a459f069b1393444ead7e3ec91b2158b231023
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 29 07:07:05 2009 +0000

    Fix for JRUBY-3308: Deadlock between RubyModule.includeModule() and RubyClass.invalidateCacheDescendants()
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8930 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 71cdcc147262ce1bcc3c91b9d5a0259a8df1c050
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 12 04:39:33 2009 +0000

    Remove dumpStack that snuck into the last commit.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8718 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4fe7ce736b98279d1a39943c7c1bfe486678b612
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 12 04:34:45 2009 +0000

    Override equals in RubyModule, since the WeakHashSet we put subclass references in calls .equals when there's a
    bucket collision. This caused IBM JDK to mysteriously start failing the trace tests, since a newly added class
    must be hashing the same as one used in the tests.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8717 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 86b9323d4e1a9c1219d906b518a3ce1e4227283e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 7 20:40:27 2009 +0000

    Immediates are freezable in 1.9.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8632 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 611bfe043c0e7ff37b3d5878e77e6dedd3e5d114
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jan 5 19:03:26 2009 +0000

    Make attr_reader and family about 3% faster
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8603 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 216f71a3ed589f126c32fd537415422fc6edb144
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 3 00:07:09 2009 +0000

    Update to latest specs:
    
    * Fix a number of Thread#raise behavioral issues exposed by new specs
    * Fix an old private method spec by invalidating cache on visibility change
    * Moved errorInfo into RubyThread object so it's accessible from outside the thread
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8572 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3169ceab25ada651a83fa5be62d6b586468190cb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jan 2 06:37:59 2009 +0000

    Add const caching to Colon2 and Colon3 in the interpreter.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8557 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 38539306c47caec741243f5e15be0e345757f069
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Dec 28 01:52:13 2008 +0000

    Bombs away! Eliinate nodeId field from Node and add a method to all nodes of interest to return the value instead. Probably a little slower, but we're moving away from using NodeType on critical path code and the memory savings are pretty substantial (4-8 bytes per node).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8485 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6c5bcfd4fe9e1391cfd692b262775582a186e09f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Dec 28 00:25:21 2008 +0000

    Large improvement to memory footprint of RubyModule/RubyClass instances:
    * Reduce initial size of methods and methodCache ConcurrentHashMaps to 4 from 12
    * Make constants CHM lazily allocated
    * Make constants and methods CHMs have a load factor of 0.9f, since they're usually cached elsewhere
    A simple heap dump of a just-started Rails app showed tens of thousands of CHM segments and entries; these changes make those numbers basically disappear and reduce startup memory use around 10% (total VM size!).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8478 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 16b696b4fb73732e8c9b964bdc98ad7cde3cd99c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Dec 18 06:52:04 2008 +0000

    Tiny improvement to method handles, making the "post" methods static to avoid aload_0; also some cleanup of deprecated bits and pieces.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8396 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1785d93207e70b7158811ade4eb57bcd0f407240
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 14 20:07:59 2008 +0000

    Fix the build (delegate variables in IncludedModuleWrapper for variable list related methods).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8340 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d6c971ca167cc9db347c281f01b0d6269b76e6a8
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 14 18:02:04 2008 +0000

    Big changes, remove 4 fields from RubyBasicObject (finalizer, dataStruct, variableTableSize, variableTableThreshold) Replace variableTable by variables (external org.jruby.runtime.builtin.InstanceVariableTable). The new structure supports packed mode (for <= 5 instance variable when it does linear search for lookup). Finalizer and dataStruct are now kept as internal instance variables. Need to review concurrency issues.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8339 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 66204b7cd14dd4781b0b37ca28790940fed36b2b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Nov 28 21:25:53 2008 +0000

    JRUBY-3145: Module#include detects cyclic includes
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8192 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3386c2fadd5e4f9ceb141c4f0dbb1380bbec2222
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Nov 23 15:56:05 2008 +0000

    Opt for DynamicMethod.isUndefined(). 2x speedup for the check itself by using direct reference comparison.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8108 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bf8db0bc4acaeed7900b867e821e959f254be0be
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Nov 22 22:57:11 2008 +0000

    Biggest commit eva (1.9 parser+1.9-runtime-related-changes landing)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8099 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 957814e1b298eaa809d0cda36fa4a859ceca6bcc
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 13 01:32:42 2008 +0000

    Add ant spec-short and get it running well on Mac + Apple Java 6. Testing others to get it enabled in main run.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8061 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 302eb3dfb6a1d052cad541a49081795590e6efa5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 31 02:51:34 2008 +0000

    Reenable constant cache with a global generation number; name-based was tricky to get right and I'm really burned out.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7976 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4e77726d5909afb90ec0880547a2e9dfd373afb7
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Oct 29 22:44:56 2008 +0000

    Fix regression from original constant cache landing (modules included in Object were not being searched)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7947 961051c9-f516-0410-bf72-c9f7e237a7b7

commit df2708c5e26a7c7c3d461d59353e4fcfd57ed827
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 20 23:28:26 2008 +0000

    An improvement to inline and class-level caching:
    
    * Share the CacheEntry type and objects between class-level caching and inline caching; reduces memory consumption for caches, since there now only needs to be (in theory) as many CacheEntry objects as there are callable methods on all types in the system...far fewer than there are call sites in the system.
    * Make construction of CacheEntry thread-safe by retrieving the serial number before searching for the method; this means we may end up with an old serial number and a new method, but the worst case there is that the cache would get flushed next time. This eliminates the possibility that we ever cache an old entry with a new serial number, which might never be flushed.
    * Simplify the caching logic and unify it between CachingCallSite and the class-level cache.
    
    This should also prevent the occasional NPE showing up on the IBM JDK.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7900 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1870a13957039555a141f3589093a8417c30a3ff
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Oct 13 20:42:06 2008 +0000

    Generation-based inactive invalidation of constant site caching (active cache invalidation sucked in Rails)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7876 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e1be5e774d00e65627727f87a16a80cb0b93a78d
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Oct 13 18:31:44 2008 +0000

    Clean tree...Remove cache map and friends since caching strategy no longer uses them
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7875 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0be23d6124bbc965e1fcb634ac89561bdc7b1dff
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Oct 11 15:21:49 2008 +0000

    JRUBY-3052: Cache constants at their call site (const_node)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7867 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0bad5ba3602e326c543b5d2d648f6d9871d10fcb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 7 01:22:06 2008 +0000

    Enlist respond_to, via RubyModule.isMethodBound, in the new per-class cache. Speeds up respond_to considerably. JRUBY-2181.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7840 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f801bf492ec7094e30b84902924b0ffa69151977
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Oct 2 19:34:55 2008 +0000

    Actually revert test_struct change and make Module#name 1.9 mode aware.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7814 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d8feed5f9ccfce66779f4b35717f7bddbf33ef50
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Oct 2 19:11:53 2008 +0000

    Module#name should return nil for singleton classes.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7812 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 81069fa7e3e457ba2fe5e9f494a975fb689d4223
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 1 06:40:08 2008 +0000

    Reinstate subclass relationship updating during inclusion.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7806 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e5db8a20aacf9290964a7dffb37c99d2fe0aebd4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 1 06:40:01 2008 +0000

    New serial-number class-level cache and guard in call sites. All tests pass and Rails can generate apps. Needs more testing, and it's not updating superclass's subclass list when inserting a module wrapper into the hierarchy, which seems like it should happen.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7805 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3d7e84c44292f585e91d4de702868098016697b5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Aug 22 05:44:40 2008 +0000

    Remove indexed method logic and property.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7520 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f98ba67aa5c9ce7c964749cdc373016865bfb505
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 14 06:22:40 2008 +0000

    Another minor tweak for StackTraceElement-based backtrace memo: use RubyModule.getName(), now cached and calculated only once per class.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7461 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8d6223353bf6f2df3c101ab9c2c7779d3065d97a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Aug 11 23:43:18 2008 +0000

    Remove Dispatcher; this represents a minor API change, but this API wasn't really working anymore, wasn't used internally, and was deprecated in a number of places for multiple releases.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7440 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 17b24fbe8a3976462e1969260b1d08729d2518ec
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 25 05:43:02 2008 +0000

    Eliminate Ruby-based JavaProxyMethods module.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7289 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a11b67f1e0df0596753e918789fc380d05c6cc9a
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Jul 16 21:21:10 2008 +0000

    JRUBY-2808: Broken API in JRuby 1.1.3
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7194 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 72975c6c9467ac11677b86f3886e555911e50299
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Jul 9 00:34:32 2008 +0000

    lots of RO.getRuntime removal
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7131 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e72ca1a779973651923c718589f36379ac01280f
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jul 7 23:41:03 2008 +0000

    Miscellaneous crap: rubyobject.getRuntime to TC.getRuntime; @overrides; searchMethod change
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7122 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8d1eef47be27649a60fd5ac2e969ac6a5195375d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jul 3 19:05:05 2008 +0000

    Fixes for JRUBY-2744, reenable c-call and c-return tracing for native methods.
    
    I added back the tracing, but it's only enabled at runtime if you set jruby.debug.fullTrace=true because it introduces significant performance hit. --debug enables this by default, however. We'll need to look at unification of all debug/trace settings, especially since I think it's feasible to add tracing to jitted code now that there's a standard --debug flag we could use to turn such traces on.
    
    I also added a number of config params that weren't showing up in the ConfigMBean.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7098 961051c9-f516-0410-bf72-c9f7e237a7b7

commit be7160af3ec5dffc795b2545a577a30139e22e0d
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Jun 25 21:46:01 2008 +0000

    [interp] Make BlockNode based on primitive array rather than ArrayList
    Convert all users of RubyArray.add to RubyArray.append to avoid calling JI layer
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7028 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 98c6259a914c5449b7fa4bf4d6944485d0bf96d7
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jun 24 19:03:10 2008 +0000

    Minor code changes
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7025 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a7b41d876cb677ba653a997002aa397613468d83
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Fri Jun 20 13:20:17 2008 +0000

    JRUBY-2682: Replace StringBuffer with StringBuilder.
    
    Patch by Wayne Meissner.
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7004 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2c455db06f8cbe325af89cfb9b707182724abfcf
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jun 15 01:33:27 2008 +0000

    * Move type populators into org.jruby.gen package
    * Reduce code in type populators by making TypePopulator abstract and moving some repetitive code there
    * Further reduce code in type populators by using a few more local vars, rather than repeatedly accessing e.g getMetaClass.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6974 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 31d1b05167b54fe9bbfb8c5a5420fa385f900b38
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Sat Jun 14 22:13:53 2008 +0000

    Micro-optimization for Module#to_s.
    
    This brings  bench_alias.rb benchmark from 2x-3x slower than MRI
    to about the same speed.
    
    Actually, there are lots of other ways to improve the speed,
    like caching the whole hierarchy and not recalculating it every time.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6971 961051c9-f516-0410-bf72-c9f7e237a7b7

commit aeab6d30e7c8c28f86085ec526f6c0347bfe942c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 5 23:57:24 2008 +0000

    Various minor refactorings to shrink methods in the parser chain and elsewhere that HotSpot reported as "too big" to inline. Minimal performance boost, if any, but it's also somewhat cleaner code.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6897 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7de6594072a7c0ef3377c9520d0a3f65d32173e0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri May 23 13:47:04 2008 +0000

    A bit more cleanup for ProcMethod and define_method-related code like Proc#call. JRUBY-1387
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6771 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3dfc49a70093218d93f448714a7d0f3bd9615e2a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri May 23 13:35:03 2008 +0000

    First round of cleanup for define_method (JRUBY-1387)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6769 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8da55f45fc6eac81f4ee44e407997df62e294851
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri May 23 12:48:48 2008 +0000

    Last round of changes for JRUBY-1386, improve instance_eval. Added cases to the benchmark too.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6767 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0e22bfc7c7c128aa59bb2d6436f08aa8c378c276
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Fri May 9 20:43:14 2008 +0000

    JRUBY-2503: variance from MRI: Module.new expects zero block params
    
    Regression test added.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6662 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 249f34e6fd9bf4cd0f017f27a75ea323f58a87b8
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed May 7 06:27:26 2008 +0000

    Fix some warnings
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6633 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1adf8d5b4a53b03d9b8180f23cb9564def7b13df
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Apr 29 11:22:06 2008 +0000

    Fix for JRUBY-2469 - make sure that the meta-attribute always defines the method on the singleton class.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6595 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 81bc116031b60cc180efc52ecccf86a06c6f2979
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 26 17:51:42 2008 +0000

    Annotations for backref set/get and visibility set/get.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6574 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 59ca34930cb08d32a9264d98865b0858cf1fb26b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Apr 18 17:52:30 2008 +0000

    Remove RubyUndef and replace it by RubyObject.UNDEF static.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6533 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 15ea91cf1c77638deff227fee5d15df90fe8c1a5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Apr 18 01:05:38 2008 +0000

    Fixes for JRUBY-2402, and improvements to bring the total build time back to where it was before recent annotation work.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6525 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 165dcb54b2bdba0af5828622e8476beee4fe24a3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Apr 18 01:05:28 2008 +0000

    Add logic to generate all invokers once without launching JRuby itself (but still requiring classes already compiled).
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6524 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dc607d0bc047fb7aa406a56ac331710279069390
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 16 00:46:02 2008 +0000

    * Make the annotation-based binding generation run as part of the main build. Reduces build time a lot.
    * Make all annotation bindings generate correctly, with 1.9 smarts, across all classes.
    * Make all invokers generate correctly, with 1.9 smarts, across all classes.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6501 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9309a03590ec6a9a45cdbdad26be60eb146b8f5f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 12 15:13:56 2008 +0000

    Some fixes and simplification of instance_eval and related methods. No more Callback construction, and fixed some behavior that was not working as in MRI.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6481 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 12b12d2c7f18a247be72e3357d2f06d258cd12c9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Apr 11 17:58:22 2008 +0000

    Eliminate CallbackFactory use in Module, Precision, TCPSocket, and JavaArrayUtilities, and clean up imports in others.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6474 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 51e42efe1b5494a94c9b4c9efd9989cb42dc17ba
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 10 18:22:08 2008 +0000

    * Fix issues with same-named methods that have different numbers of required args; handle class was being generated with the same name, based off only explicit required rather than actual.
    * Add a collision detector to InvocationMethodFactory that warns if both undefined and defined handle classes are encountered by a single factory.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6455 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fbc9e2d86cd3fdc515a3867c68bd6fde91713d02
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 7 17:17:55 2008 +0000

    Merge branch 'arity'
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6424 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1afa9caaa9c55637c4087ccc64b527593b2b0445
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Wed Apr 2 18:56:15 2008 +0000

    Temporal fix for NPEs out of Module.to_s.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6396 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dd5674482c9db58cdc1a770d4924c6317c014def
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Mar 27 12:10:23 2008 +0000

    Fix for JRUBY-2330. Make sure that rest arguments in define_method blocks with zsuper is handled correctly.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6349 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f8a029af815ecf044f5268707b5855b85c738db0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 20 22:14:18 2008 +0000

    First round of logic to pregenerate method binding code, to avoid walking methods and annotations at startup.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6298 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1e2bb746d73d2986ff9a1e8b3e81316b3eee90f7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 20 17:13:19 2008 +0000

    Modifying the normal annotated method path to not require an actual reflected Method object directly.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6297 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c578caa220f025349f78c755b47c3215770940aa
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Mar 19 13:27:24 2008 +0000

    Add support for defining constants using annotations instead
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6292 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 493c43fb8eac0a22425d375b15e8663d4c0ce74a
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Mar 19 12:20:01 2008 +0000

    Make creation of RI much smarter and add basic type tags to loads of places.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6289 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 792a75ebc6e85940fb31c26d06669ebbd27bef4b
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Sun Mar 16 08:43:18 2008 +0000

    Optimized fix for JRUBY-2277: if supplied newId was RubySymbol, no need to do lookup.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6210 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8d3fa45fe80f30d43722a0e0a8a7273500f83b8e
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Sun Mar 16 08:02:45 2008 +0000

    Fix for JRUBY-2277: fix alias_method to a) pass coerced name to (singleton_)method_added; b) call correct method_added method.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6209 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 852d904134ad970a20497fdcc5d752dd4ae49766
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Mar 7 22:04:54 2008 +0000

    The RC3 Surprise!
    
    Allow annotation defined ruby methods to optionally specify ThreadContext as first parameter
    Convert easiest and most common methods to accept ThreadContext when method or child method can use context
    
    These changes give about 15% improvement on petstore bench and about 10% in ar-bench.  In ar-bench getCurrentContext calls go from 14 million down to 2 million.  The remaining calls largely can be removed but they were much more invasive.
    
    IRubyObject op_eqq and op_equal both not have ThreadContext consumer, but we could see no use of this in any extensions and figured it worth the trouble of converting.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6143 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 180de94ace566e9e6c1b3fef107b038420530bb4
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Mon Mar 3 00:20:23 2008 +0000

    Add defineAliases method to RubyModule to make adding multiple aliases more efficient.  Used by JavaClass when defining proxy methods.  Also removed unused name arg from CacheMap.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6082 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5ddeaaa8a8ec22d1857d7fb747c7687f24804f36
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Sun Mar 2 22:30:23 2008 +0000

    Fix related to JRUBY-2181: Change RubyModule#addMethod to put/replace methods atomically, since searchMethod does not synchronize on methods. (Should also be a tiny perf improvement.) Also includes some minor cleanup of signatures to support generics and prevent adding methods to IncludedModuleWrapper.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6080 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5d30cb0a380ea232619e642d077a0601102f67f4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 28 06:50:07 2008 +0000

    Zero-sum improvements to searchMethod performance; seems to improve the performance of respond_to? quite a bit. JRUBY-2180.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6060 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 682ab95d7d7f7f12280d3978778893df2d31ccb7
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Feb 12 08:02:10 2008 +0000

    JRUBY-2105: Method and UnboundMethod do not strictly behave like in MRI.
    (patch by Daniel Luz)
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5913 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2b1a005a405839ca4eb268288816294e88f20a2b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Feb 3 18:37:14 2008 +0000

    JRUBY-2062: Add ids and convenient data to SyntaxException and IRubyWarning interface to make their life easier
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5806 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ec28ae2f77f9b7c3fa5f707bc3d4daccd572bbfa
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Jan 15 09:35:41 2008 +0000

    Interned one more string in RubyModule, to make assertions happy.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5614 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 379bc9983917bb4ac5c18482e5679a9de94bc93e
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Tue Jan 15 09:19:29 2008 +0000

    Fixed two new rubyspec failures for Module.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5612 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b3d416662a9b358da11a63a1900dd8a917340322
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 12 23:24:11 2008 +0000

    Multiple cleanups:
    * Remove most Arity.checkArgumentCount calls since they're handled by generated method handles now
    * Add javadoc comments to MethodFactory impls and their public methods.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5576 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 73557bfaf6bdfb2d56aa807d136327bb20032c6a
Author: Nick Sieger <nick@nicksieger.com>
Date:   Fri Jan 4 01:20:30 2008 +0000

    JRUBY-1877: Fix unmarshalling when an object uses a custom marshal_load/dump. The object
    needs to be registered in the cache before unmarshalling its children.
    Also moved around the register methods on the marshal side (possibly unnecessary), but makes
    the code a little more symmetric and hopefully easier to match up.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5484 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a694709e87e269be436ed1d176a688712beb9d5d
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jan 1 05:09:53 2008 +0000

    Remove unused callbackfactorys
    Add partial impl of Etc with some cooler pieces of it still commented
    Remove many warnings
    Some generics to lessen warnings
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5456 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0784e926e30beeb329f26adcbf752b74ea116925
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Dec 31 11:42:48 2007 +0000

    Remove extra framing from ProcMethod and MethodMethod, used for procs and method objects bound to a new method via define_method. Nice perf improvement on dispatch.
    Also refactored construction of ProcMethod into a common piece of code.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5446 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b06a935233fba77b0ec93623d37e139e5f99f053
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Dec 29 06:10:07 2007 +0000

    JRUBY-1828: Module.<=> should return nil when other is not a module
    JRUBY-1807: Lots of spec failures for Time
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5412 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 80505dd70f81bf0b1028da9d7a122f5d25c87ca3
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Dec 29 00:27:43 2007 +0000

    JRUBY-1818: Method and UnboundMethod inspect/to_s not quite right
    JRUBY-1817: native filestat isReadable{,Real}, isWritable{,Real}, and isExecutable{,Real} have small logic error
    JRUBY-1816: Native File Stat mode comparisons + filetype is borked
    JRUBY-1815: FileTest#identical? is not implemented
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5404 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bf87faa2d84fde2cc68d8163f2d6ef8b8b31e5ad
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Dec 28 18:32:31 2007 +0000

    Move JIT compilation logic out of DefaultMethod.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5395 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f01589d2823588c715cc93bd22bad2e877a89151
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Dec 28 02:27:54 2007 +0000

    Add indexed methods property to --properties, move it to RubyInstanceConfig
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5390 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ed1cffba3ce453e277b5971af39fea2532c48ed6
Author: MenTaLguY <mental@rydia.net>
Date:   Sat Dec 22 04:26:16 2007 +0000

    threadsafe allocation of module and symbol ids
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5336 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 82789a9d547cf4cc850c265ce8e4c1d65cdc1199
Author: MenTaLguY <mental@rydia.net>
Date:   Sat Dec 22 03:32:49 2007 +0000

    Get rid of MethodCache
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5334 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a78db1a702e5cbf7125c0311a9cbecf7289b0dc1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Dec 21 13:54:19 2007 +0000

    Fix for JRUBY-1641 from Vladimir; safely check privileged system properties, since blowing up there kills JRuby.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5324 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 88c9ecea627e5dd577f9f1f805de7667dfac6f54
Author: Nick Sieger <nick@nicksieger.com>
Date:   Fri Dec 7 15:40:36 2007 +0000

    JRUBY-1683: attr_reader, attr_writer, attr_accessor actually don't require arguments
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5186 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f7bf2e0b56501b3caa40db7742a70454f3a0abf4
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Dec 7 11:40:19 2007 +0000

    Almost certainly a fix for JRUBY-1674, some other related issues, and some assertions to make sure it doesn't happen again.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5182 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f1159b8cf4c8d371e00da89811d57f100a13953e
Author: MenTaLguY <mental@rydia.net>
Date:   Thu Dec 6 03:51:41 2007 +0000

    remove vestiges of per-class cacheing for now
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5174 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8890b3ff110b1678839825471b6a365652bdfb8f
Author: MenTaLguY <mental@rydia.net>
Date:   Thu Dec 6 03:38:21 2007 +0000

    switch to ConcurrentHashMap for method table
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5173 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b22c6abb720151c7d5bb07aefcb6c81814931191
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 5 22:19:29 2007 +0000

    Remove "intern by default" from many call paths and explicitly intern only when the result will be passed to a method that requires interned strings. This should help reduce the amount of interning going on, easing some permgen pressure. The ultimate and best fix would be to forego interned strings in favor of an artificial ID.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5170 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2c0f7fd5bea47c6ae49149c40999affe12ea3c26
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 26 22:49:04 2007 +0000

    Offload instance variable methods to a separate interface to reduce the implementation load for IRubyObject. This also is another step toward making lightweights possible; by separating the ivar logic from the object logic (visibly, anyway) it means we can externally represent that logic for lightweights more easily. Bill pointed out that his larger IRubyObject/Object/lightweight refactoring used a similar decomposition, so this has at least been proven out in one form.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5061 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4d75cc1470f5843b4b66f89f50ed81b88b27b431
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 26 10:01:20 2007 +0000

    Remove the three generic type conversion methods from RubyObject/IRubyObject to TypeConverter utility class. They were never overridden, and so there's no need for them to live in the IRubyObject/RubyObject hierarchy.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5047 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ff120491b21359d374e6e50a98e8950f963f49cb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 26 06:36:34 2007 +0000

    Remove two more IRubyObject methods:
    - getNativeTypeIndex moved to a separate interface; former uses now cast to that interface, rather than requiring all IRubyObject instances to specify a native type index directly. Marshalling should probably be refactored to not use this at all (and instead polymorphically dispatch to a method on the target object, similar to how it used to be).
    - isKindOf moved to RubyModule as isInstance and all references updated to use that version. This maps better to the type being in charge of what is or is not an instance, and mimics Java reflection API (Class#isInstance).
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5045 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2c2a66b641fbccc9c04d41a7171f4f99172a143a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Nov 24 11:27:21 2007 +0000

    A fairly extensive refactoring of the relationship between bindings, blocks, and eval. Binding holds the frame and *containing* scope; this allows the binding contained within a block to be use for evals directly, rather than requiring hacks like the previous commit. When a block is invoked, a new DynamicScope is constructed at that time, rather than having an existing scope cloned. Similarly for evals, the first time a binding is used getEvalScope is called on the binding's scope (the containing scope for the eval). This causes a new eval scope to be created the first time and used for subsequent calls with the same containing scope. And again, this avoids contortions when constructing the binding, since the binding only need to contain the unchanging containing scope.
    
    This should make it a lot easier to implement the remaining specific-size dynamic scopes. It also simplifies scoping/binding logic and fixes a number of eval/binding/scoping issues.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5018 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1b1b2ab07729ea54a09f64a8eaa27ca26c0c860
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Nov 16 20:38:20 2007 +0000

    JRUBY-1188: not reporting public/private instance methods correctly
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4951 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 72a546b972018f0cf5c6edeb0019c1a175e8ed23
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 14 04:53:46 2007 +0000

    Adding --compat flag for execution, eliminating the "rite" name since it's the name of Matz's old 1.9 codebase, adding Ruby 1.9-style Kernel#proc plus a test
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4936 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8bd612daf5a55edfc2a440021dbdec437c73ceea
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Nov 11 01:41:22 2007 +0000

    Make binding of core class methods also update ASTInspector's list of "frame aware" methods.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4911 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0e0b2c6b332d370abb9d295fcec1955acff80117
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Nov 10 06:05:16 2007 +0000

    Block refactoring: Detach Binding from Block.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4900 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 420c4dd4a0628f9d6984e1596e101659a0ca8bd5
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Nov 7 00:58:21 2007 +0000

    Added configurable support for indexed invokers (one invoker-per-class) as an alternative to individual invokers (one-per-method).
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4869 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 962923426911393ab884adb5112ea2a96c69e936
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 31 15:40:57 2007 +0000

    Migrate RubyModule to annotation-based methods. I know I'd done this before, but I think it got lost in Bill's big merge.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4831 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 48ddca75d508749aa20fbbbb02648767b5187cb4
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 30 21:36:02 2007 +0000

    JRUBY-1491, MethodCache should use weakrefs
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4806 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b13d510c1a617cd792d486e702dbd3e21dd5c89c
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Tue Oct 30 06:44:22 2007 +0000

    Concurrent SymbolTable implementation. About 5% faster (in bench_symbol) than the ST code introduced in 4580 (which is mostly reverted here), and now threadsafe.
    
    As with the concurrent vars code, should perform especially well in multi-threaded applications.
    
    For interpreted mode, caches the symbol at the SymbolNode (almost identical to Fixnum handling).
    
    Still _much_ slower than MRI in bench_symbol (unlike vars/constants, where we're faster now).  Could be much faster if we cached the Symbol in compiled code.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4787 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 47fc3bf1ebb3d45594f50d9ccc88d56e8aadeba2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 26 19:26:48 2007 +0000

    Fix for JRUBY-1468, fixes the original issue, adds a whole raft of tests, and fixes a few additional issues discovered.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4747 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f5f86f4cda59ba784b19dffd0e09eb5bdda1407c
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Oct 25 16:58:08 2007 +0000

    Add support for a jruby.rite-flag, and a matching rite-boolean on JRubyMethod.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4730 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d419a52688135a8bb4009faf8042099e1520535d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 19 23:42:05 2007 +0000

    Fix for JRUBY-1419, call method_added in alias_method.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4627 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9bc9825436ea08670905a6e2a06d760a97b71d70
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 19 20:52:01 2007 +0000

    Migrate JRubyMethod annotation to use String[] for names and aliases. Thanks Brad C from my blog.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4623 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4fd84e3f9c70e6dac64a42df4a987485f49866d7
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 16 05:17:56 2007 +0000

    Make attrs direct implementations of JavaMethod
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4592 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 95c346df5368a3f5f06fa9d14022efb85eaa6809
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Mon Oct 15 07:45:22 2007 +0000

    Vars have landed. Does not include concurrent SymbolTable (will follow in the next day or so). Also need multi-threaded unit tests, work in progress.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4588 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0b7a2dae2ec0baa531f313568ffc9b7382f89592
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 12 01:50:08 2007 +0000

    Migrate annotation-based method binding to generate DynamicMethod implementations directly, with arity checking built-in
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4575 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0eb5392db19e55aeb6a46845c07bf1830807945c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 10 03:40:35 2007 +0000

    Kernel half migrated to annotation binding
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4540 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8557c622ca2f2cb7e0625bd6137241df0daed496
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 9 22:08:32 2007 +0000

    Migrate RubyJRuby to annotation bindings, and fix an issue with module functions being defined on Object
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4539 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d80b446edecbc40f8b93d2b10bee0eed2a942280
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 9 04:38:29 2007 +0000

    Migrate FileTest and FileStat to annotation bindings
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4531 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d22fe4ae67ed7daa9735c60dbeda29fb837ceb7d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 9 01:42:19 2007 +0000

    Migrate Exception to annotation bindings (mostly...Class#new gets aliased to "exception", not sure how best to do that)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4527 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 52df7ab62682179df7828b602f7ace3f0475b24a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 8 23:44:59 2007 +0000

    Migrating Enumerator to annotation binding; new defineAnnotatedMethod is not very efficient
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4526 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e28efd0866c902cb19262041ae22aa0ed9155599
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 8 21:49:21 2007 +0000

    Migrate remaining Integer methods to annotation binding
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4521 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a10e46cec019a3964c75ebb6b2ec648c3b449ed3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 8 18:23:45 2007 +0000

    Migrate Hash to annotating bindings, rename and remap all equality methods to new conventions
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4514 961051c9-f516-0410-bf72-c9f7e237a7b7

commit afda35a0dcf16ab79de3df32352b2b0584da784e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Oct 8 15:19:25 2007 +0000

    Comment method since the last diff of it confused me
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4507 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e1a1b4740ea53e145fc198b818432d40647f814f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 8 14:55:59 2007 +0000

    Migrate RubyArray to annotation-based binding
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4506 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4cd867ce50318e77a30ae9798e5d707489f040ad
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 8 13:38:19 2007 +0000

    Convert Visibility into an enum
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4504 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 12e0768bfd6f9f5a7d0de74d8e47c1404a871495
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Sep 30 22:25:58 2007 +0000

    Add Module#freeze and Module#== to match MRI.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4445 961051c9-f516-0410-bf72-c9f7e237a7b7

commit eb244ba9e37961159fcd0dcca2afc16223e18795
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Sep 30 21:19:53 2007 +0000

    Cleaned up and expanded the annotation-based method binding logic to support non-fast methods and potentially fast methods that want to accept a block. Moved most of the conditional callback-generation logic into InvocationCallbackFactory.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4442 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0a23b718e9e558725e4940d978f6a124b7068b6e
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Sep 28 11:29:21 2007 +0000

    Move needsImplementer from each method into the RubyModule in question - using USER7_F.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4416 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 92f30bcbeb9e670b4c4019a2f5de5e887f8b8b45
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Sep 28 09:53:26 2007 +0000

    Patch from JRUBY-1392 by Alexey Verkhovsky. Improve caching logic by selectively dumping from it on module inclusions, instead of just clearing the cache
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4415 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3e88cfab0d224fb9efa8d18336993e2c78ce495e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Sep 27 16:40:57 2007 +0000

    - Identified and extracted construction paths for class/module/singleton/IncludedModuleWrapper, now there's no unnecessary null checks or assignments in their constructors (they take very few arguments so even asserts are not needed).
    Each of those constructors have a comment what is it the responsible for, also, two RubyClass.newClass() and two RubyModule.newModule() methods have been extracted.
    - Fixed logic that sets the parent/constant for Modules, now matches MRI (only setConstant/getConstantAt are used here).
    - RubyClass rewritten, special attention has been put on allocation logic, now Class.new(...) doesn't fire a separate allocator class. (btw, logic of "class B < A;end" and "Class.new(A)" must be split since in second case superclass and allocator are not known until initialize is called). Class/Object allocation implementation mimics MRI's weirdest quirks in behavior, is _much_ simpler that it has been and much faster. This also allowed creation of generalized clone/dup implementations matching MRI. (only our special ivars need a care here).
    - Rewritten bootstrapping of Object/Class/Module.
    - Core classes (except Exception hierarchy, they should also be in future) are now cached in runtime (MRI caches them in static VALUE's like rb_cObject) Ruby.getClass(String), Ruby.getModule(String) and Ruby.getClassFromPath(String) should be used only by either interpreter or compiler and when the class name is not known at compile time.
    - Fixed and simplified nodes: classNode, moduleNode, sclassNode, defsNode. Compiler has been synchronized here as well.
    - No more __attached__ as ivar, it is now MetaClass field (which means lazy ivars for singletons). Compiler also updated.
    - added and dosumented isModule() to IRubyObject (isClass(), isSintleton() documented).
    - Fixed test_autoload test (Object.class_eval do;autoload :SomeClass, 'somefile';class SomeClass; end;end) should raise LoadError, now matches MRI.
    
    - Fixed a number of minor bugs:
       1.instance_eval, was creating a metaclass for Fixnum instances (also affected Symbol/FalseClass/TrueClass/NilClass)
       marshaler objects were kept in singleton classes
       Range.inspect, was modifying the begin field (when it was a String)
       Many bulletproofings in Marshal/Unmarshal (like unmarshaling an instance of nonexistant class), TypeErrors/ArgumentErrors matching MRI.
       Fiber.new in 1.9, doesn't call #initialize method by funcall, fixed
       number of method arity fixes and many methods are made fast now
       fixed initialize/initialize_copy logic, further simplification, no ClassCastExceptions possible now
       Fixed defineClass(under)/defineModule(under) logic
       bulletproofed cases such: class A;end;module A;end
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4409 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4c3dd0b0b54ebf59758dce73bc791ae2eca079e4
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Sep 25 15:08:45 2007 +0000

    Fix a subtle cache emptying problem when using defineAlias
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4393 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e8a4f5d489861c347007ffe947714a9eeb3e85dd
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Tue Sep 25 09:33:40 2007 +0000

    Port fix for JRUBY-1339 (const_defined? and defined?Constant) from 1_0 branch.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4387 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d1589c3ecec8aff8c8826f645d48b3cbab247dbd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 24 13:34:54 2007 +0000

    Total refactoring of zsuper argument processing, and zsuper is now enabled in the compiler. We still need more/better tests and specs for zsuper, unfortunately.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4375 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1dbbe1a37a3d9cd926b906dc06b5a8578de6b3b3
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Fri Sep 21 03:25:29 2007 +0000

    More JI cleanup:
     - Reworked the very expensive and thread-unsafe (and essentially obsolete) proxy extender mechanism. No longer is every new proxy checked against all proxy extenders; since the Rubification of the Java class hierarchy, it's really only necessary to extend the class/module specified in the extend_proxy method. I'd like to see this feature deprecated, as it's redundant now (see forthcoming note on jruby-dev).
     - Moved JavaClass instances to a ConcurrentHashMap for faster access.  They had been in a weak hash map, but since almost all of them were linked to proxies that were in non-weak maps, there was really no benefit (and some performance penalties).
     - Used concurrent techniques to speed proxy class lookup.  Proxies are now stored with their corresponding JavaClass instances, and can be retrieved with an unsynchronized access.
     - Eliminated the ProxyData "dataStruct" that had been attached to the JavaUtilities module; most of the fields (maps) had been eliminated in the work noted above; the remaining fields have been moved to JavaSupport where they may be accessed without a JavaUtilities reference.
     - Permanently disabled the the old-style (<) interface implementation syntax (there had been a method to enable it; no more).
     - Fixed a bug wherein the colon2 syntax for opening modules was not working if the module had not previously been referenced.  Will open a JIRA and backport to the 1.0 branch.
    
    Fixes JRUBY-931 (thread-unsafe proxy extender access).
    
    Most of this work is transitional; i.e., will probably be implemented differently when JI is overhauled.  Just cleaning up and clearing away dead wood in advance of that overhaul.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4364 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4849e41a0f6979f2dbb73018290dfad2447ee6e4
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Wed Aug 29 00:46:58 2007 +0000

    JRUBY-1295: fix ivar/cvar/constant name validation.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4217 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8e40c8585aef11ac1a9f78db0e458bffe5f00594
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Aug 26 06:39:56 2007 +0000

    Making attrs and [topself]#to_s fast methods. Also make attrs use an interned string for the ivar name.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4204 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c9f8b6bebdcc8df36a732d411591cbd06336a64f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 7 20:11:57 2007 +0000

    Livin on the edge! Committing inline caching. All tests pass, Rails generates, runs, handles requests, and Gems install and generate docs.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4121 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3eee7681b5e2ca9e18ca65304791eef82bde9d12
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Aug 7 19:02:21 2007 +0000

    Add Java based kind_of? for some of our Java based implementations
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4120 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4c8af70fb16a24c9f4803ad02d9244050ccc846e
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Aug 7 11:51:34 2007 +0000

    Add class_variable_defined?, add a small name check to instance_variable_defined?, and also add some tests for these features.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4113 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 28f4ed91a9eb9fe0a644de65c9ccb5c7b1fd844a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Aug 5 16:59:41 2007 +0000

    Migrating trunk to Java 5; added in annotation support for method definition, updated Fixnum to use it, added Retroweaver support in the build, moved to ASM 3.0.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4084 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3c6108a399ab8eb921a4aa4d8fb423c5648b8425
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jul 10 08:49:07 2007 +0000

    Fix for -C and optimizations to the compiler and dispatcher to shorten the call path and give HotSpot better targets to JIT.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3986 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 66308a41bee1215d2b084c8fde04156bb8707781
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 9 23:36:57 2007 +0000

    Merging CRef changes to trunk from enebo branch.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3984 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 95108e35e65bb32045a421f84f8e0092391ecde3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jul 4 04:13:56 2007 +0000

    Fixes for JRUBY-1185, handle top-level visibility appropriately and use public visibility for module, class, and struct blocks.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3958 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 78cbe773471d332a3c21735e15928769efb108f0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jul 2 15:36:43 2007 +0000

    Landing Marcin's flags/OS changes; the memory savings alone will make us rich beyond our wildest dreams.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3952 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3855b2a7b32d013fbc4dbc8cdc3b4c6e9a9c8f0d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jul 1 18:59:57 2007 +0000

    Committing brand new dynamic STI generator; it's passing all tests, installs rake, runs rails. Any bugs, we'll find them in place.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3935 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5d12da085961b716dd8d37e77eef4bfbdca26b37
Author: Bill Dortch <bill.dortch@gmail.com>
Date:   Fri Jun 29 01:17:37 2007 +0000

    JRUBY-1173: replaced double-checked locking with synchronized method
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3919 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a9ab9b77c1c3ef1bc5a529a035f9777d02d07c1b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jun 25 16:14:55 2007 +0000

    Remove extra sample scripts which were removed for 1.0
    Last of ablaf is gone (clean up from removing serialization before 1.0)
    Conditional support for parsing with/without extra positioning information for IDE:
      - For runtime this saves considerable amount of memory/object creation during parsing
      - Runtime can still parse with extra positioning information if desired
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3913 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4ed34bd69240ae82295cb73c63f85572bd65ade3
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Jun 13 10:21:27 2007 +0000

    Add new fancy method cache, written by Ye Zheng (dreamhead)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3873 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d490af4a9d510b46750d3a638162282991658f1c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 7 06:11:00 2007 +0000

    Added STI for inspect.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3847 961051c9-f516-0410-bf72-c9f7e237a7b7

commit db80d01a8f64887ad4095821678a392f72c23697
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jun 3 14:21:04 2007 +0000

    Module#undef_method should take varargs
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3829 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 56d9e338199a6cc44b709b69872175af3620b62b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed May 30 18:06:54 2007 +0000

    JRUBY-948: undefined methods are not preserved when a module/class is dup'ed.
    JRUBY-756: "private method called" issued for undefined methods with explicit receiver
    JRUBY-749: Visibility issue: private method reported as method_missing and not private in class_eval
    
    [Patch by Marcin]
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3770 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6ab8977aa4861824d215eda0c00d6f4cb1cfa607
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun May 27 05:58:09 2007 +0000

    Zero-sum (hopefully) refactoring of trace functions to have an "event hook" model more like MRI. ruby-debug (and likely jruby-debug in the future) makes use of this event hook mechanism, so we'll need to have it in place to make the port easy. Also in this commit, fixed JIT to actually be running (it got turned off accidentally sometime in the past week) and make sure it's using the same "safe" logic for def arguments.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3746 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 19bcf28ec036249cf6d6bd46b91e4f9ad0762412
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue May 22 20:38:40 2007 +0000

    Fix for JRUBY-932, AliasMethod should preserve the actual Class that performs an alias, not the original method's Class
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3716 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6530ab250dae7218008a9b6ef23939bfdbea64ca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue May 22 18:27:02 2007 +0000

    Fix for JRUBY-962 and juggled autoload tests out into a test/unit test case.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3708 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7e8f96040ec5f673261d2b64908c8a3819ce0915
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon May 21 04:26:33 2007 +0000

    Bill's changes for JRUBY-920, a longhand package-as-module syntax that uses actual package names and allows classes to be reopened.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3690 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c9f6241d841acfacf0e4147c8110611614b6e551
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun May 20 00:25:29 2007 +0000

    JRUBY-955: RubyModule public_method_defined?, private_method_defined?, protected_method_defined?
    JRUBY-24: position from passed in arguments not passed
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3687 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f221245ae886f16607d505f338374422f1585f2e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat May 12 22:17:03 2007 +0000

    JRUBY-926: Rails script/console broken in JRuby 1.0.0RC1 (was still working in JRuby 0.99)
    Plus...remove_const now also un-autoloads (missed in my original autoload changes)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3644 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5e8ecd81738e7e61a8b7d8a50c47d6095472550e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun May 6 23:40:41 2007 +0000

    JRUBY-916: Kernel.autoload has a couple of problems [active_scaffold blocker]
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3629 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0b9733a01274eca99d4b615d8f2418228932157b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Apr 30 22:17:55 2007 +0000

    JRUBY-903: Java interface modules (by Bill Dortch)
    Update some samples to use newer syntax
    Remove miscellaneous unusied imports
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3601 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 521c2a5c97aae66171b8f5757a74558afdcc56bd
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Apr 27 19:48:26 2007 +0000

    JRUBY-893:  Module::include? is missing
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3574 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 10ee61746fe23e9062af04d7b45e9e7e46b216a0
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Apr 25 14:44:13 2007 +0000

    JRUBY-883: Ruby classes should not be includable / extendable (by Bill Dortch)
    JRUBY-793: class_variable_set and class_variable_get methods missing from Module (by Bill Dortch)
    Added smll benchmark
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3556 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6805fad9d54c237bb9f24f80bf4f1fd1bcb862eb
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Apr 21 20:59:02 2007 +0000

    Fix the remaining marshalling issues (for JRUBY-531). Two different failures about singleton classes, first one because we didn't properly generate a singleton-name for cases where the enclosing class/module was singleton. The second problem is that ENV should really be a singleton, and can't be dumped. The real fix for ENV is to generate it the same way as ARGF, but that means custom implementation of a whole lot of hash-methods, which doesn't seem to tempting right now. The quick fix is to make sure ENV is actually a singleton object anyway, done by adding the to_s method as a singleton method to it.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3522 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d77f8c9202ed39af9f9aae4987650e3a6fe62508
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 19 08:35:13 2007 +0000

    Fixes for JRUBY-361: supply a real binding to trace functions. Also fixes JRUBY-842 by short-circuiting STI methods so they trace instead of doing fast STI dispatch.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3505 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bac69eda717fe181084e119979408a1e8ad389f8
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Apr 16 22:38:58 2007 +0000

    Remove remaining metaclass definitions...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3480 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d465fd9bc7ee6ae38475299bd82e65ac9d1311b4
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Apr 16 10:41:12 2007 +0000

    Add several new STI's
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3470 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0320b51ff913c6fcd25a386065cac05f57cc12c2
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Apr 4 17:44:27 2007 +0000

    Merging non-specific things from my sandbox to get diff smaller:
    
    - remove unused imports
    - remove deprecated methods convertToType and convertToTypeWithCaller and converted all consumers
       [Note: If extensions were using these functions they are broken now]
    - attr_accessor was checking Frame args when it could just use the args it is given
    - removed unused variables
    - comment out some debugging methods so they are not reported as a warning
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3385 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8c2bc8cfe9f4bcaa23b9e8544c55d7f9dc6c54b1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 29 07:08:05 2007 +0000

    More IRubyObject cleanup; removed initCopy, moved setFrozen around, moved checkArgumentCount to Arity
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3322 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c02ca0e641c238d2fc8985fe7f939b8b3df6f95
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 29 05:54:41 2007 +0000

    Fixes for JRUBY-734, along with a first run at cleaning up IRubyObject.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3319 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7209a6880d31ca23a404506e8e6014e83bc2ab99
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Mar 28 11:35:46 2007 +0000

    Improve Java integration performance
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3312 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6e076e6a988e93a8e444c0d8799a4205e372336f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 12 18:09:59 2007 +0000

    Move callSuper out of ThreadContext
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3180 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 768b724a7ef4942d89923756ac1c5183ac5bf24a
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Mar 11 19:05:37 2007 +0000

    Make regular expressions use JRegex
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3176 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f95f5220c0d640d918a1ae20a5c908168d8d0335
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 8 04:48:39 2007 +0000

    Fixes to STI: make add/alias methods flush it correctly, expand to fcall and vcall, add to_s, ensure all appropriate paths are calling via STI
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3141 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bb1f4157acdfdc5a818b0f06766ef5bdece39aa0
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Feb 23 13:14:15 2007 +0000

    Make symbol id's bound to a runtime, give modules unique ids, and remove the SoftReferences in that parser pool. No reason for them.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3068 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 964722d3a902761a36092db4f9eb2e76f9963c8f
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 22 19:23:42 2007 +0000

    Removed unnecessary object creation and comparison
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3063 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b821c95f9fe15a1e93a4b2a7e7cad0ab32e377ba
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 21 20:26:42 2007 +0000

    - Rename all methods and frame to use same vocabulary for attributes and parameters.  Also make ordering of parameters similiar
    - Make AbstractMethod become DynamicMethod and remove DynamicMethod as an interface
    - Remove a couple of dead methods in ThreadContext
    - change .id to .object_id to get rid of extraneous warning messages
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3050 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3cdb25eaa9a513347cfb5a544dc1146202ec82f6
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Feb 21 13:40:57 2007 +0000

    Fixes a bug, where frames are shared for blocks, which make define_method bonkers in certain situations. Also makes argument lists faster. Fixes JRUBY-520
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3041 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a2107e60085a5063bca76d897783a512bbd7eddc
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Feb 18 15:18:18 2007 +0000

    JRUBY-606: Get rid of un/under-used IRuby interface
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3022 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8169a980a437ed4b2e8483aa6032bfaa4f99bb92
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Feb 9 14:48:30 2007 +0000

    Fix for JRUBY-556, by Marcin
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2972 961051c9-f516-0410-bf72-c9f7e237a7b7

commit edb8139e505263a0791c37b10988ded4fc0ae5ed
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 8 11:16:27 2007 +0000

    Improve marshalling of Strings
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2964 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ef423f1b886650195114fe952a1a6407fbb63f82
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 7 22:27:41 2007 +0000

    - Create a NULL_BLOCK to replace null checks against blocks:
      - Now isGiven() on a block tells you whether it is supplied or not
      - yield on the NULL_BLOCK throw the correct exception
        - We were not throwing this correctly by most callers with my landing of
          the block branch
        - We were generating NPE in cases where we called something that requires
          a block and supply none
    - Block.blockObject => Block.proc
     - Rename and type since this is just a convenience reference for association
       from block to what proc it might represent
    - Remove unused blockAtCreation (this may become relevent for Ruby 2 but why do
      it now
    - Remove ThreadContext and IRuby from Frame
    - Remove Scope
    - Put Visibility directly on Frame
    - callingzsuper dead code
    - Now that modules have a proper superclass we can get rid of special code in
      callSuper
    - ArgsPushNode.childNodes should not return null
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2956 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d1e187ee1a48a02764375e108a6f62ab580de2ad
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 6 04:18:52 2007 +0000

    First round of changes for JRUBY-565, converting RubyString's internals to byte[] and using PLAIN encoding for most uses of Java strings internally. More to come, including improving (and re-fixing) UTF8 support.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2951 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b9e4c483f2017ed6fbd35af4ea975671b329797b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Feb 2 15:23:04 2007 +0000

    JRUBY-496: singleton class chain structure malfunction or singleton methods not properly dispatched
    (by Marcin)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2922 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 71b3014fc5edfb74099ae81afb70126a8b21f5f1
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Jan 28 18:18:14 2007 +0000

    Fix method_missing to handle a blank slate correctly.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2865 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fa021e6350a9913aec4080deb761bacd7e9414e2
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Jan 28 17:44:32 2007 +0000

    JRUBY-488: Kernel#dup, Kernel#clone and initialize_copy should obey MRI protocol
    
    Patch by Marcin
    
    Nice...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2864 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 17239a4052e7fd7b615b763b7281cd58910f43a5
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Jan 28 15:33:46 2007 +0000

    Fix for subclassing Module
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2862 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 80500bebf1b4741cf52a1eb5e2a8a1c51326b3c3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 28 03:57:29 2007 +0000

    Nice, simple fix for the marshal failure on modules for JRUBY-472. Modules that define public functions *do* need a singleton class on which to define them, since their metaclass is Module (and obviously we can't be defining a bunch of public class methods on Module). Left the singletonizing alone, but when the singleton classes are created, I ensure they have the same ClassIndex as the metaclass they're created from, so marshalling works correctly.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2858 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c9db4cbbcca01aa65287532b82330e37ff81173
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 28 03:44:22 2007 +0000

    Big set of changes for marshalling bug JRUBY-472; getting closer to having things sorted out. One known failure in "ant
    test" is due to our modules defining methods on a singleton class, which appears to be incorrect and harder to fix. I'm
    on it though.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2857 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5c0789044de8703f41bdf83f29552ba29ad048f6
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 27 17:31:22 2007 +0000

    JRUBY-484: Reverse Iter Call relationship in AST and also pass block via Java frame versus maintaining blocks in TC
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2851 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 97b2ec4b358263fcd35023bb1f1b6c7cdba88a53
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 14 00:59:44 2007 +0000

    Big commit of work from last week:
    - Beginnings of STI-based dispatcher
    - CacheMap modifications to make STI "safe"
    - Code for JITing pure Ruby methods (currently disabled)
    
    Additional work on STI and the JIT will come along shortly. This will also fix current trunk failures during ant testing the compiler.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2732 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a3224d7e34d9b27b1236fc1eaaf97ea36d149cf7
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Jan 11 10:52:56 2007 +0000

    Fix for JRUBY-426 (changes to metaclass done in initializer block to Module.new doesn't have any effect)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2716 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6503e77d53e6c67900f3fbb63148f80358899509
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Jan 9 11:43:23 2007 +0000

    Fix for JRUBY-417, redefining constants should warn, and also change a few unnecessary double settings of constants in the core init.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2703 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d35207c93644f12a05b8f9629ecfafa07b14b43a
Author: Nick Sieger <nick@nicksieger.com>
Date:   Tue Jan 9 02:02:20 2007 +0000

    - fix for JRUBY-327 (Miguel Covarrubias)
    
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2701 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b390103c285ce373130c474193f69b87f98fb013
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 9 01:04:33 2007 +0000

    Damn the torpedos...full steam ahead! Committing fixes for JRUBY-408 to get them out in the wild. There are remaining fixes to be made, but ant test passes, gems install, rails starts, handles requests, and generates.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2700 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f00dfc9fcfb4c7a9ffbe605bd4cbf08cd2e9cb60
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 6 01:42:03 2007 +0000

    Committing changes for JRUBY-405. I've accomplished what I set out to do, which was moving all the yield logic into Block and other appropriate classes. Other block refactoring, including adding a block argument to the call pipline, will come in other JIRAs.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2685 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1f2a54aceeffa2a272966d2f1642089b447c999c
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jan 1 00:14:37 2007 +0000

    Quick unused import cleanup + remove WrapperCallable
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2632 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 32e3222d3defac9ee5f76c3651f4699f62271215
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Dec 30 22:00:22 2006 +0000

    merging refactored method stuff plus fast/simple invocation changes to trunk
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2623 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6f1403beec9694c559da08849101de395faccd1f
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Dec 21 14:33:49 2006 +0000

    Fix for JRUBY-359
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2579 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8d8de8e5818236d5f0bfd12d908f8ff27f51855d
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Dec 4 22:24:07 2006 +0000

    Fix for JRUBY-320, by Anders Bengtsson
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2540 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 233ec03a72f5bddc2e09aaf5cd106b639a7ede2e
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Dec 4 22:11:25 2006 +0000

    Fix for JRUBY-324
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2539 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3cd87a03d9ff599871bd14f49c218d1045bca20b
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Dec 3 14:26:43 2006 +0000

    Fix better autoload for Camping, and autoload? as per JRUBY-322
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2534 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 35fcfa199a292c2650d9d9c02171d20c23038759
Author: Ola Bini <ola.bini@gmail.com>
Date:   Fri Dec 1 06:10:06 2006 +0000

    Remove 1.5isms
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2522 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1278c5bb3507a052d150d814f15453542ae41aed
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Nov 26 13:38:44 2006 +0000

    Fix for JRUBY-234, NameError.name, by Anders Bengtsson
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2486 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5bc71e28b1eaf86dad8873c8a5a57fd14fdde448
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Nov 25 20:19:51 2006 +0000

    Fix for JRUBY-149
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2484 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fcf4db808f64fbb066358ec32a0930175a8bc8bb
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Nov 25 17:15:58 2006 +0000

    Fix for JRUBY-286 (Module.new should call block). Patch by Anders Bengtsson
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2476 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2b03a33fdc382e7dc10b580dfa638c0a974dfc97
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Nov 25 11:57:15 2006 +0000

    Merging of openssl branch
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2463 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8bc77fd935108392c0bf8a671462f28f423e48c1
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Nov 18 01:46:36 2006 +0000

    JRUBY-254: TypeError instead of NameError on inheritance + other class error fixes
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2433 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 174e3d01468001668ab299227d4af11aea65341c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Nov 14 03:09:59 2006 +0000

    damn the torpedos! full speed ahead! landing enebo_lexical branch changes plus TC-passing optimizations and a few small compiler updates
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2423 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d4713eeade4a5c6f19ee665e0ce513d87928f51f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 2 22:26:31 2006 +0000

    committing compiler changes before local var optimization
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2396 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8ba215b45e1c5d4c7c521b253d9715a3cfdd6a34
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Oct 9 12:34:03 2006 +0000

    Next version of inspect. Makes instanceVariables synchronized, and adds better inspect for RubyFile and RubyModule. Fixes JRUBY-170
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2316 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 10c73ed2ca5db89e8e32669e4a9d4a933d0f98ca
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Oct 8 11:54:09 2006 +0000

    Fix for JRUBY-188 (class and module names)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2314 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f7fd42a4ed234e7ec538d58da2024183eee3d0f4
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Oct 5 15:25:13 2006 +0000

    JRUBY-80: Duplicate Module ancestors (by Miguel)
    
    This is a substantial change to module include logic (much closer to original MRI logic).  I have run this though gem installs, a simple set of Rails actions, Rubicon, and our tests and it seems to not cause runtime problems.  Plus it fixes included test in this patch.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2291 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 04cbb5484e3bccf56ea9dbf9c6b385512aab5f57
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Oct 4 16:53:02 2006 +0000

    if isIncluded() : mod.getNonIncludedClass : mod is extra work
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2281 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4eb85a4aa5b1c369fedbce19adcc69a844fc7c69
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Oct 4 16:42:09 2006 +0000

    Landing charlies latest perf changes from his branch to trunk
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2280 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 524049357e360ba81a21756f54071c67d3796180
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Sep 7 01:40:03 2006 +0000

    merging headius to trunk
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2232 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a629a570985930f1dc88f37bf2c585dfe4ff6fb2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 17 01:38:04 2006 +0000

    merging headius branch to trunk
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2204 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dc9ebc85bd64040a28aeb6d23b3a4c90f21a9b7b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Aug 5 05:54:15 2006 +0000

    optz: avoid multiple calls to IRuby.getCurrentContext in a single method
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2165 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9d02f63b707086a93b22e969524a35122a64e67e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Aug 3 03:41:10 2006 +0000

    fix for JRUBY-51: reverse the order in which multiple module args are included in RubyModule#include
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2163 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a14245bc4dfb62189e0f770f1a6bd53ce2716131
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Apr 23 14:34:30 2006 +0000

    - Regexp.inspect was adding extra '\\'
    - Module.attr_accessors were not throwing ArgumentExceptions with args
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2013 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dbc75f5775b42f401554a0465098c530e42532d6
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Apr 22 22:54:21 2006 +0000

    - to_s/inspect should return IRubyObject (inspect in object by default calls
      a method which may not actually return a string -- kaboom)
    - MatchData.inspect should return #<MatchData:0x14ae2c1> not to_s
    - Remove unused import
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2010 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a3dd185aba4076399f6305a523d16f3f6f3c091e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 22 04:55:07 2006 +0000

    define_method with a block in C Ruby supposedly does an instance_eval to call the block; the behavior is very similar (or identical) to treating the block as a lambda, so this is a simpler, perhaps temporary fix for that block explicitly returning
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2006 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fa18cf1c1506d7dcf515c410c6af2e9ea36a87fe
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Apr 19 02:45:13 2006 +0000

    Module.new.name and Class.new.name should print out "" (RoR fix)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1994 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 13549bf865d35e626ce2deaa58d63646f96aba39
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Apr 16 00:52:29 2006 +0000

    - modules/classes which undef_method should not see that method in instance_methods when actual method is defined in a derived class
    - Remove bogus 'warning: Found '=' in conditional, should be '=='.' in logical && and || expressions
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1990 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5e2d21a7295d01b2d891cfc8c8e67af99a3d858e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 28 03:06:16 2006 +0000

    committing kernel/object method fix to HEAD
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1957 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 673283730ed4ee45976c20e67228b3777b9a976e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Mar 20 15:08:45 2006 +0000

    lazy method loading we hardly knew ya....
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1928 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d166adca82dbf831b1e455c4d157b0033e10a6f1
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Mar 17 21:24:54 2006 +0000

    fixes for super issues in modules; removed 'new' and fixed ancestors
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1921 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5073cc752efc231540d1aa632ff959ad6cc1aeda
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 9 20:02:46 2006 +0000

    merging eval, array, lastclass, and jirb changes from cnutter_work1
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1916 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 03eb64fbb08410a46f7ac9a30bd7029840410c7f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 6 17:44:50 2006 +0000

    fixed: modules included via multiple parent mods or classes prevented mods from including successfully
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1910 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 22347d0716e4477e47b1106e1cfec4b84364a038
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Feb 19 20:46:13 2006 +0000

    Error message does not match ruby...Trivial fix
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1889 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a1b8fc1d456e3d5c6e01579b88773383068aa85c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 10 21:53:27 2006 +0000

    merging changes from cnutter_work1:
    - cref fixes
    - loadservice fixes for irb
    - binding
    - misc other fixes from playing with irb and RoR generate script
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1878 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1d43870a42678f709851fcd9349d32a5f5be0dca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 2 19:51:50 2006 +0000

    merging cnutter_work1 to HEAD
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1869 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e71eea802963bd94f358262ec9e975719174657e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Jan 23 23:12:23 2006 +0000

    module comparison operators should return nil for modules/classess in different branches of hierarchy
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1864 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b98e7c8429dbb9a3d7aa7c6c8a3026a44f027a71
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Nov 27 23:29:58 2005 +0000

    moved frame/scope/other stack manipulation into ThreadContext to centralize it
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1837 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a679fc6a62c31df6b5b1bae3b12d0735c964ee72
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Nov 13 14:55:57 2005 +0000

    Add Module.extended
    Type check without crash on Object.type_of?
    Type check Object.extend arguments
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1829 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2101b189741a176812aef3af116f64830bd42223
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Oct 29 00:53:50 2005 +0000

    modified setRubyClass/getRubyClass crap on ThreadContext to use a stack, so callers don't have to save the "lastRubyClass" to reset it later
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1819 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d6b9f9ff5a29066e5f6ebf9a1178356232c1eb2f
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Oct 28 21:39:04 2005 +0000

    Lazy loading of java proxies instance methods [dramatic speedup of including java classes]
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1818 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c0de34dee5f649017453c9ff70198fb178343d2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 28 15:47:18 2005 +0000

    refactoring: decoupled all code from manipulating the frame and scope stacks directly; eliminated custom stack impl for frame stack
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1817 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 689e4cee8f6335d3271b7d65173d0100dfeb7be5
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Oct 27 17:06:51 2005 +0000

    RubyModule.call -> RubyObject.callMethod (allows instance.callMethod(...)) [Note: Should be renamed RubyObject.call]
    Remove redundant method_missing
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1813 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e8391ba0c663add06aa24ff66fa21afc8f3f78a0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Oct 23 03:16:31 2005 +0000

    committing LastCallStatus refactoring...it's pretty benign, and the exposure is minimal
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1809 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f2e19e2de471928d5d46649579cb592e1ab0d880
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 21 20:10:35 2005 +0000

    bug 1303983: partial fix for constants in modules' singleton/meta classes accessed by includers of that module
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1808 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 01ca9286afda4864b9a97217ebe1c30f79ccd45b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Oct 20 16:21:41 2005 +0000

    big refactoring of method calling, moved scoping/framing resposibility to methods themselves, eliminated RubyModule.call0, renamed method callables appropriately
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1805 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ebd70b6d4c06376091d96db9bc904a9e2e38dc41
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Oct 16 06:04:40 2005 +0000

    began converting methods into direct-invokable, first-class object style
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1802 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4dfdacd80c56018084c618f3bbab7b542653d95e
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Sat Oct 8 13:07:06 2005 +0000

    Introduced IRuby interface for Ruby runtime object.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1798 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1f43f09de6f31145480c052c96f6bd0302d4a2e4
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Oct 4 13:56:25 2005 +0000

    In includedModules we were not synchronizing on correct methods map
    Minor whitespace conversion tabs -> spaces
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1794 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d4b56872e7af16389e67bf607ab8134650a48322
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 4 05:15:43 2005 +0000

    studying; added some comments as I went
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1793 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 69de2ce2ebcf62309915d2a26cc566ea3468656b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 4 04:19:07 2005 +0000

    better implementation of searchMethod (it's not broken!)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1792 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9bda6b40fb69383d77141d7731986315bcd83e5b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 4 03:10:57 2005 +0000

    cleaned up getName, removed unused code
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1791 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 09d4857ee5c81065c8724a9fcf8d58b5b4f9cbfe
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 4 02:46:48 2005 +0000

    reduced searchMethod to a single, iterative implementation
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1790 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e900e46383f779fd0fc87a141ea7e96270add07c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 3 07:32:36 2005 +0000

    added a comment
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1787 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0974529e06ae132e9b0cf139e6b19724ef147ba8
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Sep 20 20:30:55 2005 +0000

    Add Module#included (1.8 method)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1769 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fadc913d18840665885a90a4fa066fb431c41bc4
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Sep 19 19:30:14 2005 +0000

    Fix caching Error
    in AddMethod we always added an UndefinedMethod entry.  All classes ended sharing this same ICallable and under pseudo-mysterious scenarios it would wipe out valid method definitions.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1766 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 36ec84bb4bc5dbd391c6ddb676b2faeb380f0539
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Sep 6 14:57:59 2005 +0000

    merging exception-removal changes to HEAD; EvaluateVisitor changes left on branch for now
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1757 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ddee2e39cda25b82db1da16ca4f8a161d84488ef
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Aug 28 18:43:14 2005 +0000

    We must be able to alias an alias (my original logic for the assert was flawed)
    Included modules must not cache methods it calls in the original included module
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1740 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ca6b16e996ea9af83ce593594b9c69b9364a9924
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Aug 28 13:29:33 2005 +0000

    Kill RubyClasses (core class/modules now initialized in Ruby)
    Store all top-level classes as constants within Object (fixes things like Object.constants) instead of second datastore
    Always load all core classes (remove lazy loading)
    Convenience function RubyModule#getClass added
    Convenience function Ruby#getObject added
    JavaObject and JavaArray are now Java::JavaObject and Java::JavaArray to be consistent
    classes defined under another class/module are now defined in the parents creation routine
    Removed some masking warnings
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1739 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 31d6374bddf26d6c286c9f865a85d5ac17ebb941
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Jul 13 16:49:30 2005 +0000

    New method caching system
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1730 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 146c798d2f3706355f835e03b4ed62688dd10112
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Jun 25 22:08:35 2005 +0000

    Made some mandatory classes during runtime initialization remove useless lazy loading check
    RubyEnumerable is not needed
    Made RubyModule and RubySymbol have their own metaclass
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1729 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a36ff3729d6a7f2c61eb51273fcee3d3bd371350
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Jun 18 14:47:06 2005 +0000

    More moving towards java.util.Stack contract for remaining Abstract Stack users
    args are never null (we no longer null check with a few strategic asserts)
    getPosition() always returns something from Nodes (we no longer null check)
    Remove AttrSetNode (fake parser node) in favor of CallbackMethod
    we were pushing/popping an extra dynamic vars set every yield
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1715 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e83dbfadcac8b3a15bf326de9a826209fe49c87c
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Jun 16 18:55:49 2005 +0000

    Fixes some concurrency issues in method cache and object space collection
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1712 961051c9-f516-0410-bf72-c9f7e237a7b7

commit abfe85d15f992ecf4447b155d177050fe2239c3b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun May 8 16:58:03 2005 +0000

    Remove classStack with two RubyModule references (should fix at least one concurrency bug with blocks)
    Object#methods returns protected methods
    RubyModule.getConstant a little more sane
    f = Class.new; class << f was not working properly
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1687 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f4c661e3cf47cb034dbddb5597d53f3d9e6253cf
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue May 3 20:43:24 2005 +0000

    Remove unused function and make a public private (we do not want consumers changing superclass)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1686 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3ede202d0612738913c251608fd955d6b23c9527
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Apr 29 14:29:56 2005 +0000

    Fix display class/module names to match ruby
    Metaclasses now properly print out #<Class:Foo>
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1683 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a036caac77f004164f13cd701d62ed5fcfa9e94f
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Tue Apr 19 15:11:29 2005 +0000

    Elimnate ArrayStack in favor of java.util.Stack
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1677 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 183b222f77bc72985c7fbfccce508f686d1b57c4
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Apr 10 20:23:49 2005 +0000

    Most uses of getConstantAt does not want to search superclasses (move to single case where we do ... this needs some serious refactoring for 0.8.2)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1673 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 98ee12f2d432a22f3f6972e006670cf2a93efedf
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Sat Apr 2 22:54:39 2005 +0000

    Corrected define_method to reference the correct argument index for the body.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1665 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7dc89f3dac103a77e0bc8d01f0457ce7336b57a3
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Sat Apr 2 21:49:10 2005 +0000

    Fix problem accesing included constant from outside class.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1664 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 750e66982e97bcb72545a39ceacf6ee32a52a135
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Mar 30 04:41:51 2005 +0000

    Fix ::Constant lookup (colon3)
    Fix same-named constants in different namespaces from clobbering each other
    Fix javasupport to use proper eval depending on where it is included from (uncovered from above fixes)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1653 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f11a64355c32c907a28e8c0cb8ade2cfee15cb46
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Mar 22 04:56:36 2005 +0000

    All Proc.clone to work
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1630 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 69da7dcd0e9a6acf568fea4c7a3672d1226cc8c3
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Feb 5 22:04:17 2005 +0000

    Let CONST=nil; CONST actually be nil and not a NameError
    Remove hasInstanceVariable()
    Change getInstanceVariable() to return null when no such constant exists
    Add some experimental convenience functions to certain Java objects (<=>, each, <<)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1596 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7a83c48af56081c1c2132111d535f28d10cf3afb
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Dec 31 20:55:52 2004 +0000

    Update license to GPL/LGPL/CPL
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1574 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7fd129dfcc9660fb6d3c382cc48a2692d03890ca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Dec 27 02:06:01 2004 +0000

    trivial fix for most of the method scoping issues
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1569 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6afb419341d5d873f015827251b84bcbabd83363
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Dec 26 10:58:58 2004 +0000

    my attempt to fix Charlie's scoping problem
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1563 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d27bd5bcb36c7670bce31c6a2a4c22b11fdfa5c4
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Dec 23 04:35:12 2004 +0000

    Allow anonymous classes/modules assigned to a constant to get that name.  Patch from Kiel Hodges.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1532 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 49aa6e52e2393f8c17a3c126aed59b8fd08b68aa
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Wed Dec 22 13:13:24 2004 +0000

    fix class clone bug
    fix freeze/taint bug for cloned/dup'd objects
    add test cases
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1526 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 40383241ec93bfe226df70f8338e54bf9255140f
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Wed Dec 15 23:45:14 2004 +0000

    - Simplified method definition for builtin classes.
    - Added metaclass support for builtin classes.
    - Added ruby 1.8 allocate support.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1489 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b72a2862ae5b2f01f9a767ef2ce248fd785857c4
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Mon Dec 13 00:26:02 2004 +0000

    Replaced org.jruby.util.Asserts with Java 1.4 assert.
    Fixed String#capitalize.
    Replaced RubyString.nilString(getRuntime()) with getRuntime().getNil().
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1482 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a4343ec6ae855b76e88798a103594f92a7399b67
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Dec 12 16:59:59 2004 +0000

    fixes a bug that singleton classes will cache old method definition of their super classes
    and will clear their method cache.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1477 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8081fdc23459ab3e7b62155a53b7f18b561f93c1
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Dec 12 14:55:16 2004 +0000

    removes type parameter from CallbackFactory.getXXXMethod()
    and removes CallType from AbstractCallback and ReflectionCallback
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1476 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 870e1da9b41bfdbae259e1fc5f18fc8b76686998
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Dec 12 09:25:42 2004 +0000

    removes the instance variable runtime in RubyObject
    reintroduces the variable in RubyNil, RubyBoolean, and RubyClass
    delegates all calls to Fixnum,Array,Boolean,String,ArgumentError,IndexError and TypeError.newXXX to Ruby
    fixes all imports
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1469 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3688434d15771590d5d53322ba5ddc5e1da637e8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Dec 11 01:12:57 2004 +0000

    renamed Method to RubyMethod and UnboundMethod to RubyUnboundMethod
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1455 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c15ab526440e25745b45a2ab3aaab1b5a7334d1f
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Nov 28 14:54:57 2004 +0000

    code cleanup
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1428 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 39c53cd7958c3b95ef4124a65a62d1e1cac24c84
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Nov 21 05:36:33 2004 +0000

    fixes for RubyNil being 1.6ish (no to_f) and unused
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1413 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1562832239a5e5d73b1ee98dade51601e343257
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Nov 16 20:30:04 2004 +0000

    Rename references of org.jruby.Ruby from ruby to runtime.
    Remove unused methods from the IRubyErrorHandler interface.
    Add "same" method to RubyObject to fix "equal?"
    Fix JavaObject cache.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1408 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 111ffceb6641644db641863784ba47cc459fef17
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Oct 15 22:02:31 2004 +0000

    Rubicon fixes. Module#ancestors - do not print undefd methods. Module#instance_methods - Remove kernel ignore check. Module#newMethod - Throw typeerror instead of nil
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1342 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 38986c078c0e951e68bca7521240fd133d68c8e1
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Jun 1 16:17:23 2004 +0000

    constants refactoring
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1310 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 83ca1988efc1e67d360010f573b77a83d9d9bf03
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat May 29 23:26:55 2004 +0000

    Messy Commit: 1. Module refactoring (fix bad unit tests) 2. String additions (casecmp, lstring{,!}, rstring{,!}) 3. Allow equal to return nil when needed. 4. testFrozen consolidation
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1309 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f5c9a1ebd775712f2dc086acfce1a14a123ec632
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue May 25 15:54:04 2004 +0000

    Another round of star arg grammar fixes
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1302 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f73e34300ee97d2f4b138bcae10174f538fe99de
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Mar 12 20:55:53 2004 +0000

    A Module knows enough about itself to not need ThreadContext calculate nesting for it
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1282 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 158bab74478b3ca0925ddbd2a5c73d4ef53d75f3
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Mar 12 19:38:42 2004 +0000

    Coalecse various getName signatures to just one
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1280 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 78aa92151dae92d79ef468340e5aa55c4751851b
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Mon Mar 1 19:55:36 2004 +0000

    Only flush specific name from method-cache if possible.
    Removed a little unused code in frame classes.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1258 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 69a9625a1a852922a24f8e341a28d367fedb2392
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Mar 1 19:03:25 2004 +0000

    Consolidate code to determine classname/path down to a single code path.  Guarantee parentModule is never null and always ends up at ObjectClass
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1257 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a16b4a3596853f2153bfe0df0a8cbe54382d5d58
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Feb 28 23:00:58 2004 +0000

    Removed a lot of old IndexedCallback stuff.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1254 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0e90a2210b814d3cdd4f707ee722b4af75c46fa5
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Feb 27 15:29:37 2004 +0000

    ClassNodes were not registering new classes under the proper namespace (module/class).  Added testcase.  Removed extra inheritedBy call
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1253 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7cc17377cbd013da3a67c3ddceecd9d4672c5204
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 26 17:18:59 2004 +0000

    Fixes rubicon errors for Module ModulePrivate, and Access.  Minor refactoring.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1250 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a036be3d92fca384b14fde3b27cdd7dd828aed1b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Feb 23 20:05:47 2004 +0000

    Assignment of class variables should be allowed when they do not already exist.  Simple refactoring.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1245 961051c9-f516-0410-bf72-c9f7e237a7b7

commit da1e0993189b265528a6aa5108d3ce668d87643f
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sun Jan 11 14:39:44 2004 +0000

    Added an (optional) CGLIB implementation of Callback.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1210 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e7f721acfb6dd4252c6b7c20c7c1139b4a3a8e2f
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Jan 8 18:32:22 2004 +0000

    Moved Callbacks to their own package.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1209 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d8c7bdab8430bb1f7826f7cad86d6c1aa9513a82
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Mon Dec 16 21:12:11 2002 +0000

    Reworked class and module lookup.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1171 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 319a529cc1666e267b662b895d6c0d0409a6a838
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Dec 5 17:03:33 2002 +0000

    Small compiler fixes.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1163 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 13d412b43214651ba9eeb37a64cf767f800ff593
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Tue Dec 3 21:55:24 2002 +0000

    AliasMethod refactoring.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1161 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 267b50eaf1f784dcb395e5470c35180128be5a50
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 20 20:56:08 2002 +0000

    Some visitClassNode cleanups.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1149 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0a47b75206b354a71f44403969da5da8b33c2662
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 20 20:10:56 2002 +0000

    Removed Namespace entirely.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1148 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 042ffdc92fad4e1ba53771dea8e1f7acd98fce77
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 20 18:11:34 2002 +0000

    Removed the parent-reference from Namespace.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1146 961051c9-f516-0410-bf72-c9f7e237a7b7

commit aa13ba4003e9a41f754a04d31d963f7054476866
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 20 01:05:17 2002 +0000

    Introduced a parent-reference for modules.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1145 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f7f3ecbecc82a32d63df5e62442ebc97a0faeee1
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Tue Nov 19 23:31:21 2002 +0000

    Removed some dead code; Changed getConstant() impl. a bit.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1144 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 06e5367e90e48166b55d8b7db5dfb40b4d8b563a
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Tue Nov 19 00:44:50 2002 +0000

    Replaced all uses of getCBase() with getRubyClass().
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1141 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 17dce0f3131da9fdafbea3b8bbaf8e6f1ba548cf
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Nov 14 00:22:33 2002 +0000

    Re-implemented Module#nesting().
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1121 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 82ec4b9b5c4588e79a7ebd9845469fd42332e81c
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 13 23:52:35 2002 +0000

    Reverted all namespace changes. Our unit tests are in some cases crap, it turns out. ;)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1120 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3b5314cc602e90f6295da87ef145fc29369655b2
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 13 22:35:15 2002 +0000

    Removed the use of namespaces for Module.nesting()
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1119 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6f016a73c3a027804fa73be3128c8a0ef8f0bf1b
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Nov 13 21:33:29 2002 +0000

    Replaced some usages of namespaces with the class stack.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1113 961051c9-f516-0410-bf72-c9f7e237a7b7

commit db825996b1895dae1eb261e8664a736f73cdad4f
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Nov 9 16:59:49 2002 +0000

    Some thread-context refactorings.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1098 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b2742932f1f4d011bd018fba4f57aec4303e832a
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Nov 9 16:20:08 2002 +0000

    Evaluator refactoring.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1097 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 13e69799e76f1dd3ab5912856ce9b0d9ff6e99af
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Nov 9 15:12:41 2002 +0000

    Moved classStack and wrapper to ThreadContext; Cleanups.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1095 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 83cf71c596adce0dc29b2a86c9e7e88e1e7b59f7
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Tue Oct 22 23:03:54 2002 +0000

    Refactoring; Made value objects of a few Node objects.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1010 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 481d51b1384707b5d4097599f12ca279adff1f41
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Oct 17 00:23:48 2002 +0000

    Moved all method caching into RubyModule itself.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@995 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3e180670fe90ddd0f45ef3a94da6e740f98764ca
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Tue Oct 15 16:11:08 2002 +0000

    Method lookup refactoring.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@990 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a5e652b9746308e5d96ea43dfe2097b5ea5bfc9e
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Tue Oct 15 15:46:33 2002 +0000

    Refactoring of method lookup.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@989 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 483b75207962bf79541bb54060254552c5f88ac4
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Tue Oct 8 12:16:47 2002 +0000

    Renamed undefMethod to undefineMethod
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@958 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 555a29b04ada9ce37bb2178796ab48cf420b8241
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Sep 26 23:50:33 2002 +0000

    Cleaned up builtin library loading.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@910 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fffe7aa25510c5fa1f975232bea0ef0fd24762d7
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Wed Sep 25 00:25:28 2002 +0000

    - add BSF example
    - fix BSF Engine
    - fix javasupport bug
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@898 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5264e4713f8cb9b1c377b68d4257a87f4df20bbb
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Sun Sep 22 08:17:24 2002 +0000

    - add advanced javasupport example
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@883 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 06f34f3a6e4941994e00090d1365045e229680be
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Sat Sep 21 23:05:19 2002 +0000

    - Some MetaClass refactorizations,
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@881 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d667713f53902eb2be9e22076d1ecb9c190388a9
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Sep 17 13:07:22 2002 +0000

    - performance boost by removing "new IRubyObject[0]"
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@839 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e3ed0e4853fbd155f47e00d3e07b832d1574f37d
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Sep 12 12:08:47 2002 +0000

    Small cleanup.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@805 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0f597585eeb60edaa2dc6a7ce72cc9c02fcd2e57
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Sep 12 11:55:39 2002 +0000

    Removed our special RubyMap and RubyHashMap, we now only use standard Map and HashMap.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@804 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0d32daed9777448bdec0ff02ac5d61c1f1fa6786
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Wed Sep 11 23:46:31 2002 +0000

    Interned a few places dealing with method names. Seems to benefit performance slightly, and definitely should benefit memory usage.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@803 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c77b91f42c4f3810140d44cbe603248a1d52b7ee
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Sep 10 15:18:12 2002 +0000

    - restructure of the code tree.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@782 961051c9-f516-0410-bf72-c9f7e237a7b7
