commit 2df9b8c03f613f5e6429849747c684ba098cf023
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jun 19 16:00:14 2013 -0500

    Avoid using $~ as an out parameter in Regexp search/match logic.
    
    This fixes issues where threads would step on each others results
    by updating $~ between the time the match was created deeper in
    the stack and retrieved higher up. The result was that the match
    logic would return another thread's MatchData.
    
    My fix is to never read $~ in these methods and only ever write
    it; this does not help the issue (across all impls) where $~ is
    shared and not reliable across threads, but it should fix issues
    where it was being used internally to pass MatchData to calls
    higher in the stack.
    
    Fixes JRUBY-7167 and JRUBY-7176.

commit 553a344cb28bfc4953b486f97f12d0443f0cb0ca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 13 13:25:01 2013 -0500

    Move lastline getting/setting into context, to hide it.

commit 3fc004fbe83155a4e02891de955d37e26e654ec8
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 13 13:03:47 2013 -0500

    Start moving backref logic back under thread context.
    
    In order for us to start optimizing backref logic away, we need to
    hide how it is stored and retrieved. Moving back under
    ThreadContext allows us to have more flexibility in implementing
    new backref mechanisms.

commit bcc26747f56e05bd1ceda21d97fd4b0bc5255f0c
Author: Ron Dahlgren <ronald.dahlgren@gmail.com>
Date:   Fri May 17 16:15:20 2013 -0700

    Use RubyModule.JavaClassKindOf fixes jruby/jruby#614
    
    I've changed all of the relevant cases of anonymous KindOf classes to
    use the new JavaClassKindOf. This cuts down on some of the noise
    produced by anonymous inner classes, especially given that these
    replacement points all had identical implementations.

commit 042dd0115ba5fcdb6fd2e0d2abeb81c3bab134de
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 6 13:55:26 2013 -0500

    Enlist interruptible Regexp match in Thread#kill/raise. Fixes #792

commit c2c943229930781193ba0fb8b96f0080f775f38d
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat May 11 08:37:15 2013 -0500

    Make regexp interruptible.  Regexp will throw InterruptedRegexpError < RegexpError

commit 2e6a80a3bac436f748ddf1cbd58cb2eec394329a
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Thu May 2 00:34:19 2013 -0400

    Regexp#options should include FIXEDENCODING and NOENCODING when enabled

commit 452a1f4c7b0ec35609ac7605afa7fb13b581dd99
Author: Alex Tambellini <atambellini@gmail.com>
Date:   Thu May 2 00:43:05 2013 -0400

    Regexp#initialize should raise a SecurityError on a Regexp literal

commit d00e21dfd6291f1a205686458f9502a1e8fc86e2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Apr 15 16:26:32 2013 -0500

    Avoid using backref within native logic.
    
    Some native-implemented methods like String#to_r and to_c used
    Regexp logic to break apart the string. Because they called
    through the same paths that Ruby code calls through, they were
    forced to prepare for and use backref ($~) to hold the MatchData
    object. My changes provide a backref-free path in RubyRegexp and
    modifies our native logic to use that path. This eliminates the
    need for a DynamicScope to be created and pushed along those paths
    and should provide a path forward for eliminating scopes from Ruby
    code that does not directly reference $~ and friends.

commit 798b0b70381f20c6a238471a258d732adc3948e7
Author: Jake Goulding <jake.goulding@gmail.com>
Date:   Mon Feb 18 20:59:07 2013 -0500

    Symbols can have encodings that need to be Marshaled
    
    Add a new interface to the few special objects that can be Marshaled
    with encodings.

commit 61678ac1a2514a9932276f8d527816a5980a94b3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Feb 25 20:41:40 2013 +1100

    Fix more references to CPL.
    
    The phrase "Common Public License" was split across two lines in
    our default header, which caused it to be missed during earlier
    search/replace. Also, we did not replace the CPL URL in the
    header with the EPL URL.

commit 040d8493c833913e9bda31481329d73d55fadd3b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Feb 18 14:43:21 2013 -0600

    Reduce some spec failures (which strangely are ignoring their tags)

commit 330fef3b0fc18af477ccea19bd278669667f31bb
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 12 14:49:29 2013 -0600

    Switch JRuby's CPL license to EPL.
    
    Governance of the CPL license was moved to the Eclipse Foundation
    at some point in the past, and Eclipse blessed the EPL (Eclipse
    Public License v1.0) as the successor to CPL. Because the CPL
    contains a clause allowing transparent upgrades to future blessed
    successor licenses, we can make the move to EPL without
    re-contacting past contributors.
    
    The change in going from CPL to EPL largely just removes some
    punitive language that apparently made many companies nervous. All
    other language in the license remains identical.
    
    Several documents about Eclipse's move from CPL to EPL are here:
    
    http://www.eclipse.org/legal/cpl2epl/
    
    Note that Eclipse's move came before the blessing of EPL as the
    upgrade path for CPL, so they had to do a bit more legal juggling.
    With Eclipse now the administrator of CPL and with their blessing
    of EPL as the upgrade path for CPL, all we need to do is make the
    move.

commit 55fa98c54db5ac297aea8763c23134c0d8481a24
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Oct 8 15:50:34 2012 -0500

    JRUBY-6922: Regexp#match interpets pos parameter in term of bytes instead of chars

commit 1366ea8c4509dfaa7af8fd4f9f094d3b6775f868
Author: Mark Rada <marada@uwaterloo.ca>
Date:   Fri Sep 14 11:39:46 2012 -0400

    Add missing space to Regexp exception message
    
    When checking the argument type, if an argument to the Regexp is not a
    String the exception message is missing a space between the class name
    of the argument and the word "to".

commit b8181cda909f6e42d7c0b7fffaabbe2a502f273b
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 27 02:19:54 2012 -0500

    Inline all calls to ThreadContext.getRuntime to access the field.

commit 47fd4acb720385b7d7852e1876e28520aa0cf484
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 27 01:55:07 2012 -0500

    Remove all safelevel checks throughout JRuby (plus misc cleanup).

commit c550df63c678d05547b8fed04aeb3f955c66efc9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu May 17 12:02:27 2012 -0500

    Fix #174
    
    [JRUBY-6668] StringScanner#scan_until spins forever on UTF-8 data
    
    We were not preparing the regex properly. Added that, and the
    given example completes normally.

commit a5c6518aef212e3252667ed9ef8e72d7fb191b09
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Mon Mar 19 22:27:55 2012 +0100

    Fix 1.9 Regexp.union

commit 56f8273d61f0f2d8df488b16ce84f6799ce99736
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Mon Mar 12 20:23:26 2012 +0100

    Move to a better location

commit 95a04eba079e6e5fe37d7a5c94b4d5e1d17f97b2
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Mon Feb 20 23:17:35 2012 +0100

    oops, fix misprint

commit e1a5243a2dcecd09042861c5c517954d436b1b8d
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Mon Feb 20 23:15:52 2012 +0100

    fix for 1.9 Regexp#inspect, test_regexp 8 failures, 2 errors

commit 6b9d688be97d8a86d7797c0c172741b6a9cdb2ef
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Sun Feb 19 17:52:35 2012 +0100

    '\v' is quoted in 1.9 Regex.quote

commit 8d82e2e9a6323dd0fd557317ee53588599b65831
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Thu Feb 16 23:38:37 2012 +0100

    down to 14 failures, 3 errors for test_regexp

commit 2235235eca60290d4b34132e686b2aa22536facf
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Tue Feb 14 23:48:13 2012 +0100

    Even more Regexp#allocate bulletproofing.

commit aab2e0356d53bb71a9129f8d0ee74ae2bbd34bc5
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Tue Feb 14 23:28:27 2012 +0100

    More Regexp#allocate bulletproofing.

commit 38305c59addbc79304d0a50f325d81287373e37e
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Tue Feb 14 22:03:19 2012 +0100

    Fix NPE in Regexp#encoding

commit f545f8b118adbcc528a03f780cb764b4512b5431
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Tue Feb 14 21:12:02 2012 +0100

    no more Regexp#kcode in 1.9 mode

commit 12618458b0197064c911ad8bc8ef4bfecde6976e
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Tue Feb 14 20:09:30 2012 +0100

    1.9 Regexp::NOENCODING

commit 03ba524de4139a29ebad75005293814cceeffedd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jan 19 21:33:30 2012 -0600

    Fix multiple places that called 1.8 instead of 1.9 regexp methods.
    
    Many places in the codebase unconditionally called the 1.8 versions
    of several RubyRegexp methods that have 1.9-specific behavior. This
    led to hangs like JRUBY-5808, and very likely is the source of
    other encoding-related bugs.
    
    I audited only RubyRegexp methods that have 1.9-specific versions
    and fixed all incorrect calls. Tests and specs pass in interpreted
    and compiled modes. A similar audit for other core classes is most
    definitely warranted.

commit 91d904e66e140b4a998433c314f9514e683c5d10
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Fri Jan 20 02:54:30 2012 +0100

    Remove spurious comment

commit f91cb6b53b6b2c33bc68bcabfb226b08c741fb8c
Author: Marcin Mielzynski <lopx@gazeta.pl>
Date:   Thu Jan 19 22:49:52 2012 +0100

    reenable check for coderange of string that's being fed to regexps

commit 89bab51aa26585718390c4a624b21e4ff7a6d3a8
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Dec 20 16:12:27 2011 -0600

    19: Not wrong but perhaps done twice for code range scanning

commit 0f463349a74ca7859978d7ec3baf94e5688312f5
Author: Jeff Pace <jeugenepace@gmail.com>
Date:   Sat Oct 22 17:40:12 2011 -0400

    JRUBY-6141 - fixed so that MatchData are cloned, so that references to MatchData are not updated with subsequent matches.
    
    Signed-off-by: Hiro Asari <asari.ruby@gmail.com>

commit b0b8ce4079ee1191a6cf7c420f7c8bac92175586
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Sep 15 18:08:20 2011 -0500

    Proper fix for DRegexp and mixed encodings in 1.9 mode.

commit 85710e9e3458ae844c4d717317542ac1986954eb
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Sep 13 16:18:36 2011 -0500

    Missing logic for explicit //n (our embedding logic in JIT will never hit this yet tho) in inspect

commit ebeb2a481d5f69a0f3ef0a15031e99b05198c48a
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Sep 12 14:47:35 2011 -0500

    Move strscan bits under org.jruby.ext.strscan.

commit cb44c8ae404ac41ea78cf0e81af2f814cf5ed6cc
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Sep 2 16:55:14 2011 -0500

    Well a hack in place with a few things fixed for realz in 1.9 encoding land

commit 0f39e7db3af53c21ad48f5291647e3e852ff0ab0
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Sep 2 14:05:31 2011 -0500

    by pass ascii escape check is non-ascii compatible encoding

commit c5ae2619e3646648eef0bdec4cc29774a6b870e5
Author: Jan Xie <jan.h.xie@gmail.com>
Date:   Tue Aug 2 14:12:25 2011 +0800

    fix regexp to_s encoding problem

commit edc7c5baca265b4a4d0bf1ff54a47b1b8f3576cd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Jun 22 00:16:09 2011 -0500

    Fix JRUBY-5840: Rails won't start with -X+C
    
    * Twas using "joni" decoding for the "embedded" encoding used by compiler.

commit 343ed5f7cf65674c7d4d79e87caa7a614d5044a6
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 3 11:44:20 2011 -0600

    WTF cygwin..why change all those permissions!!!

commit 749ab91b05512e371a8485b2dc24e99d3efc9dee
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Feb 3 11:06:07 2011 -0600

    Avoid double to_str on argument

commit a3082bb1db6be88019493c0c6651d2e456dc63b6
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 2 14:24:19 2011 -0600

    Add embeddedOptions to RegexpOptions for compiler to stuff away full options.  Comment out isLiteral check until I figure out why that is propagating

commit 3cd3d5081b9e5723ca04ea66014a51be3d8420bf
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 2 11:16:19 2011 -0600

    If the regexp has been fixed in regexp code itself we need to mark it as fixed

commit d1c27c7121f89c3e12d49d9eed340134d8e8bd26
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Feb 1 15:32:54 2011 -0600

    Remove encoding from Regexp options since in 1.8 kcode has it and in 1.9 pattern has it.  The rest can be figured out based on explicit set kcode values

commit c84e635cf235e2a90809c1f2cafaf2ece59e106c
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Feb 1 14:13:29 2011 -0600

    1.9 version of union (untested). Eliminate getEncoding from Options except during parse-cycle

commit 08ef5546f1d1e09dcf6d60eed0c5dbe3d3ab4def
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Jan 31 16:19:13 2011 -0600

    Ok...need to runtime kcode when kcode default...more refactorings might be coming

commit 73b826c55eea70dccd7fd831b208f70ea96bce53
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Jan 31 15:37:22 2011 -0600

    RubyRegexpOptions will always start with KCode + Encoding and be marked as a kcode default.  setExplicitKCode will un mark it as a default and set it to the explicit kcode (usually set by nesu regexp modifiers)

commit bbe16c0e8d2b64cd4e6f60a58585ef35bcaf71fd
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Jan 31 11:29:36 2011 -0600

    Complete toString output. Somewhat hacky change to fromJoniOptions

commit 73f91a384d3bd9593289f7195537277de8d59518
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Jan 31 10:25:08 2011 -0600

    Simple typo in eql? and small tweak to casefold?

commit 9497a38010a426439e0fcc36ae84458c5fa09d39
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sun Jan 30 10:14:37 2011 -0600

    kcode should also set encoding. Another initializer which needs to set options

commit 567a9f1bafa9ab864ecc927a34a9ef0a74ea5edd
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sun Jan 30 09:59:18 2011 -0600

    Regexp.kcode should be lower case

commit 9ed09c9882de9767f801e7c1f4f77416c345f625
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sun Jan 30 09:50:41 2011 -0600

    Options is a field in initialize. Make fromJoniOptions instead of nest ternary operators

commit d0220114bef49c69f23212dd677d9c6b2def1230
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 29 11:05:50 2011 -0600

    Make test/testUTF8*.rb run

commit 2dae6efc30deffb587ac5964952df803f7ed5e0e
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 29 10:47:12 2011 -0600

    Add default initialization code in same place as before to make testRegex.rb run again.  Re-add int-based signature to make compiler happy again (also to not mess up extensions?

commit d7c5078929c589c6bd0f0b44038bef6f74ddd2f7
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 29 10:05:24 2011 -0600

    Remove wonky set default method I made earlier. git setKcode to be setKCode. All working except cache retrieval for 1.8?

commit f0dd67a5527aa14b6926b5bc87e135e515f61c17
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 29 09:08:15 2011 -0600

    Make hacky default initialization into a method on RegexpOptions

commit 61a345de6971118ffcd65cd49ff056122a00ad88
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jan 28 17:36:31 2011 -0600

    More initialization of option guts + inspect fix

commit ad351694ef33b15a2d4f886043eec04a311a3cc0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jan 28 13:57:31 2011 -0600

    Move regexp options into a class.

commit 1c5c832153068704105cb8c7fd4b8fa1c5160fe5
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Thu Jan 20 15:03:43 2011 -0600

    JRUBY-5397: [1.9] Make String#gsub encoding aware for ruby files

commit 622b4f7a3f78c8f8a2f65ee809ac5f1776ca083f
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 8 16:56:04 2011 -0600

    Most of regexp specs are running but this is sketchy

commit 06509b0fa9c2ea6ca093ae5c17d6d0210f119531
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Fri Jan 7 20:25:27 2011 -0600

    Slight step sideways end of night code dump. StrNode is more accurate for encoding.  Regexp is somewhat better?  More specs fail though

commit d7b838d61660f300db6f080b410ae472d6b2fc6e
Author: Hiroshi Nakamura <nahi@ruby-lang.org>
Date:   Wed Jan 5 23:51:20 2011 +0900

    JRUBY-5044: removed unused private fields.

commit 36050ca1da31c6e24dc9f676b19d6be9bcbec76b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Jan 4 09:58:49 2011 -0600

    local variables from regexps...hell yeah

commit 11440c3aef65e6540bda1453aeb349193d8fe56b
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Mon Jan 3 13:02:14 2011 -0600

    regexp in 1.9 will throw error during parse

commit 6e15430d075922054a80c664b8f460ba67f925f8
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Dec 29 14:27:12 2010 -0600

    initializeCommon is 1.8 only.  So just use kcode.  initialize_copy was calling 1.8's iniitalizeCommon unconditionally

commit 6ad11e9b22baec213076ed67fcf0203be5627cb4
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Wed Dec 29 12:45:41 2010 -0600

    Hook up encoding from regexp bytelist in 1.9 rather than kcode (which is not used in 1.9)

commit ce007975d51de24eea69109fb2120d9a072db7dd
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Dec 3 13:30:20 2010 -0600

    [1.9] Implement String encoding marshalling. No tags go away, because our default internal/external are still wrong.

commit 4176a6297b6c2fde1b80db9545b0e9898cc88755
Author: David Calavera <david.calavera@gmail.com>
Date:   Tue Jun 15 19:17:34 2010 +0200

    fixes JRUBY-4881: JRuby somehow passes class extensions to submatches of Regexp matches

commit 9b1f32c2ad5ef8aa7c81d470dd855b49d601d4bc
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 25 20:05:47 2010 -0500

    Minor perf improvements to marshalling and simplification of lazily-initialized collections in RubyModule.

commit f6002bfb145d6593456850d217196b4e5f828234
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Mar 15 14:26:11 2010 -0500

    Fix for JRUBY-4649: rack-mount-0.6.1 does not work with jruby
    
    Simple change: allow Regexp.new to be variable-arity, so subclasses can introduce new valid arities.

commit 2f3802343d0de9440a71e099002d3b66f51c0a51
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 23 00:40:00 2009 -0600

    Use accessors for those pesky ByteList fields and update bytelist.jar to a current version with accessors and deprecated fields (for compile warnings and because we'll want to privatize them some day).

commit 13c40aeb515d14e62db6cb469a560d900a27647e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Dec 16 00:59:55 2009 -0600

    Set reified class for all the primary core classes, so they'll work properly when extended and an interface gets included.

commit ea7757221be2641a1256ebe84b1191ea7490eb59
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 14 23:48:52 2009 -0500

    Fix for JRUBY-4037: Ruby 1.8 compatibility: /#{/\w/}/uo does not work as expected
    
    Thanks to James Abley for the footwork.

commit 6ef8a0e61aaed39680a6e78a4095e97182e992a2
Author: Thomas E. Enebo <tom.enebo@gmail.com>
Date:   Tue Sep 1 17:46:03 2009 -0500

    [19] my escaping may be wrong but not as wrong as it was for Regexp.inspect

commit be030f7b364538d194320f15057ff0fe53d0c8f5
Author: David Calavera <david.calavera@gmail.com>
Date:   Wed Aug 26 11:06:35 2009 +0200

    fixes JRUBY-3858: NPE in RubyRegexp.java with --1.9
    
    Signed-off-by: Nick Sieger <nick@nicksieger.com>

commit 9d2b97bd2c6ec5eb682713cb1920542bfdc3511e
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Aug 3 19:30:17 2009 +0200

    [1.8.7] Numeric#step, ObjectSpace#each_object, Range#each, Range#step, Regexp#union, Struct#each, Struct#each_pair

commit 5cb010871e68cc5760980196c8276e26f20546e0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun May 17 03:24:52 2009 -0500

    Fix for JRUBY-3638: Multi-Threading issues with JRuby 1.3RC1 and soap4r
    
    Whew! This was a doozy! The problem here was as suspected, a "dummy" scope was being shared across calls/threads and causing the backref/lastline to step on each other. This would not simply affect multi-threaded cases either; it could easily break cases where only a single thread happened to read a bad backref from a previous call, or even a single thread read its own backref from an earlier call in the stack trace.
    
    The fix is detailed largely in the bug. No test cases accompany this because a new core construct has been introduced to produce a hard failure if we ever make this mistake again. It's a very tricky thing to test since it depends on either thread-unsafety or one call reading a backref and one call writing a backref in ways that are not immediately apparent yo the compiler. So these are fairly specific and localized issues that have far-reaching effects.

commit 9412f069e7f3b393591e1d719a56a8b4354dcf66
Author: John F. Douthat <johndouthat@gmail.com>
Date:   Sat May 16 19:20:33 2009 -0500

    Fix for JRUBY-3357: Marshal load and dump rubyspec failures, part 2, Regexp loading

commit 717a5467bba9564f37122b6f3cbb419de1a4edbe
Author: John F. Douthat <johndouthat@gmail.com>
Date:   Sat May 16 19:16:00 2009 -0500

    Fix for JRUBY-3357: Marshal load and dump rubyspec failures, part 2, Regexp

commit 72875b90119a5ca090ef797076774e755e05c10f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon May 11 03:13:48 2009 -0500

    Fix for JRUBY-3625: Multi-threading issue with RegExp
    
    This is not easily tested, so I have added a separate dir under test for these threading issues. We should endeavor to run them periodically.

commit 5ba563f545e175e3d28063769790f5b4c4765b72
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 9 22:41:26 2009 -0500

    Fix a SyntaxError in dregexp logic from a new spec failure.

commit 66b28d6e25993dac775867702563e32e7bc75b41
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Apr 8 20:58:55 2009 -0500

    Migrate to having backref/lastline on DynamicScope again, with inspector changes to ensure the scope is available. Does not yet pass all tests.

commit b7c12df3987a70362bf974453ab0362bea304579
Author: Nick Sieger <nick@nicksieger.com>
Date:   Tue Apr 7 09:35:04 2009 -0500

    Pass a few more regexp rubyspecs
    
    Changed the behavior to raise SyntaxError for regexp errors in
    literal regexps

commit 9016e0fba621274023fda34b7a73c5f238fef2e1
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Mar 21 15:57:27 2009 +0000

    Minor cleanup.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9443 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5b90b3f6e2084ebfc42af39801c7e98fb9b2678b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Feb 24 01:32:50 2009 +0000

    Much simpler, RubyBasicObject specific, _branchless_ infectBy that doesn't use interface calls. Covers 99% of core methods.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9288 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c9dcd1a619cafb25e24620ff44b3d34f38a3584b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Feb 22 17:40:20 2009 +0000

    Add 1.9 Regexp::FIXEDENCODING.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9265 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cb23fdbd823b6f672142d80f80dabed0d57a297a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Feb 17 20:55:09 2009 +0000

    Fix oct/hex scanners for regex validation.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9219 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 248c28eedf9556f4d0943c571954e8a47acb98f0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 16 00:14:34 2009 +0000

    1.9 String#split for String and Regexp arguments.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@9178 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9c5ac86e60bdaf21d91f228d492db18b9a4c282b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 29 02:57:51 2009 +0000

    Use separate caches for plain, quoted and preprocessed Regexps. This will allow finer grained control over different caches, also allows to reduce number of collisions and makes lookups considerably faster. Next step: try to reduce code duplication without virtual calls.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8928 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 11b49dc28402bba5b656f48011c52616df97794d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 29 01:27:48 2009 +0000

    Simplify 1.8 Regexp#match.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8923 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 01c13f4e71682e3a2594a3347c7abd7f155ad909
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 29 01:24:49 2009 +0000

    Simplify Regexp#===.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8922 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a50c58bc5a52d9290e50ac086b36b152d24c7b25
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 29 01:20:24 2009 +0000

    No need to check against RubyMatchData in either mode (RubyRegex#match).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8921 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 644ca49f70b94c9c781c3bbbc97f5c195e127d60
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 29 01:04:34 2009 +0000

    Simplify 1.8 Regexp#=~.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8920 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a4e72aa4da6fe3c2288eb248744a249969aae8b1
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 29 01:04:03 2009 +0000

    1.9 String#=~, Regexp#=~.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8919 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c458cedabbe2aceb3cfa9d90e88a46530498266b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 29 00:39:27 2009 +0000

    Use 1.9 regexp search in 1.9 Regexp.#===.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8918 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2f7b4d7e336b973a85de7da5fa9a2b948164a5a0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 28 00:17:57 2009 +0000

    Fix 1.9 FIXED_ENCODING regex issue.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8909 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4dca673787838713f4119268c2de2b3ae7f2676b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 20:20:18 2009 +0000

    Another fix.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8828 961051c9-f516-0410-bf72-c9f7e237a7b7

commit feb6f0dc149cbd88f4e4b8c46372451c0ab37eab
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 20:14:58 2009 +0000

    Regexp preprocessing fixes.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8827 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 27b599120b8f2f69ad77a4d8631b1d3abf2da2a0
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 19:37:33 2009 +0000

    RubyRegexp.preprocessCheck for parser use.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8826 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 201e7cfc73d4b97ba4266021a069afb61103393d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 18:47:14 2009 +0000

    Remove commented out code.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8825 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7bddc2eccc21eabbdeb1e417c1a266b23c448871
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 18:46:01 2009 +0000

    1.9 Regexp#initialize bits.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8824 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 607acc928b380c1a7140a5e35e0cb1ec23dd6293
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 01:48:14 2009 +0000

    Finally make 1.9 String#sub use 1.9 regex substitution.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8822 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d2c707cade5b1b95f74dd2318a5e59b95da09a83
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 18 01:24:17 2009 +0000

    Ugh, 1.9 regsub.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8821 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a63c2a989c8340bce000c1861419c45d648d2266
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jan 17 20:42:55 2009 +0000

    1.9 regexp conversion protocol for 1.9 String#sub/sub!.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8817 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 26b3614941e64533be7e87413d9cebfda45b0aad
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 15 22:31:29 2009 +0000

    Do not mark MatchData as used until it really escapes, nice boost for some String methods.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8788 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 36e56110976b67b0834e36a9d4d51b3e6596223d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 15 13:41:39 2009 +0000

    Always set match taintedness since we're going to reuse it more aggressively soon.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8786 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7200ab978f28ead72dea8d2132894c36819f1948
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 15 13:35:21 2009 +0000

    Simplify RubyRegexp.adjustStartPosInternal
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8785 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cddda28e537760e80be7489e4fc564eaca6762c4
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 14 23:59:24 2009 +0000

    Remove not needed check.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8780 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fc553587a2dbc6e40b6463afe07ce4fd96b6e9ed
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 14 23:48:45 2009 +0000

    Be more consistent.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8779 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0f9beb04542ad94ee81ed6db0ea8c006fcaa1a2f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 14 23:43:41 2009 +0000

    1.9 Regexp.match.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8778 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 209443ac44ea36f54d7e6961f62afbf0ad214d62
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 14 22:37:28 2009 +0000

    Finally, 1.9 rb_reg_search!
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8777 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 661da916b7ebdcf5b6e69081762d6ca67c89bc6a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 14 21:42:14 2009 +0000

    Simplify RubyRegexp.search.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8776 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c9da2d9318d5186939445a84e29a97026d0532fa
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 13 01:31:16 2009 +0000

    Change argument order.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8736 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 296da631ae50735e38aee3430740c6fe9b08d322
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 13 00:41:52 2009 +0000

    Use 1.9 version of updateBackRef in 1.9 String#scan.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8735 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9aacacbf35b31d27cfde460edd78b9ddee16c21e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 12 23:49:46 2009 +0000

    Change argument order.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8729 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a2fc80ad6166fac7ff0ced4e3eb9955d8fc6686c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 12 20:58:53 2009 +0000

    Partial 1.9 Regexp#===.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8725 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6ded72f96b85b323c9c191866d1d7dab16052ca8
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 12 18:54:03 2009 +0000

    1.9 Regexp.quote/escape.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8724 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1a4fcd405c1ef35ad0577915e8095d3c034eee34
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 12 00:08:25 2009 +0000

    Fix format
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8713 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 32c74fa87041a45f7a2263d9f58b935f6395ca29
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 12 00:01:42 2009 +0000

    Remove printStackTrace.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8712 961051c9-f516-0410-bf72-c9f7e237a7b7

commit df389b4667ef17690c80d730bd315512ffdd7c68
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 11 17:39:34 2009 +0000

    More regexp preprocessing logic and 1.9 regexp caching, More correct 1.9 String#scan.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8703 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 29a0a866267c97ce3177ed5825b7ddf9f798e921
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 7 18:51:34 2009 +0000

    Do not set back the match into frame when the match is not used.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8630 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ece1b6e7c7a30f21278034079519e5496bd5638e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 7 00:58:21 2009 +0000

    Remove no longer used paths.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8621 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5c1a9f0ad9a5761c79f895d13bcc70354e9fcf61
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 7 00:39:23 2009 +0000

    Do not create RubyRegexp instance also for String#scan/sub/gsub String arguments. Saved tons of GC pressure for string heavy code.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8620 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6ea4fa6f0fa0ef9cf3d2a4349bb46b287e04957a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 6 21:44:27 2009 +0000

    Even faster String#split (doesn't create RubyRegexp instance).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8618 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2aed17f3649655f69f202dbf8132947a0fd41858
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 6 19:49:36 2009 +0000

    Use pattern encoding in Regexp#encoding.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8616 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b69cafcd1656599fe3a2a03b89daf7c58fb1a53f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 6 19:45:09 2009 +0000

    Remove KCODE_FIXED from RubyRegexp.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8615 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 97cc8ff3a71c11659524bb6a263ebfc5e99a5007
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 6 19:41:21 2009 +0000

    Split getPattern in RubyString for quoted/not quoted.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8614 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6c5bfda9c4d69712580755600fbe75a9848cc5cf
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 6 18:48:32 2009 +0000

    Append kcode in Regexp#inspect.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8613 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dfc95ecfd773db530964bc7a0e902385bde75194
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 6 18:28:11 2009 +0000

    Another round of Regexp refactoring, make most initialization/cache lookup code to Regexp instance independent methods so we can toss plain Joni regexps around.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8612 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f01e17dd95e5a18868e36b39a7fb84d7a1746b6b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Jan 6 00:17:48 2009 +0000

    Totally refactor Regexp initialization logic and Regexp cache lookups in order to make 1.9 logic saner for 1.9 preprocessed regexps.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8607 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 206a772b10d41ed4591b8d86e1c7d03694934dbc
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 5 01:18:04 2009 +0000

    Faster pack('U') by not using temporaries.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8591 961051c9-f516-0410-bf72-c9f7e237a7b7

commit eb21ca81bd153f2ba6fd0be61a5a29aff7454d9b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 5 00:23:08 2009 +0000

    15% faster Regexp quoting.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8590 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a473392cfff865792b60987456d1b230fd0938ab
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 4 22:58:48 2009 +0000

    Ugh, RubyRegexp.preprocess().
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8589 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5f5e853fa6ebba99232f25d19dbe74ce8d2527a1
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 4 19:11:19 2009 +0000

    1.9 RubyRegexp.readEscapedByte().
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8588 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8efb68511a78994cde709d3e69f917eaf43d4629
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 4 01:47:15 2009 +0000

    1.9 Regexp.inspect.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8587 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e420c1488ed50009756937f6c83077510fa8b8de
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 4 00:41:29 2009 +0000

    More ByteList wise.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8585 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5600dc234e15941aab0ac3937766077a2eeca877
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 4 00:06:04 2009 +0000

    Be more ByteList wise...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8584 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 39b7e7e518aedec2b59747bdf40f6a067d879c3f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jan 3 23:28:50 2009 +0000

    Remove code duplication.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8583 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9216fe74937d5333c03c6d87a24521d798b4baea
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jan 3 22:50:33 2009 +0000

    1.9 Regexp error routines (RaiseException will have to carry encoding information which needs a bit refactoring).
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8582 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 83b8c72faaf25555bb9a1968ba434353bef74565
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Jan 3 16:17:24 2009 +0000

    Reuse ByteList in String#intern/to_sym.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8577 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d9e6f17a17ee20f8ef846693c5af830fa27310be
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 2 19:29:34 2009 +0000

    Move adjustStartPos impl from joni to RubyRegexp.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8569 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d8ac288550fb8376590da5b089b49da57aae4718
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 2 18:44:28 2009 +0000

    More reorgz.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8566 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4a6aa353febea2917d83a97be06469d99b7bc6f3
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 2 02:53:47 2009 +0000

    1.9 Symbol#inspect.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8554 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3e2f4f88375282520ac250bb97335afb0c637d8a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 2 01:36:59 2009 +0000

    Use code points instead of bytes.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8550 961051c9-f516-0410-bf72-c9f7e237a7b7

commit beb132e785c98250e61e84a6f5d9c824d7af94b9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 1 19:59:01 2009 +0000

    Minor changes.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8540 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bdbe2cabd8588670dfd27e1635adec1ad143b113
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 1 19:18:20 2009 +0000

    Closer to metal regsub.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8539 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 04e4ea6199bd26a4eb37ba5b2433d7a424cc5b0f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 1 18:43:30 2009 +0000

    Even more RubyRegexp cleanup, remove code duplication, 3x faster inspections.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8538 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9e5dffcddcb67a3958290b389d14da1cfc9a3f70
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 1 17:24:50 2009 +0000

    More RubyRegexp cleanup.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8537 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 114f0d61afee0cfb2ca93468fe6b93638d8be023
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 31 20:05:47 2008 +0000

    RubyRegexp cleanup in preparation for some 1.9 thingies.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8527 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 21e333f04ff0dddbaa577352cbeaae4cd84896f7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 30 14:56:30 2008 +0000

    Fix RubyRegexp.checkEncoding.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8513 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 417eb77d59a11e9e63101e52fc068c4b78257591
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 29 23:17:57 2008 +0000

    1.9 String/Regexp match encoding negotiation.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8505 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 800d95462ede4a2affb4b46a85803ae4c7e60171
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 29 21:18:04 2008 +0000

    Ugh, guard "foo".scan(Regexp.allocate). Still ancient NPEs out there.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8501 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2dc4ac65ecd8659dba29a7e3f2422c57ecc75ffb
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Dec 29 21:16:07 2008 +0000

    No need to check both pattern and string in RubyRegexp.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8500 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bdcbc8f9b09af39051c1e8ce3f579d863353bd99
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 23 14:48:42 2008 +0000

    Simplify RubyRegexp.match_pre/match_post.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8445 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3c3dd5a0ce80e3dd73b5297dcbbc1c18400dd444
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Nov 30 20:00:21 2008 +0000

    1.9 Regexp.try_convert.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8222 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e4cb688275cac9d1459d7b5a4ec0284562480594
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Nov 30 19:58:30 2008 +0000

    1.9 Regexp#fixed_encoding?
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8221 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7bbedee05b951db8dfcad7c92470b4fc10c2b36e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Nov 16 23:57:16 2008 +0000

    Remove all remaining references/dependencies on MethodIndex's int indicies and related fields.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8081 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f0f716756cd43b77fe2f4049e3e2a2f984432a3b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Nov 14 00:56:25 2008 +0000

    Remove bogus comment.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8071 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e2a61131c2e23d0c994a04babb017dec0958be5d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Nov 14 00:55:51 2008 +0000

    Better Regexp.performSearch.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8070 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 205794e4edb9e13d1fe747fba34c74585990ba58
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Nov 12 23:17:48 2008 +0000

    Fix for JRUBY-3118: Creating a subclass of MatchData that's instantiable blows up because there's no allocator. Create an allocator for MatchData and a 'allocated' check in it's methods. Make MatchData contain reference to RubyRegexp rather than Joni Regex so 1.9 MatchData#regexp doesn't have to recreate Regexp instance each time. Also add 1.9 MatchData#names.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8060 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a4f0040910cf9a245acd8da2134410efca215dc7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Nov 11 21:47:01 2008 +0000

    Fix for JRUBY-3132: String.split is broken. The actual cause was regexp caching which haven't been using original (non-quoted) pattern source as a cache key. As a result _all_ regexps containing special regexp chars and escapes didn't ever get a cache hit. Also all consumers like String#split, String#scan, String#sub/gsub and all other Regexp depending code was broken.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8055 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e4b24407ea13f7dc7c562e5009caf223bbdf39eb
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Nov 11 18:49:25 2008 +0000

    1.9 Regexp#encoding
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8050 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fa75396e350b356e02fbcff0adcb74dbe903ae63
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Nov 7 18:36:44 2008 +0000

    Introduce notion of encoding capability for String, Regexp and File ruby classes.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@8010 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 48f9b41dbaabec89a976d47c78fded1aa01ab95c
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Sep 14 12:33:38 2008 +0000

    Fix rails regression in RubyRegexp.regsub.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7700 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9e96ffd3ae2d5d754b7b313d63a5c95d259ff234
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sat Sep 13 18:56:32 2008 +0000

    Make Regexp use safe Encoding.length
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7694 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a79267d89e70f291934f734920a6500190a19d09
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Sep 8 20:28:13 2008 +0000

    Sync trunk with split joni/jcodings, also make String#split use Encoding.length(byte[]bytes, int p, int end) routine.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7660 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6a01d553789a6100975d19028bf53003ac0dae0b
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Sep 4 23:33:07 2008 +0000

    Also initialize KCode for internal Regexp usage.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7638 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 55c83e74fc0219c30389455395f377eb4812bf3a
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Aug 5 23:39:45 2008 +0000

    Full implementation of 1.9 Complex/Rational. Those classes are _very_ tightly integrated with the rest of core library (Nil, Kernel, String, and all Numeric descendants). Lots of default behaviors are dramatically changed (e.g. 10 ** -5 returns Rational instance now) so it might be difficult to test it all at once. 1.9 Complex and Rational classes are not rubyspec compatible, we fail then the same way 1.9 does (in 1.9 mode, though jruby should fake requiring Complex and Rational then). 1.8 mode should stay unaffected.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7378 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 83cf236934451b56f33a0fba81bdc0a55973e751
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jul 14 23:26:10 2008 +0000

    JRUBY-2801: Incorrect argument splatting/array construction passing splatted args through a block that yields
    More RubyObject.getRuntime() reduction
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7170 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9496f57e1b3d6aa5ecf650afcde452abd02f07c3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Jul 11 04:27:53 2008 +0000

    Splitting up some methods to shrink them for e.g. hotspot inlining purposes.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7135 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 72975c6c9467ac11677b86f3886e555911e50299
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Jul 9 00:34:32 2008 +0000

    lots of RO.getRuntime removal
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7131 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b284e75da5701b37ef552ae44b8a3153746d73f7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jul 7 18:17:08 2008 +0000

    fixes for JRUBY-2683: Regexp#to_s behaves differently than MRI 1.8 or MRI 1.9, and more Regexp#to_s cleanup. All specs clean for Regexp.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7119 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a7b41d876cb677ba653a997002aa397613468d83
Author: Vladimir Sizikov <vsizikov@gmail.com>
Date:   Fri Jun 20 13:20:17 2008 +0000

    JRUBY-2682: Replace StringBuffer with StringBuilder.
    
    Patch by Wayne Meissner.
    
    Signed-off-by: Vladimir Sizikov <vsizikov@gmail.com>
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@7004 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c1a09e3d0edc83e01cb403b17a6f8928f2bfeed8
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu May 8 23:59:00 2008 +0000

    Fix JRUBY-2489, handle backrefs more correctly by using frame deltas for grep.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6648 961051c9-f516-0410-bf72-c9f7e237a7b7

commit abc3ec16a3f736c954a12d9c2ecc5241ce453654
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu May 8 18:11:02 2008 +0000

    getRuntime().newString("") hunt in favor of empty shared strings.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6643 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6977b68ccb65e1b1c1f177d7364edd63e160c0c7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu May 8 17:25:08 2008 +0000

    More RubyString from CharSequence construction cleanup and deprecations.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6642 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4023ea384ceb33ab3a6dd0fc45ea7df4c189480f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu May 8 01:50:50 2008 +0000

    Freeze keys for Regexp#named_captures.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6640 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0d6209416d9f5721205563c588acb294423b05a2
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed May 7 19:53:22 2008 +0000

    Implement Regexp.names and Regexp.named_captures for 1.9 compat mode. Implement pretty MatchData.inspect from 1.8 branch.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6637 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 50e48fb3262c87722f6e620099f7e9f5f9844f4f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue May 6 22:06:57 2008 +0000

    Split arity for Regexp#last_match and support 1.9 named captures for MatchData#begin, MatchData#end, MatchData#offset and Regexp#last_match.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6632 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d7bf333cd7cc0749b826b8bcf3b6a6fa7eada328
Author: MenTaLguY <mental@rydia.net>
Date:   Fri May 2 03:08:27 2008 +0000

    fix pattern cache data race per JRUBY-2483
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6612 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 81bc116031b60cc180efc52ecccf86a06c6f2979
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Apr 26 17:51:42 2008 +0000

    Annotations for backref set/get and visibility set/get.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6574 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b86fd4439c7cac59d06dc332b20a2342b012c87e
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Apr 25 23:53:23 2008 +0000

    Add annotation slots for caller-frame "reads" and "writes" to start gathering more information about what parts of the frame will actually be neede. lastline sets and gets are annotated now, backref is next, then visibility and others. By having this information we'll get a complete picture of which methods require a frame and which don't.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6565 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f8a029af815ecf044f5268707b5855b85c738db0
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 20 22:14:18 2008 +0000

    First round of logic to pregenerate method binding code, to avoid walking methods and annotations at startup.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6298 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 424a1cbff5aea37f2f92cc208d29d2544f092828
Author: Ola Bini <ola.bini@gmail.com>
Date:   Wed Mar 19 12:21:15 2008 +0000

    Annotate the rest of the Java classes with names, parents and inclusions. Also add a warning to install_doc.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6291 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9888dd9dedb822ab39b2b9d1c3a43c4fb4c579cf
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Mar 13 20:49:49 2008 +0000

    Fix for JRUBY-2268: Cause an ArrayIndexOutOfBounds when initialize Regexp.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6189 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 852d904134ad970a20497fdcc5d752dd4ae49766
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Mar 7 22:04:54 2008 +0000

    The RC3 Surprise!
    
    Allow annotation defined ruby methods to optionally specify ThreadContext as first parameter
    Convert easiest and most common methods to accept ThreadContext when method or child method can use context
    
    These changes give about 15% improvement on petstore bench and about 10% in ar-bench.  In ar-bench getCurrentContext calls go from 14 million down to 2 million.  The remaining calls largely can be removed but they were much more invasive.
    
    IRubyObject op_eqq and op_equal both not have ThreadContext consumer, but we could see no use of this in any extensions and figured it worth the trouble of converting.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@6143 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1d4e4b936771ca8f3a1b5ce502f1b1eee730b93e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Feb 11 19:44:38 2008 +0000

    Remove a commented out code.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5906 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2b1a005a405839ca4eb268288816294e88f20a2b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Feb 3 18:37:14 2008 +0000

    JRUBY-2062: Add ids and convenient data to SyntaxException and IRubyWarning interface to make their life easier
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5806 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f62b28558e9364567fa124c51fae265564068fe7
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Jan 30 20:36:41 2008 +0000

    Fix typo: REGEX_QOUTED -> REGEX_QUOTED.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5776 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 63b1851ce5af7913edd0755c1ac19daad4286f3f
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon Jan 21 00:29:38 2008 +0000

    Support for regexp literal flag and add a few test cases for that.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5678 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f52c1fdc6ec5823ebf276715902e25bef5261b8e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 20 23:36:36 2008 +0000

    Fix condition for taintedness in RubyRegexp.initialize.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5677 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a562366faf1d5292c693836c1ff1fad8de78c008
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Jan 20 23:22:44 2008 +0000

    Major regexp cache simplification. Enable global, cross runtime regexp cache capable of storing ANY type of regexps. Some other RubyRegexp cleanup as well.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5676 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 11d711c13d31d3ede73d1c8e71aa5655fd0f65af
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Jan 17 22:46:10 2008 +0000

    Skip string quoting before the cache lookup and use the cache for all regexps (regardless of options and KCODE) including interpolated ones.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5650 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b3d416662a9b358da11a63a1900dd8a917340322
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Jan 12 23:24:11 2008 +0000

    Multiple cleanups:
    * Remove most Arity.checkArgumentCount calls since they're handled by generated method handles now
    * Add javadoc comments to MethodFactory impls and their public methods.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5576 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 44cd4b7460346452d2042a32096deab6877c0afd
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Jan 5 13:53:11 2008 +0000

    Possible fix for JRUBY-1705, remove a potential NPE
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5507 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0efdabe382e414dadbcfb3d72b4460cde874488d
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Jan 4 17:52:09 2008 +0000

    Remove bogus check from RubyRegex.search.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5494 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 73557bfaf6bdfb2d56aa807d136327bb20032c6a
Author: Nick Sieger <nick@nicksieger.com>
Date:   Fri Jan 4 01:20:30 2008 +0000

    JRUBY-1877: Fix unmarshalling when an object uses a custom marshal_load/dump. The object
    needs to be registered in the cache before unmarshalling its children.
    Also moved around the register methods on the marshal side (possibly unnecessary), but makes
    the code a little more symmetric and hopefully easier to match up.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5484 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 178f4149f8d043e351e85f72d18ac0adfd0d9555
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Sun Dec 16 03:20:40 2007 +0000

    Move kcode default and literal booleans to flags.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5275 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8ca69b0c383b06052b39fa4087413961f49f7c70
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Fri Dec 14 19:22:18 2007 +0000

    Add support for MatchData#[] named captures: m = /(?<blah>.*)/.match("foo"); m["blah"] == "foo".
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5262 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d7c4dfac7bacc956a9b6c1283fbe2d30ee3d4072
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 11 18:30:31 2007 +0000

    Fix for JRUBY-1701: Lazy region change breaks rubinius mspec run
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5211 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3ebdff689db8e1e3e87a5dc4db546047d74d7fc9
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Tue Dec 11 03:25:29 2007 +0000

    First phase of Joni related String/Regexp optimizations:
    - Major RubyRegexp and MatchData cleanup (Compiler/ASTInterpreter synchronized).
    - Enabled lazy Region instance creation (only when groups defined).
    - Heavy lifting for String#scan, String#sub, String#gsub, String#split by direct joni Matcher access and smarter backref management.
    - Enabled joni Matcher reusing for aforementioned methods.
    - Enabled thread local Regexp cache for String arguments that are converted to regexps.
    - Global variable ($=) made ineffective.
    In most cases the modified methods are now 2x - 5x faster (depending on string size)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5207 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3759fe48f299ccbe51ebe2478400192af6146de5
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Dec 6 20:03:39 2007 +0000

    Sync the trunk with support for lazy Region creation.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5178 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d747708eb3730a7752c6594d4d2a12cefdc7fab4
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Dec 5 23:18:08 2007 +0000

    Regexp/Matchdata cleanup. String minor fixes.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5171 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2bb2dff23d81e87184e0b13250995b74d2a7f206
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Nov 27 11:09:30 2007 +0000

    Merge Joni as new regular expression engine
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5072 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4d75cc1470f5843b4b66f89f50ed81b88b27b431
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Nov 26 10:01:20 2007 +0000

    Remove the three generic type conversion methods from RubyObject/IRubyObject to TypeConverter utility class. They were never overridden, and so there's no need for them to live in the IRubyObject/RubyObject hierarchy.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@5047 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1d53f055a5089fe32ca6b4727e81c8e07f08a8a3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed Oct 24 01:38:54 2007 +0000

    Reverting fix for JRUBY-1351. See bug.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4700 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0e8bd7d59ecf908c543b08b4a5debc5cb015f57c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Oct 20 02:30:33 2007 +0000

    Fix for JRUBY-1351, Regexp#escape accepts encoding like quote does.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4635 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9bc9825436ea08670905a6e2a06d760a97b71d70
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 19 20:52:01 2007 +0000

    Migrate JRubyMethod annotation to use String[] for names and aliases. Thanks Brad C from my blog.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4623 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0b7a2dae2ec0baa531f313568ffc9b7382f89592
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Oct 12 01:50:08 2007 +0000

    Migrate annotation-based method binding to generate DynamicMethod implementations directly, with arity checking built-in
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4575 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 50aa0a043fb0aff49bc2e063a04be2a10cab39c9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Oct 11 05:01:14 2007 +0000

    Starting to tidy up missing/mismatched APIs from Marcin's diff script
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4564 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8557c622ca2f2cb7e0625bd6137241df0daed496
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Oct 9 22:08:32 2007 +0000

    Migrate RubyJRuby to annotation bindings, and fix an issue with module functions being defined on Object
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4539 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d2b68b348a66f5daf579466c7200126b7ce8ce3f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 8 20:33:53 2007 +0000

    Fix arity to calculate right and correct a few bugs that resulted from it being wrong.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4517 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a10e46cec019a3964c75ebb6b2ec648c3b449ed3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 8 18:23:45 2007 +0000

    Migrate Hash to annotating bindings, rename and remap all equality methods to new conventions
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4514 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 50bb2e6ebec876ffe18221fff754f0174a9b4aa3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 8 17:08:51 2007 +0000

    Migrate Regexp methods to annotation binding
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4512 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ba060fb4180f15563ba664403ba62cdd66391e40
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Mon Oct 8 16:35:11 2007 +0000

    Migrated String to annotated methods
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4511 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3e88cfab0d224fb9efa8d18336993e2c78ce495e
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Thu Sep 27 16:40:57 2007 +0000

    - Identified and extracted construction paths for class/module/singleton/IncludedModuleWrapper, now there's no unnecessary null checks or assignments in their constructors (they take very few arguments so even asserts are not needed).
    Each of those constructors have a comment what is it the responsible for, also, two RubyClass.newClass() and two RubyModule.newModule() methods have been extracted.
    - Fixed logic that sets the parent/constant for Modules, now matches MRI (only setConstant/getConstantAt are used here).
    - RubyClass rewritten, special attention has been put on allocation logic, now Class.new(...) doesn't fire a separate allocator class. (btw, logic of "class B < A;end" and "Class.new(A)" must be split since in second case superclass and allocator are not known until initialize is called). Class/Object allocation implementation mimics MRI's weirdest quirks in behavior, is _much_ simpler that it has been and much faster. This also allowed creation of generalized clone/dup implementations matching MRI. (only our special ivars need a care here).
    - Rewritten bootstrapping of Object/Class/Module.
    - Core classes (except Exception hierarchy, they should also be in future) are now cached in runtime (MRI caches them in static VALUE's like rb_cObject) Ruby.getClass(String), Ruby.getModule(String) and Ruby.getClassFromPath(String) should be used only by either interpreter or compiler and when the class name is not known at compile time.
    - Fixed and simplified nodes: classNode, moduleNode, sclassNode, defsNode. Compiler has been synchronized here as well.
    - No more __attached__ as ivar, it is now MetaClass field (which means lazy ivars for singletons). Compiler also updated.
    - added and dosumented isModule() to IRubyObject (isClass(), isSintleton() documented).
    - Fixed test_autoload test (Object.class_eval do;autoload :SomeClass, 'somefile';class SomeClass; end;end) should raise LoadError, now matches MRI.
    
    - Fixed a number of minor bugs:
       1.instance_eval, was creating a metaclass for Fixnum instances (also affected Symbol/FalseClass/TrueClass/NilClass)
       marshaler objects were kept in singleton classes
       Range.inspect, was modifying the begin field (when it was a String)
       Many bulletproofings in Marshal/Unmarshal (like unmarshaling an instance of nonexistant class), TypeErrors/ArgumentErrors matching MRI.
       Fiber.new in 1.9, doesn't call #initialize method by funcall, fixed
       number of method arity fixes and many methods are made fast now
       fixed initialize/initialize_copy logic, further simplification, no ClassCastExceptions possible now
       Fixed defineClass(under)/defineModule(under) logic
       bulletproofed cases such: class A;end;module A;end
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4409 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3a84606d084fcabbe6a70f43e44bf411fbbfb8aa
Author: Nick Sieger <nick@nicksieger.com>
Date:   Wed Sep 19 16:05:11 2007 +0000

    JRUBY-1231, JRUBY-1372: fixes for File.directory? and Regexp.quote
    merged from branch
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4359 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bec10e7bff4d1d70eb88efe7653d4dba75efc830
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Wed Aug 29 21:05:52 2007 +0000

    Fix and simplify conversion semantics. Remove a few unnecessary callMethod calls.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4232 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3eee7681b5e2ca9e18ca65304791eef82bde9d12
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Aug 7 19:02:21 2007 +0000

    Add Java based kind_of? for some of our Java based implementations
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4120 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fc17861832a4f30aecf7840dc1dcee181618f93f
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Aug 7 03:10:35 2007 +0000

    Move backref and lastline into Frame, since there's only ever one copy of them in a given frame. This also will make it possible to turn on stack-based variable AST inspection very soon.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4107 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8beb29598e452024de3a2e637d5a1540ffcba5cf
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Jul 17 17:38:54 2007 +0000

    Hide Regular Expressions behind a common interface, meaning that implementations can be switched out much easier. Also add the /j flag to Regexps, for running with Java regular expressions instead of JRegex. All of this is in preparation for REJ and Oniguruma stuff which we should take a look at sooner or later.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@4038 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5747fd3ec8312c6a621ef48b17b2f3dd034de75b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Mon Jul 9 20:03:49 2007 +0000

    Remove various unused imports and code (e.g. make my cref patch more concise)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3978 961051c9-f516-0410-bf72-c9f7e237a7b7

commit af6e40c24dc8a1911a6c9649da129552912699e7
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Jul 8 12:30:32 2007 +0000

    Fix for JRUBY-1193; The new backref handling requires us to call RubyMatchData.use before using it; the problem in JRUBY-1193 was caused by RubyString.each, specifically.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3972 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 78ceb534d15d419de444bdc8e2b11fe97e9f3a53
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Jul 5 09:40:06 2007 +0000

    Improve performance of MatchData by reusing last backref, like MRI does it.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3960 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6986420ab4865a8c751aa32ed0fc70a7a890549e
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Jul 2 14:35:29 2007 +0000

    Fix several small bugs making regexp_spec run, JRUBY-1065.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3949 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3855b2a7b32d013fbc4dbc8cdc3b4c6e9a9c8f0d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jul 1 18:59:57 2007 +0000

    Committing brand new dynamic STI generator; it's passing all tests, installs rake, runs rails. Any bugs, we'll find them in place.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3935 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d490af4a9d510b46750d3a638162282991658f1c
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Jun 7 06:11:00 2007 +0000

    Added STI for inspect.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3847 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 816924af886286de3732782268886c1017c91689
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Wed May 30 02:29:12 2007 +0000

    Fixes for JRUBY-828, going for it even though we may need to examine it more....
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3766 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6ab8977aa4861824d215eda0c00d6f4cb1cfa607
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun May 27 05:58:09 2007 +0000

    Zero-sum (hopefully) refactoring of trace functions to have an "event hook" model more like MRI. ruby-debug (and likely jruby-debug in the future) makes use of this event hook mechanism, so we'll need to have it in place to make the port easy. Also in this commit, fixed JIT to actually be running (it got turned off accidentally sometime in the past week) and make sure it's using the same "safe" logic for def arguments.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3746 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 28e209608118d6e9c16dcdb6cb2d8039e7617ee2
Author: Marcin Mielżyński <lopx@gazeta.pl>
Date:   Mon May 14 23:41:26 2007 +0000

    Lot's of String stuff, notably String#split (and other methods: scan, sub, gsub, tr, ljust rjust, center... and more).
    Also partial work targeting JRUBY-688
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3650 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 78b16620c6108ee28372f27da3a2fbd5d9a29571
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Apr 25 23:21:52 2007 +0000

    JRUBY-794: object.clone does not find protected initialize_copy whereas MRI does
    
    [Fixes major issue with active scaffold]
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3563 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1742e48d5561cdc2e90fca3b335c89a0f3d9a84
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Apr 20 02:08:54 2007 +0000

    JRUBY-840: Cow fixes, Enumerable rewrite and arraycopy hunt (Marcin)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3511 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d77f8c9202ed39af9f9aae4987650e3a6fe62508
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Apr 19 08:35:13 2007 +0000

    Fixes for JRUBY-361: supply a real binding to trace functions. Also fixes JRUBY-842 by short-circuiting STI methods so they trace instead of doing fast STI dispatch.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3505 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7f057e6cd7f86e7a8a76ceef9a5eef1cfeb1acca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Apr 17 20:48:57 2007 +0000

    JRUBY-139 fixes: keep original regexp source around for Regexp#source and Regexp#inspect to use
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3488 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d465fd9bc7ee6ae38475299bd82e65ac9d1311b4
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Apr 16 10:41:12 2007 +0000

    Add several new STI's
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3470 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a6328f417d7f831bec1d60b01d92c5a24407f2f0
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Apr 15 11:27:13 2007 +0000

    Improve performance of RubyMatchData somewhat by using COW. Also provides the same semantics as MRI for ASCII matching. Further, fixes a bug in String#+, where the first buffer has a value.begin != 0.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3463 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f4c15912b1d4edc84b06c882195d27df371d1023
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Apr 6 23:13:04 2007 +0000

    More cleanup of STI and expanding it to conversion methods and hash.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3404 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0320b51ff913c6fcd25a386065cac05f57cc12c2
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Apr 4 17:44:27 2007 +0000

    Merging non-specific things from my sandbox to get diff smaller:
    
    - remove unused imports
    - remove deprecated methods convertToType and convertToTypeWithCaller and converted all consumers
       [Note: If extensions were using these functions they are broken now]
    - attr_accessor was checking Frame args when it could just use the args it is given
    - removed unused variables
    - comment out some debugging methods so they are not reported as a warning
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3385 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c60476ca8ffb4f138dbc6852579905e2ffc45a40
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 29 20:11:16 2007 +0000

    Fix for JRUBY-741. Against my better judgment I cast to MatchData here. It's probably wrong.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3334 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c02ca0e641c238d2fc8985fe7f939b8b3df6f95
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Mar 29 05:54:41 2007 +0000

    Fixes for JRUBY-734, along with a first run at cleaning up IRubyObject.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3319 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d5549d0d66c50e5f56149747812f39a1988305b2
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 27 21:02:36 2007 +0000

    JRUBY-729 fix; try to convert incoming quotable to String
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3307 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 637eb49b3126b68cddae05c69efeabb796ad262f
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Mar 26 17:33:03 2007 +0000

    Whoopsie, me bad
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3280 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f227d6612064126ca0db7af3b24aeb28b552b6be
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Mar 26 17:25:25 2007 +0000

    Fix for JRUBY-717
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3279 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8a588af5590f4075aef661f6c56707c1c3577ee9
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Mar 13 07:27:44 2007 +0000

    First part of fixes for JRUBY-687...make MatchData reasonable.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3185 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b3965b8c7c6ca2b5d9afebe01033a9d4fdaf7102
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Mar 12 12:20:30 2007 +0000

    Fix error on compilation problem with Regexp
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3179 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 768b724a7ef4942d89923756ac1c5183ac5bf24a
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Mar 11 19:05:37 2007 +0000

    Make regular expressions use JRegex
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3176 961051c9-f516-0410-bf72-c9f7e237a7b7

commit bcd3301fcd97db90d50558b5bb3c60d7d9226beb
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Mar 10 00:20:02 2007 +0000

    The Bill Dortch sprintf special commit....
    
    JRUBY-667: String#to_f and Float(str) do not support MRI behavior
    JRUBY-609: PrintfFormat needs to be completely rewritten
    JRUBY-39: Floating point formatting discrepancy: "%02f" % '5'
    JRUBY-581: Kernel.(format|sprintf) does not correspond to MRI's behaviour
    JRUBY-678: RubyBignum test assertion failure in build 3151
    
    In addition to this fix I also removed old PrintfFormat and a few stragglers...There could be some follow work in method_missing in RubyObject and RubyKernel since I removed those old printfformat consumers in a pretty innefficient way.
    
    Thanks Bill it is great stuff!!!
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3152 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cb4a67cba1c79d685ee6e27ee7a6cd5c43ba159e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Mar 2 21:34:26 2007 +0000

    JRUBY-652: regexp quote should quote '-' also
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3106 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a23ca064b85293ba43a84a41663ff286f7fead0d
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Feb 23 01:49:02 2007 +0000

    Fixes for Regexp.quote: accept an optional encoding arg, and handle it properly
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3067 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a2107e60085a5063bca76d897783a512bbd7eddc
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Feb 18 15:18:18 2007 +0000

    JRUBY-606: Get rid of un/under-used IRuby interface
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3022 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ba941779cfc4123140eb4dc085f3d6ec561ab8f2
Author: Nick Sieger <nick@nicksieger.com>
Date:   Fri Feb 16 05:32:51 2007 +0000

    JRUBY-570: nuke plaincharset.jar!
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3008 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9d39dfdffc4bf0b2a39afcee341c32a67cb35ac2
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 15 10:05:17 2007 +0000

    Add objAsString and use it in some places where it's needed.
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@3002 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c401bdfacc8b0fb7715e321d46079f01e844ccbd
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Feb 10 11:33:41 2007 +0000

    Improve performance of gsub by about 20-30%
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2976 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 06cd42189f05a92f59d309a600820d466bd21854
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 8 13:48:39 2007 +0000

    Improve startup by not using .class for IRubyObject. (since .class calls Class.forName)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2966 961051c9-f516-0410-bf72-c9f7e237a7b7

commit edb8139e505263a0791c37b10988ded4fc0ae5ed
Author: Ola Bini <ola.bini@gmail.com>
Date:   Thu Feb 8 11:16:27 2007 +0000

    Improve marshalling of Strings
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2964 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ef423f1b886650195114fe952a1a6407fbb63f82
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Feb 7 22:27:41 2007 +0000

    - Create a NULL_BLOCK to replace null checks against blocks:
      - Now isGiven() on a block tells you whether it is supplied or not
      - yield on the NULL_BLOCK throw the correct exception
        - We were not throwing this correctly by most callers with my landing of
          the block branch
        - We were generating NPE in cases where we called something that requires
          a block and supply none
    - Block.blockObject => Block.proc
     - Rename and type since this is just a convenience reference for association
       from block to what proc it might represent
    - Remove unused blockAtCreation (this may become relevent for Ruby 2 but why do
      it now
    - Remove ThreadContext and IRuby from Frame
    - Remove Scope
    - Put Visibility directly on Frame
    - callingzsuper dead code
    - Now that modules have a proper superclass we can get rid of special code in
      callSuper
    - ArgsPushNode.childNodes should not return null
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2956 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d1e187ee1a48a02764375e108a6f62ab580de2ad
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 6 04:18:52 2007 +0000

    First round of changes for JRUBY-565, converting RubyString's internals to byte[] and using PLAIN encoding for most uses of Java strings internally. More to come, including improving (and re-fixing) UTF8 support.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2951 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ba2c7386fa2b235fad4f93f05ae63abca564265d
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Jan 29 17:15:24 2007 +0000

    Handle the fact that a negative character class shouldn't match against the empty string. a real fix would probably be rewriting our regexp engine instead...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2876 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fc0d96972a061ca7d2a234936449a1ef1157cbf4
Author: Ola Bini <ola.bini@gmail.com>
Date:   Mon Jan 29 15:00:03 2007 +0000

    Fix for basic UTF8-support in regexps
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2875 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 90708d487f88d7722aef9677041c7792b74047e4
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Jan 28 20:32:03 2007 +0000

    Regexps should define correct hash(), eql?() and ===...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2868 961051c9-f516-0410-bf72-c9f7e237a7b7

commit fa021e6350a9913aec4080deb761bacd7e9414e2
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Jan 28 17:44:32 2007 +0000

    JRUBY-488: Kernel#dup, Kernel#clone and initialize_copy should obey MRI protocol
    
    Patch by Marcin
    
    Nice...
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2864 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 726ed07a049d0bf23d1d5257e54c710a388ffef4
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sun Jan 28 14:51:14 2007 +0000

    A few fixes for ActionPack, make KCODE handling unified, UTF8 shouldnt be default KCODE, and make setting of $KCODE and $-K actually have effect on kcode handling
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2861 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c9db4cbbcca01aa65287532b82330e37ff81173
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 28 03:44:22 2007 +0000

    Big set of changes for marshalling bug JRUBY-472; getting closer to having things sorted out. One known failure in "ant
    test" is due to our modules defining methods on a singleton class, which appears to be incorrect and harder to fix. I'm
    on it though.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2857 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5c0789044de8703f41bdf83f29552ba29ad048f6
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 27 17:31:22 2007 +0000

    JRUBY-484: Reverse Iter Call relationship in AST and also pass block via Java frame versus maintaining blocks in TC
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2851 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c02e482e63400582e1dfed203f09fab54eefbf81
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sun Jan 21 11:06:10 2007 +0000

    First round of changes for JRUBY-468. Added KCode enum, eliminated Split class, starting to get KCode used where it should be.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2804 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a8a322852ea4c8e76b32a83e603abe70578215bc
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Jan 20 16:11:07 2007 +0000

    Fix Marshal loading of Regexps
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2798 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b390103c285ce373130c474193f69b87f98fb013
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Jan 9 01:04:33 2007 +0000

    Damn the torpedos...full steam ahead! Committing fixes for JRUBY-408 to get them out in the wild. There are remaining fixes to be made, but ant test passes, gems install, rails starts, handles requests, and generates.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2700 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 32e3222d3defac9ee5f76c3651f4699f62271215
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Sat Dec 30 22:00:22 2006 +0000

    merging refactored method stuff plus fast/simple invocation changes to trunk
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2623 961051c9-f516-0410-bf72-c9f7e237a7b7

commit be97fd873dd310ba4324dc0c91d19b112ab3eebe
Author: Ola Bini <ola.bini@gmail.com>
Date:   Tue Nov 28 10:43:54 2006 +0000

    Make invalid regexps blow up at definition time, JRUBY-283 and JRUBY-200
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2508 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a99c8643e2996a04338dcb2ea5ad169c29e5f798
Author: Ola Bini <ola.bini@gmail.com>
Date:   Sat Nov 25 16:59:09 2006 +0000

    Fixed JRUBY-290, and also added support for lang parameter to regexps in EvaluationState
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2474 961051c9-f516-0410-bf72-c9f7e237a7b7

commit d447fff7edd09496fe165bc46e1753251d488ff3
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Fri Sep 29 23:39:21 2006 +0000

    JRUBY-41: add UNIX_LINES flag to regexp creation to allow . to match \r
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2255 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 524049357e360ba81a21756f54071c67d3796180
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Sep 7 01:40:03 2006 +0000

    merging headius to trunk
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2232 961051c9-f516-0410-bf72-c9f7e237a7b7

commit df79e189dc656e46818ece335243ea78a92be4d3
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Aug 15 01:48:11 2006 +0000

    JRUBY-78: Regexp.quote not quoting all it should (by Miguel) [backslashes rest of regexps special chars]
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2198 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ccaba8b36154afea86c2482886e84c7df5ddad99
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Jul 20 00:44:32 2006 +0000

    Fix JRUBY-32: Rubicon string test "FooBar"[/([A-Z]..)([A-Z]..)/, -1] fails (patch by Miguel Covarrubias)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2132 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 41a9baded6a5a018b3e0e89cbecf7cdfafe6af6b
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Jul 7 00:47:31 2006 +0000

    Support Regexp.union + inspect fix on options (patch by Nick Sieger)
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2106 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 6b1e8af9f0a89806104655deda67a9caf7401a36
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Apr 30 14:59:25 2006 +0000

    - Make Regexp nodes pattern compiling invariant
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2025 961051c9-f516-0410-bf72-c9f7e237a7b7

commit f03e5dc81769f463c456e2268d0bb08c108684f8
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Apr 28 02:24:46 2006 +0000

    - Integer should import Precision NOT Enumerable
    - "".gsub(/\n/, "\n") was returning "\n"
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2021 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 21d377548a641852efbd1889574ea94093c5be6c
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Apr 26 01:49:35 2006 +0000

    Consolidate quote and escapeSpecialChars
    Add some more tests to better test special char escaping
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2017 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8e6d120db52e9abcf7f988059679006ab73c2638
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Apr 23 16:29:03 2006 +0000

    - Invalid Regexps should throw argument error versus crashing
    - String functions sub, gsub, sub!, gsub!, scan should all escape regexp
      special chars when pattern argument is a string
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2014 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a14245bc4dfb62189e0f770f1a6bd53ce2716131
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Apr 23 14:34:30 2006 +0000

    - Regexp.inspect was adding extra '\\'
    - Module.attr_accessors were not throwing ArgumentExceptions with args
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2013 961051c9-f516-0410-bf72-c9f7e237a7b7

commit dbc75f5775b42f401554a0465098c530e42532d6
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Apr 22 22:54:21 2006 +0000

    - to_s/inspect should return IRubyObject (inspect in object by default calls
      a method which may not actually return a string -- kaboom)
    - MatchData.inspect should return #<MatchData:0x14ae2c1> not to_s
    - Remove unused import
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2010 961051c9-f516-0410-bf72-c9f7e237a7b7

commit acaedb438064c34d587644e2a0b795719112f4b7
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Apr 20 02:54:04 2006 +0000

    Most dubious fix of the night (I know regexps do not die on these in C Ruby, and I can find no positive test case...so I just fail them)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@2000 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 79e935db5c7a68676c9c113d21a3544014842401
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Tue Apr 18 02:14:38 2006 +0000

    More RoR fixes:
    - Made Regexp.=== accept Symbol as valid argument
    - Added Object.remove_instance_variable
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1992 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 9f2efc63a858fa0507245b207025eab027840a04
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Apr 9 20:58:31 2006 +0000

    Make RubyString use a StringBuffer instead of a String as its internal representation.  This change makes one test case go from 262 s to 0.7s.  Various other function fixes thrown in (with quite a few new unit tests) and some conversion to make more mutable functions use StringBuffer APIs more.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1974 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4d62d6f77d06ba34dda2ae56b8598e93f8ae39ad
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Tue Feb 14 17:17:56 2006 +0000

    fixing regexp problems that interfered with XML parsing, added a test based on DCorbin's xml snippit
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1881 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1d43870a42678f709851fcd9349d32a5f5be0dca
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Feb 2 19:51:50 2006 +0000

    merging cnutter_work1 to HEAD
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1869 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0720af0d1c1dcd614847765cb02d985e170a3556
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Jan 7 01:43:43 2006 +0000

    backref were broken for "".match(/(blah)/)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1853 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 278a8ee09c9c4b51d7c2a31d4ce273e9c79b8056
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Fri Dec 23 16:23:18 2005 +0000

    More work towards Rails support.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1848 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 197e05b1741004df85604bb2b04323c8e36a7e91
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Wed Nov 23 13:20:29 2005 +0000

    Added 'very fake' fcntl, and bit more Socket support.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1833 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4ede4bfb0b4fcc29ce09b82da5f1164b5894d258
Author: Charles Oliver Nutter <headius@headius.com>
Date:   Thu Nov 10 15:09:14 2005 +0000

    TC method refactoring, renaming, inlining of TC-related IRuby methods
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1825 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4dfdacd80c56018084c618f3bbab7b542653d95e
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Sat Oct 8 13:07:06 2005 +0000

    Introduced IRuby interface for Ruby runtime object.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1798 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ca6b16e996ea9af83ce593594b9c69b9364a9924
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Aug 28 13:29:33 2005 +0000

    Kill RubyClasses (core class/modules now initialized in Ruby)
    Store all top-level classes as constants within Object (fixes things like Object.constants) instead of second datastore
    Always load all core classes (remove lazy loading)
    Convenience function RubyModule#getClass added
    Convenience function Ruby#getObject added
    JavaObject and JavaArray are now Java::JavaObject and Java::JavaArray to be consistent
    classes defined under another class/module are now defined in the parents creation routine
    Removed some masking warnings
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1739 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0db25dd3ae06c744963d9b04bf3465fa3673f030
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Thu Jun 16 14:54:07 2005 +0000

    Move abstract stack users a few steps closer java.util.Stack contract
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1711 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 453da332b22d40c4fdbee2a3095b89cccf44c353
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed May 11 17:17:52 2005 +0000

    Allow split to work with zero-width positive lookahead regexps
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1693 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ce499391e2f2c5a930742ce82fcbdf0d3a30270d
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Mar 13 00:20:16 2005 +0000

    Support hex values in regexp (patch by David Corbin)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1616 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4a1797e23407c0d72fcc18eed393f2aed9ee2683
Author: David Corbin <dcorbin@users.sourceforge.net>
Date:   Sat Feb 5 20:54:49 2005 +0000

    Fixed so embedded comments get stripped out.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1595 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 7a83c48af56081c1c2132111d535f28d10cf3afb
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Fri Dec 31 20:55:52 2004 +0000

    Update license to GPL/LGPL/CPL
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1574 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4651602f151202bd6b8f35b18dca7448260ff5a2
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Wed Dec 22 14:49:31 2004 +0000

    fix regexp bug ("" =~ /^$/)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1530 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 49aa6e52e2393f8c17a3c126aed59b8fd08b68aa
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Wed Dec 22 13:13:24 2004 +0000

    fix class clone bug
    fix freeze/taint bug for cloned/dup'd objects
    add test cases
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1526 961051c9-f516-0410-bf72-c9f7e237a7b7

commit ae3178fbb3656e01c3d379a6255e1af956725271
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Sat Dec 18 12:32:37 2004 +0000

    Created IO meta class.
    Fixed bugs in IO#initialize, IO#foreach and IO#readlines.
    Fixed Fixnum#[] bug (it doesn't accept classes with a "to_int" method yet!).
    Fixed multiline regexp bug.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1500 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 40383241ec93bfe226df70f8338e54bf9255140f
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Wed Dec 15 23:45:14 2004 +0000

    - Simplified method definition for builtin classes.
    - Added metaclass support for builtin classes.
    - Added ruby 1.8 allocate support.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1489 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 0e219b9865b9d95b287ff161c83df5434039f9b1
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Sun Dec 12 23:41:29 2004 +0000

    - Replace IRubyErrorHandler with RubyWarnings and SyntaxException.
    - Add deprecated warning to Object#type method.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1481 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8081fdc23459ab3e7b62155a53b7f18b561f93c1
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Dec 12 14:55:16 2004 +0000

    removes type parameter from CallbackFactory.getXXXMethod()
    and removes CallType from AbstractCallback and ReflectionCallback
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1476 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 870e1da9b41bfdbae259e1fc5f18fc8b76686998
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Dec 12 09:25:42 2004 +0000

    removes the instance variable runtime in RubyObject
    reintroduces the variable in RubyNil, RubyBoolean, and RubyClass
    delegates all calls to Fixnum,Array,Boolean,String,ArgumentError,IndexError and TypeError.newXXX to Ruby
    fixes all imports
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1469 961051c9-f516-0410-bf72-c9f7e237a7b7

commit de4c49d21f91fafaad36890ce5108ebf5c0404e8
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Sun Nov 28 21:13:39 2004 +0000

    - Add something like the RegExp patch from David Corbin to implement to_s() and fix a potential ArrayOutOfBoundsException.
    - Fix eclipse build.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1433 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c15ab526440e25745b45a2ab3aaab1b5a7334d1f
Author: Stefan Matthias Aust <sma@3plus4.de>
Date:   Sun Nov 28 14:54:57 2004 +0000

    code cleanup
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1428 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 8c8e6cf8e404c8f789d25179e8943a6fea862c45
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Sun Nov 21 22:24:29 2004 +0000

    Pass rubicon Regexp tests.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1424 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 2363f341747cdb1f08d95d5a783bcf90e74f65ac
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Sat Nov 20 20:50:08 2004 +0000

    Remove IRegexpAdapter and use Java 1.4 Regexp by default.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1412 961051c9-f516-0410-bf72-c9f7e237a7b7

commit b1562832239a5e5d73b1ee98dade51601e343257
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Nov 16 20:30:04 2004 +0000

    Rename references of org.jruby.Ruby from ruby to runtime.
    Remove unused methods from the IRubyErrorHandler interface.
    Add "same" method to RubyObject to fix "equal?"
    Fix JavaObject cache.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1408 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c3988bcedc9973ff7f8c24ac6423ecb89f3ada35
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Wed Aug 25 03:00:14 2004 +0000

    Fix regex/string rubicon tests
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1327 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 83ca1988efc1e67d360010f573b77a83d9d9bf03
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat May 29 23:26:55 2004 +0000

    Messy Commit: 1. Module refactoring (fix bad unit tests) 2. String additions (casecmp, lstring{,!}, rstring{,!}) 3. Allow equal to return nil when needed. 4. testFrozen consolidation
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1309 961051c9-f516-0410-bf72-c9f7e237a7b7

commit a16b4a3596853f2153bfe0df0a8cbe54382d5d58
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Sat Feb 28 23:00:58 2004 +0000

    Removed a lot of old IndexedCallback stuff.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1254 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 4e8afef0dba3b66a390c9ba70b997174b975fc0e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sun Feb 15 16:31:46 2004 +0000

    RubyString rubicon fixups
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1239 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 1c602493a83e2050f401fa6925ec7e9269b45e4e
Author: Thomas Enebo <tom.enebo@gmail.com>
Date:   Sat Feb 14 01:18:46 2004 +0000

    Removed all XML generation from source (getting rid of all indexed callback consumers except Object which uses a CVS committed Definition class). Fixed all numerical derived classes so that: 1. They all use the same equal/eql logic.  2. Removed all compariable methods that are already inherited. 3. Changed method signatures that want RubyNumeric to be RubyNumeric (versus IRubyObject)
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1237 961051c9-f516-0410-bf72-c9f7e237a7b7

commit cc9a5c1d90daada3901d35b5853de1cdb438d53d
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Mon Nov 11 21:24:30 2002 +0000

    Refactoring, special local vars.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1099 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 3960022166de2c8f6f0d7f699598aa52b9dbb999
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Mon Oct 21 14:41:32 2002 +0000

    Dropped support for $=, which was broken and deprecated.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@1007 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 5172705a500686110cdd4614b59f73f0fac1aab0
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Fri Oct 11 20:39:01 2002 +0000

    Definition-ified Regexp.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@970 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 06f34f3a6e4941994e00090d1365045e229680be
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Sat Sep 21 23:05:19 2002 +0000

    - Some MetaClass refactorizations,
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@881 961051c9-f516-0410-bf72-c9f7e237a7b7

commit 839de5dc5ea6ec9b3608a998c7c727bc12f50218
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Mon Sep 16 14:08:45 2002 +0000

    - remove Ruby#getGlobalVar and Ruby#setGlobalVar
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@835 961051c9-f516-0410-bf72-c9f7e237a7b7

commit e99afd11d8db75f685ae3c24e84d889751a1dc2f
Author: Anders Bengtsson <ndrsbngtssn@yahoo.se>
Date:   Thu Sep 12 13:43:33 2002 +0000

    Various cleanups.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@806 961051c9-f516-0410-bf72-c9f7e237a7b7

commit c77b91f42c4f3810140d44cbe603248a1d52b7ee
Author: Jan Arne Petersen <jpetersen@uni-bonn.de>
Date:   Tue Sep 10 15:18:12 2002 +0000

    - restructure of the code tree.
    
    
    git-svn-id: http://svn.codehaus.org/jruby/trunk/jruby@782 961051c9-f516-0410-bf72-c9f7e237a7b7
